function q(e){throw e}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){var i=[],n=e.document,a=i.slice,s=i.concat,o=i.push,r=i.indexOf,l={},c=l.toString,d=l.hasOwnProperty,h={},u="2.2.4",p=function(e,t){return new p.fn.init(e,t)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,g=/^-ms-/,m=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};function b(e){var t=!!e&&"length"in e&&e.length,i=p.type(e);return"function"!==i&&!p.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}p.fn=p.prototype={jquery:u,constructor:p,selector:"",length:0,toArray:function(){return a.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:a.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return p.each(this,e)},map:function(e){return this.pushStack(p.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},p.extend=p.fn.extend=function(){var e,t,i,n,a,s,o=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[r]||{},r++),"object"==typeof o||p.isFunction(o)||(o={}),r===l&&(o=this,r--);l>r;r++)if(null!=(e=arguments[r]))for(t in e)i=o[t],o!==(n=e[t])&&(c&&n&&(p.isPlainObject(n)||(a=p.isArray(n)))?(a?(a=!1,s=i&&p.isArray(i)?i:[]):s=i&&p.isPlainObject(i)?i:{},o[t]=p.extend(c,s,n)):void 0!==n&&(o[t]=n));return o},p.extend({expando:"jQuery"+(u+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===p.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!p.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==p.type(e)||e.nodeType||p.isWindow(e))return!1;if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||d.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;(e=p.trim(e))&&(1===e.indexOf("use strict")?((t=n.createElement("script")).text=e,n.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(g,"ms-").replace(m,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(b(e))for(i=e.length;i>n&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(f,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(b(Object(e))?p.merge(i,"string"==typeof e?[e]:e):o.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;i>n;n++)e[a++]=t[n];return e.length=a,e},grep:function(e,t,i){for(var n=[],a=0,s=e.length,o=!i;s>a;a++)!t(e[a],a)!==o&&n.push(e[a]);return n},map:function(e,t,i){var n,a,o=0,r=[];if(b(e))for(n=e.length;n>o;o++)null!=(a=t(e[o],o,i))&&r.push(a);else for(o in e)null!=(a=t(e[o],o,i))&&r.push(a);return s.apply([],r)},guid:1,proxy:function(e,t){var i,n,s;return"string"==typeof t&&(i=e[t],t=e,e=i),p.isFunction(e)?(n=a.call(arguments,2),s=function(){return e.apply(t||this,n.concat(a.call(arguments)))},s.guid=e.guid=e.guid||p.guid++,s):void 0},now:Date.now,support:h}),"function"==typeof Symbol&&(p.fn[Symbol.iterator]=i[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var x=function(e){var t,i,n,a,s,o,r,l,c,d,h,u,p,f,g,m,v,b,x,y="sizzle"+1*new Date,w=e.document,k=0,S=0,C=se(),_=se(),T=se(),A=function(e,t){return e===t&&(h=!0),0},P=1<<31,D={}.hasOwnProperty,I=[],E=I.pop,L=I.push,M=I.push,O=I.slice,N=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+H+"*("+F+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+H+"*\\]",B=":("+F+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",z=new RegExp(H+"+","g"),W=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),Y=new RegExp("^"+H+"*,"+H+"*"),X=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),$=new RegExp("="+H+"*([^\\]'\"]*?)"+H+"*\\]","g"),V=new RegExp(B),U=new RegExp("^"+F+"$"),q={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+H+"?|("+H+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=function(){u()};try{M.apply(I=O.call(w.childNodes),w.childNodes),I[w.childNodes.length].nodeType}catch(e){M={apply:I.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function ae(e,t,n,a){var s,r,c,d,h,f,v,b,k=t&&t.ownerDocument,S=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return n;if(!a&&((t?t.ownerDocument||t:w)!==p&&u(t),t=t||p,g)){if(11!==S&&(f=J.exec(e)))if(s=f[1]){if(9===S){if(!(c=t.getElementById(s)))return n;if(c.id===s)return n.push(c),n}else if(k&&(c=k.getElementById(s))&&x(t,c)&&c.id===s)return n.push(c),n}else{if(f[2])return M.apply(n,t.getElementsByTagName(e)),n;if((s=f[3])&&i.getElementsByClassName&&t.getElementsByClassName)return M.apply(n,t.getElementsByClassName(s)),n}if(i.qsa&&!T[e+" "]&&(!m||!m.test(e))){if(1!==S)k=t,b=e;else if("object"!==t.nodeName.toLowerCase()){for((d=t.getAttribute("id"))?d=d.replace(ee,"\\$&"):t.setAttribute("id",d=y),r=(v=o(e)).length,h=U.test(d)?"#"+d:"[id='"+d+"']";r--;)v[r]=h+" "+ge(v[r]);b=v.join(","),k=Q.test(e)&&pe(t.parentNode)||t}if(b)try{return M.apply(n,k.querySelectorAll(b)),n}catch(e){}finally{d===y&&t.removeAttribute("id")}}}return l(e.replace(W,"$1"),t,n,a)}function se(){var e=[];return function t(i,a){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=a}}function oe(e){return e[y]=!0,e}function re(e){var t=p.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var i=e.split("|"),a=i.length;a--;)n.attrHandle[i[a]]=t}function ce(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||P)-(~e.sourceIndex||P);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function ue(e){return oe((function(t){return t=+t,oe((function(i,n){for(var a,s=e([],i.length,t),o=s.length;o--;)i[a=s[o]]&&(i[a]=!(n[a]=i[a]))}))}))}function pe(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=ae.support={},s=ae.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},u=ae.setDocument=function(e){var t,a,o=e?e.ownerDocument||e:w;return o!==p&&9===o.nodeType&&o.documentElement?(f=(p=o).documentElement,g=!s(p),(a=p.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",ne,!1):a.attachEvent&&a.attachEvent("onunload",ne)),i.attributes=re((function(e){return e.className="i",!e.getAttribute("className")})),i.getElementsByTagName=re((function(e){return e.appendChild(p.createComment("")),!e.getElementsByTagName("*").length})),i.getElementsByClassName=K.test(p.getElementsByClassName),i.getById=re((function(e){return f.appendChild(e).id=y,!p.getElementsByName||!p.getElementsByName(y).length})),i.getById?(n.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var i=t.getElementById(e);return i?[i]:[]}},n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],a=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[a++];)1===i.nodeType&&n.push(i);return n}return s},n.find.CLASS=i.getElementsByClassName&&function(e,t){return void 0!==t.getElementsByClassName&&g?t.getElementsByClassName(e):void 0},v=[],m=[],(i.qsa=K.test(p.querySelectorAll))&&(re((function(e){f.appendChild(e).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+H+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+H+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+y+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+y+"+*").length||m.push(".#.+[+~]")})),re((function(e){var t=p.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+H+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(i.matchesSelector=K.test(b=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&re((function(e){i.disconnectedMatch=b.call(e,"div"),b.call(e,"[s!='']:x"),v.push("!=",B)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=K.test(f.compareDocumentPosition),x=t||K.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return h=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===p||e.ownerDocument===w&&x(w,e)?-1:t===p||t.ownerDocument===w&&x(w,t)?1:d?N(d,e)-N(d,t):0:4&n?-1:1)}:function(e,t){if(e===t)return h=!0,0;var i,n=0,a=e.parentNode,s=t.parentNode,o=[e],r=[t];if(!a||!s)return e===p?-1:t===p?1:a?-1:s?1:d?N(d,e)-N(d,t):0;if(a===s)return ce(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)r.unshift(i);for(;o[n]===r[n];)n++;return n?ce(o[n],r[n]):o[n]===w?-1:r[n]===w?1:0},p):p},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&u(e),t=t.replace($,"='$1']"),i.matchesSelector&&g&&!T[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var n=b.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ae(t,p,null,[e]).length>0},ae.contains=function(e,t){return(e.ownerDocument||e)!==p&&u(e),x(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==p&&u(e);var a=n.attrHandle[t.toLowerCase()],s=a&&D.call(n.attrHandle,t.toLowerCase())?a(e,t,!g):void 0;return void 0!==s?s:i.attributes||!g?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,n=[],a=0,s=0;if(h=!i.detectDuplicates,d=!i.sortStable&&e.slice(0),e.sort(A),h){for(;t=e[s++];)t===e[s]&&(a=n.push(s));for(;a--;)e.splice(n[a],1)}return d=null,e},a=ae.getText=function(e){var t,i="",n=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[n++];)i+=a(t);return i},n=ae.selectors={cacheLength:50,createPseudo:oe,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&V.test(i)&&(t=o(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(n){var a=ae.attr(n,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a.replace(z," ")+" ").indexOf(i)>-1:"|="===t&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,a){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),r="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var c,d,h,u,p,f,g=s!==o?"nextSibling":"previousSibling",m=t.parentNode,v=r&&t.nodeName.toLowerCase(),b=!l&&!r,x=!1;if(m){if(s){for(;g;){for(u=t;u=u[g];)if(r?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&b){for(x=(p=(c=(d=(h=(u=m)[y]||(u[y]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]||[])[0]===k&&c[1])&&c[2],u=p&&m.childNodes[p];u=++p&&u&&u[g]||(x=p=0)||f.pop();)if(1===u.nodeType&&++x&&u===t){d[e]=[k,p,x];break}}else if(b&&(x=p=(c=(d=(h=(u=t)[y]||(u[y]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]||[])[0]===k&&c[1]),!1===x)for(;(u=++p&&u&&u[g]||(x=p=0)||f.pop())&&((r?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++x||(b&&((d=(h=u[y]||(u[y]={}))[u.uniqueID]||(h[u.uniqueID]={}))[e]=[k,x]),u!==t)););return(x-=a)===n||x%n==0&&x/n>=0}}},PSEUDO:function(e,t){var i,a=n.pseudos[e]||n.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return a[y]?a(t):a.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?oe((function(e,i){for(var n,s=a(e,t),o=s.length;o--;)e[n=N(e,s[o])]=!(i[n]=s[o])})):function(e){return a(e,0,i)}):a}},pseudos:{not:oe((function(e){var t=[],i=[],n=r(e.replace(W,"$1"));return n[y]?oe((function(e,t,i,a){for(var s,o=n(e,null,a,[]),r=e.length;r--;)(s=o[r])&&(e[r]=!(t[r]=s))})):function(e,a,s){return t[0]=e,n(t,null,s,i),t[0]=null,!i.pop()}})),has:oe((function(e){return function(t){return ae(e,t).length>0}})),contains:oe((function(e){return e=e.replace(te,ie),function(t){return(t.textContent||t.innerText||a(t)).indexOf(e)>-1}})),lang:oe((function(e){return U.test(e||"")||ae.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ue((function(){return[0]})),last:ue((function(e,t){return[t-1]})),eq:ue((function(e,t,i){return[0>i?i+t:i]})),even:ue((function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e})),odd:ue((function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e})),lt:ue((function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e})),gt:ue((function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e}))}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=he(t);function fe(){}function ge(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function me(e,t,i){var n=t.dir,a=i&&"parentNode"===n,s=S++;return t.first?function(t,i,s){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,s)}:function(t,i,o){var r,l,c,d=[k,s];if(o){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,o))return!0}else for(;t=t[n];)if(1===t.nodeType||a){if((r=(l=(c=t[y]||(t[y]={}))[t.uniqueID]||(c[t.uniqueID]={}))[n])&&r[0]===k&&r[1]===s)return d[2]=r[2];if(l[n]=d,d[2]=e(t,i,o))return!0}}}function ve(e){return e.length>1?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function be(e,t,i,n,a){for(var s,o=[],r=0,l=e.length,c=null!=t;l>r;r++)(s=e[r])&&(i&&!i(s,n,a)||(o.push(s),c&&t.push(r)));return o}function xe(e,t,i,n,a,s){return n&&!n[y]&&(n=xe(n)),a&&!a[y]&&(a=xe(a,s)),oe((function(s,o,r,l){var c,d,h,u=[],p=[],f=o.length,g=s||function(e,t,i){for(var n=0,a=t.length;a>n;n++)ae(e,t[n],i);return i}(t||"*",r.nodeType?[r]:r,[]),m=!e||!s&&t?g:be(g,u,e,r,l),v=i?a||(s?e:f||n)?[]:o:m;if(i&&i(m,v,r,l),n)for(c=be(v,p),n(c,[],r,l),d=c.length;d--;)(h=c[d])&&(v[p[d]]=!(m[p[d]]=h));if(s){if(a||e){if(a){for(c=[],d=v.length;d--;)(h=v[d])&&c.push(m[d]=h);a(null,v=[],c,l)}for(d=v.length;d--;)(h=v[d])&&(c=a?N(s,h):u[d])>-1&&(s[c]=!(o[c]=h))}}else v=be(v===o?v.splice(f,v.length):v),a?a(null,o,v,l):M.apply(o,v)}))}function ye(e){for(var t,i,a,s=e.length,o=n.relative[e[0].type],r=o||n.relative[" "],l=o?1:0,d=me((function(e){return e===t}),r,!0),h=me((function(e){return N(t,e)>-1}),r,!0),u=[function(e,i,n){var a=!o&&(n||i!==c)||((t=i).nodeType?d(e,i,n):h(e,i,n));return t=null,a}];s>l;l++)if(i=n.relative[e[l].type])u=[me(ve(u),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[y]){for(a=++l;s>a&&!n.relative[e[a].type];a++);return xe(l>1&&ve(u),l>1&&ge(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(W,"$1"),i,a>l&&ye(e.slice(l,a)),s>a&&ye(e=e.slice(a)),s>a&&ge(e))}u.push(i)}return ve(u)}function we(e,t){var i=t.length>0,a=e.length>0,s=function(s,o,r,l,d){var h,f,m,v=0,b="0",x=s&&[],y=[],w=c,S=s||a&&n.find.TAG("*",d),C=k+=null==w?1:Math.random()||.1,_=S.length;for(d&&(c=o===p||o||d);b!==_&&null!=(h=S[b]);b++){if(a&&h){for(f=0,o||h.ownerDocument===p||(u(h),r=!g);m=e[f++];)if(m(h,o||p,r)){l.push(h);break}d&&(k=C)}i&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,i&&b!==v){for(f=0;m=t[f++];)m(x,y,o,r);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=E.call(l));y=be(y)}M.apply(l,y),d&&!s&&y.length>0&&v+t.length>1&&ae.uniqueSort(l)}return d&&(k=C,c=w),x};return i?oe(s):s}return fe.prototype=n.filters=n.pseudos,n.setFilters=new fe,o=ae.tokenize=function(e,t){var i,a,s,o,r,l,c,d=_[e+" "];if(d)return t?0:d.slice(0);for(r=e,l=[],c=n.preFilter;r;){for(o in i&&!(a=Y.exec(r))||(a&&(r=r.slice(a[0].length)||r),l.push(s=[])),i=!1,(a=X.exec(r))&&(i=a.shift(),s.push({value:i,type:a[0].replace(W," ")}),r=r.slice(i.length)),n.filter)!(a=q[o].exec(r))||c[o]&&!(a=c[o](a))||(i=a.shift(),s.push({value:i,type:o,matches:a}),r=r.slice(i.length));if(!i)break}return t?r.length:r?ae.error(e):_(e,l).slice(0)},r=ae.compile=function(e,t){var i,n=[],a=[],s=T[e+" "];if(!s){for(t||(t=o(e)),i=t.length;i--;)(s=ye(t[i]))[y]?n.push(s):a.push(s);(s=T(e,we(a,n))).selector=e}return s},l=ae.select=function(e,t,a,s){var l,c,d,h,u,p="function"==typeof e&&e,f=!s&&o(e=p.selector||e);if(a=a||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(d=c[0]).type&&i.getById&&9===t.nodeType&&g&&n.relative[c[1].type]){if(!(t=(n.find.ID(d.matches[0].replace(te,ie),t)||[])[0]))return a;p&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(l=q.needsContext.test(e)?0:c.length;l--&&(d=c[l],!n.relative[h=d.type]);)if((u=n.find[h])&&(s=u(d.matches[0].replace(te,ie),Q.test(c[0].type)&&pe(t.parentNode)||t))){if(c.splice(l,1),!(e=s.length&&ge(c)))return M.apply(a,s),a;break}}return(p||r(e,f))(s,t,!g,a,!t||Q.test(e)&&pe(t.parentNode)||t),a},i.sortStable=y.split("").sort(A).join("")===y,i.detectDuplicates=!!h,u(),i.sortDetached=re((function(e){return 1&e.compareDocumentPosition(p.createElement("div"))})),re((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||le("type|href|height|width",(function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),i.attributes&&re((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||le("value",(function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue})),re((function(e){return null==e.getAttribute("disabled")}))||le(R,(function(e,t,i){var n;return i?void 0:!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null})),ae}(e);p.find=x,p.expr=x.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=x.uniqueSort,p.text=x.getText,p.isXMLDoc=x.isXML,p.contains=x.contains;var y=function(e,t,i){for(var n=[],a=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&p(e).is(i))break;n.push(e)}return n},w=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},k=p.expr.match.needsContext,S=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,C=/^.[^:#\[\.,]*$/;function _(e,t,i){if(p.isFunction(t))return p.grep(e,(function(e,n){return!!t.call(e,n,e)!==i}));if(t.nodeType)return p.grep(e,(function(e){return e===t!==i}));if("string"==typeof t){if(C.test(t))return p.filter(t,e,i);t=p.filter(t,e)}return p.grep(e,(function(e){return r.call(t,e)>-1!==i}))}p.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?p.find.matchesSelector(n,e)?[n]:[]:p.find.matches(e,p.grep(t,(function(e){return 1===e.nodeType})))},p.fn.extend({find:function(e){var t,i=this.length,n=[],a=this;if("string"!=typeof e)return this.pushStack(p(e).filter((function(){for(t=0;i>t;t++)if(p.contains(a[t],this))return!0})));for(t=0;i>t;t++)p.find(e,a[t],n);return(n=this.pushStack(i>1?p.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&k.test(e)?p(e):e||[],!1).length}});var T,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,P=p.fn.init=function(e,t,i){var a,s;if(!e)return this;if(i=i||T,"string"==typeof e){if(!(a="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e))||!a[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:n,!0)),S.test(a[1])&&p.isPlainObject(t))for(a in t)p.isFunction(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}return(s=n.getElementById(a[2]))&&s.parentNode&&(this.length=1,this[0]=s),this.context=n,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?void 0!==i.ready?i.ready(e):e(p):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};P.prototype=p.fn,T=p(n);var D=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function E(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}p.fn.extend({has:function(e){var t=p(e,this),i=t.length;return this.filter((function(){for(var e=0;i>e;e++)if(p.contains(this,t[e]))return!0}))},closest:function(e,t){for(var i,n=0,a=this.length,s=[],o=k.test(e)||"string"!=typeof e?p(e,t||this.context):0;a>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&p.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(s.length>1?p.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?r.call(p(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return y(e,"parentNode")},parentsUntil:function(e,t,i){return y(e,"parentNode",i)},next:function(e){return E(e,"nextSibling")},prev:function(e){return E(e,"previousSibling")},nextAll:function(e){return y(e,"nextSibling")},prevAll:function(e){return y(e,"previousSibling")},nextUntil:function(e,t,i){return y(e,"nextSibling",i)},prevUntil:function(e,t,i){return y(e,"previousSibling",i)},siblings:function(e){return w((e.parentNode||{}).firstChild,e)},children:function(e){return w(e.firstChild)},contents:function(e){return e.contentDocument||p.merge([],e.childNodes)}},(function(e,t){p.fn[e]=function(i,n){var a=p.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=p.filter(n,a)),this.length>1&&(I[e]||p.uniqueSort(a),D.test(e)&&a.reverse()),this.pushStack(a)}}));var L,M=/\S+/g;function O(){n.removeEventListener("DOMContentLoaded",O),e.removeEventListener("load",O),p.ready()}p.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return p.each(e.match(M)||[],(function(e,i){t[i]=!0})),t}(e):p.extend({},e);var t,i,n,a,s=[],o=[],r=-1,l=function(){for(a=e.once,n=t=!0;o.length;r=-1)for(i=o.shift();++r<s.length;)!1===s[r].apply(i[0],i[1])&&e.stopOnFalse&&(r=s.length,i=!1);e.memory||(i=!1),t=!1,a&&(s=i?[]:"")},c={add:function(){return s&&(i&&!t&&(r=s.length-1,o.push(i)),function t(i){p.each(i,(function(i,n){p.isFunction(n)?e.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!==p.type(n)&&t(n)}))}(arguments),i&&!t&&l()),this},remove:function(){return p.each(arguments,(function(e,t){for(var i;(i=p.inArray(t,s,i))>-1;)s.splice(i,1),r>=i&&r--})),this},has:function(e){return e?p.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return a=o=[],s=i="",this},disabled:function(){return!s},lock:function(){return a=o=[],i||(s=i=""),this},locked:function(){return!!a},fireWith:function(e,i){return a||(i=[e,(i=i||[]).slice?i.slice():i],o.push(i),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred((function(i){p.each(t,(function(t,s){var o=p.isFunction(e[t])&&e[t];a[s[1]]((function(){var e=o&&o.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[s[0]+"With"](this===n?i.promise():this,o?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?p.extend(e,n):n}},a={};return n.pipe=n.then,p.each(t,(function(e,s){var o=s[2],r=s[3];n[s[1]]=o.add,r&&o.add((function(){i=r}),t[1^e][2].disable,t[2][2].lock),a[s[0]]=function(){return a[s[0]+"With"](this===a?n:this,arguments),this},a[s[0]+"With"]=o.fireWith})),n.promise(a),e&&e.call(a,a),a},when:function(e){var t,i,n,s=0,o=a.call(arguments),r=o.length,l=1!==r||e&&p.isFunction(e.promise)?r:0,c=1===l?e:p.Deferred(),d=function(e,i,n){return function(s){i[e]=this,n[e]=arguments.length>1?a.call(arguments):s,n===t?c.notifyWith(i,n):--l||c.resolveWith(i,n)}};if(r>1)for(t=new Array(r),i=new Array(r),n=new Array(r);r>s;s++)o[s]&&p.isFunction(o[s].promise)?o[s].promise().progress(d(s,i,t)).done(d(s,n,o)).fail(c.reject):--l;return l||c.resolveWith(n,o),c.promise()}}),p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){(!0===e?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==e&&--p.readyWait>0||(L.resolveWith(n,[p]),p.fn.triggerHandler&&(p(n).triggerHandler("ready"),p(n).off("ready"))))}}),p.ready.promise=function(t){return L||(L=p.Deferred(),"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout(p.ready):(n.addEventListener("DOMContentLoaded",O),e.addEventListener("load",O))),L.promise(t)},p.ready.promise();var N=function(e,t,i,n,a,s,o){var r=0,l=e.length,c=null==i;if("object"===p.type(i))for(r in a=!0,i)N(e,t,r,i[r],!0,s,o);else if(void 0!==n&&(a=!0,p.isFunction(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(p(e),i)})),t))for(;l>r;r++)t(e[r],i,o?n:n.call(e[r],r,t(e[r],i)));return a?e:c?t.call(e):l?t(e[0],i):s},R=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function H(){this.expando=p.expando+H.uid++}H.uid=1,H.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!R(e))return{};var t=e[this.expando];return t||(t={},R(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,a=this.cache(e);if("string"==typeof t)a[t]=i;else for(n in t)a[n]=t[n];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?void 0!==(n=this.get(e,t))?n:this.get(e,p.camelCase(t)):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,a,s=e[this.expando];if(void 0!==s){if(void 0===t)this.register(e);else{p.isArray(t)?n=t.concat(t.map(p.camelCase)):(a=p.camelCase(t),t in s?n=[t,a]:n=(n=a)in s?[n]:n.match(M)||[]),i=n.length;for(;i--;)delete s[n[i]]}(void 0===t||p.isEmptyObject(s))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!p.isEmptyObject(t)}};var F=new H,j=new H,B=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/[A-Z]/g;function W(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(z,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:B.test(i)?p.parseJSON(i):i)}catch(e){}j.set(e,t,i)}else i=void 0;return i}p.extend({hasData:function(e){return j.hasData(e)||F.hasData(e)},data:function(e,t,i){return j.access(e,t,i)},removeData:function(e,t){j.remove(e,t)},_data:function(e,t,i){return F.access(e,t,i)},_removeData:function(e,t){F.remove(e,t)}}),p.fn.extend({data:function(e,t){var i,n,a,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(a=j.get(s),1===s.nodeType&&!F.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&(0===(n=o[i].name).indexOf("data-")&&(n=p.camelCase(n.slice(5)),W(s,n,a[n])));F.set(s,"hasDataAttrs",!0)}return a}return"object"==typeof e?this.each((function(){j.set(this,e)})):N(this,(function(t){var i,n;if(s&&void 0===t){if(void 0!==(i=j.get(s,e)||j.get(s,e.replace(z,"-$&").toLowerCase())))return i;if(n=p.camelCase(e),void 0!==(i=j.get(s,n)))return i;if(void 0!==(i=W(s,n,void 0)))return i}else n=p.camelCase(e),this.each((function(){var i=j.get(this,n);j.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&j.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){j.remove(this,e)}))}}),p.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=F.get(e,t),i&&(!n||p.isArray(i)?n=F.access(e,t,p.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=p.queue(e,t),n=i.length,a=i.shift(),s=p._queueHooks(e,t);"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete s.stop,a.call(e,(function(){p.dequeue(e,t)}),s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return F.get(e,i)||F.access(e,i,{empty:p.Callbacks("once memory").add((function(){F.remove(e,[t+"queue",i])}))})}}),p.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?p.queue(this[0],e):void 0===t?this:this.each((function(){var i=p.queue(this,e,t);p._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&p.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){p.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=p.Deferred(),s=this,o=this.length,r=function(){--n||a.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(i=F.get(s[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(r));return r(),a.promise(t)}});var Y=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=new RegExp("^(?:([+-])=|)("+Y+")([a-z%]*)$","i"),$=["Top","Right","Bottom","Left"],V=function(e,t){return e=t||e,"none"===p.css(e,"display")||!p.contains(e.ownerDocument,e)};function U(e,t,i,n){var a,s=1,o=20,r=n?function(){return n.cur()}:function(){return p.css(e,t,"")},l=r(),c=i&&i[3]||(p.cssNumber[t]?"":"px"),d=(p.cssNumber[t]||"px"!==c&&+l)&&X.exec(p.css(e,t));if(d&&d[3]!==c){c=c||d[3],i=i||[],d=+l||1;do{d/=s=s||".5",p.style(e,t,d+c)}while(s!==(s=r()/l)&&1!==s&&--o)}return i&&(d=+d||+l||0,a=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=a)),a}var q=/^(?:checkbox|radio)$/i,G=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,K={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function J(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&p.nodeName(e,t)?p.merge([e],i):i}function Q(e,t){for(var i=0,n=e.length;n>i;i++)F.set(e[i],"globalEval",!t||F.get(t[i],"globalEval"))}K.optgroup=K.option,K.tbody=K.tfoot=K.colgroup=K.caption=K.thead,K.th=K.td;var ee=/<|&#?\w+;/;function te(e,t,i,n,a){for(var s,o,r,l,c,d,h=t.createDocumentFragment(),u=[],f=0,g=e.length;g>f;f++)if((s=e[f])||0===s)if("object"===p.type(s))p.merge(u,s.nodeType?[s]:s);else if(ee.test(s)){for(o=o||h.appendChild(t.createElement("div")),r=(G.exec(s)||["",""])[1].toLowerCase(),l=K[r]||K._default,o.innerHTML=l[1]+p.htmlPrefilter(s)+l[2],d=l[0];d--;)o=o.lastChild;p.merge(u,o.childNodes),(o=h.firstChild).textContent=""}else u.push(t.createTextNode(s));for(h.textContent="",f=0;s=u[f++];)if(n&&p.inArray(s,n)>-1)a&&a.push(s);else if(c=p.contains(s.ownerDocument,s),o=J(h.appendChild(s),"script"),c&&Q(o),i)for(d=0;s=o[d++];)Z.test(s.type||"")&&i.push(s);return h}!function(){var e=n.createDocumentFragment().appendChild(n.createElement("div")),t=n.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ie=/^key/,ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;function se(){return!0}function oe(){return!1}function re(){try{return n.activeElement}catch(e){}}function le(e,t,i,n,a,s){var o,r;if("object"==typeof t){for(r in"string"!=typeof i&&(n=n||i,i=void 0),t)le(e,r,i,n,t[r],s);return e}if(null==n&&null==a?(a=i,n=i=void 0):null==a&&("string"==typeof i?(a=n,n=void 0):(a=n,n=i,i=void 0)),!1===a)a=oe;else if(!a)return e;return 1===s&&(o=a,a=function(e){return p().off(e),o.apply(this,arguments)},a.guid=o.guid||(o.guid=p.guid++)),e.each((function(){p.event.add(this,t,a,n,i)}))}p.event={global:{},add:function(e,t,i,n,a){var s,o,r,l,c,d,h,u,f,g,m,v=F.get(e);if(v)for(i.handler&&(i=(s=i).handler,a=s.selector),i.guid||(i.guid=p.guid++),(l=v.events)||(l=v.events={}),(o=v.handle)||(o=v.handle=function(t){return void 0!==p&&p.event.triggered!==t.type?p.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)f=m=(r=ae.exec(t[c])||[])[1],g=(r[2]||"").split(".").sort(),f&&(h=p.event.special[f]||{},f=(a?h.delegateType:h.bindType)||f,h=p.event.special[f]||{},d=p.extend({type:f,origType:m,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&p.expr.match.needsContext.test(a),namespace:g.join(".")},s),(u=l[f])||((u=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,n,g,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),a?u.splice(u.delegateCount++,0,d):u.push(d),p.event.global[f]=!0)},remove:function(e,t,i,n,a){var s,o,r,l,c,d,h,u,f,g,m,v=F.hasData(e)&&F.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(M)||[""]).length;c--;)if(f=m=(r=ae.exec(t[c])||[])[1],g=(r[2]||"").split(".").sort(),f){for(h=p.event.special[f]||{},u=l[f=(n?h.delegateType:h.bindType)||f]||[],r=r[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=u.length;s--;)d=u[s],!a&&m!==d.origType||i&&i.guid!==d.guid||r&&!r.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(s,1),d.selector&&u.delegateCount--,h.remove&&h.remove.call(e,d));o&&!u.length&&(h.teardown&&!1!==h.teardown.call(e,g,v.handle)||p.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)p.event.remove(e,f+t[c],i,n,!0);p.isEmptyObject(l)&&F.remove(e,"handle events")}},dispatch:function(e){e=p.event.fix(e);var t,i,n,s,o,r=[],l=a.call(arguments),c=(F.get(this,"events")||{})[e.type]||[],d=p.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,e)){for(r=p.event.handlers.call(this,e,c),t=0;(s=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(n=((p.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,l))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,a,s,o=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(n=[],i=0;r>i;i++)void 0===n[a=(s=t[i]).selector+" "]&&(n[a]=s.needsContext?p(a,this).index(l)>-1:p.find(a,this,null,[l]).length),n[a]&&n.push(s);n.length&&o.push({elem:l,handlers:n})}return r<t.length&&o.push({elem:this,handlers:t.slice(r)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,a,s,o=t.button;return null==e.pageX&&null!=t.clientX&&(a=(i=e.target.ownerDocument||n).documentElement,s=i.body,e.pageX=t.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[p.expando])return e;var t,i,a,s=e.type,o=e,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=ne.test(s)?this.mouseHooks:ie.test(s)?this.keyHooks:{}),a=r.props?this.props.concat(r.props):this.props,e=new p.Event(o),t=a.length;t--;)e[i=a[t]]=o[i];return e.target||(e.target=n),3===e.target.nodeType&&(e.target=e.target.parentNode),r.filter?r.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==re()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===re()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&p.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},p.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},p.Event=function(e,t){return this instanceof p.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?se:oe):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(e,t)},p.Event.prototype={constructor:p.Event,isDefaultPrevented:oe,isPropagationStopped:oe,isImmediatePropagationStopped:oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,a=e.handleObj;return n&&(n===this||p.contains(this,n))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}})),p.fn.extend({on:function(e,t,i,n){return le(this,e,t,i,n)},one:function(e,t,i,n){return le(this,e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,p(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=oe),this.each((function(){p.event.remove(this,e,i,t)}))}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,de=/<script|<style|<link/i,he=/checked\s*(?:[^=]|=\s*.checked.)/i,ue=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function fe(e,t){return p.nodeName(e,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ge(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function me(e){var t=ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ve(e,t){var i,n,a,s,o,r,l,c;if(1===t.nodeType){if(F.hasData(e)&&(s=F.access(e),o=F.set(t,s),c=s.events))for(a in delete o.handle,o.events={},c)for(i=0,n=c[a].length;n>i;i++)p.event.add(t,a,c[a][i]);j.hasData(e)&&(r=j.access(e),l=p.extend({},r),j.set(t,l))}}function be(e,t){var i=t.nodeName.toLowerCase();"input"===i&&q.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function xe(e,t,i,n){t=s.apply([],t);var a,o,r,l,c,d,u=0,f=e.length,g=f-1,m=t[0],v=p.isFunction(m);if(v||f>1&&"string"==typeof m&&!h.checkClone&&he.test(m))return e.each((function(a){var s=e.eq(a);v&&(t[0]=m.call(this,a,s.html())),xe(s,t,i,n)}));if(f&&(o=(a=te(t,e[0].ownerDocument,!1,e,n)).firstChild,1===a.childNodes.length&&(a=o),o||n)){for(l=(r=p.map(J(a,"script"),ge)).length;f>u;u++)c=a,u!==g&&(c=p.clone(c,!0,!0),l&&p.merge(r,J(c,"script"))),i.call(e[u],c,u);if(l)for(d=r[r.length-1].ownerDocument,p.map(r,me),u=0;l>u;u++)c=r[u],Z.test(c.type||"")&&!F.access(c,"globalEval")&&p.contains(d,c)&&(c.src?p._evalUrl&&p._evalUrl(c.src):p.globalEval(c.textContent.replace(pe,"")))}return e}function ye(e,t,i){for(var n,a=t?p.filter(t,e):e,s=0;null!=(n=a[s]);s++)i||1!==n.nodeType||p.cleanData(J(n)),n.parentNode&&(i&&p.contains(n.ownerDocument,n)&&Q(J(n,"script")),n.parentNode.removeChild(n));return e}p.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,i){var n,a,s,o,r=e.cloneNode(!0),l=p.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||p.isXMLDoc(e)))for(o=J(r),n=0,a=(s=J(e)).length;a>n;n++)be(s[n],o[n]);if(t)if(i)for(s=s||J(e),o=o||J(r),n=0,a=s.length;a>n;n++)ve(s[n],o[n]);else ve(e,r);return(o=J(r,"script")).length>0&&Q(o,!l&&J(e,"script")),r},cleanData:function(e){for(var t,i,n,a=p.event.special,s=0;void 0!==(i=e[s]);s++)if(R(i)){if(t=i[F.expando]){if(t.events)for(n in t.events)a[n]?p.event.remove(i,n):p.removeEvent(i,n,t.handle);i[F.expando]=void 0}i[j.expando]&&(i[j.expando]=void 0)}}}),p.fn.extend({domManip:xe,detach:function(e){return ye(this,e,!0)},remove:function(e){return ye(this,e)},text:function(e){return N(this,(function(e){return void 0===e?p.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return xe(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||fe(this,e).appendChild(e)}))},prepend:function(){return xe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=fe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return xe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return xe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(p.cleanData(J(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return p.clone(this,e,t)}))},html:function(e){return N(this,(function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!de.test(e)&&!K[(G.exec(e)||["",""])[1].toLowerCase()]){e=p.htmlPrefilter(e);try{for(;n>i;i++)1===(t=this[i]||{}).nodeType&&(p.cleanData(J(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return xe(this,arguments,(function(t){var i=this.parentNode;p.inArray(this,e)<0&&(p.cleanData(J(this)),i&&i.replaceChild(t,this))}),e)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){p.fn[e]=function(e){for(var i,n=[],a=p(e),s=a.length-1,r=0;s>=r;r++)i=r===s?this:this.clone(!0),p(a[r])[t](i),o.apply(n,i.get());return this.pushStack(n)}}));var we,ke={HTML:"block",BODY:"block"};function Se(e,t){var i=p(t.createElement(e)).appendTo(t.body),n=p.css(i[0],"display");return i.detach(),n}function Ce(e){var t=n,i=ke[e];return i||("none"!==(i=Se(e,t))&&i||((t=(we=(we||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),i=Se(e,t),we.detach()),ke[e]=i),i}var _e=/^margin/,Te=new RegExp("^("+Y+")(?!px)[a-z%]+$","i"),Ae=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},Pe=function(e,t,i,n){var a,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in a=i.apply(e,n||[]),t)e.style[s]=o[s];return a},De=n.documentElement;function Ie(e,t,i){var n,a,s,o,r=e.style;return""!==(o=(i=i||Ae(e))?i.getPropertyValue(t)||i[t]:void 0)&&void 0!==o||p.contains(e.ownerDocument,e)||(o=p.style(e,t)),i&&!h.pixelMarginRight()&&Te.test(o)&&_e.test(t)&&(n=r.width,a=r.minWidth,s=r.maxWidth,r.minWidth=r.maxWidth=r.width=o,o=i.width,r.width=n,r.minWidth=a,r.maxWidth=s),void 0!==o?o+"":o}function Ee(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,i,a,s,o=n.createElement("div"),r=n.createElement("div");if(r.style){function l(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",De.appendChild(o);var n=e.getComputedStyle(r);t="1%"!==n.top,s="2px"===n.marginLeft,i="4px"===n.width,r.style.marginRight="50%",a="4px"===n.marginRight,De.removeChild(o)}r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(r),p.extend(h,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==i&&l(),i},pixelMarginRight:function(){return null==i&&l(),a},reliableMarginLeft:function(){return null==i&&l(),s},reliableMarginRight:function(){var t,i=r.appendChild(n.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",De.appendChild(o),t=!parseFloat(e.getComputedStyle(i).marginRight),De.removeChild(o),r.removeChild(i),t}})}}();var Le=/^(none|table(?!-c[ea]).+)/,Me={position:"absolute",visibility:"hidden",display:"block"},Oe={letterSpacing:"0",fontWeight:"400"},Ne=["Webkit","O","Moz","ms"],Re=n.createElement("div").style;function He(e){if(e in Re)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Ne.length;i--;)if((e=Ne[i]+t)in Re)return e}function Fe(e,t,i){var n=X.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function je(e,t,i,n,a){for(var s=i===(n?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===i&&(o+=p.css(e,i+$[s],!0,a)),n?("content"===i&&(o-=p.css(e,"padding"+$[s],!0,a)),"margin"!==i&&(o-=p.css(e,"border"+$[s]+"Width",!0,a))):(o+=p.css(e,"padding"+$[s],!0,a),"padding"!==i&&(o+=p.css(e,"border"+$[s]+"Width",!0,a)));return o}function Be(e,t,i){var n=!0,a="width"===t?e.offsetWidth:e.offsetHeight,s=Ae(e),o="border-box"===p.css(e,"boxSizing",!1,s);if(0>=a||null==a){if((0>(a=Ie(e,t,s))||null==a)&&(a=e.style[t]),Te.test(a))return a;n=o&&(h.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+je(e,t,i||(o?"border":"content"),n,s)+"px"}function ze(e,t){for(var i,n,a,s=[],o=0,r=e.length;r>o;o++)(n=e[o]).style&&(s[o]=F.get(n,"olddisplay"),i=n.style.display,t?(s[o]||"none"!==i||(n.style.display=""),""===n.style.display&&V(n)&&(s[o]=F.access(n,"olddisplay",Ce(n.nodeName)))):(a=V(n),"none"===i&&a||F.set(n,"olddisplay",a?i:p.css(n,"display"))));for(o=0;r>o;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?s[o]||"":"none"));return e}function We(e,t,i,n,a){return new We.prototype.init(e,t,i,n,a)}p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ie(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,o,r=p.camelCase(t),l=e.style;return t=p.cssProps[r]||(p.cssProps[r]=He(r)||r),o=p.cssHooks[t]||p.cssHooks[r],void 0===i?o&&"get"in o&&void 0!==(a=o.get(e,!1,n))?a:l[t]:("string"===(s=typeof i)&&(a=X.exec(i))&&a[1]&&(i=U(e,t,a),s="number"),void(null!=i&&i==i&&("number"===s&&(i+=a&&a[3]||(p.cssNumber[r]?"":"px")),h.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,n))||(l[t]=i))))}},css:function(e,t,i,n){var a,s,o,r=p.camelCase(t);return t=p.cssProps[r]||(p.cssProps[r]=He(r)||r),(o=p.cssHooks[t]||p.cssHooks[r])&&"get"in o&&(a=o.get(e,!0,i)),void 0===a&&(a=Ie(e,t,n)),"normal"===a&&t in Oe&&(a=Oe[t]),""===i||i?(s=parseFloat(a),!0===i||isFinite(s)?s||0:a):a}}),p.each(["height","width"],(function(e,t){p.cssHooks[t]={get:function(e,i,n){return i?Le.test(p.css(e,"display"))&&0===e.offsetWidth?Pe(e,Me,(function(){return Be(e,t,n)})):Be(e,t,n):void 0},set:function(e,i,n){var a,s=n&&Ae(e),o=n&&je(e,t,n,"border-box"===p.css(e,"boxSizing",!1,s),s);return o&&(a=X.exec(i))&&"px"!==(a[3]||"px")&&(e.style[t]=i,i=p.css(e,t)),Fe(0,i,o)}}})),p.cssHooks.marginLeft=Ee(h.reliableMarginLeft,(function(e,t){return t?(parseFloat(Ie(e,"marginLeft"))||e.getBoundingClientRect().left-Pe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px":void 0})),p.cssHooks.marginRight=Ee(h.reliableMarginRight,(function(e,t){return t?Pe(e,{display:"inline-block"},Ie,[e,"marginRight"]):void 0})),p.each({margin:"",padding:"",border:"Width"},(function(e,t){p.cssHooks[e+t]={expand:function(i){for(var n=0,a={},s="string"==typeof i?i.split(" "):[i];4>n;n++)a[e+$[n]+t]=s[n]||s[n-2]||s[0];return a}},_e.test(e)||(p.cssHooks[e+t].set=Fe)})),p.fn.extend({css:function(e,t){return N(this,(function(e,t,i){var n,a,s={},o=0;if(p.isArray(t)){for(n=Ae(e),a=t.length;a>o;o++)s[t[o]]=p.css(e,t[o],!1,n);return s}return void 0!==i?p.style(e,t,i):p.css(e,t)}),e,t,arguments.length>1)},show:function(){return ze(this,!0)},hide:function(){return ze(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){V(this)?p(this).show():p(this).hide()}))}}),p.Tween=We,We.prototype={constructor:We,init:function(e,t,i,n,a,s){this.elem=e,this.prop=i,this.easing=a||p.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(p.cssNumber[i]?"":"px")},cur:function(){var e=We.propHooks[this.prop];return e&&e.get?e.get(this):We.propHooks._default.get(this)},run:function(e){var t,i=We.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):We.propHooks._default.set(this),this}},We.prototype.init.prototype=We.prototype,We.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=p.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[p.cssProps[e.prop]]&&!p.cssHooks[e.prop]?e.elem[e.prop]=e.now:p.style(e.elem,e.prop,e.now+e.unit)}}},We.propHooks.scrollTop=We.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},p.fx=We.prototype.init,p.fx.step={};var Ye,Xe,$e=/^(?:toggle|show|hide)$/,Ve=/queueHooks$/;function Ue(){return e.setTimeout((function(){Ye=void 0})),Ye=p.now()}function qe(e,t){var i,n=0,a={height:e};for(t=t?1:0;4>n;n+=2-t)a["margin"+(i=$[n])]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function Ge(e,t,i){for(var n,a=(Ze.tweeners[t]||[]).concat(Ze.tweeners["*"]),s=0,o=a.length;o>s;s++)if(n=a[s].call(i,t,e))return n}function Ze(e,t,i){var n,a,s=0,o=Ze.prefilters.length,r=p.Deferred().always((function(){delete l.elem})),l=function(){if(a)return!1;for(var t=Ye||Ue(),i=Math.max(0,c.startTime+c.duration-t),n=1-(i/c.duration||0),s=0,o=c.tweens.length;o>s;s++)c.tweens[s].run(n);return r.notifyWith(e,[c,n,i]),1>n&&o?i:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},i),originalProperties:t,originalOptions:i,startTime:Ye||Ue(),duration:i.duration,tweens:[],createTween:function(t,i){var n=p.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var i=0,n=t?c.tweens.length:0;if(a)return this;for(a=!0;n>i;i++)c.tweens[i].run(1);return t?(r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c,t])):r.rejectWith(e,[c,t]),this}}),d=c.props;for(function(e,t){var i,n,a,s,o;for(i in e)if(a=t[n=p.camelCase(i)],s=e[i],p.isArray(s)&&(a=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(o=p.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete e[n],s)i in e||(e[i]=s[i],t[i]=a);else t[n]=a}(d,c.opts.specialEasing);o>s;s++)if(n=Ze.prefilters[s].call(c,e,d,c.opts))return p.isFunction(n.stop)&&(p._queueHooks(c.elem,c.opts.queue).stop=p.proxy(n.stop,n)),n;return p.map(d,Ge,c),p.isFunction(c.opts.start)&&c.opts.start.call(e,c),p.fx.timer(p.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}p.Animation=p.extend(Ze,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return U(i.elem,e,X.exec(t),i),i}]},tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.match(M);for(var i,n=0,a=e.length;a>n;n++)i=e[n],Ze.tweeners[i]=Ze.tweeners[i]||[],Ze.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,a,s,o,r,l,c,d=this,h={},u=e.style,f=e.nodeType&&V(e),g=F.get(e,"fxshow");for(n in i.queue||(null==(r=p._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always((function(){d.always((function(){r.unqueued--,p.queue(e,"fx").length||r.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===("none"===(c=p.css(e,"display"))?F.get(e,"olddisplay")||Ce(e.nodeName):c)&&"none"===p.css(e,"float")&&(u.display="inline-block")),i.overflow&&(u.overflow="hidden",d.always((function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}))),t)if(a=t[n],$e.exec(a)){if(delete t[n],s=s||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!g||void 0===g[n])continue;f=!0}h[n]=g&&g[n]||p.style(e,n)}else c=void 0;if(p.isEmptyObject(h))"inline"===("none"===c?Ce(e.nodeName):c)&&(u.display=c);else for(n in g?"hidden"in g&&(f=g.hidden):g=F.access(e,"fxshow",{}),s&&(g.hidden=!f),f?p(e).show():d.done((function(){p(e).hide()})),d.done((function(){var t;for(t in F.remove(e,"fxshow"),h)p.style(e,t,h[t])})),h)o=Ge(f?g[n]:0,n,d),n in g||(g[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}],prefilter:function(e,t){t?Ze.prefilters.unshift(e):Ze.prefilters.push(e)}}),p.speed=function(e,t,i){var n=e&&"object"==typeof e?p.extend({},e):{complete:i||!i&&t||p.isFunction(e)&&e,duration:e,easing:i&&t||t&&!p.isFunction(t)&&t};return n.duration=p.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in p.fx.speeds?p.fx.speeds[n.duration]:p.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){p.isFunction(n.old)&&n.old.call(this),n.queue&&p.dequeue(this,n.queue)},n},p.fn.extend({fadeTo:function(e,t,i,n){return this.filter(V).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=p.isEmptyObject(e),s=p.speed(t,i,n),o=function(){var t=Ze(this,p.extend({},e),s);(a||F.get(this,"finish"))&&t.stop(!0)};return o.finish=o,a||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",s=p.timers,o=F.get(this);if(a)o[a]&&o[a].stop&&n(o[a]);else for(a in o)o[a]&&o[a].stop&&Ve.test(a)&&n(o[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(i),t=!1,s.splice(a,1));!t&&i||p.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=F.get(this),n=i[e+"queue"],a=i[e+"queueHooks"],s=p.timers,o=n?n.length:0;for(i.finish=!0,p.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish}))}}),p.each(["toggle","show","hide"],(function(e,t){var i=p.fn[t];p.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(qe(t,!0),e,n,a)}})),p.each({slideDown:qe("show"),slideUp:qe("hide"),slideToggle:qe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){p.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}})),p.timers=[],p.fx.tick=function(){var e,t=0,i=p.timers;for(Ye=p.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||p.fx.stop(),Ye=void 0},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Xe||(Xe=e.setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){e.clearInterval(Xe),Xe=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(t,i){return t=p.fx&&p.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,n){var a=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(a)}}))},function(){var e=n.createElement("input"),t=n.createElement("select"),i=t.appendChild(n.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=i.selected,t.disabled=!0,h.optDisabled=!i.disabled,(e=n.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var Ke,Je=p.expr.attrHandle;p.fn.extend({attr:function(e,t){return N(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){p.removeAttr(this,e)}))}}),p.extend({attr:function(e,t,i){var n,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?p.prop(e,t,i):(1===s&&p.isXMLDoc(e)||(t=t.toLowerCase(),a=p.attrHooks[t]||(p.expr.match.bool.test(t)?Ke:void 0)),void 0!==i?null===i?void p.removeAttr(e,t):a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:(e.setAttribute(t,i+""),i):a&&"get"in a&&null!==(n=a.get(e,t))?n:null==(n=p.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&p.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,a=0,s=t&&t.match(M);if(s&&1===e.nodeType)for(;i=s[a++];)n=p.propFix[i]||i,p.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),Ke={set:function(e,t,i){return!1===t?p.removeAttr(e,i):e.setAttribute(i,i),i}},p.each(p.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=Je[t]||p.find.attr;Je[t]=function(e,t,n){var a,s;return n||(s=Je[t],Je[t]=a,a=null!=i(e,t,n)?t.toLowerCase():null,Je[t]=s),a}}));var Qe=/^(?:input|select|textarea|button)$/i,et=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return N(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[p.propFix[e]||e]}))}}),p.extend({prop:function(e,t,i){var n,a,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&p.isXMLDoc(e)||(t=p.propFix[t]||t,a=p.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):Qe.test(e.nodeName)||et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){p.propFix[this.toLowerCase()]=this}));var tt=/[\t\r\n\f]/g;function it(e){return e.getAttribute&&e.getAttribute("class")||""}p.fn.extend({addClass:function(e){var t,i,n,a,s,o,r,l=0;if(p.isFunction(e))return this.each((function(t){p(this).addClass(e.call(this,t,it(this)))}));if("string"==typeof e&&e)for(t=e.match(M)||[];i=this[l++];)if(a=it(i),n=1===i.nodeType&&(" "+a+" ").replace(tt," ")){for(o=0;s=t[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");a!==(r=p.trim(n))&&i.setAttribute("class",r)}return this},removeClass:function(e){var t,i,n,a,s,o,r,l=0;if(p.isFunction(e))return this.each((function(t){p(this).removeClass(e.call(this,t,it(this)))}));if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(M)||[];i=this[l++];)if(a=it(i),n=1===i.nodeType&&(" "+a+" ").replace(tt," ")){for(o=0;s=t[o++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");a!==(r=p.trim(n))&&i.setAttribute("class",r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each((function(i){p(this).toggleClass(e.call(this,i,it(this),t),t)})):this.each((function(){var t,n,a,s;if("string"===i)for(n=0,a=p(this),s=e.match(M)||[];t=s[n++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==i||((t=it(this))&&F.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":F.get(this,"__className__")||""))}))},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+it(i)+" ").replace(tt," ").indexOf(t)>-1)return!0;return!1}});var nt=/\r/g,at=/[\x20\t\r\n\f]+/g;p.fn.extend({val:function(e){var t,i,n,a=this[0];return arguments.length?(n=p.isFunction(e),this.each((function(i){var a;1===this.nodeType&&(null==(a=n?e.call(this,i,p(this).val()):e)?a="":"number"==typeof a?a+="":p.isArray(a)&&(a=p.map(a,(function(e){return null==e?"":e+""}))),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=p.valHooks[a.type]||p.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:"string"==typeof(i=a.value)?i.replace(nt,""):null==i?"":i:void 0}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return null!=t?t:p.trim(p.text(e)).replace(at," ")}},select:{get:function(e){for(var t,i,n=e.options,a=e.selectedIndex,s="select-one"===e.type||0>a,o=s?null:[],r=s?a+1:n.length,l=0>a?r:s?a:0;r>l;l++)if(((i=n[l]).selected||l===a)&&(h.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!p.nodeName(i.parentNode,"optgroup"))){if(t=p(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,n,a=e.options,s=p.makeArray(t),o=a.length;o--;)((n=a[o]).selected=p.inArray(p.valHooks.option.get(n),s)>-1)&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),p.each(["radio","checkbox"],(function(){p.valHooks[this]={set:function(e,t){return p.isArray(t)?e.checked=p.inArray(p(e).val(),t)>-1:void 0}},h.checkOn||(p.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var st=/^(?:focusinfocus|focusoutblur)$/;p.extend(p.event,{trigger:function(t,i,a,s){var o,r,l,c,h,u,f,g=[a||n],m=d.call(t,"type")?t.type:t,v=d.call(t,"namespace")?t.namespace.split("."):[];if(r=l=a=a||n,3!==a.nodeType&&8!==a.nodeType&&!st.test(m+p.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),h=m.indexOf(":")<0&&"on"+m,(t=t[p.expando]?t:new p.Event(m,"object"==typeof t&&t)).isTrigger=s?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),i=null==i?[t]:p.makeArray(i,[t]),f=p.event.special[m]||{},s||!f.trigger||!1!==f.trigger.apply(a,i))){if(!s&&!f.noBubble&&!p.isWindow(a)){for(c=f.delegateType||m,st.test(c+m)||(r=r.parentNode);r;r=r.parentNode)g.push(r),l=r;l===(a.ownerDocument||n)&&g.push(l.defaultView||l.parentWindow||e)}for(o=0;(r=g[o++])&&!t.isPropagationStopped();)t.type=o>1?c:f.bindType||m,(u=(F.get(r,"events")||{})[t.type]&&F.get(r,"handle"))&&u.apply(r,i),(u=h&&r[h])&&u.apply&&R(r)&&(t.result=u.apply(r,i),!1===t.result&&t.preventDefault());return t.type=m,s||t.isDefaultPrevented()||f._default&&!1!==f._default.apply(g.pop(),i)||!R(a)||h&&p.isFunction(a[m])&&!p.isWindow(a)&&((l=a[h])&&(a[h]=null),p.event.triggered=m,a[m](),p.event.triggered=void 0,l&&(a[h]=l)),t.result}},simulate:function(e,t,i){var n=p.extend(new p.Event,i,{type:e,isSimulated:!0});p.event.trigger(n,null,t)}}),p.fn.extend({trigger:function(e,t){return this.each((function(){p.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];return i?p.event.trigger(e,t,i,!0):void 0}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){p.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}})),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),h.focusin="onfocusin"in e,h.focusin||p.each({focus:"focusin",blur:"focusout"},(function(e,t){var i=function(e){p.event.simulate(t,e.target,p.event.fix(e))};p.event.special[t]={setup:function(){var n=this.ownerDocument||this,a=F.access(n,t);a||n.addEventListener(e,i,!0),F.access(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=F.access(n,t)-1;a?F.access(n,t,a):(n.removeEventListener(e,i,!0),F.remove(n,t))}}}));var ot=e.location,rt=p.now(),lt=/\?/;p.parseJSON=function(e){return JSON.parse(e+"")},p.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+t),i};var ct=/#.*$/,dt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,ut=/^(?:GET|HEAD)$/,pt=/^\/\//,ft={},gt={},mt="*/".concat("*"),vt=n.createElement("a");function bt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,s=t.toLowerCase().match(M)||[];if(p.isFunction(i))for(;n=s[a++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function xt(e,t,i,n){var a={},s=e===gt;function o(r){var l;return a[r]=!0,p.each(e[r]||[],(function(e,r){var c=r(t,i,n);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)})),l}return o(t.dataTypes[0])||!a["*"]&&o("*")}function yt(e,t){var i,n,a=p.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:n||(n={}))[i]=t[i]);return n&&p.extend(!0,e,n),e}vt.href=ot.href,p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ot.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ot.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?yt(yt(e,p.ajaxSettings),t):yt(p.ajaxSettings,e)},ajaxPrefilter:bt(ft),ajaxTransport:bt(gt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var a,s,o,r,l,c,d,h,u=p.ajaxSetup({},i),f=u.context||u,g=u.context&&(f.nodeType||f.jquery)?p(f):p.event,m=p.Deferred(),v=p.Callbacks("once memory"),b=u.statusCode||{},x={},y={},w=0,k="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!r)for(r={};t=ht.exec(o);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return w||(e=y[i]=y[i]||e,x[e]=t),this},overrideMimeType:function(e){return w||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)b[t]=[b[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||k;return a&&a.abort(t),C(0,t),this}};if(m.promise(S).complete=v.add,S.success=S.done,S.error=S.fail,u.url=((t||u.url||ot.href)+"").replace(ct,"").replace(pt,ot.protocol+"//"),u.type=i.method||i.type||u.method||u.type,u.dataTypes=p.trim(u.dataType||"*").toLowerCase().match(M)||[""],null==u.crossDomain){c=n.createElement("a");try{c.href=u.url,c.href=c.href,u.crossDomain=vt.protocol+"//"+vt.host!=c.protocol+"//"+c.host}catch(e){u.crossDomain=!0}}if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=p.param(u.data,u.traditional)),xt(ft,u,i,S),2===w)return S;for(h in(d=p.event&&u.global)&&0==p.active++&&p.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!ut.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(lt.test(s)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=dt.test(s)?s.replace(dt,"$1_="+rt++):s+(lt.test(s)?"&":"?")+"_="+rt++)),u.ifModified&&(p.lastModified[s]&&S.setRequestHeader("If-Modified-Since",p.lastModified[s]),p.etag[s]&&S.setRequestHeader("If-None-Match",p.etag[s])),(u.data&&u.hasContent&&!1!==u.contentType||i.contentType)&&S.setRequestHeader("Content-Type",u.contentType),S.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+mt+"; q=0.01":""):u.accepts["*"]),u.headers)S.setRequestHeader(h,u.headers[h]);if(u.beforeSend&&(!1===u.beforeSend.call(f,S,u)||2===w))return S.abort();for(h in k="abort",{success:1,error:1,complete:1})S[h](u[h]);if(a=xt(gt,u,i,S)){if(S.readyState=1,d&&g.trigger("ajaxSend",[S,u]),2===w)return S;u.async&&u.timeout>0&&(l=e.setTimeout((function(){S.abort("timeout")}),u.timeout));try{w=1,a.send(x,C)}catch(e){if(!(2>w))throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,i,n,r){var c,h,x,y,k,C=i;2!==w&&(w=2,l&&e.clearTimeout(l),a=void 0,o=r||"",S.readyState=t>0?4:0,c=t>=200&&300>t||304===t,n&&(y=function(e,t,i){for(var n,a,s,o,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(a in r)if(r[a]&&r[a].test(n)){l.unshift(a);break}if(l[0]in i)s=l[0];else{for(a in i){if(!l[0]||e.converters[a+" "+l[0]]){s=a;break}o||(o=a)}s=s||o}return s?(s!==l[0]&&l.unshift(s),i[s]):void 0}(u,S,n)),y=function(e,t,i,n){var a,s,o,r,l,c={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=d.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(a in c)if((r=a.split(" "))[1]===s&&(o=c[l+" "+r[0]]||c["* "+r[0]])){!0===o?o=c[a]:!0!==c[a]&&(s=r[0],d.unshift(r[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(u,y,S,c),c?(u.ifModified&&((k=S.getResponseHeader("Last-Modified"))&&(p.lastModified[s]=k),(k=S.getResponseHeader("etag"))&&(p.etag[s]=k)),204===t||"HEAD"===u.type?C="nocontent":304===t?C="notmodified":(C=y.state,h=y.data,c=!(x=y.error))):(x=C,!t&&C||(C="error",0>t&&(t=0))),S.status=t,S.statusText=(i||C)+"",c?m.resolveWith(f,[h,C,S]):m.rejectWith(f,[S,C,x]),S.statusCode(b),b=void 0,d&&g.trigger(c?"ajaxSuccess":"ajaxError",[S,u,c?h:x]),v.fireWith(f,[S,C]),d&&(g.trigger("ajaxComplete",[S,u]),--p.active||p.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,i){return p.get(e,t,i,"json")},getScript:function(e,t){return p.get(e,void 0,t,"script")}}),p.each(["get","post"],(function(e,t){p[t]=function(e,i,n,a){return p.isFunction(i)&&(a=a||n,n=i,i=void 0),p.ajax(p.extend({url:e,type:t,dataType:a,data:i,success:n},p.isPlainObject(e)&&e))}})),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(e){var t;return p.isFunction(e)?this.each((function(t){p(this).wrapAll(e.call(this,t))})):(this[0]&&(t=p(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return p.isFunction(e)?this.each((function(t){p(this).wrapInner(e.call(this,t))})):this.each((function(){var t=p(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=p.isFunction(e);return this.each((function(i){p(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(){return this.parent().each((function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)})).end()}}),p.expr.filters.hidden=function(e){return!p.expr.filters.visible(e)},p.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var wt=/%20/g,kt=/\[\]$/,St=/\r?\n/g,Ct=/^(?:submit|button|image|reset|file)$/i,_t=/^(?:input|select|textarea|keygen)/i;function Tt(e,t,i,n){var a;if(p.isArray(t))p.each(t,(function(t,a){i||kt.test(e)?n(e,a):Tt(e+"["+("object"==typeof a&&null!=a?t:"")+"]",a,i,n)}));else if(i||"object"!==p.type(t))n(e,t);else for(a in t)Tt(e+"["+a+"]",t[a],i,n)}p.param=function(e,t){var i,n=[],a=function(e,t){t=p.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,(function(){a(this.name,this.value)}));else for(i in e)Tt(i,e[i],t,a);return n.join("&").replace(wt,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&_t.test(this.nodeName)&&!Ct.test(e)&&(this.checked||!q.test(e))})).map((function(e,t){var i=p(this).val();return null==i?null:p.isArray(i)?p.map(i,(function(e){return{name:t.name,value:e.replace(St,"\r\n")}})):{name:t.name,value:i.replace(St,"\r\n")}})).get()}}),p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var At={0:200,1223:204},Pt=p.ajaxSettings.xhr();h.cors=!!Pt&&"withCredentials"in Pt,h.ajax=Pt=!!Pt,p.ajaxTransport((function(t){var i,n;return h.cors||Pt&&!t.crossDomain?{send:function(a,s){var o,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];for(o in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)r.setRequestHeader(o,a[o]);i=function(e){return function(){i&&(i=n=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?s(0,"error"):s(r.status,r.statusText):s(At[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=i(),n=r.onerror=i("error"),void 0!==r.onabort?r.onabort=n:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout((function(){i&&n()}))},i=i("abort");try{r.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}:void 0})),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),p.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain)return{send:function(a,s){t=p("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&s("error"===e.type?404:200,e.type)}),n.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Dt=[],It=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||p.expando+"_"+rt++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",(function(t,i,n){var a,s,o,r=!1!==t.jsonp&&(It.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(It,"$1"+a):!1!==t.jsonp&&(t.url+=(lt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return o||p.error(a+" was not called"),o[0]},t.dataTypes[0]="json",s=e[a],e[a]=function(){o=arguments},n.always((function(){void 0===s?p(e).removeProp(a):e[a]=s,t[a]&&(t.jsonpCallback=i.jsonpCallback,Dt.push(a)),o&&p.isFunction(s)&&s(o[0]),o=s=void 0})),"script"):void 0})),p.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||n;var a=S.exec(e),s=!i&&[];return a?[t.createElement(a[1])]:(a=te([e],t,s),s&&s.length&&p(s).remove(),p.merge([],a.childNodes))};var Et=p.fn.load;function Lt(e){return p.isWindow(e)?e:9===e.nodeType&&e.defaultView}p.fn.load=function(e,t,i){if("string"!=typeof e&&Et)return Et.apply(this,arguments);var n,a,s,o=this,r=e.indexOf(" ");return r>-1&&(n=p.trim(e.slice(r)),e=e.slice(0,r)),p.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(a="POST"),o.length>0&&p.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(n?p("<div>").append(p.parseHTML(e)).find(n):e)})).always(i&&function(e,t){o.each((function(){i.apply(this,s||[e.responseText,t,e])}))}),this},p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){p.fn[t]=function(e){return this.on(t,e)}})),p.expr.filters.animated=function(e){return p.grep(p.timers,(function(t){return e===t.elem})).length},p.offset={setOffset:function(e,t,i){var n,a,s,o,r,l,c=p.css(e,"position"),d=p(e),h={};"static"===c&&(e.style.position="relative"),r=d.offset(),s=p.css(e,"top"),l=p.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(n=d.position()).top,a=n.left):(o=parseFloat(s)||0,a=parseFloat(l)||0),p.isFunction(t)&&(t=t.call(e,i,p.extend({},r))),null!=t.top&&(h.top=t.top-r.top+o),null!=t.left&&(h.left=t.left-r.left+a),"using"in t?t.using.call(e,h):d.css(h)}},p.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){p.offset.setOffset(this,e,t)}));var t,i,n=this[0],a={top:0,left:0},s=n&&n.ownerDocument;return s?(t=s.documentElement,p.contains(t,n)?(a=n.getBoundingClientRect(),i=Lt(s),{top:a.top+i.pageYOffset-t.clientTop,left:a.left+i.pageXOffset-t.clientLeft}):a):void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===p.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(i,"marginTop",!0),left:t.left-n.left-p.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===p.css(e,"position");)e=e.offsetParent;return e||De}))}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;p.fn[e]=function(n){return N(this,(function(e,n,a){var s=Lt(e);return void 0===a?s?s[t]:e[n]:void(s?s.scrollTo(i?s.pageXOffset:a,i?a:s.pageYOffset):e[n]=a)}),e,n,arguments.length)}})),p.each(["top","left"],(function(e,t){p.cssHooks[t]=Ee(h.pixelPosition,(function(e,i){return i?(i=Ie(e,t),Te.test(i)?p(e).position()[t]+"px":i):void 0}))})),p.each({Height:"height",Width:"width"},(function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,n){p.fn[n]=function(n,a){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===a?"margin":"border");return N(this,(function(t,i,n){var a;return p.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===n?p.css(t,i,o):p.style(t,i,n,o)}),t,s?n:void 0,s,null)}}))})),p.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),p.fn.andSelf=p.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return p}));var Mt=e.jQuery,Ot=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=Ot),t&&e.jQuery===p&&(e.jQuery=Mt),p},t||(e.jQuery=e.$=p),p})),function(e){"use strict";var t="__RETRY__"+(new Date).getTime();e.ajaxPrefilter((function(i,n,a){if(!i[t]&&void 0!==i.shouldRetry){n[t]=!0;var s,o=e.Deferred(),r=e.Deferred(),l={},c=0,d=function(t,n,a){var s,o=i.shouldRetry;switch(typeof o){case"number":s=o>n;break;case"boolean":s=o;break;case"function":s=o(t,n,a)}return"object"==typeof s&&"function"==typeof s.then?e.Deferred((function(e){s.then(e.resolve,(function(){e.resolve(!1)}))})).promise():e.when(s)};(function t(i,n,h){(n?d(n,c++,i.type||"GET"):e.when(!0)).done((function(c){!0===c?(n?e.ajax(i):a).then((function(e,t,i){s=i.status,o.resolveWith(this,arguments),o.done(l[s]),r.resolveWith(this,[i,t])}),(function(e,n){var a=arguments,c=this;t(i,e,(function(){s=e.status,o.rejectWith(c,a),o.fail(l[s]),r.resolveWith(c,[e,n])}))})):h()}))})(e.extend({},n,{success:e.noop,error:e.noop,complete:e.noop,statusCode:{}})),a.complete&&(a.complete=r.done,a.success=o.done,a.error=o.fail),e.extend(a,o.promise()),a.statusCode=function(e){var t;if(e)if(function(e){return e.state?"pending"!==e.state():e.isResolved()||e.isRejected()}(o))o.then(e[s],e[s]);else for(t in e)l[t]=[l[t],e[t]];return this}}}))}(jQuery),function(){"use strict";function e(t,n){var a;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,r=0,l=s.length;r<l;r++)o[s[r]]=c(o[s[r]],o);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,n){var a=Node.prototype.removeEventListener;"click"===e?a.call(t,e,i.hijacked||i,n):a.call(t,e,i,n)},t.addEventListener=function(e,i,n){var a=Node.prototype.addEventListener;"click"===e?a.call(t,e,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),n):a.call(t,e,i,n)}),"function"==typeof t.onclick&&(a=t.onclick,t.addEventListener("click",(function(e){a(e)}),!1),t.onclick=null)}function c(e,t){return function(){return e.apply(t,arguments)}}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!t,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,a=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=n&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(n&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;n&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type?(t=e.value.length,e.focus(),e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,i;if(!(t=e.fastClickScrollParent)||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,i,s,o;if(e.timeStamp<0?(o=(new Date).getTime(),this.isTrackingClickStartFromEvent=!1):(o=e.timeStamp,this.isTrackingClickStartFromEvent=!0),e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],n){if((s=window.getSelection()).rangeCount&&!s.isCollapsed)return!0;if(!a){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=o,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,o-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,r,l,c,d,h=this.targetElement;if(d=this.isTrackingClickStartFromEvent?e.timeStamp:(new Date).getTime(),!this.trackingClick)return!0;if(d-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(d-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=d,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(c=e.changedTouches[0],(h=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||h).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(r=h.tagName.toLowerCase())){if(t=this.findControl(h)){if(this.focus(h),i)return!1;h=t}}else if(this.needsFocus(h))return d-o>100||n&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(h),this.sendClick(h,e),n&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return!(!n||a||!(l=h.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(h)||(e.preventDefault(),this.sendClick(h,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!(this.targetElement&&!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),1))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,n,a;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o&&(a=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&a[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction},e.attach=function(t,i){return new e(t,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define((function(){return e})):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),"undefined"==typeof links&&(links={}),"undefined"==typeof google&&(google=void 0),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n>i;++i)e.call(t||this,this[i],i,this)}),links.Timeline=function(e,t){if(e){this.dom={},this.conversion={},this.eventParams={},this.groups=[],this.groupIndexes={},this.items=[],this.renderQueue={show:[],hide:[],update:[]},this.renderedItems=[],this.clusterGenerator=new links.Timeline.ClusterGenerator(this),this.currentClusters=[],this.selection=void 0,this.listeners={},this.size={actualHeight:0,axis:{characterMajorHeight:0,characterMajorWidth:0,characterMinorHeight:0,characterMinorWidth:0,height:0,labelMajorTop:0,labelMinorTop:0,line:0,lineMajorWidth:0,lineMinorHeight:0,lineMinorTop:0,lineMinorWidth:0,top:0},contentHeight:0,contentLeft:0,contentWidth:0,frameHeight:0,frameWidth:0,groupsLeft:0,groupsWidth:0,items:{top:0}},this.dom.container=e,this.options={width:"100%",height:"auto",minHeight:0,groupMinHeight:0,autoHeight:!0,eventMargin:10,eventMarginAxis:20,dragAreaWidth:10,min:void 0,max:void 0,zoomMin:10,zoomMax:31536e10,moveable:!0,zoomable:!0,selectable:!0,unselectable:!0,editable:!1,snapEvents:!0,groupChangeable:!0,timeChangeable:!0,showCurrentTime:!0,showCustomTime:!1,showMajorLabels:!0,showMinorLabels:!0,showNavigation:!1,showButtonNew:!1,groupsOnRight:!1,groupsOrder:!0,axisOnTop:!1,stackEvents:!0,animate:!0,animateZoom:!0,cluster:!1,clusterMaxItems:5,style:"box",customStackOrder:!1,locale:"en",MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_SHORT:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"},this.setOptions(t),this.clientTimeOffset=0;for(var i=this.dom;i.container.hasChildNodes();)i.container.removeChild(i.container.firstChild);this.step=new links.Timeline.StepDate,this.itemTypes={box:links.Timeline.ItemBox,range:links.Timeline.ItemRange,floatingRange:links.Timeline.ItemFloatingRange,dot:links.Timeline.ItemDot},this.data=[],this.firstDraw=!0,this.setVisibleChartRange(void 0,void 0,!1),this.render();var n=this;setTimeout((function(){n.trigger("ready")}),0)}},links.Timeline.prototype.draw=function(e,t){t&&console.log("WARNING: Passing options in draw() is deprecated. Pass options to the constructur or use setOptions() instead!"),this.setOptions(t),this.options.selectable&&links.Timeline.addClassName(this.dom.frame,"timeline-selectable"),this.setData(e),t&&(t.start||t.end)?this.setVisibleChartRange(t.start,t.end):this.firstDraw&&this.setVisibleChartRangeAuto(),this.firstDraw=!1},links.Timeline.prototype.setOptions=function(e){if(e){for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if(void 0!==links.locales&&"en"!==this.options.locale){var i=links.locales[this.options.locale];if(i)for(var n in i)i.hasOwnProperty(n)&&(this.options[n]=i[n])}null!=e.showButtonAdd&&(this.options.showButtonNew=e.showButtonAdd,console.log("WARNING: Option showButtonAdd is deprecated. Use showButtonNew instead")),null!=e.intervalMin&&(this.options.zoomMin=e.intervalMin,console.log("WARNING: Option intervalMin is deprecated. Use zoomMin instead")),null!=e.intervalMax&&(this.options.zoomMax=e.intervalMax,console.log("WARNING: Option intervalMax is deprecated. Use zoomMax instead")),e.scale&&e.step&&this.step.setScale(e.scale,e.step)}this.options.autoHeight="auto"===this.options.height},links.Timeline.prototype.getOptions=function(){return this.options},links.Timeline.prototype.addItemType=function(e,t){this.itemTypes[e]=t},links.Timeline.mapColumnIds=function(e){for(var t={},i=e.getNumberOfColumns(),n=!0,a=0;i>a;a++){var s=e.getColumnId(a)||e.getColumnLabel(a);t[s]=a,("start"==s||"end"==s||"content"==s||"group"==s||"className"==s||"editable"==s||"type"==s)&&(n=!1)}return n&&(t.start=0,t.end=1,t.content=2,i>3&&(t.group=3),i>4&&(t.className=4),i>5&&(t.editable=5),i>6&&(t.type=6)),t},links.Timeline.prototype.setData=function(e){this.unselectItem(),e||(e=[]),this.stackCancelAnimation(),this.clearItems(),this.data=e;var t=this.items;if(this.deleteGroups(),google&&google.visualization&&e instanceof google.visualization.DataTable)for(var i=links.Timeline.mapColumnIds(e),n=0,a=e.getNumberOfRows();a>n;n++)t.push(this.createItem({start:null!=i.start?e.getValue(n,i.start):void 0,end:null!=i.end?e.getValue(n,i.end):void 0,content:null!=i.content?e.getValue(n,i.content):void 0,group:null!=i.group?e.getValue(n,i.group):void 0,className:null!=i.className?e.getValue(n,i.className):void 0,editable:null!=i.editable?e.getValue(n,i.editable):void 0,type:null!=i.type?e.getValue(n,i.type):void 0}));else{if(!links.Timeline.isArray(e))throw"Unknown data type. DataTable or Array expected.";for(n=0,a=e.length;a>n;n++){var s=e[n],o=this.createItem(s);t.push(o)}}this.options.cluster&&this.clusterGenerator.setData(this.items),this.render({animate:!1})},links.Timeline.prototype.getData=function(){return this.data},links.Timeline.prototype.updateData=function(e,t){var i,n=this.data;if(google&&google.visualization&&n instanceof google.visualization.DataTable){var a=e+1-n.getNumberOfRows();a>0&&n.addRows(a);var s=links.Timeline.mapColumnIds(n);for(i in t)if(t.hasOwnProperty(i)){var o=s[i];if(null==o){var r=t[i],l="string";"number"==typeof r?l="number":"boolean"==typeof r?l="boolean":r instanceof Date&&(l="datetime"),o=n.addColumn(l,i)}n.setValue(e,o,t[i])}}else{if(!links.Timeline.isArray(n))throw"Cannot update data, unknown type of data";var c=n[e];for(i in null==c&&(c={},n[e]=c),t)t.hasOwnProperty(i)&&(c[i]=t[i])}},links.Timeline.prototype.getItemIndex=function(e){for(var t=e,i=this.dom.items.frame,n=this.items,a=void 0;t.parentNode&&t.parentNode!==i;)t=t.parentNode;if(t.parentNode===i)for(var s=0,o=n.length;o>s;s++)if(n[s].dom===t){a=s;break}return a},links.Timeline.prototype.getClusterIndex=function(e){var t=e,i=this.dom.items.frame,n=this.clusters,a=void 0;if(this.clusters){for(;t.parentNode&&t.parentNode!==i;)t=t.parentNode;if(t.parentNode===i)for(var s=0,o=n.length;o>s;s++)if(n[s].dom===t){a=s;break}}return a},links.Timeline.prototype.getVisibleItems=function(e,t){var i=this.items,n=[];if(i)for(var a=0,s=i.length;s>a;a++){var o=i[a];o.end?e<=o.start&&o.end<=t&&n.push({row:a}):e<=o.start&&o.start<=t&&n.push({row:a})}return n},links.Timeline.prototype.setSize=function(e,t){e&&(this.options.width=e,this.dom.frame.style.width=e),t&&(this.options.height=t,this.options.autoHeight="auto"===this.options.height,"auto"!==t&&(this.dom.frame.style.height=t)),this.render({animate:!1})},links.Timeline.prototype.setVisibleChartRange=function(e,t,i){var n={};e&&t||(n=this.getDataRange(!0)),e||(t?n.min&&n.min.valueOf()<t.valueOf()?e=n.min:(e=new Date(t.valueOf())).setDate(e.getDate()-7):(e=new Date).setDate(e.getDate()-3)),t||(n.max?t=n.max:(t=new Date(e.valueOf())).setDate(t.getDate()+7)),e>=t&&(t=new Date(e.valueOf())).setDate(t.getDate()+7);var a=this.options.min?this.options.min:void 0;null!=a&&e.valueOf()<a.valueOf()&&(e=new Date(a.valueOf()));var s=this.options.max?this.options.max:void 0;null!=s&&t.valueOf()>s.valueOf()&&(t=new Date(s.valueOf())),this.applyRange(e,t),null==i||1==i?this.render({animate:!1}):this.recalcConversion()},links.Timeline.prototype.setVisibleChartRangeAuto=function(){var e=this.getDataRange(!0);this.setVisibleChartRange(e.min,e.max)},links.Timeline.prototype.setVisibleChartRangeNow=function(){var e=new Date,t=this.end.valueOf()-this.start.valueOf(),i=new Date(e.valueOf()-t/2),n=new Date(i.valueOf()+t);this.setVisibleChartRange(i,n)},links.Timeline.prototype.getVisibleChartRange=function(){return{start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())}},links.Timeline.prototype.getDataRange=function(e){var t=this.items,i=void 0,n=void 0;if(t)for(var a=0,s=t.length;s>a;a++){var o=t[a],r=null!=o.start?o.start.valueOf():void 0,l=null!=o.end?o.end.valueOf():r;null!=r&&(i=null!=i?Math.min(i.valueOf(),r.valueOf()):r),null!=l&&(n=null!=n?Math.max(n.valueOf(),l.valueOf()):l)}if(i&&n&&e){var c=n-i;i-=.05*c,n+=.05*c}return{min:null!=i?new Date(i):void 0,max:null!=n?new Date(n):void 0}},links.Timeline.prototype.render=function(e){var t=(this.reflowFrame(),this.reflowAxis(),this.reflowGroups(),this.reflowItems(),this.options.animate);if(e&&null!=e.animate&&(t=e.animate),this.recalcConversion(),this.clusterItems(),this.filterItems(),this.stackItems(t),this.recalcItems(),this.repaint()){var i=e?e.renderTimesLeft:void 0;null==i&&(i=5),i>0&&this.render({animate:e?e.animate:void 0,renderTimesLeft:i-1})}},links.Timeline.prototype.repaint=function(){var e=this.repaintFrame(),t=this.repaintAxis(),i=this.repaintGroups(),n=this.repaintItems();return this.repaintCurrentTime(),this.repaintCustomTime(),e||t||i||n},links.Timeline.prototype.reflowFrame=function(){var e=this.dom,t=(this.options,this.size),i=!1,n=e.frame?e.frame.offsetWidth:0,a=e.frame?e.frame.clientHeight:0;return i=(i=i||t.frameWidth!==n)||t.frameHeight!==a,t.frameWidth=n,t.frameHeight=a,i},links.Timeline.prototype.repaintFrame=function(){var e=!1,t=this.dom,i=this.options,n=this.size;t.frame||(t.frame=document.createElement("DIV"),t.frame.className="timeline-frame ui-widget ui-widget-content ui-corner-all",t.container.appendChild(t.frame),e=!0);var a=i.autoHeight?n.actualHeight+"px":i.height||"100%",s=i.width||"100%";if(e=(e=e||t.frame.style.height!=a)||t.frame.style.width!=s,t.frame.style.height=a,t.frame.style.width=s,!t.content){t.content=document.createElement("DIV"),t.content.className="timeline-content",t.frame.appendChild(t.content);var o=document.createElement("DIV");o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.height="100%",o.style.width="0px",t.content.appendChild(o),t.contentTimelines=o;var r=this.eventParams,l=this;r.onMouseDown||(r.onMouseDown=function(e){l.onMouseDown(e)},links.Timeline.addEventListener(t.content,"mousedown",r.onMouseDown)),r.onTouchStart||(r.onTouchStart=function(e){l.onTouchStart(e)},links.Timeline.addEventListener(t.content,"touchstart",r.onTouchStart)),r.onMouseWheel||(r.onMouseWheel=function(e){l.onMouseWheel(e)},links.Timeline.addEventListener(t.content,"mousewheel",r.onMouseWheel)),r.onDblClick||(r.onDblClick=function(e){l.onDblClick(e)},links.Timeline.addEventListener(t.content,"dblclick",r.onDblClick)),e=!0}return t.content.style.left=n.contentLeft+"px",t.content.style.top="0px",t.content.style.width=n.contentWidth+"px",t.content.style.height=n.frameHeight+"px",this.repaintNavigation(),e},links.Timeline.prototype.reflowAxis=function(){var e=!1,t=this.dom,i=this.options,n=this.size,a=t.axis,s=a&&a.characterMinor?a.characterMinor.clientWidth:0,o=a&&a.characterMinor?a.characterMinor.clientHeight:0,r=a&&a.characterMajor?a.characterMajor.clientWidth:0,l=a&&a.characterMajor?a.characterMajor.clientHeight:0,c=(i.showMinorLabels?o:0)+(i.showMajorLabels?l:0),d=i.axisOnTop?0:n.frameHeight-c,h=i.axisOnTop?c:d;e=(e=(e=e||n.axis.top!==d)||n.axis.line!==h)||n.axis.height!==c,n.axis.top=d,n.axis.line=h,n.axis.height=c,n.axis.labelMajorTop=i.axisOnTop?0:h+(i.showMinorLabels?o:0),n.axis.labelMinorTop=i.axisOnTop?i.showMajorLabels?l:0:h,n.axis.lineMinorTop=i.axisOnTop?n.axis.labelMinorTop:0,n.axis.lineMinorHeight=i.showMajorLabels?n.frameHeight-l:n.frameHeight,n.axis.lineMinorWidth=a&&a.minorLines&&a.minorLines.length?a.minorLines[0].offsetWidth:1,n.axis.lineMajorWidth=a&&a.majorLines&&a.majorLines.length?a.majorLines[0].offsetWidth:1,e=(e=(e=(e=e||n.axis.characterMinorWidth!==s)||n.axis.characterMinorHeight!==o)||n.axis.characterMajorWidth!==r)||n.axis.characterMajorHeight!==l,n.axis.characterMinorWidth=s,n.axis.characterMinorHeight=o,n.axis.characterMajorWidth=r,n.axis.characterMajorHeight=l;var u=Math.max(n.frameHeight-c,0);return n.contentLeft=i.groupsOnRight?0:n.groupsWidth,n.contentWidth=Math.max(n.frameWidth-n.groupsWidth,0),n.contentHeight=u,e},links.Timeline.prototype.repaintAxis=function(){var e=!1,t=this.dom,i=this.options,n=this.size,a=this.step,s=t.axis;s||(s={},t.axis=s),n.axis.properties||(n.axis.properties={}),s.minorTexts||(s.minorTexts=[]),s.minorLines||(s.minorLines=[]),s.majorTexts||(s.majorTexts=[]),s.majorLines||(s.majorLines=[]),s.frame||(s.frame=document.createElement("DIV"),s.frame.style.position="absolute",s.frame.style.left="0px",s.frame.style.top="0px",t.content.appendChild(s.frame)),t.content.removeChild(s.frame),s.frame.style.width=n.contentWidth+"px",s.frame.style.height=n.axis.height+"px";var o=this.screenToTime(0),r=this.screenToTime(n.contentWidth);n.axis.characterMinorWidth&&(this.minimumStep=this.screenToTime(6*n.axis.characterMinorWidth)-this.screenToTime(0),a.setRange(o,r,this.minimumStep));var l=this.repaintAxisCharacters();e=e||l,this.repaintAxisStartOverwriting(),a.start();for(var c=void 0,d=0;!a.end()&&1e3>d;){d++;var h=a.getCurrent(),u=this.timeToScreen(h),p=a.isMajor();i.showMinorLabels&&this.repaintAxisMinorText(u,a.getLabelMinor(i)),p&&i.showMajorLabels?(u>0&&(null==c&&(c=u),this.repaintAxisMajorText(u,a.getLabelMajor(i))),this.repaintAxisMajorLine(u)):this.repaintAxisMinorLine(u),a.next()}if(i.showMajorLabels){var f=this.screenToTime(0),g=this.step.getLabelMajor(i,f),m=g.length*n.axis.characterMajorWidth+10;(null==c||c>m)&&this.repaintAxisMajorText(0,g,f)}return this.repaintAxisEndOverwriting(),this.repaintAxisHorizontal(),t.content.insertBefore(s.frame,t.content.firstChild),e},links.Timeline.prototype.repaintAxisCharacters=function(){var e,t=!1,i=this.dom.axis;if(!i.characterMinor){e=document.createTextNode("0");var n=document.createElement("DIV");n.className="timeline-axis-text timeline-axis-text-minor",n.appendChild(e),n.style.position="absolute",n.style.visibility="hidden",n.style.paddingLeft="0px",n.style.paddingRight="0px",i.frame.appendChild(n),i.characterMinor=n,t=!0}if(!i.characterMajor){e=document.createTextNode("0");var a=document.createElement("DIV");a.className="timeline-axis-text timeline-axis-text-major",a.appendChild(e),a.style.position="absolute",a.style.visibility="hidden",a.style.paddingLeft="0px",a.style.paddingRight="0px",i.frame.appendChild(a),i.characterMajor=a,t=!0}return t},links.Timeline.prototype.repaintAxisStartOverwriting=function(){var e=this.size.axis.properties;e.minorTextNum=0,e.minorLineNum=0,e.majorTextNum=0,e.majorLineNum=0},links.Timeline.prototype.repaintAxisEndOverwriting=function(){var e,t=this.dom,i=this.size.axis.properties,n=this.dom.axis.frame,a=t.axis.minorTexts;for(e=i.minorTextNum;a.length>e;){var s=a[e];n.removeChild(s),a.splice(e,1)}var o=t.axis.minorLines;for(e=i.minorLineNum;o.length>e;){var r=o[e];n.removeChild(r),o.splice(e,1)}var l=t.axis.majorTexts;for(e=i.majorTextNum;l.length>e;){var c=l[e];n.removeChild(c),l.splice(e,1)}var d=t.axis.majorLines;for(e=i.majorLineNum;d.length>e;){var h=d[e];n.removeChild(h),d.splice(e,1)}},links.Timeline.prototype.repaintAxisHorizontal=function(){var e=this.dom.axis,t=this.size,i=this.options,n=i.showMinorLabels||i.showMajorLabels;if(n){if(!e.backgroundLine){var a=document.createElement("DIV");a.className="timeline-axis",a.style.position="absolute",a.style.left="0px",a.style.width="100%",a.style.border="none",e.frame.insertBefore(a,e.frame.firstChild),e.backgroundLine=a}e.backgroundLine&&(e.backgroundLine.style.top=t.axis.top+"px",e.backgroundLine.style.height=t.axis.height+"px")}else e.backgroundLine&&(e.frame.removeChild(e.backgroundLine),delete e.backgroundLine);if(n){if(e.line){var s=e.frame.removeChild(e.line);e.frame.appendChild(s)}else{(s=document.createElement("DIV")).className="timeline-axis",s.style.position="absolute",s.style.left="0px",s.style.width="100%",s.style.height="0px",e.frame.appendChild(s),e.line=s}e.line.style.top=t.axis.line+"px"}else e.line&&e.line.parentElement&&(e.frame.removeChild(e.line),delete e.line)},links.Timeline.prototype.repaintAxisMinorText=function(e,t){var i,n=this.size,a=this.dom,s=n.axis.properties,o=a.axis.frame,r=a.axis.minorTexts,l=s.minorTextNum;if(l<r.length)i=r[l];else{var c=document.createTextNode("");(i=document.createElement("DIV")).appendChild(c),i.className="timeline-axis-text timeline-axis-text-minor",i.style.position="absolute",o.appendChild(i),r.push(i)}i.childNodes[0].nodeValue=t,i.style.left=e+"px",i.style.top=n.axis.labelMinorTop+"px",s.minorTextNum++},links.Timeline.prototype.repaintAxisMinorLine=function(e){var t,i=this.size.axis,n=this.dom,a=i.properties,s=n.axis.frame,o=n.axis.minorLines,r=a.minorLineNum;r<o.length?t=o[r]:((t=document.createElement("DIV")).className="timeline-axis-grid timeline-axis-grid-minor",t.style.position="absolute",t.style.width="0px",s.appendChild(t),o.push(t)),t.style.top=i.lineMinorTop+"px",t.style.height=i.lineMinorHeight+"px",t.style.left=e-i.lineMinorWidth/2+"px",a.minorLineNum++},links.Timeline.prototype.repaintAxisMajorText=function(e,t){var i,n=this.size,a=n.axis.properties,s=this.dom.axis.frame,o=this.dom.axis.majorTexts,r=a.majorTextNum;if(r<o.length)i=o[r];else{var l=document.createTextNode(t);(i=document.createElement("DIV")).className="timeline-axis-text timeline-axis-text-major",i.appendChild(l),i.style.position="absolute",i.style.top="0px",s.appendChild(i),o.push(i)}i.childNodes[0].nodeValue=t,i.style.top=n.axis.labelMajorTop+"px",i.style.left=e+"px",a.majorTextNum++},links.Timeline.prototype.repaintAxisMajorLine=function(e){var t,i=this.size,n=i.axis.properties,a=this.size.axis,s=this.dom.axis.frame,o=this.dom.axis.majorLines,r=n.majorLineNum;r<o.length?t=o[r]:((t=document.createElement("DIV")).className="timeline-axis-grid timeline-axis-grid-major",t.style.position="absolute",t.style.top="0px",t.style.width="0px",s.appendChild(t),o.push(t)),t.style.left=e-a.lineMajorWidth/2+"px",t.style.height=i.frameHeight+"px",n.majorLineNum++},links.Timeline.prototype.reflowItems=function(){var e,t,i,n=!1,a=this.groups,s=this.renderedItems;for(a&&a.forEach((function(e){e.itemsHeight=0})),e=0,t=s.length;t>e;e++){var o=s[e],r=o.dom;if(i=o.group,r){var l=r?r.clientWidth:0,c=r?r.clientHeight:0;n=(n=n||o.width!=l)||o.height!=c,o.width=l,o.height=c,o.reflow()}i&&(i.itemsHeight=Math.max(this.options.groupMinHeight,i.itemsHeight?Math.max(i.itemsHeight,o.height):o.height))}return n},links.Timeline.prototype.recalcItems=function(){var e,t,i,n,a,s,o=!1,r=this.groups,l=this.size,c=this.options,d=this.renderedItems,h=0;if(0==r.length){if(c.autoHeight||c.cluster){var u=0,p=0;if(this.stack&&this.stack.finalItems)for((n=(a=this.stack.finalItems)[0])&&n.top&&(u=n.top,p=n.top+n.height),e=1,t=a.length;t>e;e++)n=a[e],u=Math.min(u,n.top),p=Math.max(p,n.top+n.height);else for((i=d[0])&&i.top&&(u=i.top,p=i.top+i.height),e=1,t=d.length;t>e;e++)(i=d[e]).top&&(u=Math.min(u,i.top),p=Math.max(p,i.top+i.height));if((h=p-u+2*c.eventMarginAxis+l.axis.height)<c.minHeight&&(h=c.minHeight),l.actualHeight!=h&&c.autoHeight&&!c.axisOnTop){var f=h-l.actualHeight;if(this.stack&&this.stack.finalItems)for(e=0,t=(a=this.stack.finalItems).length;t>e;e++)a[e].top+=f,a[e].item.top+=f;else for(e=0,t=d.length;t>e;e++)d[e].top+=f}}}else{for(h=l.axis.height+2*c.eventMarginAxis,e=0,t=r.length;t>e;e++){var g=(s=r[e]).itemsHeight;o=o||g!=s.height,s.height=Math.max(g,c.groupMinHeight),h+=r[e].height+c.eventMargin}var m=c.eventMargin,v=c.axisOnTop?c.eventMarginAxis+m/2:l.contentHeight-c.eventMarginAxis+m/2,b=l.axis.height;for(e=0,t=r.length;t>e;e++)s=r[e],c.axisOnTop?(s.top=v+b,s.labelTop=v+b+(s.height-s.labelHeight)/2,s.lineTop=v+b+s.height+m/2,v+=s.height+m):(v-=s.height+m,s.top=v,s.labelTop=v+(s.height-s.labelHeight)/2,s.lineTop=v-m/2);o=!0}return h<c.minHeight&&(h=c.minHeight),o=o||h!=l.actualHeight,l.actualHeight=h,o},links.Timeline.prototype.clearItems=function(){var e=this.renderQueue.hide;this.renderedItems.forEach((function(t){e.push(t)})),this.clusterGenerator.clear(),this.items=[]},links.Timeline.prototype.repaintItems=function(){var e,t,i=!1,n=this.dom,a=this.size,s=this,o=this.renderedItems;n.items||(n.items={});var r=n.items.frame;r||((r=document.createElement("DIV")).style.position="relative",n.content.appendChild(r),n.items.frame=r),r.style.left="0px",r.style.top=a.items.top+"px",r.style.height="0px",n.content.removeChild(r);var l=this.renderQueue,c=[];for(i=i||l.show.length>0||l.update.length>0||l.hide.length>0;e=l.show.shift();)e.showDOM(r),e.getImageUrls(c),o.push(e);for(;e=l.update.shift();)e.updateDOM(r),e.getImageUrls(c),-1==(t=this.renderedItems.indexOf(e))&&o.push(e);for(;e=l.hide.shift();)e.hideDOM(r),-1!=(t=this.renderedItems.indexOf(e))&&o.splice(t,1);if(o.forEach((function(e){e.updatePosition(s)})),this.repaintDeleteButton(),this.repaintDragAreas(),n.content.appendChild(r),c.length){links.imageloader.loadAll(c,(function(){s.render()}),!1)}return i},links.Timeline.prototype.reflowGroups=function(){for(var e=!1,t=this.options,i=this.size,n=this.dom,a=0,s=this.groups,o=this.dom.groups?this.dom.groups.labels:[],r=0,l=s.length;l>r;r++){var c=s[r],d=o[r];c.labelWidth=d?d.clientWidth:0,c.labelHeight=d?d.clientHeight:0,c.width=c.labelWidth,a=Math.max(a,c.width)}void 0!==t.groupsWidth&&(a=n.groups.frame?n.groups.frame.clientWidth:0),a+=1;var h=t.groupsOnRight?i.frameWidth-a:0;return e=(e=e||i.groupsWidth!==a)||i.groupsLeft!==h,i.groupsWidth=a,i.groupsLeft=h,e},links.Timeline.prototype.repaintGroups=function(){var e=this.dom,t=this,i=this.options,n=this.size,a=this.groups;void 0===e.groups&&(e.groups={});var s=e.groups.labels;s||(s=[],e.groups.labels=s);var o=e.groups.labelLines;o||(o=[],e.groups.labelLines=o);var r=e.groups.itemLines;r||(r=[],e.groups.itemLines=r);var l=e.groups.frame;l||((l=document.createElement("DIV")).className="timeline-groups-axis",l.style.position="absolute",l.style.overflow="hidden",l.style.top="0px",l.style.height="100%",e.frame.appendChild(l),e.groups.frame=l),l.style.left=n.groupsLeft+"px",l.style.width=void 0!==i.groupsWidth?i.groupsWidth:n.groupsWidth+"px",l.style.display=0==a.length?"none":"";for(var c=s.length,d=a.length,h=0,u=Math.min(c,d);u>h;h++){var p=a[h];(f=s[h]).innerHTML=this.getGroupName(p),f.style.display=""}for(h=c;d>h;h++){p=a[h];(f=document.createElement("DIV")).className="timeline-groups-text",f.style.position="absolute",void 0===i.groupsWidth&&(f.style.whiteSpace="nowrap"),f.innerHTML=this.getGroupName(p),l.appendChild(f),s[h]=f,(g=document.createElement("DIV")).className="timeline-axis-grid timeline-axis-grid-minor",g.style.position="absolute",g.style.left="0px",g.style.width="100%",g.style.height="0px",g.style.borderTopStyle="solid",l.appendChild(g),o[h]=g,(m=document.createElement("DIV")).className="timeline-axis-grid timeline-axis-grid-minor",m.style.position="absolute",m.style.left="0px",m.style.width="100%",m.style.height="0px",m.style.borderTopStyle="solid",e.content.insertBefore(m,e.content.firstChild),r[h]=m}for(h=d;c>h;h++){var f=s[h],g=o[h],m=r[h];l.removeChild(f),l.removeChild(g),e.content.removeChild(m)}s.splice(d,c-d),o.splice(d,c-d),r.splice(d,c-d),links.Timeline.addClassName(l,i.groupsOnRight?"timeline-groups-axis-onright":"timeline-groups-axis-onleft");for(h=0,u=a.length;u>h;h++){p=a[h],f=s[h],g=o[h],m=r[h];f.style.top=p.labelTop+"px",g.style.top=p.lineTop+"px",m.style.top=p.lineTop+"px",m.style.width=n.contentWidth+"px"}if(!e.groups.background){var v=document.createElement("DIV");v.className="timeline-axis",v.style.position="absolute",v.style.left="0px",v.style.width="100%",v.style.border="none",l.appendChild(v),e.groups.background=v}if(e.groups.background.style.top=n.axis.top+"px",e.groups.background.style.height=n.axis.height+"px",!e.groups.line){var b=document.createElement("DIV");b.className="timeline-axis",b.style.position="absolute",b.style.left="0px",b.style.width="100%",b.style.height="0px",l.appendChild(b),e.groups.line=b}if(e.groups.line.style.top=n.axis.line+"px",e.groups.frame&&a.length){var x=[];if(links.imageloader.filterImageUrls(e.groups.frame,x),x.length){links.imageloader.loadAll(x,(function(){t.render()}),!1)}}},links.Timeline.prototype.repaintCurrentTime=function(){var e=this.options,t=this.dom,i=this.size;if(e.showCurrentTime){if(!t.currentTime){var n=document.createElement("DIV");n.className="timeline-currenttime",n.style.position="absolute",n.style.top="0px",n.style.height="100%",t.contentTimelines.appendChild(n),t.currentTime=n}var a=new Date,s=new Date(a.valueOf()+this.clientTimeOffset),o=this.timeToScreen(s),r=o>-i.contentWidth&&o<2*i.contentWidth;t.currentTime.style.display=r?"":"none",t.currentTime.style.left=o+"px",t.currentTime.title="Current time: "+s,null!=this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer);var l=this,c=1/this.conversion.factor/2;30>c&&(c=30),this.currentTimeTimer=setTimeout((function(){l.repaintCurrentTime()}),c)}else t.currentTime&&(t.contentTimelines.removeChild(t.currentTime),delete t.currentTime)},links.Timeline.prototype.repaintCustomTime=function(){var e=this.options,t=this.dom,i=this.size;if(e.showCustomTime){if(!t.customTime){var n=document.createElement("DIV");n.className="timeline-customtime",n.style.position="absolute",n.style.top="0px",n.style.height="100%";var a=document.createElement("DIV");a.style.position="relative",a.style.top="0px",a.style.left="-10px",a.style.height="100%",a.style.width="20px",n.appendChild(a),t.contentTimelines.appendChild(n),t.customTime=n,this.customTime=new Date}var s=this.timeToScreen(this.customTime),o=s>-i.contentWidth&&s<2*i.contentWidth;t.customTime.style.display=o?"":"none",t.customTime.style.left=s+"px",t.customTime.title="Time: "+this.customTime}else t.customTime&&(t.contentTimelines.removeChild(t.customTime),delete t.customTime)},links.Timeline.prototype.repaintDeleteButton=function(){var e=this.dom,t=e.items.frame,i=e.items.deleteButton;i||((i=document.createElement("DIV")).className="timeline-navigation-delete",i.style.position="absolute",t.appendChild(i),e.items.deleteButton=i);var n=this.selection&&void 0!==this.selection.index?this.selection.index:-1,a=this.selection&&void 0!==this.selection.index?this.items[n]:void 0;if(a&&a.rendered&&this.isEditable(a)){var s=a.getRight(this),o=a.top;i.style.left=s+"px",i.style.top=o+"px",i.style.display="",t.removeChild(i),t.appendChild(i)}else i.style.display="none"},links.Timeline.prototype.repaintDragAreas=function(){var e=this.options,t=this.dom,i=this.dom.items.frame,n=t.items.dragLeft;n||((n=document.createElement("DIV")).className="timeline-event-range-drag-left",n.style.position="absolute",i.appendChild(n),t.items.dragLeft=n);var a=t.items.dragRight;a||((a=document.createElement("DIV")).className="timeline-event-range-drag-right",a.style.position="absolute",i.appendChild(a),t.items.dragRight=a);var s=this.selection&&void 0!==this.selection.index?this.selection.index:-1,o=this.selection&&void 0!==this.selection.index?this.items[s]:void 0;if(o&&o.rendered&&this.isEditable(o)&&(o instanceof links.Timeline.ItemRange||o instanceof links.Timeline.ItemFloatingRange)){var r=o.getLeft(this),l=o.getRight(this),c=o.top,d=o.height;n.style.left=r+"px",n.style.top=c+"px",n.style.width=e.dragAreaWidth+"px",n.style.height=d+"px",n.style.display="",i.removeChild(n),i.appendChild(n),a.style.left=l-e.dragAreaWidth+"px",a.style.top=c+"px",a.style.width=e.dragAreaWidth+"px",a.style.height=d+"px",a.style.display="",i.removeChild(a),i.appendChild(a)}else n.style.display="none",a.style.display="none"},links.Timeline.prototype.repaintNavigation=function(){var e=this,t=this.options,i=this.dom,n=i.frame,a=i.navBar;if(!a){var s=t.showButtonNew&&t.editable,o=t.showNavigation&&(t.zoomable||t.moveable);if((o||s)&&((a=document.createElement("DIV")).style.position="absolute",a.className="timeline-navigation ui-widget ui-state-highlight ui-corner-all",t.groupsOnRight?a.style.left="10px":a.style.right="10px",t.axisOnTop?a.style.bottom="10px":a.style.top="10px",i.navBar=a,n.appendChild(a)),s){a.addButton=document.createElement("DIV"),a.addButton.className="timeline-navigation-new",a.addButton.title=t.CREATE_NEW_EVENT;var r=document.createElement("SPAN");r.className="ui-icon ui-icon-circle-plus",a.addButton.appendChild(r);links.Timeline.addEventListener(a.addButton,"mousedown",(function(i){links.Timeline.preventDefault(i),links.Timeline.stopPropagation(i);var n=e.size.contentWidth/2,a=e.screenToTime(n);t.snapEvents&&e.step.snap(a);var s=t.NEW,o=e.groups.length?e.groups[0].content:void 0;e.addItem({start:a,content:s,group:o},!0);var r=e.items.length-1;e.selectItem(r),e.applyAdd=!0,e.trigger("add"),e.applyAdd?(e.render({animate:!1}),e.selectItem(r)):e.deleteItem(r)})),a.appendChild(a.addButton)}if(s&&o&&links.Timeline.addClassName(a.addButton,"timeline-navigation-new-line"),o){if(t.zoomable){a.zoomInButton=document.createElement("DIV"),a.zoomInButton.className="timeline-navigation-zoom-in",a.zoomInButton.title=this.options.ZOOM_IN;var l=document.createElement("SPAN");l.className="ui-icon ui-icon-circle-zoomin",a.zoomInButton.appendChild(l);links.Timeline.addEventListener(a.zoomInButton,"mousedown",(function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.zoom(.4),e.trigger("rangechange"),e.trigger("rangechanged")})),a.appendChild(a.zoomInButton),a.zoomOutButton=document.createElement("DIV"),a.zoomOutButton.className="timeline-navigation-zoom-out",a.zoomOutButton.title=this.options.ZOOM_OUT;var c=document.createElement("SPAN");c.className="ui-icon ui-icon-circle-zoomout",a.zoomOutButton.appendChild(c);links.Timeline.addEventListener(a.zoomOutButton,"mousedown",(function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.zoom(-.4),e.trigger("rangechange"),e.trigger("rangechanged")})),a.appendChild(a.zoomOutButton)}if(t.moveable){a.moveLeftButton=document.createElement("DIV"),a.moveLeftButton.className="timeline-navigation-move-left",a.moveLeftButton.title=this.options.MOVE_LEFT;var d=document.createElement("SPAN");d.className="ui-icon ui-icon-circle-arrow-w",a.moveLeftButton.appendChild(d);links.Timeline.addEventListener(a.moveLeftButton,"mousedown",(function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.move(-.2),e.trigger("rangechange"),e.trigger("rangechanged")})),a.appendChild(a.moveLeftButton),a.moveRightButton=document.createElement("DIV"),a.moveRightButton.className="timeline-navigation-move-right",a.moveRightButton.title=this.options.MOVE_RIGHT;var h=document.createElement("SPAN");h.className="ui-icon ui-icon-circle-arrow-e",a.moveRightButton.appendChild(h);links.Timeline.addEventListener(a.moveRightButton,"mousedown",(function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.move(.2),e.trigger("rangechange"),e.trigger("rangechanged")})),a.appendChild(a.moveRightButton)}}}},links.Timeline.prototype.setCurrentTime=function(e){var t=new Date;this.clientTimeOffset=e.valueOf()-t.valueOf(),this.repaintCurrentTime()},links.Timeline.prototype.getCurrentTime=function(){var e=new Date;return new Date(e.valueOf()+this.clientTimeOffset)},links.Timeline.prototype.setCustomTime=function(e){this.customTime=new Date(e.valueOf()),this.repaintCustomTime()},links.Timeline.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},links.Timeline.prototype.setScale=function(e,t){this.step.setScale(e,t),this.render()},links.Timeline.prototype.setAutoScale=function(e){this.step.setAutoScale(e),this.render()},links.Timeline.prototype.redraw=function(){this.setData(this.data)},links.Timeline.prototype.checkResize=function(){this.render()},links.Timeline.prototype.isEditable=function(e){return!!e&&(null!=e.editable?e.editable:this.options.editable)},links.Timeline.prototype.recalcConversion=function(){this.conversion.offset=this.start.valueOf(),this.conversion.factor=this.size.contentWidth/(this.end.valueOf()-this.start.valueOf())},links.Timeline.prototype.screenToTime=function(e){var t=this.conversion;return new Date(e/t.factor+t.offset)},links.Timeline.prototype.timeToScreen=function(e){var t=this.conversion;return(e.valueOf()-t.offset)*t.factor},links.Timeline.prototype.onTouchStart=function(e){var t=this.eventParams,i=this;if(!t.touchDown){t.touchDown=!0,t.zoomed=!1,this.onMouseDown(e),t.onTouchMove||(t.onTouchMove=function(e){i.onTouchMove(e)},links.Timeline.addEventListener(document,"touchmove",t.onTouchMove)),t.onTouchEnd||(t.onTouchEnd=function(e){i.onTouchEnd(e)},links.Timeline.addEventListener(document,"touchend",t.onTouchEnd));var n=links.Timeline.getTarget(e),a=this.getItemIndex(n);t.doubleTapStartPrev=t.doubleTapStart,t.doubleTapStart=(new Date).valueOf(),t.doubleTapItemPrev=t.doubleTapItem,t.doubleTapItem=a,links.Timeline.preventDefault(e)}},links.Timeline.prototype.onTouchMove=function(e){var t=this.eventParams;if(e.scale&&1!==e.scale&&(t.zoomed=!0),t.zoomed){if(this.options.zoomable){t.zoomed=!0;var i=e.scale,n=t.end.valueOf()-t.start.valueOf(),a=n/i-n,s=new Date(parseInt(t.start.valueOf()-a/2)),o=new Date(parseInt(t.end.valueOf()+a/2));this.setVisibleChartRange(s,o),this.trigger("rangechange")}}else this.onMouseMove(e);links.Timeline.preventDefault(e)},links.Timeline.prototype.onTouchEnd=function(e){var t=this.eventParams;t.touchDown=!1,t.zoomed&&this.trigger("rangechanged"),t.onTouchMove&&(links.Timeline.removeEventListener(document,"touchmove",t.onTouchMove),delete t.onTouchMove),t.onTouchEnd&&(links.Timeline.removeEventListener(document,"touchend",t.onTouchEnd),delete t.onTouchEnd),this.onMouseUp(e);var i=(new Date).valueOf(),n=links.Timeline.getTarget(e);this.getItemIndex(n),t.doubleTapStartPrev&&i-t.doubleTapStartPrev<500&&t.doubleTapItem==t.doubleTapItemPrev&&(t.touchDown=!0,this.onDblClick(e),t.touchDown=!1),links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseDown=function(e){e=e||window.event;var t=this.eventParams,i=this.options,n=this.dom;if((e.which?1==e.which:1==e.button)||t.touchDown){t.mouseX=links.Timeline.getPageX(e),t.mouseY=links.Timeline.getPageY(e),t.frameLeft=links.Timeline.getAbsoluteLeft(this.dom.content),t.frameTop=links.Timeline.getAbsoluteTop(this.dom.content),t.previousLeft=0,t.previousOffset=0,t.moved=!1,t.start=new Date(this.start.valueOf()),t.end=new Date(this.end.valueOf()),t.target=links.Timeline.getTarget(e);var a=n.items&&n.items.dragLeft?n.items.dragLeft:void 0,s=n.items&&n.items.dragRight?n.items.dragRight:void 0;if(t.itemDragLeft=t.target===a,t.itemDragRight=t.target===s,t.itemDragLeft||t.itemDragRight?(t.itemIndex=this.selection&&void 0!==this.selection.index?this.selection.index:void 0,delete t.clusterIndex):(t.itemIndex=this.getItemIndex(t.target),t.clusterIndex=this.getClusterIndex(t.target)),t.customTime=t.target===n.customTime||t.target.parentNode===n.customTime?this.customTime:void 0,t.addItem=i.editable&&e.ctrlKey,t.addItem){var o=t.mouseX-t.frameLeft,r=t.mouseY-t.frameTop,l=this.screenToTime(o);i.snapEvents&&this.step.snap(l);var c=new Date(l.valueOf()),d=i.NEW,h=this.getGroupFromHeight(r);this.addItem({start:l,end:c,content:d,group:this.getGroupName(h)}),t.itemIndex=this.items.length-1,delete t.clusterIndex,this.selectItem(t.itemIndex),t.itemDragRight=!0}var u=this.items[t.itemIndex],p=this.isSelected(t.itemIndex);if(t.editItem=p&&this.isEditable(u),t.editItem?(t.itemStart=u.start,t.itemEnd=u.end,t.itemGroup=u.group,t.itemLeft=u.getLeft(this),t.itemRight=u.getRight(this)):this.dom.frame.style.cursor="move",!t.touchDown){var f=this;t.onMouseMove||(t.onMouseMove=function(e){f.onMouseMove(e)},links.Timeline.addEventListener(document,"mousemove",t.onMouseMove)),t.onMouseUp||(t.onMouseUp=function(e){f.onMouseUp(e)},links.Timeline.addEventListener(document,"mouseup",t.onMouseUp)),links.Timeline.preventDefault(e)}}},links.Timeline.prototype.onMouseMove=function(e){e=e||window.event;var t=this.eventParams,i=this.size,n=this.dom,a=this.options,s=links.Timeline.getPageX(e),o=links.Timeline.getPageY(e);null==t.mouseX&&(t.mouseX=s),null==t.mouseY&&(t.mouseY=o);var r=s-t.mouseX,l=o-t.mouseY;if(Math.abs(l)>=1&&(newy=$.mobile.window.scrollTop(),$.mobile.window.scrollTop(newy-l)),Math.abs(r)>=1&&(t.moved=!0),t.customTime){var c=this.timeToScreen(t.customTime)+r;this.customTime=this.screenToTime(c),this.repaintCustomTime(),this.trigger("timechange")}else if(t.editItem){var d,h,u=this.items[t.itemIndex];t.itemDragLeft&&a.timeChangeable?(d=t.itemLeft+r,h=t.itemRight,u.start=this.screenToTime(d),a.snapEvents&&(this.step.snap(u.start),d=this.timeToScreen(u.start)),d>h&&(d=h,u.start=this.screenToTime(d)),this.trigger("change")):t.itemDragRight&&a.timeChangeable?(d=t.itemLeft,h=t.itemRight+r,u.end=this.screenToTime(h),a.snapEvents&&(this.step.snap(u.end),h=this.timeToScreen(u.end)),d>h&&(h=d,u.end=this.screenToTime(h)),this.trigger("change")):a.timeChangeable&&(d=t.itemLeft+r,u.start=this.screenToTime(d),a.snapEvents&&(this.step.snap(u.start),d=this.timeToScreen(u.start)),u.end&&(h=d+(t.itemRight-t.itemLeft),u.end=this.screenToTime(h)),this.trigger("change")),u.setPosition(d,h);var p=t.itemDragLeft||t.itemDragRight;if(this.groups.length&&!p){var f=o-t.frameTop,g=this.getGroupFromHeight(f);if(a.groupsChangeable&&u.group!==g){var m=this.items.indexOf(u);this.changeItem(m,{group:this.getGroupName(g)})}else this.repaintDeleteButton(),this.repaintDragAreas()}else this.render()}else if(a.moveable){var v=t.end.valueOf()-t.start.valueOf(),b=Math.round(-r/i.contentWidth*v),x=new Date(t.start.valueOf()+b),y=new Date(t.end.valueOf()+b);this.applyRange(x,y);var w=this.start.valueOf()-x.valueOf();w&&(b+=w),this.recalcConversion();var k=t.previousLeft||0,S=parseFloat(n.items.frame.style.left)||0,C=(t.previousOffset||0)+(S-k),_=-b/v*i.contentWidth+C;n.items.frame.style.left=_+"px",t.previousOffset=C,t.previousLeft=parseFloat(n.items.frame.style.left)||_,this.repaintCurrentTime(),this.repaintCustomTime(),this.repaintAxis(),this.trigger("rangechange")}links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseUp=function(e){var t=this.eventParams,i=this.options;if(e=e||window.event,this.dom.frame.style.cursor="auto",t.onMouseMove&&(links.Timeline.removeEventListener(document,"mousemove",t.onMouseMove),delete t.onMouseMove),t.onMouseUp&&(links.Timeline.removeEventListener(document,"mouseup",t.onMouseUp),delete t.onMouseUp),t.customTime)this.trigger("timechanged");else if(t.editItem){var n=this.items[t.itemIndex];if(t.moved||t.addItem){if(this.applyChange=!0,this.applyAdd=!0,this.updateData(t.itemIndex,{start:n.start,end:n.end}),this.trigger(t.addItem?"add":"changed"),n=this.items[t.itemIndex],t.addItem)this.applyAdd?this.updateData(t.itemIndex,{start:n.start,end:n.end,content:n.content,group:this.getGroupName(n.group)}):this.deleteItem(t.itemIndex);else if(this.applyChange)this.updateData(t.itemIndex,{start:n.start,end:n.end});else{delete this.applyChange,delete this.applyAdd,(n=this.items[t.itemIndex]).dom,n.start=t.itemStart,n.end=t.itemEnd,n.group=t.itemGroup,n.setPosition(t.itemLeft,t.itemRight),this.updateData(t.itemIndex,{start:t.itemStart,end:t.itemEnd})}this.options.cluster&&this.clusterGenerator.updateData(),this.render()}}else t.moved||t.zoomed?(this.render(),(t.moved&&i.moveable||t.zoomed&&i.zoomable)&&this.trigger("rangechanged")):t.target===this.dom.items.deleteButton?this.selection&&void 0!==this.selection.index&&this.confirmDeleteItem(this.selection.index):i.selectable&&(null!=t.itemIndex?this.isSelected(t.itemIndex)||(this.selectItem(t.itemIndex),this.trigger("select")):null!=t.clusterIndex?(this.selectCluster(t.clusterIndex),this.trigger("select")):i.unselectable&&(this.unselectItem(),this.trigger("select")))},links.Timeline.prototype.onDblClick=function(e){var t=this.eventParams,i=this.options,n=this.dom;if(this.size,e=e||window.event,null!=t.itemIndex){var a=this.items[t.itemIndex];a&&this.isEditable(a)&&this.trigger("edit")}else if(i.editable){t.mouseX=links.Timeline.getPageX(e),t.mouseY=links.Timeline.getPageY(e);var s=t.mouseX-links.Timeline.getAbsoluteLeft(n.content),o=t.mouseY-links.Timeline.getAbsoluteTop(n.content),r=this.screenToTime(s);i.snapEvents&&this.step.snap(r);var l=i.NEW,c=this.getGroupFromHeight(o);this.addItem({start:r,content:l,group:this.getGroupName(c)},!0),t.itemIndex=this.items.length-1,this.selectItem(t.itemIndex),this.applyAdd=!0,this.trigger("add"),this.applyAdd?(this.render({animate:!1}),this.selectItem(t.itemIndex)):this.deleteItem(t.itemIndex)}links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseWheel=function(e){if(this.options.zoomable){e||(e=window.event);var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i=this;e.shiftKey?(i.move(-.2*t),i.trigger("rangechange"),i.trigger("rangechanged")):function(){var n=t/5,a=links.Timeline.getAbsoluteLeft(i.dom.content),s=links.Timeline.getPageX(e),o=null!=s&&null!=a?i.screenToTime(s-a):void 0;i.zoom(n,o),i.trigger("rangechange"),i.trigger("rangechanged")}()}links.Timeline.preventDefault(e)}},links.Timeline.prototype.zoom=function(e,t){null==t&&(t=new Date((this.start.valueOf()+this.end.valueOf())/2)),e>=1&&(e=.9),-1>=e&&(e=-.9),0>e&&(e/=1+e);var i=this.start.valueOf()-t,n=this.end.valueOf()-t,a=new Date(this.start.valueOf()-i*e),s=new Date(this.end.valueOf()-n*e),o=s.valueOf()-a.valueOf(),r=Number(this.options.zoomMin)||10;10>r&&(r=10),o>=r&&(this.applyRange(a,s,t),this.render({animate:this.options.animate&&this.options.animateZoom}))},links.Timeline.prototype.move=function(e){var t=this.end.valueOf()-this.start.valueOf(),i=new Date(this.start.valueOf()+t*e),n=new Date(this.end.valueOf()+t*e);this.applyRange(i,n),this.render()},links.Timeline.prototype.applyRange=function(e,t,i){var n=e.valueOf(),a=t.valueOf(),s=a-n,o=this.options,r=31536e6,l=Number(o.zoomMin)||10;10>l&&(l=10);var c=Number(o.zoomMax)||1e4*r;c>1e4*r&&(c=1e4*r),l>c&&(c=l);var d=o.min?o.min.valueOf():void 0,h=o.max?o.max.valueOf():void 0;if(null!=d&&null!=h){if(d>=h){h=d+864e5}c>h-d&&(c=h-d),l>h-d&&(l=h-d)}if(n>=a&&(a+=864e5),l>s){var u=l-s,p=i?(i.valueOf()-n)/s:.5;n-=Math.round(u*p),a+=Math.round(u*(1-p))}if(s>c){var u=s-c;p=i?(i.valueOf()-n)/s:.5;n+=Math.round(u*p),a-=Math.round(u*(1-p))}null!=d&&(0>(u=n-d)&&(n-=u,a-=u));null!=h&&(0>(u=h-a)&&(n+=u,a+=u));this.start=new Date(n),this.end=new Date(a)},links.Timeline.prototype.confirmDeleteItem=function(e){this.applyDelete=!0,this.isSelected(e)||this.selectItem(e),this.trigger("delete"),this.applyDelete&&this.deleteItem(e),delete this.applyDelete},links.Timeline.prototype.deleteItem=function(e,t){if(e>=this.items.length)throw"Cannot delete row, index out of range";this.selection&&void 0!==this.selection.index&&(this.selection.index==e?this.unselectItem():this.selection.index>e&&this.selection.index--);var i=this.items.splice(e,1)[0];if(this.renderQueue.hide.push(i),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRow(e);else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(e,1)}this.options.cluster&&this.clusterGenerator.updateData(),t||this.render()},links.Timeline.prototype.deleteAllItems=function(){if(this.unselectItem(),this.clearItems(),this.deleteGroups(),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRows(0,this.data.getNumberOfRows());else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(0,this.data.length)}this.options.cluster&&this.clusterGenerator.updateData(),this.render()},links.Timeline.prototype.getGroupFromHeight=function(e){var t,i,n=this.groups;if(n.length){if(this.options.axisOnTop){for(t=n.length-1;t>=0;t--)if(e>(i=n[t]).top)return i}else for(t=0;t<n.length;t++)if(e>(i=n[t]).top)return i;return i}},links.Timeline.Item=function(e,t){if(e&&(this.start=e.start,this.end=e.end,this.content=e.content,this.className=e.className,this.editable=e.editable,this.group=e.group,this.type=e.type),this.top=0,this.left=0,this.width=0,this.height=0,this.lineWidth=0,this.dotWidth=0,this.dotHeight=0,this.rendered=!1,t)for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])},links.Timeline.Item.prototype.reflow=function(){return!1},links.Timeline.Item.prototype.getImageUrls=function(e){this.dom&&links.imageloader.filterImageUrls(this.dom,e)},links.Timeline.Item.prototype.select=function(){},links.Timeline.Item.prototype.unselect=function(){},links.Timeline.Item.prototype.createDOM=function(){},links.Timeline.Item.prototype.showDOM=function(){},links.Timeline.Item.prototype.hideDOM=function(){},links.Timeline.Item.prototype.updateDOM=function(){},links.Timeline.Item.prototype.updatePosition=function(){},links.Timeline.Item.prototype.isRendered=function(){return this.rendered},links.Timeline.Item.prototype.isVisible=function(){return!1},links.Timeline.Item.prototype.setPosition=function(){},links.Timeline.Item.prototype.getLeft=function(){return 0},links.Timeline.Item.prototype.getRight=function(){return 0},links.Timeline.Item.prototype.getWidth=function(){return this.width||0},links.Timeline.ItemBox=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemBox.prototype=new links.Timeline.Item,links.Timeline.ItemBox.prototype.reflow=function(){var e=this.dom,t=e.dot.offsetHeight,i=e.dot.offsetWidth,n=e.line.offsetWidth,a=this.dotHeight!=t||this.dotWidth!=i||this.lineWidth!=n;return this.dotHeight=t,this.dotWidth=i,this.lineWidth=n,a},links.Timeline.ItemBox.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(e.line,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(e.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(e.line,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(e.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute",e.style.left=this.left+"px",e.style.top=this.top+"px";var t=document.createElement("DIV");t.className="timeline-event-content",t.innerHTML=this.content,e.appendChild(t);var i=document.createElement("DIV");i.style.position="absolute",i.style.width="0px",e.line=i;var n=document.createElement("DIV");return n.style.position="absolute",n.style.width="0px",n.style.height="0px",e.dot=n,this.dom=e,this.updateDOM(),e},links.Timeline.ItemBox.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),e.insertBefore(t.line,e.firstChild),e.appendChild(t.dot),this.rendered=!0)},links.Timeline.ItemBox.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),e.line&&e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot&&e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.rendered=!1)},links.Timeline.ItemBox.prototype.updateDOM=function(){var e=this.dom;if(e){var t=e.line,i=e.dot;e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-box ui-widget ui-state-default",t.className="timeline-event timeline-event-line ui-widget ui-state-default",i.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(t,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(i,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(e,this.className),links.Timeline.addClassName(t,this.className),links.Timeline.addClassName(i,this.className))}},links.Timeline.ItemBox.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.timeToScreen(this.start),n=e.options.axisOnTop,a=e.size.axis.top,s=e.size.axis.height,o=e.options.box&&e.options.box.align?e.options.box.align:void 0;t.style.top=this.top+"px",t.style.left="right"==o?i-this.width+"px":"left"==o?i+"px":i-this.width/2+"px";var r=t.line,l=t.dot;r.style.left=i-this.lineWidth/2+"px",l.style.left=i-this.dotWidth/2+"px",n?(r.style.top=s+"px",r.style.height=Math.max(this.top-s,0)+"px",l.style.top=s-this.dotHeight/2+"px"):(r.style.top=this.top+this.height+"px",r.style.height=Math.max(a-this.top-this.height,0)+"px",l.style.top=a-this.dotHeight/2+"px")}},links.Timeline.ItemBox.prototype.isVisible=function(e,t){return!this.cluster&&(this.start>e&&this.start<t)},links.Timeline.ItemBox.prototype.setPosition=function(e){var t=this.dom;t.style.left=e-this.width/2+"px",t.line.style.left=e-this.lineWidth/2+"px",t.dot.style.left=e-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,t.style.top=this.top+"px")},links.Timeline.ItemBox.prototype.getLeft=function(e){var t=e.options.box&&e.options.box.align?e.options.box.align:void 0;return e.timeToScreen(this.start)-("right"==t?width:this.width/2)},links.Timeline.ItemBox.prototype.getRight=function(e){var t=e.options.box&&e.options.box.align?e.options.box.align:void 0,i=e.timeToScreen(this.start);return"right"==t?i:"left"==t?i+this.width:i+this.width/2},links.Timeline.ItemRange=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemRange.prototype=new links.Timeline.Item,links.Timeline.ItemRange.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");return t.className="timeline-event-content",e.appendChild(t),this.dom=e,this.updateDOM(),e},links.Timeline.ItemRange.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemRange.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemRange.prototype.updateDOM=function(){var e=this.dom;e&&(e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(e,this.className))},links.Timeline.ItemRange.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.size.contentWidth,n=e.timeToScreen(this.start),a=e.timeToScreen(this.end);-i>n&&(n=-i),a>2*i&&(a=2*i),t.style.top=this.top+"px",t.style.left=n+"px",t.style.width=Math.max(a-n,1)+"px"}},links.Timeline.ItemRange.prototype.isVisible=function(e,t){return!this.cluster&&(this.end>e&&this.start<t)},links.Timeline.ItemRange.prototype.setPosition=function(e,t){var i=this.dom;i.style.left=e+"px",i.style.width=t-e+"px",this.group&&(this.top=this.group.top,i.style.top=this.top+"px")},links.Timeline.ItemRange.prototype.getLeft=function(e){return e.timeToScreen(this.start)},links.Timeline.ItemRange.prototype.getRight=function(e){return e.timeToScreen(this.end)},links.Timeline.ItemRange.prototype.getWidth=function(e){return e.timeToScreen(this.end)-e.timeToScreen(this.start)},links.Timeline.ItemFloatingRange=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemFloatingRange.prototype=new links.Timeline.Item,links.Timeline.ItemFloatingRange.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");return t.className="timeline-event-content",e.appendChild(t),this.dom=e,this.updateDOM(),e},links.Timeline.ItemFloatingRange.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemFloatingRange.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemFloatingRange.prototype.updateDOM=function(){var e=this.dom;e&&(e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(e,this.className))},links.Timeline.ItemFloatingRange.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.size.contentWidth,n=this.getLeft(e),a=this.getRight(e);-i>n&&(n=-i),a>2*i&&(a=2*i),t.style.top=this.top+"px",t.style.left=n+"px",t.style.width=Math.max(a-n,1)+"px"}},links.Timeline.ItemFloatingRange.prototype.isVisible=function(e,t){return!this.cluster&&(this.end&&this.start?this.end>e&&this.start<t:this.start?this.start<t:!this.end||this.end>e)},links.Timeline.ItemFloatingRange.prototype.setPosition=function(e,t){var i=this.dom;i.style.left=e+"px",i.style.width=t-e+"px",this.group&&(this.top=this.group.top,i.style.top=this.top+"px")},links.Timeline.ItemFloatingRange.prototype.getLeft=function(e){return this.start?e.timeToScreen(this.start):0},links.Timeline.ItemFloatingRange.prototype.getRight=function(e){return this.end?e.timeToScreen(this.end):e.size.contentWidth},links.Timeline.ItemFloatingRange.prototype.getWidth=function(e){return this.getRight(e)-this.getLeft(e)},links.Timeline.ItemDot=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemDot.prototype=new links.Timeline.Item,links.Timeline.ItemDot.prototype.reflow=function(){var e=this.dom,t=e.dot.offsetHeight,i=e.dot.offsetWidth,n=e.content.offsetHeight,a=this.dotHeight!=t||this.dotWidth!=i||this.contentHeight!=n;return this.dotHeight=t,this.dotWidth=i,this.contentHeight=n,a},links.Timeline.ItemDot.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");t.className="timeline-event-content",e.appendChild(t);var i=document.createElement("DIV");return i.style.position="absolute",i.style.width="0px",i.style.height="0px",e.appendChild(i),e.content=t,e.dot=i,this.dom=e,this.updateDOM(),e},links.Timeline.ItemDot.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemDot.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemDot.prototype.updateDOM=function(){if(this.dom){var e=this.dom,t=e.dot;e.firstChild.innerHTML=this.content,e.className="timeline-event-dot-container",t.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(t,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(e,this.className),links.Timeline.addClassName(t,this.className))}},links.Timeline.ItemDot.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.timeToScreen(this.start);t.style.top=this.top+"px",t.style.left=i-this.dotWidth/2+"px",t.content.style.marginLeft=1.5*this.dotWidth+"px",t.dot.style.top=(this.height-this.dotHeight)/2+"px"}},links.Timeline.ItemDot.prototype.isVisible=function(e,t){return!this.cluster&&(this.start>e&&this.start<t)},links.Timeline.ItemDot.prototype.setPosition=function(e){var t=this.dom;t.style.left=e-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,t.style.top=this.top+"px")},links.Timeline.ItemDot.prototype.getLeft=function(e){return e.timeToScreen(this.start)},links.Timeline.ItemDot.prototype.getRight=function(e){return e.timeToScreen(this.start)+this.width},links.Timeline.prototype.getItem=function(e){if(e>=this.items.length)throw"Cannot get item, index out of range";var t,i=this.data;if(google&&google.visualization&&i instanceof google.visualization.DataTable){var n=links.Timeline.mapColumnIds(i);for(var a in t={},n)n.hasOwnProperty(a)&&(t[a]=this.data.getValue(e,n[a]))}else{if(!links.Timeline.isArray(this.data))throw"Unknown data type. DataTable or Array expected.";t=links.Timeline.clone(this.data[e])}var s=this.items[e];return t.start=new Date(s.start.valueOf()),s.end&&(t.end=new Date(s.end.valueOf())),t.content=s.content,s.group&&(t.group=this.getGroupName(s.group)),s.className&&(t.className=s.className),void 0!==s.editable&&(t.editable=s.editable),s.type&&(t.type=s.type),t},links.Timeline.prototype.getCluster=function(e){if(e>=this.clusters.length)throw"Cannot get cluster, index out of range";var t={},i=this.clusters[e],n=i.items;t.start=new Date(i.start.valueOf()),i.type&&(t.type=i.type),t.items=[];for(var a=0;a<n.length;a++)for(var s=0;s<this.items.length;s++)if(this.items[s]==n[a]){t.items.push(this.getItem(s));break}return t},links.Timeline.prototype.addItem=function(e,t){var i=[e];this.addItems(i,t)},links.Timeline.prototype.addItems=function(e,t){var i=this,n=this.items;e.forEach((function(e){var t=n.length;n.push(i.createItem(e)),i.updateData(t,e)})),this.options.cluster&&this.clusterGenerator.updateData(),t||this.render({animate:!1})},links.Timeline.prototype.createItem=function(e){var t=e.type||(e.end?"range":this.options.style),i=links.Timeline.clone(e);i.type=t,i.group=this.getGroup(e.group);var n,a=this.options;return n=a.axisOnTop?this.size.axis.height+a.eventMarginAxis+a.eventMargin/2:this.size.contentHeight-a.eventMarginAxis-a.eventMargin/2,t in this.itemTypes?new this.itemTypes[t](i,{top:n}):(console.log('ERROR: Unknown event type "'+t+'"'),new links.Timeline.Item(i,{top:n}))},links.Timeline.prototype.changeItem=function(e,t,i){var n=this.items[e];if(!n)throw"Cannot change item, index out of range";var a=this.createItem({start:t.hasOwnProperty("start")?t.start:n.start,end:t.hasOwnProperty("end")?t.end:n.end,content:t.hasOwnProperty("content")?t.content:n.content,group:t.hasOwnProperty("group")?t.group:this.getGroupName(n.group),className:t.hasOwnProperty("className")?t.className:n.className,editable:t.hasOwnProperty("editable")?t.editable:n.editable,type:t.hasOwnProperty("type")?t.type:n.type});this.items[e]=a,this.renderQueue.hide.push(n),this.renderQueue.show.push(a),this.updateData(e,t),this.options.cluster&&this.clusterGenerator.updateData(),i||(this.render({animate:!1}),this.selection&&this.selection.index==e&&a.select())},links.Timeline.prototype.deleteGroups=function(){this.groups=[],this.groupIndexes={}},links.Timeline.prototype.getGroup=function(e){var t=this.groups,i=this.groupIndexes,n=void 0,a=i[e];if(null==a&&null!=e){n={content:e,labelTop:0,lineTop:0},t.push(n),1==this.options.groupsOrder?t=t.sort((function(e,t){return e.content>t.content?1:e.content<t.content?-1:0})):"function"==typeof this.options.groupsOrder&&(t=t.sort(this.options.groupsOrder));for(var s=0,o=t.length;o>s;s++)i[t[s].content]=s}else n=t[a];return n},links.Timeline.prototype.getGroupName=function(e){return e?e.content:void 0},links.Timeline.prototype.cancelChange=function(){this.applyChange=!1},links.Timeline.prototype.cancelDelete=function(){this.applyDelete=!1},links.Timeline.prototype.cancelAdd=function(){this.applyAdd=!1},links.Timeline.prototype.setSelection=function(e){if(null!=e&&e.length>0){if(null!=e[0].row){var t=e[0].row;if(this.items[t]){var i=this.items[t];this.selectItem(t);var n,a=i.start,s=i.end;n=null!=s?(s.valueOf()+a.valueOf())/2:a.valueOf();var o=this.end.valueOf()-this.start.valueOf(),r=new Date(n-o/2),l=new Date(n+o/2);return this.setVisibleChartRange(r,l),!0}}}else this.unselectItem();return!1},links.Timeline.prototype.getSelection=function(){var e=[];return this.selection&&e.push(void 0!==this.selection.index?{row:this.selection.index}:{cluster:this.selection.cluster}),e},links.Timeline.prototype.selectItem=function(e){if(this.unselectItem(),this.selection=void 0,null!=this.items[e]){var t=this.items[e];t.dom,this.selection={index:e},t&&t.dom&&(this.isEditable(t)&&(t.dom.style.cursor="move"),t.select()),this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.selectCluster=function(e){this.unselectItem(),this.selection=void 0,null!=this.clusters[e]&&(this.selection={cluster:e},this.repaintDeleteButton(),this.repaintDragAreas())},links.Timeline.prototype.isSelected=function(e){return this.selection&&this.selection.index==e},links.Timeline.prototype.unselectItem=function(){if(this.selection&&void 0!==this.selection.index){var e=this.items[this.selection.index];if(e&&e.dom)e.dom.style.cursor="",e.unselect();this.selection=void 0,this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.stackItems=function(e){null==e&&(e=!1);var t=this.stack;if(t||(t={},this.stack=t),t.sortedItems=this.stackOrder(this.renderedItems),t.finalItems=this.stackCalculateFinal(t.sortedItems),e||t.timer){var i=this,n=function(){var e=i.stackMoveOneStep(t.sortedItems,t.finalItems);i.repaint(),e?delete t.timer:t.timer=setTimeout(n,30)};t.timer||(t.timer=setTimeout(n,30))}else this.stackMoveToFinal(t.sortedItems,t.finalItems)},links.Timeline.prototype.stackCancelAnimation=function(){this.stack&&this.stack.timer&&(clearTimeout(this.stack.timer),delete this.stack.timer)},links.Timeline.prototype.getItemsByGroup=function(e){for(var t={},i=0;i<e.length;++i){var n=e[i],a="undefined";n.group&&(a=n.group.content?n.group.content:n.group),t[a]||(t[a]=[]),t[a].push(n)}return t},links.Timeline.prototype.stackOrder=function(e){var t=e.concat([]),i=this.options.customStackOrder&&"function"==typeof this.options.customStackOrder?this.options.customStackOrder:function(e,t){return(e instanceof links.Timeline.ItemRange||e instanceof links.Timeline.ItemFloatingRange)&&!(t instanceof links.Timeline.ItemRange||t instanceof links.Timeline.ItemFloatingRange)?-1:e instanceof links.Timeline.ItemRange||e instanceof links.Timeline.ItemFloatingRange||!(t instanceof links.Timeline.ItemRange||t instanceof links.Timeline.ItemFloatingRange)?e.left-t.left:1};return t.sort(i),t},links.Timeline.prototype.stackCalculateFinal=function(e){var t,i=this.size,n=this.options,a=n.axisOnTop,s=n.eventMargin,o=n.eventMarginAxis,r=a?i.axis.height+o+s/2:i.contentHeight-o-s/2,l=[];for(t=this.getItemsByGroup(e),j=0;j<this.groups.length;++j){var c=this.groups[j];t[c.content]?(this.finalItemsPosition(t[c.content],r,c).forEach((function(e){l.push(e)})),a?r+=c.itemsHeight+s:r-=c.itemsHeight+s):a?r+=n.groupMinHeight+s:r-=n.groupMinHeight+s}return t.undefined&&this.finalItemsPosition(t.undefined,r).forEach((function(e){l.push(e)})),l},links.Timeline.prototype.finalItemsPosition=function(e,t,i){var n,a,s,o=this.options,r=o.axisOnTop,l=o.eventMargin;for(n=0,a=(s=this.initialItemsPosition(e,t)).length;a>n;n++){var c=s[n],d=null;if(this.options.stackEvents)do{null!=(d=this.stackItemsCheckOverlap(s,n,0,n-1))&&(c.top=r?d.top+d.height+l:d.top-c.height-l,c.bottom=c.top+c.height)}while(d);i&&(i.itemsHeight=r?i.itemsHeight?Math.max(i.itemsHeight,c.bottom-t):c.height+l:i.itemsHeight?Math.max(i.itemsHeight,t-c.top):c.height+l)}return s},links.Timeline.prototype.initialItemsPosition=function(e,t){for(var i=this.options.axisOnTop,n=[],a=0,s=e.length;s>a;++a){var o,r,l=e[a],c=l.height,d=l.getWidth(this),h=l.getRight(this),u=h-d;r=(o=i?t:t-c)+c,n.push({left:u,top:o,right:h,bottom:r,height:c,item:l})}return n},links.Timeline.prototype.stackMoveOneStep=function(e,t){for(var i=!0,n=0,a=t.length;a>n;n++){var s=t[n],o=s.item,r=parseInt(o.top),l=parseInt(s.top),c=l-r;if(c){var d=l==r?0:l>r?1:-1;Math.abs(c)>4&&(d=c/4);var h=parseInt(r+d);h!=l&&(i=!1),o.top=h,o.bottom=o.top+o.height}else o.top=s.top,o.bottom=s.bottom;o.left=s.left,o.right=s.right}return i},links.Timeline.prototype.stackMoveToFinal=function(e,t){for(var i=0,n=t.length;n>i;i++){var a=t[i],s=a.item;s.left=a.left,s.top=a.top,s.right=a.right,s.bottom=a.bottom}},links.Timeline.prototype.stackItemsCheckOverlap=function(e,t,i,n){for(var a=this.options.eventMargin,s=this.collision,o=e[t],r=n;r>=i;r--){var l=e[r];if(s(o,l,a)&&r!=t)return l}},links.Timeline.prototype.collision=function(e,t,i){return null==i&&(i=0),e.left-i<t.right&&e.right+i>t.left&&e.top-i<t.bottom&&e.bottom+i>t.top},links.Timeline.prototype.trigger=function(e){var t=null;switch(e){case"rangechange":case"rangechanged":t={start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())};break;case"timechange":case"timechanged":t={time:new Date(this.customTime.valueOf())}}links.events.trigger(this,e,t),google&&google.visualization&&google.visualization.events.trigger(this,e,t)},links.Timeline.prototype.clusterItems=function(){if(this.options.cluster){var e=this.clusterGenerator.getClusters(this.conversion.factor,this.options.clusterMaxItems);if(this.clusters!=e){var t=this.renderQueue;this.clusters&&this.clusters.forEach((function(e){t.hide.push(e),e.items.forEach((function(e){e.cluster=void 0}))})),e.forEach((function(e){e.items.forEach((function(t){t.cluster=e}))})),this.clusters=e}}},links.Timeline.prototype.filterItems=function(){function e(e){e.forEach((function(e){var i=e.rendered,s=e.isVisible(n,a);i!=s&&(i&&t.hide.push(e),s&&-1==t.show.indexOf(e)&&t.show.push(e))}))}var t=this.renderQueue,i=this.end-this.start,n=new Date(this.start.valueOf()-i),a=new Date(this.end.valueOf()+i);e(this.items),this.clusters&&e(this.clusters)},links.Timeline.ClusterGenerator=function(e){this.timeline=e,this.clear()},links.Timeline.ClusterGenerator.prototype.clear=function(){this.items=[],this.groups={},this.clearCache()},links.Timeline.ClusterGenerator.prototype.clearCache=function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]},links.Timeline.ClusterGenerator.prototype.setData=function(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!0,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)},links.Timeline.ClusterGenerator.prototype.updateData=function(){this.dataChanged=!0,this.applyOnChangedLevel=!1},links.Timeline.ClusterGenerator.prototype.filterData=function(){var e=this.items||[],t={};for(var i in this.groups=t,e.forEach((function(e){var i=e.group?e.group.content:"",n=t[i];n||(n=[],t[i]=n),n.push(e),e.start&&(e.center=e.end?(e.start.valueOf()+e.end.valueOf())/2:e.start.valueOf())})),t)t.hasOwnProperty(i)&&t[i].sort((function(e,t){return e.center-t.center}));this.dataChanged=!1},links.Timeline.ClusterGenerator.prototype.getClusters=function(e,t){var i=-1,n=0;if(e>0&&(i=Math.round(Math.log(100/e)/Math.log(2)),n=Math.pow(2,i)),this.dataChanged){var a=i!=this.cacheLevel;(!this.applyOnChangedLevel||a)&&(this.clearCache(),this.filterData())}this.cacheLevel=i;var s=this.cache[i];if(!s){for(var o in s=[],this.groups)if(this.groups.hasOwnProperty(o))for(var r=this.groups[o],l=r.length,c=0;l>c;){for(var d=r[c],h=1,u=c-1;u>=0&&d.center-r[u].center<n/2;)r[u].cluster||h++,u--;for(var p=c+1;p<r.length&&r[p].center-d.center<n/2;)h++,p++;for(var f=s.length-1;f>=0&&d.center-s[f].center<n/2;)d.group==s[f].group&&h++,f--;if(h>t){for(var g=h-t+1,m=[],v=void 0,b=void 0,x=void 0,y=!1,w=0,k=c;m.length<g&&k<r.length;){var S=r[k],C=S.start.valueOf(),_=S.end?S.end.valueOf():S.start.valueOf();m.push(S),v=w?w/(w+1)*v+1/(w+1)*S.center:S.center,b=null!=b?Math.min(b,C):C,x=null!=x?Math.max(x,_):_,y=y||S instanceof links.Timeline.ItemRange||S instanceof links.Timeline.ItemFloatingRange,w++,k++}var T,A='<div title="'+("Cluster containing "+w+" events. Zoom in to see the individual events.")+'">'+w+" events</div>",P=d.group?d.group.content:void 0;(T=this.timeline.createItem(y?{start:new Date(b),end:new Date(x),content:A,group:P}:{start:new Date(v),content:A,group:P})).isCluster=!0,T.items=m,T.items.forEach((function(e){e.cluster=T})),s.push(T),c+=g}else delete d.cluster,c+=1}this.cache[i]=s}return s},links.events=links.events||{listeners:[],indexOf:function(e){for(var t=this.listeners,i=0,n=this.listeners.length;n>i;i++){var a=t[i];if(a&&a.object==e)return i}return-1},addListener:function(e,t,i){var n=this.indexOf(e),a=this.listeners[n];a||(a={object:e,events:{}},this.listeners.push(a));var s=a.events[t];s||(s=[],a.events[t]=s),-1==s.indexOf(i)&&s.push(i)},removeListener:function(e,t,i){var n=this.indexOf(e),a=this.listeners[n];if(a){var s=a.events[t];if(s)-1!=(n=s.indexOf(i))&&s.splice(n,1),0==s.length&&delete a.events[t];var o=0,r=a.events;for(var l in r)r.hasOwnProperty(l)&&o++;0==o&&delete this.listeners[n]}},removeAllListeners:function(){this.listeners=[]},trigger:function(e,t,i){var n=this.indexOf(e),a=this.listeners[n];if(a){var s=a.events[t];if(s)for(var o=0,r=s.length;r>o;o++)s[o](i)}}},links.Timeline.StepDate=function(e,t,i){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1,this.setRange(e,t,i)},links.Timeline.StepDate.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},links.Timeline.StepDate.prototype.setRange=function(e,t,i){e instanceof Date&&t instanceof Date&&(this._start=null!=e?new Date(e.valueOf()):new Date,this._end=null!=t?new Date(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i))},links.Timeline.StepDate.prototype.start=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},links.Timeline.StepDate.prototype.roundToMinor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case links.Timeline.StepDate.SCALE.MONTH:this.current.setDate(1);case links.Timeline.StepDate.SCALE.DAY:case links.Timeline.StepDate.SCALE.WEEKDAY:this.current.setHours(0);case links.Timeline.StepDate.SCALE.HOUR:this.current.setMinutes(0);case links.Timeline.StepDate.SCALE.MINUTE:this.current.setSeconds(0);case links.Timeline.StepDate.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},links.Timeline.StepDate.prototype.end=function(){return this.current.valueOf()>this._end.valueOf()},links.Timeline.StepDate.prototype.next=function(){var e=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1e3*this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+1e3*this.step*60);break;case links.Timeline.StepDate.SCALE.HOUR:this.current=new Date(this.current.valueOf()+1e3*this.step*60*60);var t=this.current.getHours();this.current.setHours(t-t%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);case links.Timeline.StepDate.SCALE.YEAR:}this.current.valueOf()==e&&(this.current=new Date(this._end.valueOf()))},links.Timeline.StepDate.prototype.getCurrent=function(){return this.current},links.Timeline.StepDate.prototype.setScale=function(e,t){this.scale=e,t>0&&(this.step=t),this.autoScale=!1},links.Timeline.StepDate.prototype.setAutoScale=function(e){this.autoScale=e},links.Timeline.StepDate.prototype.setMinimumStep=function(e){if(null!=e){var t=31104e6,i=2592e6,n=864e5,a=36e5,s=6e4,o=1e3;1e3*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1e3),500*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=500),100*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=100),50*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=50),10*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=10),5*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=5),t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1),3*i>e&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=3),i>e&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=1),5*n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=5),2*n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=2),n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1),n/2>e&&(this.scale=links.Timeline.StepDate.SCALE.WEEKDAY,this.step=1),4*a>e&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=4),a>e&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=1),15*s>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=15),10*s>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=10),5*s>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=5),s>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=1),15*o>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=15),10*o>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=10),5*o>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=5),o>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=1),200>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=200),100>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=100),50>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=50),10>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=10),5>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=5),1>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=1)}},links.Timeline.StepDate.prototype.snap=function(e){if(this.scale==links.Timeline.StepDate.SCALE.YEAR){var t=e.getFullYear()+Math.round(e.getMonth()/12);e.setFullYear(Math.round(t/this.step)*this.step),e.setMonth(0),e.setDate(0),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MONTH)e.getDate()>15?(e.setDate(1),e.setMonth(e.getMonth()+1)):e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);else if(this.scale==links.Timeline.StepDate.SCALE.DAY||this.scale==links.Timeline.StepDate.SCALE.WEEKDAY){switch(this.step){case 5:case 2:e.setHours(24*Math.round(e.getHours()/24));break;default:e.setHours(12*Math.round(e.getHours()/12))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.HOUR){if(4===this.step)e.setMinutes(60*Math.round(e.getMinutes()/60));else e.setMinutes(30*Math.round(e.getMinutes()/30));e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MINUTE){switch(this.step){case 15:case 10:e.setMinutes(5*Math.round(e.getMinutes()/5)),e.setSeconds(0);break;case 5:e.setSeconds(60*Math.round(e.getSeconds()/60));break;default:e.setSeconds(30*Math.round(e.getSeconds()/30))}e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.SECOND)switch(this.step){case 15:case 10:e.setSeconds(5*Math.round(e.getSeconds()/5)),e.setMilliseconds(0);break;case 5:e.setMilliseconds(1e3*Math.round(e.getMilliseconds()/1e3));break;default:e.setMilliseconds(500*Math.round(e.getMilliseconds()/500))}else if(this.scale==links.Timeline.StepDate.SCALE.MILLISECOND){var i=this.step>5?this.step/2:1;e.setMilliseconds(Math.round(e.getMilliseconds()/i)*i)}},links.Timeline.StepDate.prototype.isMajor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case links.Timeline.StepDate.SCALE.SECOND:return 0==this.current.getSeconds();case links.Timeline.StepDate.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case links.Timeline.StepDate.SCALE.HOUR:return 0==this.current.getHours();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return 1==this.current.getDate();case links.Timeline.StepDate.SCALE.MONTH:return 0==this.current.getMonth();case links.Timeline.StepDate.SCALE.YEAR:default:return!1}},links.Timeline.StepDate.prototype.getLabelMinor=function(e,t){switch(null==t&&(t=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return String(t.getMilliseconds());case links.Timeline.StepDate.SCALE.SECOND:return String(t.getSeconds());case links.Timeline.StepDate.SCALE.MINUTE:case links.Timeline.StepDate.SCALE.HOUR:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.WEEKDAY:return e.DAYS_SHORT[t.getDay()]+" "+t.getDate();case links.Timeline.StepDate.SCALE.DAY:return String(t.getDate());case links.Timeline.StepDate.SCALE.MONTH:return e.MONTHS_SHORT[t.getMonth()];case links.Timeline.StepDate.SCALE.YEAR:return String(t.getFullYear());default:return""}},links.Timeline.StepDate.prototype.getLabelMajor=function(e,t){switch(null==t&&(t=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2)+":"+this.addZeros(t.getSeconds(),2);case links.Timeline.StepDate.SCALE.SECOND:return t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.MINUTE:case links.Timeline.StepDate.SCALE.HOUR:return e.DAYS[t.getDay()]+" "+t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.MONTH:return String(t.getFullYear());default:return""}},links.Timeline.StepDate.prototype.addZeros=function(e,t){for(var i=""+e;i.length<t;)i="0"+i;return i},links.imageloader=function(){function e(e){if(1==n[e])return!0;var t=new Image;return t.src=e,!!t.complete}function t(e){return null!=a[e]}function i(i,s,o){if(null==o&&(o=!0),e(i))o&&s(i);else if(!t(i)||o){var r=a[i];if(!r){var l=new Image;l.src=i,r=[],a[i]=r,l.onload=function(){n[i]=!0,delete a[i];for(var e=0;e<r.length;e++)r[e](i)}}-1==r.indexOf(s)&&r.push(s)}}var n={},a={};return{isLoaded:e,isLoading:t,load:i,loadAll:function(t,n,a){var s=[];if(t.forEach((function(t){e(t)||s.push(t)})),s.length){var o=s.length;s.forEach((function(e){i(e,(function(){0==--o&&n()}),a)}))}else a&&n()},filterImageUrls:function e(t,i){for(var n=t.firstChild;n;){if("IMG"==n.tagName){var a=n.src;-1==i.indexOf(a)&&i.push(a)}e(n,i),n=n.nextSibling}}}}(),links.Timeline.addEventListener=function(e,t,i,n){e.addEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,i,n)):e.attachEvent("on"+t,i)},links.Timeline.removeEventListener=function(e,t,i,n){e.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,i,n)):e.detachEvent("on"+t,i)},links.Timeline.getTarget=function(e){var t;return e||(e=window.event),e.target?t=e.target:e.srcElement&&(t=e.srcElement),null!=t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},links.Timeline.stopPropagation=function(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},links.Timeline.preventDefault=function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},links.Timeline.getAbsoluteLeft=function(e){for(var t=document.documentElement,i=document.body,n=e.offsetLeft,a=e.offsetParent;null!=a&&a!=i&&a!=t;)n+=a.offsetLeft,n-=a.scrollLeft,a=a.offsetParent;return n},links.Timeline.getAbsoluteTop=function(e){for(var t=document.documentElement,i=document.body,n=e.offsetTop,a=e.offsetParent;null!=a&&a!=i&&a!=t;)n+=a.offsetTop,n-=a.scrollTop,a=a.offsetParent;return n},links.Timeline.getPageY=function(e){if("targetTouches"in e&&e.targetTouches.length&&(e=e.targetTouches[0]),"pageY"in e)return e.pageY;var t=e.clientY,i=document.documentElement,n=document.body;return t+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)},links.Timeline.getPageX=function(e){if("targetTouches"in e&&e.targetTouches.length&&(e=e.targetTouches[0]),"pageX"in e)return e.pageX;var t=e.clientX,i=document.documentElement,n=document.body;return t+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0)},links.Timeline.addClassName=function(e,t){for(var i=e.className.split(" "),n=t.split(" "),a=!1,s=0;s<n.length;s++)-1==i.indexOf(n[s])&&(i.push(n[s]),a=!0);a&&(e.className=i.join(" "))},links.Timeline.removeClassName=function(e,t){for(var i=e.className.split(" "),n=t.split(" "),a=!1,s=0;s<n.length;s++){var o=i.indexOf(n[s]);-1!=o&&(i.splice(o,1),a=!0)}a&&(e.className=i.join(" "))},links.Timeline.isArray=function(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)},links.Timeline.clone=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},links.Timeline.parseJSONDate=function(e){if(null!=e){if(e instanceof Date)return e;var t=e.match(/\/Date\((-?\d+)([-\+]?\d{2})?(\d{2})?\)\//i);if(t){var i=t[2]?36e5*t[2]+6e4*t[3]*(t[2]/Math.abs(t[2])):0;return new Date(1*t[1]+i)}return Date.parse(e)}},function(e){var t={},i={};e.ajaxq=function(n,a){function s(){if(t[n]){var e=t[n].shift();if(e){var a=e();i[n]=a}else delete t[n],delete i[n]}}if(void 0===a)throw"AjaxQ: queue name is not provided";var o=e.Deferred(),r=o.promise();r.success=r.done,r.error=r.fail,r.complete=r.always;var l="function"==typeof a,c=l?null:e.extend(!0,{},a);return function(e){if(t[n])t[n].push(e);else{t[n]=[];var a=e();i[n]=a}}((function(){var t=e.ajax.apply(window,[l?a():c]);return t.done((function(){o.resolve.apply(this,arguments)})),t.fail((function(){o.reject.apply(this,arguments)})),t.always(s),t})),r},e.each(["getq","postq"],(function(t,i){e[i]=function(t,n,a,s,o){return e.isFunction(a)&&(o=o||s,s=a,a=void 0),e.ajaxq(t,{type:"postq"===i?"post":"get",url:n,data:a,success:s,dataType:o})}}));var n=function(e){return t.hasOwnProperty(e)&&t[e].length>0};e.ajaxq.isRunning=function(e){return e?n(e):function(){for(var e in t)if(n(e))return!0;return!1}()},e.ajaxq.getActiveRequest=function(e){if(!e)throw"AjaxQ: queue name is required";return i[e]},e.ajaxq.abort=function(n){if(!n)throw"AjaxQ: queue name is required";var a=e.ajaxq.getActiveRequest(n);delete t[n],delete i[n],a&&a.abort()},e.ajaxq.clear=function(e){if(e)t[e]&&(t[e]=[]);else for(var i in t)t.hasOwnProperty(i)&&(t[i]=[])}}(jQuery),function(){"use strict";function e(e){return new Date((e+.5-_)*C)}function t(e){return function(e){return e.valueOf()/C-.5+_}(e)-T}function i(e,t){return w(v(e)*b(A)-x(t)*v(A),b(e))}function n(e,t){return y(v(t)*b(A)+b(t)*v(A)*v(e))}function a(e,t,i){return w(v(e),b(e)*v(t)-x(i)*b(t))}function s(e,t,i){return y(v(t)*v(i)+b(t)*b(i)*b(e))}function o(e,t){return S*(280.16+360.9856235*e)-t}function r(e){return S*(357.5291+.98560028*e)}function l(e){return e+S*(1.9148*v(e)+.02*v(2*e)+3e-4*v(3*e))+102.9372*S+m}function c(e){var t=l(r(e));return{dec:n(t,0),ra:i(t,0)}}function d(e,t){return Math.round(e-I-t/(2*m))}function h(e,t,i){return I+(e+t)/(2*m)+i}function u(e,t,i){return T+e+.0053*v(t)-.0069*v(2*i)}function p(e,t,i,n,a,s,o){var r=function(e,t,i){return k((v(e)-v(t)*v(i))/(b(t)*b(i)))}(e,i,n);return u(h(r,t,a),s,o)}function f(e){var t=S*(134.963+13.064993*e),a=S*(93.272+13.22935*e),s=S*(218.316+13.176396*e)+6.289*S*v(t),o=5.128*S*v(a),r=385001-20905*b(t);return{ra:i(s,o),dec:n(s,o),dist:r}}function g(e,t){return new Date(e.valueOf()+t*C/24)}var m=Math.PI,v=Math.sin,b=Math.cos,x=Math.tan,y=Math.asin,w=Math.atan2,k=Math.acos,S=m/180,C=864e5,_=2440588,T=2451545,A=23.4397*S,P={getPosition:function(e,i,n){var r=S*-n,l=S*i,d=t(e),h=c(d),u=o(d,r)-h.ra;return{azimuth:a(u,l,h.dec),altitude:s(u,l,h.dec)}}},D=P.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];P.addTime=function(e,t,i){D.push([e,t,i])};var I=9e-4;P.getTimes=function(i,a,s){var o,c,f,g,m,v=S*-s,b=S*a,x=d(t(i),v),y=h(0,v,x),w=r(y),k=l(w),C=n(k,0),_=u(y,w,k),T={solarNoon:e(_),nadir:e(_-.5)};for(o=0,c=D.length;c>o;o+=1)m=_-((g=p((f=D[o])[0]*S,v,b,C,x,w,k))-_),T[f[1]]=e(m),T[f[2]]=e(g);return T},P.getMoonPosition=function(e,i,n){var r=S*-n,l=S*i,c=t(e),d=f(c),h=o(c,r)-d.ra,u=s(h,l,d.dec);return u+=.017*S/x(u+10.26*S/(u+5.1*S)),{azimuth:a(h,l,d.dec),altitude:u,distance:d.dist}},P.getMoonIllumination=function(e){var i=t(e),n=c(i),a=f(i),s=149598e3,o=k(v(n.dec)*v(a.dec)+b(n.dec)*b(a.dec)*b(n.ra-a.ra)),r=w(s*v(o),a.dist-s*b(o)),l=w(b(n.dec)*v(n.ra-a.ra),v(n.dec)*b(a.dec)-b(n.dec)*v(a.dec)*b(n.ra-a.ra));return{fraction:(1+b(r))/2,phase:.5+.5*r*(0>l?-1:1)/Math.PI,angle:l}},P.getMoonTimes=function(e,t,i){var n=new Date(e);n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0);for(var a,s,o,r,l,c,d,h,u,p,f,m,v,b=.133*S,x=P.getMoonPosition(n,t,i).altitude-b,y=1;24>=y&&(a=P.getMoonPosition(g(n,y),t,i).altitude-b,h=((l=(x+(s=P.getMoonPosition(g(n,y+1),t,i).altitude-b))/2-a)*(d=-(c=(s-x)/2)/(2*l))+c)*d+a,p=0,(u=c*c-4*l*a)>=0&&(f=d-(v=Math.sqrt(u)/(2*Math.abs(l))),m=d+v,Math.abs(f)<=1&&p++,Math.abs(m)<=1&&p++,-1>f&&(f=m)),1===p?0>x?o=y+f:r=y+f:2===p&&(o=y+(0>h?m:f),r=y+(0>h?f:m)),!o||!r);y+=2)x=s;var w={};return o&&(w.rise=g(n,o)),r&&(w.set=g(n,r)),o||r||(w[h>0?"alwaysUp":"alwaysDown"]=!0),w},"function"==typeof define&&define.amd?define(P):"undefined"!=typeof module?module.exports=P:window.SunCalc=P}(),function(e){"use strict";function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,i,n,a,s,o){return t(function(e,t){return e<<t|e>>>32-t}(t(t(i,e),t(a,o)),s),n)}function n(e,t,n,a,s,o,r){return i(t&n|~t&a,e,t,s,o,r)}function a(e,t,n,a,s,o,r){return i(t&a|n&~a,e,t,s,o,r)}function s(e,t,n,a,s,o,r){return i(t^n^a,e,t,s,o,r)}function o(e,t,n,a,s,o,r){return i(n^(t|~a),e,t,s,o,r)}function r(e,i){e[i>>5]|=128<<i%32,e[14+(i+64>>>9<<4)]=i;var r,l,c,d,h,u=1732584193,p=-271733879,f=-1732584194,g=271733878;for(r=0;r<e.length;r+=16)l=u,c=p,d=f,h=g,u=n(u,p,f,g,e[r],7,-680876936),g=n(g,u,p,f,e[r+1],12,-389564586),f=n(f,g,u,p,e[r+2],17,606105819),p=n(p,f,g,u,e[r+3],22,-1044525330),u=n(u,p,f,g,e[r+4],7,-176418897),g=n(g,u,p,f,e[r+5],12,1200080426),f=n(f,g,u,p,e[r+6],17,-1473231341),p=n(p,f,g,u,e[r+7],22,-45705983),u=n(u,p,f,g,e[r+8],7,1770035416),g=n(g,u,p,f,e[r+9],12,-1958414417),f=n(f,g,u,p,e[r+10],17,-42063),p=n(p,f,g,u,e[r+11],22,-1990404162),u=n(u,p,f,g,e[r+12],7,1804603682),g=n(g,u,p,f,e[r+13],12,-40341101),f=n(f,g,u,p,e[r+14],17,-1502002290),u=a(u,p=n(p,f,g,u,e[r+15],22,1236535329),f,g,e[r+1],5,-165796510),g=a(g,u,p,f,e[r+6],9,-1069501632),f=a(f,g,u,p,e[r+11],14,643717713),p=a(p,f,g,u,e[r],20,-373897302),u=a(u,p,f,g,e[r+5],5,-701558691),g=a(g,u,p,f,e[r+10],9,38016083),f=a(f,g,u,p,e[r+15],14,-660478335),p=a(p,f,g,u,e[r+4],20,-405537848),u=a(u,p,f,g,e[r+9],5,568446438),g=a(g,u,p,f,e[r+14],9,-1019803690),f=a(f,g,u,p,e[r+3],14,-187363961),p=a(p,f,g,u,e[r+8],20,1163531501),u=a(u,p,f,g,e[r+13],5,-1444681467),g=a(g,u,p,f,e[r+2],9,-51403784),f=a(f,g,u,p,e[r+7],14,1735328473),u=s(u,p=a(p,f,g,u,e[r+12],20,-1926607734),f,g,e[r+5],4,-378558),g=s(g,u,p,f,e[r+8],11,-2022574463),f=s(f,g,u,p,e[r+11],16,1839030562),p=s(p,f,g,u,e[r+14],23,-35309556),u=s(u,p,f,g,e[r+1],4,-1530992060),g=s(g,u,p,f,e[r+4],11,1272893353),f=s(f,g,u,p,e[r+7],16,-155497632),p=s(p,f,g,u,e[r+10],23,-1094730640),u=s(u,p,f,g,e[r+13],4,681279174),g=s(g,u,p,f,e[r],11,-358537222),f=s(f,g,u,p,e[r+3],16,-722521979),p=s(p,f,g,u,e[r+6],23,76029189),u=s(u,p,f,g,e[r+9],4,-640364487),g=s(g,u,p,f,e[r+12],11,-421815835),f=s(f,g,u,p,e[r+15],16,530742520),u=o(u,p=s(p,f,g,u,e[r+2],23,-995338651),f,g,e[r],6,-198630844),g=o(g,u,p,f,e[r+7],10,1126891415),f=o(f,g,u,p,e[r+14],15,-1416354905),p=o(p,f,g,u,e[r+5],21,-57434055),u=o(u,p,f,g,e[r+12],6,1700485571),g=o(g,u,p,f,e[r+3],10,-1894986606),f=o(f,g,u,p,e[r+10],15,-1051523),p=o(p,f,g,u,e[r+1],21,-2054922799),u=o(u,p,f,g,e[r+8],6,1873313359),g=o(g,u,p,f,e[r+15],10,-30611744),f=o(f,g,u,p,e[r+6],15,-1560198380),p=o(p,f,g,u,e[r+13],21,1309151649),u=o(u,p,f,g,e[r+4],6,-145523070),g=o(g,u,p,f,e[r+11],10,-1120210379),f=o(f,g,u,p,e[r+2],15,718787259),p=o(p,f,g,u,e[r+9],21,-343485551),u=t(u,l),p=t(p,c),f=t(f,d),g=t(g,h);return[u,p,f,g]}function l(e){var t,i="";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function c(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function d(e){var t,i,n="0123456789abcdef",a="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),a+=n.charAt(t>>>4&15)+n.charAt(15&t);return a}function h(e){return unescape(encodeURIComponent(e))}function u(e){return function(e){return l(r(c(e),8*e.length))}(h(e))}function p(e,t){return function(e,t){var i,n,a=c(e),s=[],o=[];for(s[15]=o[15]=void 0,a.length>16&&(a=r(a,8*e.length)),i=0;16>i;i+=1)s[i]=909522486^a[i],o[i]=1549556828^a[i];return n=r(s.concat(c(t)),512+8*t.length),l(r(o.concat(n),640))}(h(e),h(t))}function f(e,t,i){return t?i?p(t,e):function(e,t){return d(p(e,t))}(t,e):i?u(e):function(e){return d(u(e))}(e)}"function"==typeof define&&define.amd?define((function(){return f})):e.md5=f}(this),Array.prototype.remove=function(e,t){var i=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,i)};var s=void 0,u=!1,sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};function w(e,t,i){4!==t.length&&q(new sjcl.exception.invalid("invalid aes block size"));var n=e.b[i],a=t[0]^n[0],s=t[i?3:1]^n[1],o=t[2]^n[2];t=t[i?1:3]^n[3];var r,l,c,d,h=n.length/4-2,u=4,p=[0,0,0,0];e=(r=e.l[i])[0];var f=r[1],g=r[2],m=r[3],v=r[4];for(d=0;d<h;d++)r=e[a>>>24]^f[s>>16&255]^g[o>>8&255]^m[255&t]^n[u],l=e[s>>>24]^f[o>>16&255]^g[t>>8&255]^m[255&a]^n[u+1],c=e[o>>>24]^f[t>>16&255]^g[a>>8&255]^m[255&s]^n[u+2],t=e[t>>>24]^f[a>>16&255]^g[s>>8&255]^m[255&o]^n[u+3],u+=4,a=r,s=l,o=c;for(d=0;4>d;d++)p[i?3&-d:d]=v[a>>>24]<<24^v[s>>16&255]<<16^v[o>>8&255]<<8^v[255&t]^n[u++],r=a,a=s,s=o,o=t,t=r;return p}function x(e,t){var i,n,a,s=t.slice(0),o=e.s,r=e.b,l=o[0],c=o[1],d=o[2],h=o[3],u=o[4],p=o[5],f=o[6],g=o[7];for(i=0;64>i;i++)16>i?n=s[i]:(n=s[i+1&15],a=s[i+14&15],n=s[15&i]=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(a>>>17^a>>>19^a>>>10^a<<15^a<<13)+s[15&i]+s[i+9&15]|0),n=n+g+(u>>>6^u>>>11^u>>>25^u<<26^u<<21^u<<7)+(f^u&(p^f))+r[i],g=f,f=p,p=u,u=h+n|0,h=d,d=c,l=n+((c=l)&d^h&(c^d))+(c>>>2^c>>>13^c>>>22^c<<30^c<<19^c<<10)|0;o[0]=o[0]+l|0,o[1]=o[1]+c|0,o[2]=o[2]+d|0,o[3]=o[3]+h|0,o[4]=o[4]+u|0,o[5]=o[5]+p|0,o[6]=o[6]+f|0,o[7]=o[7]+g|0}function C(e,t){var i,n=sjcl.random.B[e],a=[];for(i in n)n.hasOwnProperty(i)&&a.push(n[i]);for(i=0;i<a.length;i++)a[i](t)}function E(e){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),e,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),e,"loadtime")}function A(e){e.b=B(e).concat(B(e)),e.C=new sjcl.cipher.aes(e.b)}function B(e){for(var t=0;4>t&&(e.f[t]=e.f[t]+1|0,!e.f[t]);t++);return e.C.encrypt(e.f)}function D(e,t){return function(){t.apply(e,arguments)}}"undefined"!=typeof module&&module.exports&&(module.exports=sjcl),"function"==typeof define&&define([],(function(){return sjcl})),sjcl.cipher.aes=function(e){this.l[0][0][0]||this.G();var t,i,n,a,s=this.l[0][4],o=this.l[1],r=1;for(4!==(t=e.length)&&6!==t&&8!==t&&q(new sjcl.exception.invalid("invalid aes key size")),this.b=[n=e.slice(0),a=[]],e=t;e<4*t+28;e++)i=n[e-1],(0==e%t||8===t&&4==e%t)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],0==e%t&&(i=i<<8^i>>>24^r<<24,r=r<<1^283*(r>>7))),n[e]=n[e-t]^i;for(t=0;e;t++,e--)i=n[3&t?e:e-4],a[t]=4>=e||4>t?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]},sjcl.cipher.aes.prototype={encrypt:function(e){return w(this,e,0)},decrypt:function(e){return w(this,e,1)},l:[[[],[],[],[],[]],[[],[],[],[],[]]],G:function(){var e,t,i,n,a,s,o,r=this.l[0],l=this.l[1],c=r[4],d=l[4],h=[],u=[];for(e=0;256>e;e++)u[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=i=0;!c[t];t^=n||1,i=u[i]||1)for(s=(s=i^i<<1^i<<2^i<<3^i<<4)>>8^255&s^99,c[t]=s,d[s]=t,o=16843009*(a=h[e=h[n=h[t]]])^65537*e^257*n^16843008*t,a=257*h[s]^16843008*s,e=0;4>e;e++)r[e][t]=a=a<<24^a>>>8,l[e][s]=o=o<<24^o>>>8;for(e=0;5>e;e++)r[e]=r[e].slice(0),l[e]=l[e].slice(0)}},sjcl.bitArray={bitSlice:function(e,t,i){return e=sjcl.bitArray.R(e.slice(t/32),32-(31&t)).slice(1),i===s?e:sjcl.bitArray.clamp(e,i-t)},extract:function(e,t,i){var n=Math.floor(-t-i&31);return(-32&(t+i-1^t)?e[t/32|0]<<32-n^e[t/32+1|0]>>>n:e[t/32|0]>>>n)&(1<<i)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var i=e[e.length-1],n=sjcl.bitArray.getPartial(i);return 32===n?e.concat(t):sjcl.bitArray.R(t,n,0|i,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+sjcl.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;var i=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,0<i&&t&&(e[i-1]=sjcl.bitArray.partial(t,e[i-1]&2147483648>>t-1,1)),e},partial:function(e,t,i){return 32===e?t:(i?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(sjcl.bitArray.bitLength(e)!==sjcl.bitArray.bitLength(t))return u;var i,n=0;for(i=0;i<e.length;i++)n|=e[i]^t[i];return 0===n},R:function(e,t,i,n){var a;for(a=0,n===s&&(n=[]);32<=t;t-=32)n.push(i),i=0;if(0===t)return n.concat(e);for(a=0;a<e.length;a++)n.push(i|e[a]>>>t),i=e[a]<<32-t;return a=e.length?e[e.length-1]:0,e=sjcl.bitArray.getPartial(a),n.push(sjcl.bitArray.partial(t+e&31,32<t+e?i:n.pop(),1)),n},g:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,i;for(t=0;t<e.length;++t)i=e[t],e[t]=i>>>24|i>>>8&65280|(65280&i)<<8|i<<24;return e}},sjcl.codec.utf8String={fromBits:function(e){var t,i,n="",a=sjcl.bitArray.bitLength(e);for(t=0;t<a/8;t++)0==(3&t)&&(i=e[t/4]),n+=String.fromCharCode(i>>>24),i<<=8;return decodeURIComponent(escape(n))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,i=[],n=0;for(t=0;t<e.length;t++)n=n<<8|e.charCodeAt(t),3==(3&t)&&(i.push(n),n=0);return 3&t&&i.push(sjcl.bitArray.partial(8*(3&t),n)),i}},sjcl.codec.hex={fromBits:function(e){var t,i="";for(t=0;t<e.length;t++)i+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return i.substr(0,sjcl.bitArray.bitLength(e)/4)},toBits:function(e){var t,i,n=[];for(i=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",t=0;t<e.length;t+=8)n.push(0^parseInt(e.substr(t,8),16));return sjcl.bitArray.clamp(n,4*i)}},sjcl.codec.base32={p:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",O:"0123456789ABCDEFGHIJKLMNOPQRSTUV",BITS:32,BASE:5,REMAINING:27,fromBits:function(e,t,i){var n=sjcl.codec.base32.BASE,a=sjcl.codec.base32.REMAINING,s="",o=0,r=sjcl.codec.base32.p,l=0,c=sjcl.bitArray.bitLength(e);for(i&&(r=sjcl.codec.base32.O),i=0;s.length*n<c;)s+=r.charAt((l^e[i]>>>o)>>>a),o<n?(l=e[i]<<n-o,o+=a,i++):(l<<=n,o-=n);for(;7&s.length&&!t;)s+="=";return s},toBits:function(e,t){e=e.replace(/\s|=/g,"").toUpperCase();var i,n,a=sjcl.codec.base32.BITS,s=sjcl.codec.base32.BASE,o=sjcl.codec.base32.REMAINING,r=[],l=0,c=sjcl.codec.base32.p,d=0,h="base32";for(t&&(c=sjcl.codec.base32.O,h="base32hex"),i=0;i<e.length;i++){if(0>(n=c.indexOf(e.charAt(i)))){if(!t)try{return sjcl.codec.base32hex.toBits(e)}catch(e){}q(new sjcl.exception.invalid("this isn't "+h+"!"))}l>o?(l-=o,r.push(d^n>>>l),d=n<<a-l):d^=n<<a-(l+=s)}return 56&l&&r.push(sjcl.bitArray.partial(56&l,d,1)),r}},sjcl.codec.base32hex={fromBits:function(e,t){return sjcl.codec.base32.fromBits(e,t,1)},toBits:function(e){return sjcl.codec.base32.toBits(e,1)}},sjcl.codec.base64={p:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,i){var n="",a=0,s=sjcl.codec.base64.p,o=0,r=sjcl.bitArray.bitLength(e);for(i&&(s=s.substr(0,62)+"-_"),i=0;6*n.length<r;)n+=s.charAt((o^e[i]>>>a)>>>26),6>a?(o=e[i]<<6-a,a+=26,i++):(o<<=6,a-=6);for(;3&n.length&&!t;)n+="=";return n},toBits:function(e,t){e=e.replace(/\s|=/g,"");var i,n,a=[],s=0,o=sjcl.codec.base64.p,r=0;for(t&&(o=o.substr(0,62)+"-_"),i=0;i<e.length;i++)0>(n=o.indexOf(e.charAt(i)))&&q(new sjcl.exception.invalid("this isn't base64!")),26<s?(s-=26,a.push(r^n>>>s),r=n<<32-s):r^=n<<32-(s+=6);return 56&s&&a.push(sjcl.bitArray.partial(56&s,r,1)),a}},sjcl.codec.base64url={fromBits:function(e){return sjcl.codec.base64.fromBits(e,1,1)},toBits:function(e){return sjcl.codec.base64.toBits(e,1)}},sjcl.hash.sha256=function(e){this.b[0]||this.G(),e?(this.s=e.s.slice(0),this.o=e.o.slice(0),this.i=e.i):this.reset()},sjcl.hash.sha256.hash=function(e){return(new sjcl.hash.sha256).update(e).finalize()},sjcl.hash.sha256.prototype={blockSize:512,reset:function(){return this.s=this.P.slice(0),this.o=[],this.i=0,this},update:function(e){"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var t,i=this.o=sjcl.bitArray.concat(this.o,e);for(t=this.i,e=this.i=t+sjcl.bitArray.bitLength(e),t=512+t&-512;t<=e;t+=512)x(this,i.splice(0,16));return this},finalize:function(){var e,t=this.o,i=this.s;for(e=(t=sjcl.bitArray.concat(t,[sjcl.bitArray.partial(1,1)])).length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.i/4294967296)),t.push(0|this.i);t.length;)x(this,t.splice(0,16));return this.reset(),i},P:[],b:[],G:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}var t,i=0,n=2;e:for(;64>i;n++){for(t=2;t*t<=n;t++)if(0==n%t)continue e;8>i&&(this.P[i]=e(Math.pow(n,.5))),this.b[i]=e(Math.pow(n,1/3)),i++}}},sjcl.mode.ccm={name:"ccm",t:[],listenProgress:function(e){sjcl.mode.ccm.t.push(e)},unListenProgress:function(e){-1<(e=sjcl.mode.ccm.t.indexOf(e))&&sjcl.mode.ccm.t.splice(e,1)},X:function(e){var t,i=sjcl.mode.ccm.t.slice();for(t=0;t<i.length;t+=1)i[t](e)},encrypt:function(e,t,i,n,a){var s,o=t.slice(0),r=sjcl.bitArray,l=r.bitLength(i)/8,c=r.bitLength(o)/8;for(a=a||64,n=n||[],7>l&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),s=2;4>s&&c>>>8*s;s++);return s<15-l&&(s=15-l),i=r.clamp(i,8*(15-s)),t=sjcl.mode.ccm.M(e,t,i,n,a,s),o=sjcl.mode.ccm.q(e,o,i,t,a,s),r.concat(o.data,o.tag)},decrypt:function(e,t,i,n,a){a=a||64,n=n||[];var s=sjcl.bitArray,o=s.bitLength(i)/8,r=s.bitLength(t),l=s.clamp(t,r-a),c=s.bitSlice(t,r-a);r=(r-a)/8;for(7>o&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),t=2;4>t&&r>>>8*t;t++);return t<15-o&&(t=15-o),i=s.clamp(i,8*(15-t)),l=sjcl.mode.ccm.q(e,l,i,c,a,t),e=sjcl.mode.ccm.M(e,l.data,i,n,a,t),s.equal(l.tag,e)||q(new sjcl.exception.corrupt("ccm: tag doesn't match")),l.data},ea:function(e,t,i,n,a,s){var o=[],r=sjcl.bitArray,l=r.g;if(n=[r.partial(8,(t.length?64:0)|n-2<<2|s-1)],(n=r.concat(n,i))[3]|=a,n=e.encrypt(n),t.length)for(65279>=(i=r.bitLength(t)/8)?o=[r.partial(16,i)]:4294967295>=i&&(o=r.concat([r.partial(16,65534)],[i])),o=r.concat(o,t),t=0;t<o.length;t+=4)n=e.encrypt(l(n,o.slice(t,t+4).concat([0,0,0])));return n},M:function(e,t,i,n,a,s){var o=sjcl.bitArray,r=o.g;for(((a/=8)%2||4>a||16<a)&&q(new sjcl.exception.invalid("ccm: invalid tag length")),(4294967295<n.length||4294967295<t.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data")),i=sjcl.mode.ccm.ea(e,n,i,a,o.bitLength(t)/8,s),n=0;n<t.length;n+=4)i=e.encrypt(r(i,t.slice(n,n+4).concat([0,0,0])));return o.clamp(i,8*a)},q:function(e,t,i,n,a,s){var o,r=sjcl.bitArray;o=r.g;var l=t.length,c=r.bitLength(t),d=l/50,h=d;if(i=r.concat([r.partial(8,s-1)],i).concat([0,0,0]).slice(0,4),n=r.bitSlice(o(n,e.encrypt(i)),0,a),!l)return{tag:n,data:[]};for(o=0;o<l;o+=4)o>d&&(sjcl.mode.ccm.X(o/l),d+=h),i[3]++,a=e.encrypt(i),t[o]^=a[0],t[o+1]^=a[1],t[o+2]^=a[2],t[o+3]^=a[3];return{tag:n,data:r.clamp(t,c)}}},sjcl.mode.ocb2={name:"ocb2",encrypt:function(e,t,i,n,a,s){128!==sjcl.bitArray.bitLength(i)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var o,r=sjcl.mode.ocb2.J,l=sjcl.bitArray,c=l.g,d=[0,0,0,0];i=r(e.encrypt(i));var h,u=[];for(n=n||[],a=a||64,o=0;o+4<t.length;o+=4)d=c(d,h=t.slice(o,o+4)),u=u.concat(c(i,e.encrypt(c(i,h)))),i=r(i);return h=t.slice(o),t=l.bitLength(h),o=e.encrypt(c(i,[0,0,0,t])),h=l.clamp(c(h.concat([0,0,0]),o),t),d=c(d,c(h.concat([0,0,0]),o)),d=e.encrypt(c(d,c(i,r(i)))),n.length&&(d=c(d,s?n:sjcl.mode.ocb2.pmac(e,n))),u.concat(l.concat(h,l.clamp(d,a)))},decrypt:function(e,t,i,n,a,s){128!==sjcl.bitArray.bitLength(i)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits")),a=a||64;var o,r,l=sjcl.mode.ocb2.J,c=sjcl.bitArray,d=c.g,h=[0,0,0,0],u=l(e.encrypt(i)),p=sjcl.bitArray.bitLength(t)-a,f=[];for(n=n||[],i=0;i+4<p/32;i+=4)o=d(u,e.decrypt(d(u,t.slice(i,i+4)))),h=d(h,o),f=f.concat(o),u=l(u);return r=p-32*i,o=e.encrypt(d(u,[0,0,0,r])),o=d(o,c.clamp(t.slice(i),r).concat([0,0,0])),h=d(h,o),h=e.encrypt(d(h,d(u,l(u)))),n.length&&(h=d(h,s?n:sjcl.mode.ocb2.pmac(e,n))),c.equal(c.clamp(h,a),c.bitSlice(t,p))||q(new sjcl.exception.corrupt("ocb: tag doesn't match")),f.concat(c.clamp(o,r))},pmac:function(e,t){var i,n=sjcl.mode.ocb2.J,a=sjcl.bitArray,s=a.g,o=[0,0,0,0],r=s(r=e.encrypt([0,0,0,0]),n(n(r)));for(i=0;i+4<t.length;i+=4)r=n(r),o=s(o,e.encrypt(s(r,t.slice(i,i+4))));return i=t.slice(i),128>a.bitLength(i)&&(r=s(r,n(r)),i=a.concat(i,[-2147483648,0,0,0])),o=s(o,i),e.encrypt(s(n(s(r,n(r))),o))},J:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},sjcl.mode.gcm={name:"gcm",encrypt:function(e,t,i,n,a){var s=t.slice(0);return t=sjcl.bitArray,n=n||[],e=sjcl.mode.gcm.q(!0,e,s,n,i,a||128),t.concat(e.data,e.tag)},decrypt:function(e,t,i,n,a){var s=t.slice(0),o=sjcl.bitArray,r=o.bitLength(s);return n=n||[],(a=a||128)<=r?(t=o.bitSlice(s,r-a),s=o.bitSlice(s,0,r-a)):(t=s,s=[]),e=sjcl.mode.gcm.q(u,e,s,n,i,a),o.equal(e.tag,t)||q(new sjcl.exception.corrupt("gcm: tag doesn't match")),e.data},ba:function(e,t){var i,n,a,s,o,r=sjcl.bitArray.g;for(a=[0,0,0,0],s=t.slice(0),i=0;128>i;i++){for((n=0!=(e[Math.floor(i/32)]&1<<31-i%32))&&(a=r(a,s)),o=0!=(1&s[3]),n=3;0<n;n--)s[n]=s[n]>>>1|(1&s[n-1])<<31;s[0]>>>=1,o&&(s[0]^=-520093696)}return a},h:function(e,t,i){var n,a=i.length;for(t=t.slice(0),n=0;n<a;n+=4)t[0]^=4294967295&i[n],t[1]^=4294967295&i[n+1],t[2]^=4294967295&i[n+2],t[3]^=4294967295&i[n+3],t=sjcl.mode.gcm.ba(t,e);return t},q:function(e,t,i,n,a,s){var o,r,l,c,d,h,u,p,f=sjcl.bitArray;for(h=i.length,u=f.bitLength(i),p=f.bitLength(n),r=f.bitLength(a),o=t.encrypt([0,0,0,0]),96===r?(a=a.slice(0),a=f.concat(a,[1])):(a=sjcl.mode.gcm.h(o,[0,0,0,0],a),a=sjcl.mode.gcm.h(o,a,[0,0,Math.floor(r/4294967296),4294967295&r])),r=sjcl.mode.gcm.h(o,[0,0,0,0],n),d=a.slice(0),n=r.slice(0),e||(n=sjcl.mode.gcm.h(o,r,i)),c=0;c<h;c+=4)d[3]++,l=t.encrypt(d),i[c]^=l[0],i[c+1]^=l[1],i[c+2]^=l[2],i[c+3]^=l[3];return i=f.clamp(i,u),e&&(n=sjcl.mode.gcm.h(o,r,i)),e=[Math.floor(p/4294967296),4294967295&p,Math.floor(u/4294967296),4294967295&u],n=sjcl.mode.gcm.h(o,n,e),l=t.encrypt(a),n[0]^=l[0],n[1]^=l[1],n[2]^=l[2],n[3]^=l[3],{tag:f.bitSlice(n,0,s),data:i}}},sjcl.misc.hmac=function(e,t){this.N=t=t||sjcl.hash.sha256;var i,n=[[],[]],a=t.prototype.blockSize/32;for(this.n=[new t,new t],e.length>a&&(e=t.hash(e)),i=0;i<a;i++)n[0][i]=909522486^e[i],n[1][i]=1549556828^e[i];this.n[0].update(n[0]),this.n[1].update(n[1]),this.I=new t(this.n[0])},sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(e){return this.S&&q(new sjcl.exception.invalid("encrypt on already updated hmac called!")),this.update(e),this.digest(e)},sjcl.misc.hmac.prototype.reset=function(){this.I=new this.N(this.n[0]),this.S=u},sjcl.misc.hmac.prototype.update=function(e){this.S=!0,this.I.update(e)},sjcl.misc.hmac.prototype.digest=function(){var e=this.I.finalize();e=new this.N(this.n[1]).update(e).finalize();return this.reset(),e},sjcl.misc.pbkdf2=function(e,t,i,n,a){i=i||1e3,(0>n||0>i)&&q(sjcl.exception.invalid("invalid params to pbkdf2")),"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e)),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),e=new(a=a||sjcl.misc.hmac)(e);var s,o,r,l,c=[],d=sjcl.bitArray;for(l=1;32*c.length<(n||1);l++){for(a=s=e.encrypt(d.concat(t,[l])),o=1;o<i;o++)for(s=e.encrypt(s),r=0;r<s.length;r++)a[r]^=s[r];c=c.concat(a)}return n&&(c=d.clamp(c,n)),c},sjcl.prng=function(e){this.c=[new sjcl.hash.sha256],this.j=[0],this.H=0,this.u={},this.F=0,this.L={},this.Q=this.d=this.k=this.Z=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.C=s,this.D=e,this.r=u,this.B={progress:{},seeded:{}},this.m=this.Y=0,this.w=1,this.A=2,this.U=65536,this.K=[0,48,64,96,128,192,256,384,512,768,1024],this.V=3e4,this.T=80},sjcl.prng.prototype={randomWords:function(e,t){var i,n,a=[];if((i=this.isReady(t))===this.m&&q(new sjcl.exception.notReady("generator isn't seeded")),i&this.A){i=!(i&this.w),n=[];var s,o=0;for(this.Q=n[0]=(new Date).valueOf()+this.V,s=0;16>s;s++)n.push(4294967296*Math.random()|0);for(s=0;s<this.c.length&&(n=n.concat(this.c[s].finalize()),o+=this.j[s],this.j[s]=0,i||!(this.H&1<<s));s++);for(this.H>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.j.push(0)),this.d-=o,o>this.k&&(this.k=o),this.H++,this.b=sjcl.hash.sha256.hash(this.b.concat(n)),this.C=new sjcl.cipher.aes(this.b),i=0;4>i&&(this.f[i]=this.f[i]+1|0,!this.f[i]);i++);}for(i=0;i<e;i+=4)0==(i+1)%this.U&&A(this),n=B(this),a.push(n[0],n[1],n[2],n[3]);return A(this),a.slice(0,e)},setDefaultParanoia:function(e,t){0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t&&q("Setting paranoia=0 will ruin your security; use it only for testing"),this.D=e},addEntropy:function(e,t,i){i=i||"user";var n,a,o=(new Date).valueOf(),r=this.u[i],l=this.isReady(),c=0;switch((n=this.L[i])===s&&(n=this.L[i]=this.Z++),r===s&&(r=this.u[i]=0),this.u[i]=(this.u[i]+1)%this.c.length,typeof e){case"number":t===s&&(t=1),this.c[r].update([n,this.F++,1,t,o,1,0|e]);break;case"object":if("[object Uint32Array]"===(i=Object.prototype.toString.call(e))){for(a=[],i=0;i<e.length;i++)a.push(e[i]);e=a}else for("[object Array]"!==i&&(c=1),i=0;i<e.length&&!c;i++)"number"!=typeof e[i]&&(c=1);if(!c){if(t===s)for(i=t=0;i<e.length;i++)for(a=e[i];0<a;)t++,a>>>=1;this.c[r].update([n,this.F++,2,t,o,e.length].concat(e))}break;case"string":t===s&&(t=e.length),this.c[r].update([n,this.F++,3,t,o,e.length]),this.c[r].update(e);break;default:c=1}c&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.j[r]+=t,this.d+=t,l===this.m&&(this.isReady()!==this.m&&C("seeded",Math.max(this.k,this.d)),C("progress",this.getProgress()))},isReady:function(e){return e=this.K[e!==s?e:this.D],this.k&&this.k>=e?this.j[0]>this.T&&(new Date).valueOf()>this.Q?this.A|this.w:this.w:this.d>=e?this.A|this.m:this.m},getProgress:function(e){return e=this.K[e||this.D],this.k>=e||this.d>e?1:this.d/e},startCollectors:function(){this.r||(this.a={loadTimeCollector:D(this,this.da),mouseCollector:D(this,this.fa),keyboardCollector:D(this,this.ca),accelerometerCollector:D(this,this.W),touchCollector:D(this,this.ha)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,u),window.addEventListener("mousemove",this.a.mouseCollector,u),window.addEventListener("keypress",this.a.keyboardCollector,u),window.addEventListener("devicemotion",this.a.accelerometerCollector,u),window.addEventListener("touchmove",this.a.touchCollector,u)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):q(new sjcl.exception.bug("can't attach event")),this.r=!0)},stopCollectors:function(){this.r&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,u),window.removeEventListener("mousemove",this.a.mouseCollector,u),window.removeEventListener("keypress",this.a.keyboardCollector,u),window.removeEventListener("devicemotion",this.a.accelerometerCollector,u),window.removeEventListener("touchmove",this.a.touchCollector,u)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.r=u)},addEventListener:function(e,t){this.B[e][this.Y++]=t},removeEventListener:function(e,t){var i,n,a=this.B[e],s=[];for(n in a)a.hasOwnProperty(n)&&a[n]===t&&s.push(n);for(i=0;i<s.length;i++)delete a[n=s[i]]},ca:function(){E(1)},fa:function(e){var t,i;try{t=e.x||e.clientX||e.offsetX||0,i=e.y||e.clientY||e.offsetY||0}catch(e){i=t=0}0!=t&&0!=i&&sjcl.random.addEntropy([t,i],2,"mouse"),E(0)},ha:function(e){e=e.touches[0]||e.changedTouches[0],sjcl.random.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),E(0)},da:function(){E(2)},W:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"==typeof t&&sjcl.random.addEntropy(t,1,"accelerometer")}e&&sjcl.random.addEntropy(e,2,"accelerometer"),E(0)}},sjcl.random=new sjcl.prng(6);e:try{var F,G,H,I;if(I="undefined"!=typeof module){var J;if(J=module.exports){var K;try{K=require("crypto")}catch(e){K=null}J=(G=K)&&G.randomBytes}I=J}if(I)F=G.randomBytes(128),F=new Uint32Array(new Uint8Array(F).buffer),sjcl.random.addEntropy(F,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(H=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(H);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(H)}sjcl.random.addEntropy(H,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}sjcl.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},aa:function(e,t,i,n){i=i||{},n=n||{};var a,s=sjcl.json,o=s.e({iv:sjcl.random.randomWords(4,0)},s.defaults);return s.e(o,i),i=o.adata,"string"==typeof o.salt&&(o.salt=sjcl.codec.base64.toBits(o.salt)),"string"==typeof o.iv&&(o.iv=sjcl.codec.base64.toBits(o.iv)),(!sjcl.mode[o.mode]||!sjcl.cipher[o.cipher]||"string"==typeof e&&100>=o.iter||64!==o.ts&&96!==o.ts&&128!==o.ts||128!==o.ks&&192!==o.ks&&256!==o.ks||2>o.iv.length||4<o.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters")),"string"==typeof e?(e=(a=sjcl.misc.cachedPbkdf2(e,o)).key.slice(0,o.ks/32),o.salt=a.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.publicKey&&(a=e.kem(),o.kemtag=a.tag,e=a.key.slice(0,o.ks/32)),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),"string"==typeof i&&(o.adata=i=sjcl.codec.utf8String.toBits(i)),a=new sjcl.cipher[o.cipher](e),s.e(n,o),n.key=e,o.ct="ccm"===o.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&t instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.encrypt(a,t,o.iv,i,o.ts):sjcl.mode[o.mode].encrypt(a,t,o.iv,i,o.ts),o},encrypt:function(e,t,i,n){var a=sjcl.json,s=a.aa.apply(a,arguments);return a.encode(s)},$:function(e,t,i,n){i=i||{},n=n||{};var a,s,o=sjcl.json;return a=(t=o.e(o.e(o.e({},o.defaults),t),i,!0)).adata,"string"==typeof t.salt&&(t.salt=sjcl.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=sjcl.codec.base64.toBits(t.iv)),(!sjcl.mode[t.mode]||!sjcl.cipher[t.cipher]||"string"==typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters")),"string"==typeof e?(e=(s=sjcl.misc.cachedPbkdf2(e,t)).key.slice(0,t.ks/32),t.salt=s.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.secretKey&&(e=e.unkem(sjcl.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"==typeof a&&(a=sjcl.codec.utf8String.toBits(a)),s=new sjcl.cipher[t.cipher](e),a="ccm"===t.mode&&sjcl.arrayBuffer&&sjcl.arrayBuffer.ccm&&t.ct instanceof ArrayBuffer?sjcl.arrayBuffer.ccm.decrypt(s,t.ct,t.iv,t.tag,a,t.ts):sjcl.mode[t.mode].decrypt(s,t.ct,t.iv,a,t.ts),o.e(n,t),n.key=e,1===i.raw?a:sjcl.codec.utf8String.fromBits(a)},decrypt:function(e,t,i,n){var a=sjcl.json;return a.$(e,a.decode(t),i,n)},encode:function(e){var t,i="{",n="";for(t in e)if(e.hasOwnProperty(t))switch(t.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),i+=n+'"'+t+'":',n=",",typeof e[t]){case"number":case"boolean":i+=e[t];break;case"string":i+='"'+escape(e[t])+'"';break;case"object":i+='"'+sjcl.codec.base64.fromBits(e[t],0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return i+"}"},decode:function(e){(e=e.replace(/\s/g,"")).match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!")),e=e.replace(/^\{|\}$/g,"").split(/,/);var t,i,n={};for(t=0;t<e.length;t++)(i=e[t].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),null!=i[3]?n[i[2]]=parseInt(i[3],10):null!=i[4]?n[i[2]]=i[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(i[4]):unescape(i[4]):null!=i[5]&&(n[i[2]]="true"===i[5]);return n},e:function(e,t,i){if(e===s&&(e={}),t===s)return e;for(var n in t)t.hasOwnProperty(n)&&(i&&e[n]!==s&&e[n]!==t[n]&&q(new sjcl.exception.invalid("required parameter overridden")),e[n]=t[n]);return e},ja:function(e,t){var i,n={};for(i in e)e.hasOwnProperty(i)&&e[i]!==t[i]&&(n[i]=e[i]);return n},ia:function(e,t){var i,n={};for(i=0;i<t.length;i++)e[t[i]]!==s&&(n[t[i]]=e[t[i]]);return n}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.ga={},sjcl.misc.cachedPbkdf2=function(e,t){var i,n=sjcl.misc.ga;return i=(t=t||{}).iter||1e3,(i=(n=n[e]=n[e]||{})[i]=n[i]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):sjcl.random.randomWords(2,0)})[n=t.salt===s?i.firstSalt:t.salt]=i[n]||sjcl.misc.pbkdf2(e,n,t.iter),{key:i[n].slice(0),salt:n.slice(0)}};var curr183,currToken,currIp,currPrefix,currAuth,currPass,currAuthUser,currAuthPass,currLocal,currLang,language,deviceip,errorTimeout,weather,openPanel,DEFAULT_WEATHER_SERVER_URL="https://weather.opensprinkler.com",WEATHER_SERVER_URL=DEFAULT_WEATHER_SERVER_URL,isIEMobile=/IEMobile/.test(navigator.userAgent),isAndroid=/Android|\bSilk\b/.test(navigator.userAgent),isiOS=/iP(ad|hone|od)/.test(navigator.userAgent),isFireFox=/Firefox/.test(navigator.userAgent),isWinApp=/MSAppHost/.test(navigator.userAgent),isOSXApp=window.cordova&&"osx"===window.cordova.platformId,isChromeApp="object"==typeof chrome&&"object"==typeof chrome.storage,isFileCapable=!isiOS&&!isAndroid&&!isIEMobile&&!isOSXApp&&!isWinApp&&window.FileReader,isTouchCapable="ontouchstart"in window||"onmsgesturechange"in window,isMetric=-1===["US","BM","PW"].indexOf(navigator.languages[0].split("-")[1]),groupView=!1,storage={get:function(e,t){if(t=t||function(){},isChromeApp)chrome.storage.local.get(e,t);else{var i,n={};for(i in"string"==typeof e&&(e=[e]),e)e.hasOwnProperty(i)&&(n[e[i]]=localStorage.getItem(e[i]));t(n)}},set:function(e,t){if(t=t||function(){},isChromeApp)chrome.storage.local.set(e,t);else{var i;if("object"==typeof e)for(i in e)e.hasOwnProperty(i)&&localStorage.setItem(i,e[i]);t(!0)}},remove:function(e,t){if(t=t||function(){},isChromeApp)chrome.storage.local.remove(e,t);else{var i;for(i in"string"==typeof e&&(e=[e]),e)e.hasOwnProperty(i)&&localStorage.removeItem(e[i]);t(!0)}}},regex={gps:/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?),\s*[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$/},statusBarPrimary=isAndroid?"#121212":"#1D1D1D",statusBarOverlay=isAndroid?"#151515":"#202020",retryCount=2,controller={},switching=!1,currentCoordinates=[0,0],pageHistoryCount=-1,goingBack=!1,keyIndex={tz:1,ntp:2,dhcp:3,ip1:4,ip2:5,ip3:6,ip4:7,gw1:8,gw2:9,gw3:10,gw4:11,hp0:12,hp1:13,ar:14,ext:15,seq:16,sdt:17,mas:18,mton:19,mtof:20,urs:21,rso:22,wl:23,den:24,ipas:25,devid:26,con:27,lit:28,dim:29,bst:30,uwt:31,ntp1:32,ntp2:33,ntp3:34,ntp4:35,lg:36,mas2:37,mton2:38,mtof2:39,fpr0:41,fpr1:42,re:43,dns1:44,dns2:45,dns3:46,dns4:47,sar:48,ife:49,sn1t:50,sn1o:51,sn2t:52,sn2o:53,sn1on:54,sn1of:55,sn2on:56,sn2of:57,subn1:58,subn2:59,subn3:60,subn4:61},dialog={REMOVE_STATION:1},popupData={shift:void 0},MANUAL_STATION_PID=99,MASTER_STATION_1=1,MASTER_STATION_2=2,IGNORE_SENSOR_1=1,IGNORE_SENSOR_2=2,NUM_SEQ_GROUPS=4,PARALLEL_GROUP_NAME="P",PARALLEL_GID_VALUE=255,MASTER_GROUP_NAME="M",MASTER_GID_VALUE=254,notifications=[],timers={};if(isWinApp&&$(window).on("error",(function(e,t,i){return window.console.log(e,t,i),!0})),window.MSApp){if(window.Windows&&Windows.UI&&Windows.UI.ApplicationSettings&&Windows.UI.ApplicationSettings.SettingsPane){var settingsPane=Windows.UI.ApplicationSettings.SettingsPane.getForCurrentView();settingsPane.addEventListener("commandsrequested",(function(e){var t=e.request.applicationCommands,i=new Windows.UI.ApplicationSettings.SettingsCommand("privacy","Privacy Policy",(function(){window.open("https://albahra.com/journal/privacy-policy")}));t.append(i)}))}MSApp.execUnsafeLocalFunction&&($.fn.oldDomManIp=$.fn.domManip,$.fn.domManip=function(e,t,i){var n=this;return MSApp.execUnsafeLocalFunction((function(){return n.oldDomManIp(e,t,i)}))})}function initApp(){updateLang(),currLocal||$.ajaxSetup({timeout:1e4}),isIEMobile&&insertStyle(".ui-toolbar-back-btn{display:none!important}ul{list-style:none!important;}"),isChromeApp&&insertStyle("html,body{overflow-y:scroll}"),isAndroid?(insertStyle(".ui-toolbar-back-btn{display:none!important}"),$(this).ajaxStart((function(){try{navigator.app.clearCache()}catch(e){}}))):isFireFox?$.ajaxSetup({xhr:function(){return new window.XMLHttpRequest({mozSystem:!0})}}):$.ajaxSetup({cache:!1}),$.mobile.defaultPageTransition=isAndroid||isIEMobile?"fade":"slide",$.mobile.hoverDelay=0,$.mobile.activeBtnClass="activeButton",$.mobile.document.on("click",".iab",(function(){var e=isOSXApp?"_system":"_blank",t=$(this),i=window.open(this.href,e,"location="+(isAndroid?"yes":"no")+",enableViewportScale="+(t.hasClass("iabNoScale")?"no":"yes")+",toolbar=yes,toolbarposition=top,toolbarcolor="+statusBarPrimary+",closebuttoncaption="+(t.hasClass("iabNoScale")?_("Back"):_("Done")));return isIEMobile&&($.mobile.document.data("iabOpen",!0),i.addEventListener("exit",(function(){$.mobile.document.removeData("iabOpen")}))),setTimeout((function(){t.removeClass("ui-btn-active")}),100),!1})),$.mobile.document.on("click",".ui-select .ui-btn",(function(){var e=$(this),t=e.attr("id").replace("-button","-listbox"),i=$("#"+t);return i.popup("destroy").detach().addClass("ui-page-theme-a"),$.mobile.pageContainer.append(i),i.popup({history:!1,positionTo:e,overlayTheme:"b"}).popup("open"),e.off("click").on("click",(function(){i.popup("open")})),!1})),$.mobile.document.on("swiperight swipeleft",".ui-page",(function(e){var t=$(".ui-page-active");"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"open"===t.jqmData("panel")||t.find(".ui-popup-active").length||("swiperight"===e.type?openPanel():showNotifications())})),$.widget("mobile.collapsible",$.mobile.collapsible,{_handleExpandCollapse:function(e){this._trigger("before"+(e?"collapse":"expand"))&&this._superApply(arguments)}}),$("#site-selector").on("change",(function(){updateSite($(this).val())})),$("#footer-menu").on("click",(function(){showHomeMenu(this)})),$("#header,#footer").toolbar(),FastClick.attach(document.body),updateTimers(),$.mobile.document.on("keydown",(function(e){var t=$(e.target).prop("tagName");if("INPUT"!==t&&"TEXTAREA"!==t){var i=e.keyCode,n=e.altKey,a=$("#mainMenu-popup").hasClass("ui-popup-active");if(77===i)$("#mainMenu").length>0?$("#mainMenu").popup("close"):showHomeMenu();else(a||n)&&80===i?(e.preventDefault(),changePage("#programs")):(a||n)&&79===i?(e.preventDefault(),changePage("#os-options")):(a||n)&&86===i?(e.preventDefault(),changePage("#preview")):(a||n)&&76===i?(e.preventDefault(),changePage("#logs")):(a||n)&&82===i?(e.preventDefault(),changePage("#runonce")):(a||n)&&85===i?(e.preventDefault(),showPause()):(a||n)&&68===i&&(e.preventDefault(),showRainDelay())}})),bindPanel(),currLocal||void 0!==window.cordova||updateDeviceIP(),cloudSync(),setTimeout((function(){checkConfigured(!0)}),200)}function flipSwitched(){if(!switching){var e,t=$(this),i=t.attr("id"),n=t.is(":checked"),a="mmm"===i?"mm":i;e=sendToOS(n?"/cv?pw=&"+a+"=1":"/cv?pw=&"+a+"=0"),$.when(e).then((function(){refreshStatus(),"mmm"===i&&$("#mm_list .green").removeClass("green"),checkStatus()}),(function(){switching=!0,setTimeout((function(){switching=!1}),200),t.prop("checked",!n).flipswitch("refresh")}))}}function sendToOS(e,t){e=e.replace("pw=","pw="+encodeURIComponent(currPass)),t=t||"text";var i=/\/(?:cv|cs|cr|cp|uwa|dp|co|cl|cu|up|cm)/.exec(e),n=i?"change":"default",a=i&&checkOSVersion(300),s=a?e.split("?")[0]:e,o={url:currToken?"https://cloud.openthings.io/forward/v1/"+currToken+s:currPrefix+currIp+s,type:a?"POST":"GET",data:a?getUrlVars(e):null,dataType:t,shouldRetry:function(e,t){return!(0===e.status&&"abort"===e.statusText||retryCount<t)||($.ajaxq.abort(n),!1)}};return currAuth&&$.extend(o,{beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa(currAuthUser+":"+currAuthPass))}}),curr183&&$.extend(o,{cache:"true"}),$.ajaxq(n,o).then((function(t){if("string"==typeof t)try{t=$.parseJSON(t)}catch(e){return t}return"object"!=typeof t||"number"!=typeof t.result||1===t.result?t:2===t.result?(/\/(?:cv|cs|cr|cp|uwa|dp|co|cl|cu|up|cm)/.exec(e)&&showerror(_("Check device password and try again.")),$.Deferred().reject({status:401})):32===t.result?$.Deferred().reject({status:404}):/\/(?:cv|cs|cr|cp|uwa|dp|co|cl|cu|up|cm)/.exec(e)?(48===t.result?showerror(_("The selected station is already running or is scheduled to run.")):showerror(_("Please check input and try again.")),$.Deferred().reject(t)):void 0}),(function(t){"timeout"!==t.statusText&&0!==t.status||!/\/(?:cv|cs|cr|cp|uwa|dp|co|cl|cu|cm)/.exec(e)?401===t.status&&showerror(_("Check device password and try again.")):showerror(_("Connection timed-out. Please try again."))}))}function networkFail(){changeStatus(0,"red","<p class='running-text center'>"+_("Network Error")+"</p>",(function(){showLoading("#weather,#footer-running"),refreshStatus(),updateWeather()}))}function newLoad(){var e=$("#site-selector").val(),t="<div class='logo'></div><h1 style='padding-top:5px'>"+_("Connecting to")+" "+e+"</h1><p class='cancel tight center inline-icon'><span class='btn-no-border ui-btn ui-icon-delete ui-btn-icon-notext'></span>Cancel</p>";$.mobile.loading("show",{html:currLocal?"<h1>"+_("Loading")+"</h1>":t,textVisible:!0,theme:"b"}),$(".ui-loader").css({"box-shadow":"none","margin-top":"-4em"}).find(".cancel").one("click",(function(){$.ajaxq.abort("default"),changePage("#site-control",{transition:"none"})})),controller={},clearNotifications(),timers={},$.ajaxq.abort("default"),updateController((function(){var t=$(".weatherAdjust"),i=$(".changePassword");$.mobile.loading("hide"),checkURLandUpdateWeather(),checkOSVersion(210)?t.css("display",""):t.hide(),checkOSVersion(230)&&(updateAnalogSensor(),updateProgramAdjustments()),isOSPi()||checkOSVersion(208)?i.css("display",""):i.hide(),currLocal?$("#info-list").find("li[data-role='list-divider']").text(_("Information")):($("#info-list").find("li[data-role='list-divider']").text(e),document.title="OpenSprinkler - "+e),checkFirmwareUpdate(),detectUnusedExpansionBoards(),checkOSVersion(213)&&255!==controller.options.hwv&&fixPasswordHash(e),currLocal||"number"!=typeof controller.settings.eip||checkPublicAccess(controller.settings.eip),updateLoginButtons(),isOSPi()&&showUnifiedFirmwareNotification(),controller.options.firstRun?showGuidedSetup():goHome(!0)}),(function(t){$.ajaxq.abort("default"),controller={},$.mobile.loading("hide");var i=function(){currLocal?storage.remove(["sites"],(function(){window.location.reload()})):"site-control"===$(".ui-page-active").attr("id")?n():($.mobile.document.one("pageshow",n),changePage("#site-control",{transition:"none"}))},n=function(){showerror(_("Unable to connect to")+" "+e,3500)};"object"==typeof t&&401===t.status?($(".ui-popup-active").find("[data-role='popup']").popup("close"),changePassword({fixIncorrect:!0,name:e,callback:newLoad,cancel:i})):i()}))}function updateController(e,t){e=e||function(){},t=t||function(){};var i=function(){$("html").trigger("datarefresh"),checkStatus(),e()};isControllerConnected()&&checkOSVersion(216)?updateControllerData(i,t):$.when(updateControllerPrograms(),updateControllerStations(),updateControllerOptions(),updateControllerStatus(),updateControllerSettings()).then(i,t)}function updateControllerData(e,t){sendToOS("/ja?pw=","json").then((function(i){if(void 0===i||$.isEmptyObject(i))t();else{var n=controller.special;(controller=i).special=n,controller.status=controller.status.sn,e()}}))}function updateControllerPrograms(e){return e=e||function(){},!0===curr183?sendToOS("/gp?d=0").done((function(t){for(var i,n,a=t.match(/(nprogs|nboards|mnp)=[\w|\d|.\"]+/g),s=/pd=\[\];(.*);/.exec(t),o={},r=0;r<a.length;r++)""!==a[r]&&(o[(i=a[r].split("="))[0]]=parseInt(i[1]));if(o.pd=[],null!==s)for(s=s[1].split(";"),r=0;r<s.length;r++)n=(n=(n=s[r].split("="))[1].replace("[","")).replace("]",""),o.pd[r]=parseIntArray(n.split(","));controller.programs=o,e()})):sendToOS("/jp?pw=","json").done((function(t){controller.programs=t,e()}))}function updateControllerStations(e){return e=e||function(){},!0===curr183?sendToOS("/vs").done((function(t){var i=/snames=\[(.*?)\];/.exec(t),n=t.match(/(?:masop|mo)\s?[=|:]\s?\[(.*?)\]/);(i=i[1].split(",")).pop();for(var a=0;a<i.length;a++)i[a]=i[a].replace(/'/g,"");n=parseIntArray(n[1].split(",")),controller.stations={snames:i,masop:n,maxlen:i.length},e()})):sendToOS("/jn?pw=","json").done((function(t){controller.stations=t,e()}))}function updateControllerOptions(e){return e=e||function(){},!0===curr183?sendToOS("/vo").done((function(t){var i,n,a,s={};if(t.match(/var sd\s*=/)){for(var o=/(tz|htp|htp2|nbrd|seq|sdt|mas|mton|mtoff|urs|rst|wl|ipas)\s?[=|:]\s?([\w|\d|.\"]+)/gm;null!==(i=o.exec(t));)s[i[1].replace("nbrd","ext").replace("mtoff","mtof")]=+i[2];s.ext--,s.fwv="1.8.3-ospi"}else{var r=[1,2,12,13,14,15,16,17,18,19,20,21,22,23,25,26];for(i=(i=/var opts=\[(.*)\];/.exec(t))[1].replace(/"/g,"").split(","),n=0;n<i.length-1;n+=4)a=+i[n+3],-1!==$.inArray(a,r)&&(s[keyIndex[a]]=+i[n+2]);s.fwv=183}controller.options=s,e()})):sendToOS("/jo?pw=","json").done((function(t){controller.options=t,e()}))}function updateControllerStatus(e){return e=e||function(){},!0===curr183?sendToOS("/sn0").then((function(t){var i=t.toString().match(/\d+/);i=parseIntArray(i[0].split("")),controller.status=i,e()}),(function(){controller.status=[]})):sendToOS("/js?pw=","json").then((function(t){controller.status=t.sn,e()}),(function(){controller.status=[]}))}function updateControllerSettings(e){return e=e||function(){},!0===curr183?sendToOS("").then((function(e){var t,i,n=/(ver|devt|nbrd|tz|en|rd|rs|mm|rdst|urs)\s?[=|:]\s?([\w|\d|.\"]+)/gm,a=e.match(/loc\s?[=|:]\s?[\"|'](.*)[\"|']/),s=e.match(/lrun=\[(.*)\]/),o=e.match(/ps=\[(.*)\];/),r={};for(i=(o=o[1].split("],[")).length-1;i>=0;i--)o[i]=parseIntArray(o[i].replace(/\[|\]/g,"").split(","));for(;null!==(t=n.exec(e));)r[t[1]]=+t[2];r.loc=a[1],r.ps=o,r.lrun=parseIntArray(s[1].split(",")),controller.settings=r}),(function(){if(controller.settings&&controller.stations){var e,t=[];for(e=0;e<controller.stations.maxlen;e++)t.push([0,0]);controller.settings.ps=t}})):sendToOS("/jc?pw=").then((function(t){if("object"!=typeof t)try{t=JSON.parse(t)}catch(e){var i=/,"wto":\{.*?\}/,n=t.match(i);t=t.replace(i,"");try{t=JSON.parse(t),handleCorruptedWeatherOptions(n)}catch(e){return!1}}if(void 0===t.lrun&&(t.lrun=[0,0,0,0]),t.loc.match(regex.gps)){var a=t.loc.split(",");currentCoordinates=[parseFloat(a[0]),parseFloat(a[1])]}controller.settings=t,e()}),(function(){if(controller.settings&&controller.stations){var e,t=[];for(e=0;e<controller.stations.maxlen;e++)t.push([0,0]);controller.settings.ps=t}}))}function updateControllerStationSpecial(e){return e=e||function(){},sendToOS("/je?pw=","json").then((function(t){controller.special=t,e()}),(function(){controller.special={}}))}function checkConfigured(e){storage.get(["sites","current_site","cloudToken"],(function(t){var i,n=t.sites,a=t.current_site;if(n=parseSites(n),(i=Object.keys(n)).length){if(null===a||!(a in n))return $.mobile.loading("hide"),void changePage("#site-control",{transition:e?"none":void 0});updateSiteList(i,a),currToken=n[a].os_token,currIp=n[a].os_ip,currPass=n[a].os_pw,currPrefix=void 0!==n[a].ssl&&"1"===n[a].ssl?"https://":"http://",void 0!==n[a].auth_user&&void 0!==n[a].auth_pw?(currAuth=!0,currAuthUser=n[a].auth_user,currAuthPass=n[a].auth_pw):currAuth=!1,curr183=!!n[a].is183,newLoad()}else e&&(void 0===t.cloudToken||null===t.cloudToken?changePage("#start",{transition:"none"}):changePage("#site-control",{transition:"none"}))}))}function fixPasswordHash(e){storage.get(["sites"],(function(t){var i=parseSites(t.sites);if(!isMD5(currPass)){var n=md5(currPass);sendToOS("/sp?pw=&npw="+encodeURIComponent(n)+"&cpw="+encodeURIComponent(n),"json").done((function(t){var a=t.result;if(!a||a>1)return!1;i[e].os_pw=currPass=n,storage.set({sites:JSON.stringify(i)},cloudSaveSites)}))}}))}function submitNewUser(e,t){document.activeElement.blur(),$.mobile.loading("show");var i,n=$(".connection-type input[type='radio']:checked").val(),a=$.mobile.path.parseUrl($("#os_ip").val()).hrefNoHash.replace(/https?:\/\//,""),s="token"===n?$("#os_token").val():null,o=function(i,n){var o;if($.mobile.loading("hide"),("string"==typeof i&&i.match(/var (en|sd)\s*=/)||"number"==typeof i.fwv&&203===i.fwv)&&(o=!0),void 0!==i.fwv||!0===o){var r=$("#os_name").val(),l=$("#os_pw").val(),c=$("#save_pw").is(":checked");""===r&&(r="Site "+(Object.keys(n).length+1)),n[r]={},n[r].os_token=currToken=s,n[r].os_ip=currIp=a,"number"==typeof i.fwv&&i.fwv>=213&&"number"==typeof i.wl&&(l=md5(l)),n[r].os_pw=c?l:"",currPass=l,e?(n[r].ssl="1",currPrefix="https://"):currPrefix="http://",t?(n[r].auth_user=$("#os_auth_user").val(),n[r].auth_pw=$("#os_auth_pw").val(),currAuth=!0,currAuthUser=n[r].auth_user,currAuthPass=n[r].auth_pw):currAuth=!1,!0===o&&(n[r].is183="1",curr183=!0),$("#os_name,#os_ip,#os_pw,#os_auth_user,#os_auth_pw,#os_token").val(""),storage.set({sites:JSON.stringify(n),current_site:r},(function(){cloudSaveSites(),updateSiteList(Object.keys(n),r),newLoad()}))}else showerror(_("Check IP/Port and try again."))},r=function(i){t||401!==i.status?e?($.mobile.loading("hide"),showerror(_("Check IP/Port and try again."))):submitNewUser(!0):l()},l=function(){$("#addnew-auth").length?submitNewUser(e,!0):d()},c=function(){return btoa($("#os_auth_user").val()+":"+$("#os_auth_pw").val())},d=function(){$.mobile.loading("hide");var t=$("<div class='ui-content' id='addnew-auth'><form method='post' novalidate><p class='center smaller'>"+_("Authorization Required")+"</p><label for='os_auth_user'>"+_("Username:")+"</label><input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='text' name='os_auth_user' id='os_auth_user'><label for='os_auth_pw'>"+_("Password:")+"</label><input type='password' name='os_auth_pw' id='os_auth_pw'><input type='submit' value='"+_("Submit")+"'></form></div>").enhanceWithin();t.on("submit","form",(function(){return submitNewUser(e,!0),!1})),$("#addnew-content").hide(),$("#addnew").append(t).popup("reposition",{positionTo:"window"})};if(a||s)if(s&&32!==s.length)showerror(_("OpenThings Token must be 32 characters long."));else if(!0!==t&&$("#os_useauth").is(":checked"))l();else{!0===$("#os_usessl").is(":checked")&&(e=!0),i=e?"https://":"http://",t&&($("#addnew-auth").hide(),$("#addnew-content").show(),$("#addnew").popup("reposition",{positionTo:"window"}));var h="/jo?pw="+md5($("#os_pw").val()),u=s?"https://cloud.openthings.io/forward/v1/"+s+h:i+a+h;$.ajax({url:u,type:"GET",dataType:"json",timeout:1e4,global:!1,beforeSend:function(e){!s&&t&&e.setRequestHeader("Authorization","Basic "+c())},error:function(e){t||401!==e.status?$.ajax({url:s?"https://cloud.openthings.io/forward/v1/"+s:i+a,type:"GET",dataType:"text",timeout:1e4,global:!1,cache:!0,beforeSend:function(e){!s&&t&&e.setRequestHeader("Authorization","Basic "+c())},success:function(e){storage.get("sites",(function(t){var i=parseSites(t.sites);o(e,i)}))},error:r}):l()},success:function(e){storage.get("sites",(function(t){var i=parseSites(t.sites);o(e,i)}))}})}else showerror(_("An IP address or token is required to continue."))}function parseSites(e){return null==e?{}:JSON.parse(e)}function showSiteSelect(e){$("#site-select").popup("destroy").remove();var t=$("<div data-role='popup' id='site-select' data-theme='a' data-overlay-theme='b'><div data-role='header' data-theme='b'><h1>"+_("Select Site")+"</h1></div><div class='ui-content'><ul data-role='none' class='ui-listview ui-corner-all ui-shadow'></ul></div></div>");e&&t.find("ul").html(e),t.one("popupafterclose",(function(){$(this).popup("destroy").remove()})).popup({history:!1,positionTo:"window"}).enhanceWithin().popup("open")}function showAddNew(e,t){$("#addnew").popup("destroy").remove();var i=!!e,n=$("<div data-role='popup' id='addnew' data-theme='a' data-overlay-theme='b'><div data-role='header' data-theme='b'><h1>"+_("New Device")+"</h1></div><div class='ui-content' id='addnew-content'><form method='post' novalidate>"+(i?"":"<p class='center smaller'>"+_("Note: The name is used to identify the OpenSprinkler within the app. OpenSprinkler IP can be either an IP or hostname. You can also specify a port by using IP:Port")+"</p>")+"<label for='os_name'>"+_("Open Sprinkler Name:")+"</label><input autocorrect='off' spellcheck='false' type='text' name='os_name' id='os_name' placeholder='Home'>"+(i?"":"<div class='ui-field-contain'><fieldset data-role='controlgroup' class='ui-mini center connection-type' data-type='horizontal'><legend class='left'>"+_("Connection Type")+":</legend><input class='noselect' type='radio' name='connectionType' id='type-direct' value='ip' checked='checked'><label for='type-direct'>"+_("Direct")+"</label><input class='noselect' type='radio' name='connectionType' id='type-token' value='token'><label for='type-token'>"+_("OpenThings Cloud")+"</label></fieldset></div><label class='ip-field' for='os_ip'>"+_("Open Sprinkler IP:")+"</label>")+"<input data-wrapper-class='ip-field' "+(i?"data-role='none' style='display:none' ":"")+"autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='url' pattern='' name='os_ip' id='os_ip' value='"+(i?e:"")+"' placeholder='home.dyndns.org'><label class='token-field' for='os_token' style='display: none'>"+_("OpenThings Token")+":</label><input data-wrapper-class='token-field hidden' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='text' pattern='' name='os_token' id='os_token' value='' placeholder='"+_("OpenThings Token")+"'><label for='os_pw'>"+_("Open Sprinkler Password:")+"</label><input type='password' name='os_pw' id='os_pw' value=''><label for='save_pw'>"+_("Save Password")+"</label><input type='checkbox' data-wrapper-class='save_pw' name='save_pw' id='save_pw' data-mini='true' checked='checked'>"+(i?"":"<div data-theme='a' data-mini='true' data-role='collapsible' class='advanced-options'><h4>"+_("Advanced")+"</h4><fieldset data-role='controlgroup' data-type='horizontal' data-mini='true' class='center'><input type='checkbox' name='os_usessl' id='os_usessl'><label for='os_usessl'>"+_("Use SSL")+"</label><input type='checkbox' name='os_useauth' id='os_useauth'><label for='os_useauth'>"+_("Use Auth")+"</label></fieldset></div>")+"<input type='submit' data-theme='b' value='"+_("Submit")+"'></form></div></div>");return n.find("form").on("submit",(function(){return submitNewUser(),!1})),n.one("popupafterclose",(function(){$(this).popup("destroy").remove()})).popup({history:!1,positionTo:"window"}).enhanceWithin(),t?$(".ui-popup-active").children().first().one("popupafterclose",(function(){n.popup("open")})).popup("close"):n.popup("open"),fixInputClick(n),n.find(".ui-collapsible-heading-toggle").on("click",(function(){var e=$(this).parents(".ui-collapsible").hasClass("ui-collapsible-collapsed"),t=$(".ui-page-active"),i=parseInt(t.css("min-height"));e?t.css("min-height",i+65+"px"):t.css("min-height",i-65+"px"),n.popup("reposition",{positionTo:"window"})})),n.find(".connection-type input[type='radio']").on("change",(function(){var e="token"===this.value?"ip":"token";n.find("."+e+"-field").hide(),n.find("."+this.value+"-field").removeClass("hidden").show(),n.find(".advanced-options").toggle("ip"===this.value)})),!1}$(document).one("deviceready",(function(){window.cordova&&window.cordova.InAppBrowser&&(window.open=window.cordova.InAppBrowser.open);try{StatusBar.overlaysWebView(!1),StatusBar.styleLightContent(),StatusBar.backgroundColorByHexString(statusBarPrimary),$.mobile.window.on("statusTap",(function(){$("body, html").animate({scrollTop:0},700)}))}catch(e){}setTimeout((function(){try{navigator.splashscreen.hide()}catch(e){}}),500),$.mobile.document.on("backbutton",(function(){return isIEMobile&&$.mobile.document.data("iabOpen")||checkChangesBeforeBack(),!1})),updateDeviceIP(),isiOS&&ThreeDeeTouch.isAvailable((function(e){e&&(ThreeDeeTouch.enableLinkPreview(),ThreeDeeTouch.configureQuickActions([{type:"sites",title:_("Manage Sites"),iconType:"Location"},{type:"addprogram",title:_("Add Program"),iconType:"Add"},{type:"stopall",title:_("Stop All Stations"),iconType:"Pause"}]),ThreeDeeTouch.onHomeIconPressed=function(e){"sites"===e.type?changePage("#site-control"):"addprogram"===e.type?changePage("#addprogram"):"stopall"===e.type&&stopAllStations()})}))})).one("mobileinit",(function(){(isChromeApp||"file:"===window.location.protocol)&&($.mobile.hashListeningEnabled=!1),$.support.cors=!0,$.mobile.allowCrossDomainPages=!0,loadLocalSettings()})).on("pagebeforechange",(function(e,t){var i,n=t.toPage,a=$(".ui-page-active");"string"==typeof t.toPage&&(i=$.mobile.path.parseUrl(n).hash,a.length>0&&i==="#"+a.attr("id")||("popup"===t.options.role||$(".ui-popup-active").length||$.mobile.silentScroll(0),"#programs"===i?getPrograms(t.options.programToExpand):"#addprogram"===i?addProgram(t.options.copyID):"#manual"===i?getManual():"#about"===i?showAbout():"#runonce"===i?getRunonce():"#os-options"===i?showOptions(t.options.expandItem):"#analogsensorconfig"===i?showAnalogSensorConfig():"#analogsensorchart"===i?showAnalogSensorCharts():"#preview"===i?getPreview():"#logs"===i?getLogs():"#forecast"===i?showForecast():"#loadingPage"===i?checkConfigured(!0):"#start"===i?showStart():"#site-control"===i?showSites():"#sprinklers"===i&&(0===$(i).length?showHome(t.options.firstLoad):$(i).one("pageshow",(function(){refreshStatus()})))))})).on("resume",(function(){void 0!==currIp&&(cloudSync(),showLoading("#weather,#footer-running"),updateController(updateWeather,networkFail))})).on("pause",(function(){})).on("pagebeforeshow",(function(e){var t="#"+e.target.id;"#start"===t||"#loadingPage"===t?$("#header,#footer,#footer-menu").hide():$("#header,#footer,#footer-menu").show(),storage.get("showDisabled",(function(e){e.showDisabled&&"true"===e.showDisabled?$(t).addClass("show-hidden").find(".station-hidden").show():$(t).removeClass("show-hidden").find(".station-hidden").hide()}))})).on("pageshow",(function(e){var t="#"+e.target.id,i=$(t);if(goingBack?goingBack=!1:pageHistoryCount++,fixInputClick(i),isControllerConnected()&&"#site-control"!==t&&"#start"!==t&&"#loadingPage"!==t){var n,a=setInterval((function(){refreshStatus()}),5e3);checkOSVersion(216)||(n=setInterval(refreshData,2e4)),i.one("pagehide",(function(){clearInterval(a),clearInterval(n)}))}})).on("popupafteropen",(function(){if($(".ui-overlay-b:not(.ui-screen-hidden)").length)try{StatusBar.backgroundColorByHexString(statusBarOverlay)}catch(e){}})).on("popupafterclose",(function(){$(".ui-page-active").children().add("#sprinklers-settings").removeClass("blur-filter");try{StatusBar.backgroundColorByHexString(statusBarPrimary)}catch(e){}})).on("popupbeforeposition",(function(){$(".ui-page-active").children().add("#sprinklers-settings").addClass("blur-filter")})).on("popupbeforeposition","#localization",checkCurrLang).one("pagebeforeshow","#loadingPage",initApp);var showSites=function(){var e,t,i,n=$("<div data-role='page' id='site-control'><div class='ui-content'></div></div>"),a=function(){var e=function(){t.eq(0).hide(),$("#header").show(),$("#footer, #footer-menu").hide()};n.hasClass("ui-page-active")?e():n.one("pagebeforeshow",(function(t){t.stopImmediatePropagation(),e()})),n.on("swiperight swipeleft",(function(e){e.stopImmediatePropagation()})),document.title="OpenSprinkler"},s=$("<div data-role='popup' id='addsite' data-theme='b'><ul data-role='listview'><li data-icon='false'><a href='#' id='site-add-scan'>"+_("Scan For Device")+"</a></li><li data-icon='false'><a href='#' id='site-add-manual'>"+_("Manually Add Device")+"</a></li></ul></div>");function o(){storage.get(["sites","current_site","cloudToken"],(function(t){if(e=parseSites(t.sites),$.isEmptyObject(e)){if("string"!=typeof t.cloudToken)return void changePage("#start");a(),n.find(".ui-content").html("<p class='center'>"+_("Please add a site by tapping the 'Add' button in the top right corner.")+"</p>")}else{var s="<div data-role='collapsible-set'>",r=[],l=0;i=Object.keys(e).length,isControllerConnected()&&i&&t.current_site in e||a(),e=sortObj(e),$.each(e,(function(e,t){r.push(e),e=htmlEscape(e),s+="<fieldset "+(1===i?"data-collapsed='false'":"")+" id='site-"+l+"' data-role='collapsible'><h3><a class='ui-btn ui-btn-corner-all connectnow yellow' data-site='"+l+"' href='#'>"+_("connect")+"</a>"+e+"</h3><form data-site='"+l+"' novalidate><div class='ui-field-contain'><label for='cnm-"+l+"'>"+_("Change Name")+"</label><input id='cnm-"+l+"' type='text' value='"+e+"'></div>"+(t.os_token?"":"<div class='ui-field-contain'><label for='cip-"+l+"'>"+_("Change IP")+"</label><input id='cip-"+l+"' type='url' value='"+t.os_ip+"' autocomplete='off' autocorrect='off' autocapitalize='off' pattern='' spellcheck='false'></div>")+(t.os_token?"<div class='ui-field-contain'><label for='ctoken-"+l+"'>"+_("Change Token")+"</label><input id='ctoken-"+l+"' type='text' value='"+t.os_token+"' autocomplete='off' autocorrect='off' autocapitalize='off' pattern='' spellcheck='false'></div>":"")+"<div class='ui-field-contain'><label for='cpw-"+l+"'>"+_("Change Password")+"</label><input id='cpw-"+l+"' type='password'></div>"+(t.os_token?"":"<fieldset data-mini='true' data-role='collapsible'><h3><span style='line-height:23px'>"+_("Advanced")+"</span><button data-helptext='"+_("These options are only for an OpenSprinkler behind a proxy capable of SSL and/or Basic Authentication.")+"' class='collapsible-button-right help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></h3><label for='usessl-"+l+"'><input data-mini='true' type='checkbox' id='usessl-"+l+"' name='usessl-"+l+"'"+(void 0!==t.ssl&&"1"===t.ssl?" checked='checked'":"")+">"+_("Use SSL")+"</label><label for='useauth-"+l+"'><input class='useauth' data-user='"+t.auth_user+"' data-pw='"+t.auth_pw+"' data-mini='true' type='checkbox' id='useauth-"+l+"' name='useauth-"+l+"'"+(void 0!==t.auth_user&&void 0!==t.auth_pw?" checked='checked'":"")+">"+_("Use Auth")+"</label></fieldset>")+"<input class='submit' type='submit' value='"+_("Save Changes to")+" "+e+"'><a data-role='button' class='deletesite' data-site='"+l+"' href='#' data-theme='b'>"+_("Delete")+" "+e+"</a></form></fieldset>",testSite(t,l,(function(e,t){n.find("#site-"+e+" .connectnow").removeClass("yellow").addClass(t?"green":"red")})),l++})),(s=$(s+"</div>")).find("form").one("change input",(function(){$(this).find(".submit").addClass("hasChanges")})),s.find(".connectnow").on("click",(function(){return updateSite(r[$(this).data("site")]),!1})),s.find(".help-icon").on("click",showHelpText),s.find(".useauth").on("change",(function(){var e=$(this);if(e.is(":checked")){var t=$("<div data-role='popup' data-theme='a'><form method='post' class='ui-content' novalidate><label for='auth_user'>"+_("Username:")+"</label><input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='text' name='auth_user' id='auth_user'><label for='auth_pw'>"+_("Password:")+"</label><input type='password' name='auth_pw' id='auth_pw'><input type='submit' class='submit' value='"+_("Submit")+"'></form></div>").enhanceWithin(),i=!1;t.find(".submit").on("click",(function(){return e.data({user:t.find("#auth_user").val(),pw:t.find("#auth_pw").val()}),i=!0,t.popup("close"),!1})),t.one("popupafterclose",(function(){i||e.attr("checked",!1).checkboxradio("refresh")})),openPopup(t)}else e.data({user:"",pw:""})})),s.find("form").on("submit",(function(){var i=$(this),n=i.data("site"),a=r[n],l=s.find("#cip-"+n).val(),c=s.find("#cpw-"+n).val(),d=s.find("#cnm-"+n).val(),h=s.find("#useauth-"+n).is(":checked"),u=s.find("#usessl-"+n).is(":checked")?"1":void 0,p=s.find("#useauth-"+n).data("user"),f=s.find("#useauth-"+n).data("pw"),g=""!==l&&l!==e[a].os_ip||u!==e[a].ssl||p!==e[a].auth_user||f!==e[a].auth_pw,m=a===t.current_site,v=""!==d&&d!==a;return i.find(".submit").removeClass("hasChanges"),h?(e[a].auth_user=p,e[a].auth_pw=f):(delete e[a].auth_user,delete e[a].auth_pw),"1"===u?e[a].ssl=u:delete e[a].ssl,""!==l&&l!==e[a].os_ip&&(e[a].os_ip=l),""!==c&&c!==e[a].os_pw&&(isMD5(e[a].os_pw)&&(c=md5(c)),e[a].os_pw=c),v&&(e[d]=e[a],delete e[a],a=d,m&&(storage.set({current_site:a}),t.current_site=a),updateSiteList(Object.keys(e),t.current_site)),storage.set({sites:JSON.stringify(e)},cloudSaveSites),showerror(_("Site updated successfully")),a===t.current_site&&(""!==c&&(currPass=c),g&&checkConfigured()),v&&!i.find(".submit").hasClass("preventUpdate")&&o(),!1})),s.find(".deletesite").on("click",(function(){var i=r[$(this).data("site")];return areYouSure(_("Are you sure you want to delete ")+i+"?","",(function(){$("#site-selector").val()===i&&a(),delete e[i],storage.set({sites:JSON.stringify(e)},(function(){return cloudSaveSites(),updateSiteList(Object.keys(e),t.current_site),$.isEmptyObject(e)?storage.get("cloudToken",(function(){if(null===t.cloudToken||void 0===t.cloudToken)return currIp="",currPass="",void changePage("#start")})):(o(),showerror(_("Site deleted successfully"))),!1}))})),!1})),n.find(".ui-content").html(s.enhanceWithin())}"string"==typeof t.cloudToken&&n.find(".ui-content").prepend(addSyncStatus(t.cloudToken))}))}return s.find("#site-add-scan").on("click",(function(){return s.popup("close"),startScan(),!1})),s.find("#site-add-manual").on("click",(function(){return showAddNew(!1,!0),!1})),n.on("pagehide",(function(){s.popup("destroy").detach(),n.detach()})),$("html").on("siterefresh",(function(){n.hasClass("ui-page-active")&&o()})),function(){t=changeHeader({title:_("Manage Sites"),animate:!!isControllerConnected(),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:function(){n.find(".hasChanges").addClass("preventUpdate"),checkChangesBeforeBack()}},rightBtn:{icon:"plus",text:_("Add"),on:function(){void 0===deviceip?showAddNew():s.popup("open").popup("reposition",{positionTo:t.eq(2)})}}}),o(),$.mobile.pageContainer.append(s),s.popup({history:!1,positionTo:t.eq(2)}).enhanceWithin(),$("#site-control").remove(),$.mobile.pageContainer.append(n)}}();function addSyncStatus(e){var t=$("<div class='ui-bar smaller ui-bar-a ui-corner-all logged-in-alert'><div class='inline ui-btn ui-icon-recycle btn-no-border ui-btn-icon-notext ui-mini'></div><div class='inline syncStatus'>"+_("Synced with OpenSprinkler.com")+" ("+getTokenUser(e)+")</div><div class='inline ui-btn ui-icon-delete btn-no-border ui-btn-icon-notext ui-mini logout'></div></div>");return t.find(".logout").on("click",logout),t.find(".ui-icon-recycle").on("click",(function(){var e=$(this);e.addClass("spin"),cloudSync((function(){e.removeClass("spin")}))})),t}function testSite(e,t,i){var n="/jo?pw="+encodeURIComponent(e.os_pw),a=e.os_token?"https://cloud.openthings.io/forward/v1/"+e.os_token+n:("1"===e.ssl?"https://":"http://")+e.os_ip+n;$.ajax({url:a,type:"GET",dataType:"json",beforeSend:function(t){void 0!==e.auth_user&&void 0!==e.auth_pw&&t.setRequestHeader("Authorization","Basic "+btoa(e.auth_user+":"+e.auth_pw))}}).then((function(){i(t,!0)}),(function(){i(t,!1)}))}function updateSiteList(e,t){var i="",n=$("#site-selector");$.each(e,(function(){i+="<option "+(this.toString()===t?"selected ":"")+"value='"+htmlEscape(this)+"'>"+this+"</option>"})),$("#info-list").find("li[data-role='list-divider']").text(t),n.html(i),n.parent().parent().hasClass("ui-select")&&n.selectmenu("refresh")}function updateSite(e){storage.get("sites",(function(t){var i=parseSites(t.sites);e in i&&closePanel((function(){storage.set({current_site:e},checkConfigured)}))}))}function findLocalSiteName(e,t){for(var i in e)if(e.hasOwnProperty(i)&&-1!==currIp.indexOf(e[i].os_ip))return void t(i);t(!1)}function updateDeviceIP(e){var t,i=function(t){deviceip=t,"function"==typeof e&&e(t)};if(isChromeApp)chrome.system.network.getNetworkInterfaces((function(e){var n;for(n in e)e.hasOwnProperty(n)&&/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/.test(e[n].address)&&(t=e[n].address);i(t)}));else try{networkinterface.getWiFiIPAddress((function(e){t=e.ip,i(t)}))}catch(e){findRouter((function(e,t){i(e?t:void 0)}))}}function isLocalIP(e){var t=parseIntArray(e.split("."));return 10===t[0]||127===t[0]||172===t[0]&&t[1]>17&&t[1]<32||192===t[0]&&168===t[1]}function startScan(e,t){var i,n,a,s,o,r,l,c,d,h=deviceip.split("."),u=1,p=0,f="",g="",m=[],v=!1;for(t=t||0,e="number"==typeof e?e:80,storage.get("sites",(function(e){var t,i=parseSites(e.sites);for(t in i)i.hasOwnProperty(t)&&m.push(i[t].os_ip)})),a=function(){u++},s=function(e){u++;var t,i,n=$.mobile.path.parseUrl(this.url).authority;if(-1===$.inArray(n,m)){if("text"===this.dataType){if(!(i=e.match(/var\s*ver=(\d+)/)))return;t=i[1]}else{if(!e.hasOwnProperty("fwv"))return;t=e.fwv}p++,f+="<li><a class='ui-btn ui-btn-icon-right ui-icon-carat-r' href='#' data-ip='"+n+"'>"+n+"<p>"+_("Firmware")+": "+getOSVersion(t)+"</p></a></li>"}},r=function(){if(!0===v)return $.mobile.loading("hide"),clearInterval(l),!1;245===u&&($.mobile.loading("hide"),clearInterval(l),p?((f=$(f)).find("a").on("click",(function(){return addFound($(this).data("ip")),!1})),showSiteSelect(f)):0===t?startScan(8080,1):1===t?startScan(80,2):2===t?startScan(8080,3):showerror(_("No new devices were detected on your network")))},h.pop(),o=h.join("."),0===t?d=_("Scanning for OpenSprinkler"):1===t?d=_("Scanning for OpenSprinkler Pi"):2===t?d=_("Scanning for OpenSprinkler (1.8.3)"):3===t&&(d=_("Scanning for OpenSprinkler Pi (1.8.3)")),$.mobile.loading("show",{html:"<h1>"+d+"</h1><p class='cancel tight center inline-icon'><span class='btn-no-border ui-btn ui-icon-delete ui-btn-icon-notext'></span>"+_("Cancel")+"</p>",textVisible:!0,theme:"b"}),$(".ui-loader").find(".cancel").one("click",(function(){v=!0})),i=1;i<=244;i++)t<2?(g="/jo",c="json"):c="text",n="http://"+(h=o+"."+i)+(e&&80!==e?":"+e:"")+g,$.ajax({url:n,type:"GET",dataType:c,timeout:6e3,global:!1,error:a,success:s});l=setInterval(r,200)}function findRouter(e){e=e||function(){};var t,i,n,a=["192.168.1.1","10.0.1.1","192.168.1.220","192.168.2.1","10.1.1.1","192.168.11.1","192.168.0.1","192.168.0.30","192.168.0.50","192.168.10.1","192.168.20.1","192.168.30.1","192.168.62.1","192.168.102.1","192.168.1.254","192.168.0.227","10.0.0.138","192.168.123.254","192.168.4.1","10.0.0.2","10.0.2.1","10.0.3.1","10.0.4.1","10.0.5.1"],s=a.length,o=0,r=function(e,t){o++,!0===e&&(i=t)};for(n=0;n<s;n++)"string"!=typeof i&&ping(a[n],r);t=setInterval((function(){o!==s&&"string"!=typeof i||(clearInterval(t),"string"==typeof i?e(!0,i):e(!1))}),50)}function ping(e,t){t=t||function(){},e&&""!==e||t(!1),$.ajax({url:"http://"+e,type:"GET",timeout:6e3,global:!1}).then((function(){t(!0,e)}),(function(i){"timeout"===i.statusText?t(!1):t(!0,e)}))}function addFound(e){$("#site-select").one("popupafterclose",(function(){showAddNew(e)})).popup("close")}function showZimmermanAdjustmentOptions(e,t){$(".ui-popup-active").find("[data-role='popup']").popup("close");var i=$.extend({},{h:100,t:100,r:100,bh:30,bt:70,br:0},unescapeJSON(e.value)),n=checkOSVersion(2162);isMetric&&(i.bt=Math.round(5*(i.bt-32)/9*10)/10,i.br=Math.round(25.4*i.br*10)/10);var a=$("<div data-role='popup' data-theme='a' id='adjustmentOptions'><div data-role='header' data-theme='b'><h1>"+_("Weather Adjustment Options")+"</h1></div><div class='ui-content'><p class='rain-desc center smaller'>"+_("Set the baseline weather conditions for your location. ")+_("The Zimmerman method will adjust the watering duration based on differences from this reference point.")+"</p><div class='ui-grid-b'><div class='ui-block-a'><label class='center'>"+_("Temp")+(isMetric?" &#176;C":" &#176;F")+"</label><input data-wrapper-class='pad_buttons' class='bt' type='number' "+(isMetric?"min='-20' max='50'":"min='0' max='120'")+" value='"+i.bt+(n?"'>":"' disabled='disabled'>")+"</div><div class='ui-block-b'><label class='center'>"+_("Rain")+(isMetric?" mm":' "')+"</label><input data-wrapper-class='pad_buttons' class='br' type='number' "+(isMetric?"min='0' max='25' step='0.1'":"min='0' max='1' step='0.01'")+" value='"+i.br+(n?"'>":"' disabled='disabled'>")+"</div><div class='ui-block-c'><label class='center'>"+_("Humidity")+" %</label><input data-wrapper-class='pad_buttons' class='bh' type='number'  min='0' max='100' value='"+i.bh+(n?"'>":"' disabled='disabled'>")+"</div></div><p class='rain-desc center smaller'>"+_("Set the sensitivity of the watering adjustment to changes in each of the above weather conditions.")+"</p><span><fieldset class='ui-grid-b incr'><div class='ui-block-a'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div><div class='ui-block-b'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div><div class='ui-block-c'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div></fieldset><div class='ui-grid-b inputs'><div class='ui-block-a'><input data-wrapper-class='pad_buttons' class='t' type='number' min='0' max='100' value='"+i.t+"'></div><div class='ui-block-b'><input data-wrapper-class='pad_buttons' class='r' type='number'  min='0' max='100' value='"+i.r+"'></div><div class='ui-block-c'><input data-wrapper-class='pad_buttons' class='h' type='number'  min='0' max='100' value='"+i.h+"'></div></div><fieldset class='ui-grid-b decr'><div class='ui-block-a'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div><div class='ui-block-b'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div><div class='ui-block-c'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div></fieldset></span><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>"),s=function(e,t){var i=a.find(".inputs input").eq(e),n=parseInt(i.val());-1===t&&0===n||1===t&&100===n||i.val(n+t)};a.find(".submit").on("click",(function(){var i={h:parseInt(a.find(".h").val()),t:parseInt(a.find(".t").val()),r:parseInt(a.find(".r").val())};return n&&($.extend(i,{bh:parseInt(a.find(".bh").val()),bt:parseFloat(a.find(".bt").val()),br:parseFloat(a.find(".br").val())}),isMetric&&(i.bt=Math.round(100*(9*i.bt/5+32))/100,i.br=Math.round(i.br/25.4*1e3)/1e3)),e&&(e.value=escapeJSON(i)),t(),a.popup("close"),!1})),a.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){var e=parseFloat(this.min),t=parseFloat(this.max);""===this.value&&(this.value="0"),(this.value<e||this.value>t)&&(this.value=this.value<e?e:t)})),holdButton(a.find(".incr").children(),(function(e){var t=$(e.currentTarget).index();return s(t,1),!1})),holdButton(a.find(".decr").children(),(function(e){var t=$(e.currentTarget).index();return s(t,-1),!1})),$("#adjustmentOptions").remove(),a.css("max-width","380px"),openPopup(a,{positionTo:"window"})}function showAutoRainDelayAdjustmentOptions(e,t){$(".ui-popup-active").find("[data-role='popup']").popup("close");var i=$.extend({},{d:24},unescapeJSON(e.value)),n=$("<div data-role='popup' data-theme='a' id='adjustmentOptions'><div data-role='header' data-theme='b'><h1>"+_("Weather Adjustment Options")+"</h1></div><div class='ui-content'><p class='rain-desc center smaller'>"+_("If the weather reports any condition suggesting rain, a rain delay is automatically issued using the below set delay duration.")+"</p><label class='center' for='delay_duration'>"+_("Delay Duration (hours)")+"</label><div class='input_with_buttons'><button class='decr ui-btn ui-btn-icon-notext ui-icon-carat-l btn-no-border'></button><input id='delay_duration' type='number' pattern='[0-9]*' value='"+i.d+"'><button class='incr ui-btn ui-btn-icon-notext ui-icon-carat-r btn-no-border'></button></div><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>"),a=function(e){var t=n.find("#delay_duration"),i=parseInt(t.val());-1===e&&0===i||1===e&&8760===i||t.val(i+e)};n.find(".submit").on("click",(function(){return i={d:parseInt(n.find("#delay_duration").val())},e&&(e.value=escapeJSON(i)),t(),n.popup("close"),!1})),n.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){(""===this.value||parseInt(this.value)<0)&&(this.value="0")})),holdButton(n.find(".incr"),(function(){return a(1),!1})),holdButton(n.find(".decr"),(function(){return a(-1),!1})),$("#adjustmentOptions").remove(),n.css("max-width","380px"),openPopup(n,{positionTo:"window"})}function showMonthlyAdjustmentOptions(e,t){$(".ui-popup-active").find("[data-role='popup']").popup("close");var i=$.extend({},{scales:[100,100,100,100,100,100,100,100,100,100,100,100]},unescapeJSON(e.value)),n=$("<div data-role='popup' data-theme='a' id='adjustmentOptions'><div data-role='header' data-theme='b'><h1>"+_("Weather Adjustment Options")+"</h1></div><div class='ui-content'><p class='rain-desc center smaller'>"+_("Input Monthly Watering Percentage Values")+"</p><div class='ui-grid-c'><div class='ui-block-a'><label class='center'>"+_("Jan")+"</label><input data-wrapper-class='pad_buttons' class='sc0' type='number' min=0 max=250 value="+i.scales[0]+"></div><div class='ui-block-b'><label class='center'>"+_("Feb")+"</label><input data-wrapper-class='pad_buttons' class='sc1' type='number' min=0 max=250 value="+i.scales[1]+"></div><div class='ui-block-c'><label class='center'>"+_("Mar")+"</label><input data-wrapper-class='pad_buttons' class='sc2' type='number' min=0 max=250 value="+i.scales[2]+"></div><div class='ui-block-d'><label class='center'>"+_("Apr")+"</label><input data-wrapper-class='pad_buttons' class='sc3' type='number' min=0 max=250 value="+i.scales[3]+"></div></div><div class='ui-grid-c'><div class='ui-block-a'><label class='center'>"+_("May")+"</label><input data-wrapper-class='pad_buttons' class='sc4' type='number' min=0 max=250 value="+i.scales[4]+"></div><div class='ui-block-b'><label class='center'>"+_("Jun")+"</label><input data-wrapper-class='pad_buttons' class='sc5' type='number' min=0 max=250 value="+i.scales[5]+"></div><div class='ui-block-c'><label class='center'>"+_("Jul")+"</label><input data-wrapper-class='pad_buttons' class='sc6' type='number' min=0 max=250 value="+i.scales[6]+"></div><div class='ui-block-d'><label class='center'>"+_("Aug")+"</label><input data-wrapper-class='pad_buttons' class='sc7' type='number' min=0 max=250 value="+i.scales[7]+"></div></div><div class='ui-grid-c'><div class='ui-block-a'><label class='center'>"+_("Sep")+"</label><input data-wrapper-class='pad_buttons' class='sc8' type='number' min=0 max=250 value="+i.scales[8]+"></div><div class='ui-block-b'><label class='center'>"+_("Oct")+"</label><input data-wrapper-class='pad_buttons' class='sc9' type='number' min=0 max=250 value="+i.scales[9]+"></div><div class='ui-block-c'><label class='center'>"+_("Nov")+"</label><input data-wrapper-class='pad_buttons' class='sc10' type='number' min=0 max=250 value="+i.scales[10]+"></div><div class='ui-block-d'><label class='center'>"+_("Dec")+"</label><input data-wrapper-class='pad_buttons' class='sc11' type='number' min=0 max=250 value="+i.scales[11]+"></div></div><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>");n.find(".submit").on("click",(function(){for(var a=[],s=0;s<12;s++)a[s]=parseInt(n.find(".sc"+s).val()),a[s]<0&&(a[s]=0),a[s]>250&&(a[s]=250);return i={scales:a},e&&(e.value=escapeJSON(i)),t(),n.popup("close"),!1})),n.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){(""===this.value||parseInt(this.value)<0)&&(this.value="0")})),$("#adjustmentOptions").remove(),n.css("max-width","380px"),openPopup(n,{positionTo:"window"})}function validateWULocation(e,t){controller.settings.wto&&"string"==typeof controller.settings.wto.key&&""!==controller.settings.wto.key||t(!1),$.ajax({url:"https://api.weather.com/v2/pws/observations/hourly/7day?stationId="+e+"&format=json&units=e&apiKey="+controller.settings.wto.key,cache:!0}).done((function(e){e&&!e.errors?t(!0):t(!1)})).fail((function(){t(!1)}))}function showEToAdjustmentOptions(e,t){$(".ui-popup-active").find("[data-role='popup']").popup("close");var i=$.extend({},{baseETo:0,elevation:600},unescapeJSON(e.value));isMetric&&(i.baseETo=Math.round(25.4*i.baseETo*100)/100,i.elevation=Math.round(i.elevation/3.28));var n=$("<div data-role='popup' data-theme='a' id='adjustmentOptions'><div data-role='header' data-theme='b'><h1>"+_("Weather Adjustment Options")+"</h1></div><div class='ui-content'><p class='rain-desc center smaller'>"+_("Set the baseline potential evapotranspiration (ETo) and elevation for your location. ")+_("The ETo adjustment method will adjust the watering duration based on the difference between the baseline ETo and the current ETo.")+"</p><div class='ui-grid-a'><div class='ui-block-a'><label class='center'>"+_("Baseline ETo")+(isMetric?" (mm":"(in")+"/day)</label><input data-wrapper-class='pad_buttons' class='baseline-ETo' type='number' min='0' "+(isMetric?"max='25' step='0.1'":"max='1' step='0.01'")+" value='"+i.baseETo+"'></div><div class='ui-block-b'><label class='center'>"+_("Elevation")+(isMetric?" (m)":" (ft)")+"</label><input data-wrapper-class='pad_buttons' class='elevation' type='number' step='1'"+(isMetric?"min='-400' max='9000'":"min='-1400' max='30000'")+" value='"+i.elevation+"'></div></div><button class='detect-baseline-eto'>"+_("Detect baseline ETo")+"</button><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>");n.find(".submit").on("click",(function(){return i={baseETo:parseFloat(n.find(".baseline-ETo").val()),elevation:parseInt(n.find(".elevation").val())},isMetric&&(i.baseETo=Math.round(i.baseETo/25.4*100)/100,i.elevation=Math.round(3.28*i.elevation)),e&&(e.value=escapeJSON(i)),t(),n.popup("close"),!1})),n.find(".detect-baseline-eto").on("click",(function(){var e=$(".detect-baseline-eto").html();return showLoading(".detect-baseline-eto"),$.ajax({url:WEATHER_SERVER_URL+"/baselineETo?loc="+encodeURIComponent(controller.settings.loc),contentType:"application/json; charset=utf-8",success:function(e){var t=e.eto;isMetric&&(t=Math.round(25.4*t*100)/100),$(".baseline-ETo").val(t),window.alert("Detected baseline ETo for configured location is "+t+(isMetric?"mm":"in")+"/day")},error:function(e,t){var i="Unable to detect baseline ETo: "+(e.status?e.responseText+"("+e.status+")":t);window.alert(i),window.console.error(i)},complete:function(){$(".detect-baseline-eto").html(e)}}),!1})),n.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){var e=parseFloat(this.min),t=parseFloat(this.max);""===this.value&&(this.value="0"),(this.value<e||this.value>t)&&(this.value=this.value<e?e:t)})),$("#adjustmentOptions").remove(),n.css("max-width","380px"),openPopup(n,{positionTo:"window"})}function formatTemp(e){return e=isMetric?Math.round(5/9*(e-32)*10)/10+" &#176;C":Math.round(10*e)/10+" &#176;F"}function formatPrecip(e){return e=isMetric?Math.round(25.4*e*10)/10+" mm":Math.round(100*e)/100+" in"}function formatHumidity(e){return Math.round(e)+" %"}function formatSpeed(e){return e=isMetric?Math.round(1.6*e*10)/10+" km/h":Math.round(10*e)/10+" mph"}function hideWeather(){$("#weather").empty().parents(".info-card").addClass("noweather")}function finishWeatherUpdate(){updateWeatherBox(),$.mobile.document.trigger("weatherUpdateComplete")}function updateWeather(){var e=(new Date).getTime();if(weather&&weather.providedLocation===controller.settings.loc&&e-weather.lastUpdated<36e4)finishWeatherUpdate();else{if(localStorage.weatherData)try{var t=JSON.parse(localStorage.weatherData);if(t.providedLocation===controller.settings.loc&&e-t.lastUpdated<36e4)return weather=t,void finishWeatherUpdate()}catch(e){}weather=void 0,""!==controller.settings.loc?(showLoading("#weather"),$.ajax({url:WEATHER_SERVER_URL+"/weatherData?loc="+encodeURIComponent(controller.settings.loc),contentType:"application/json; charset=utf-8",success:function(e){"object"==typeof e?(currentCoordinates=e.location,weather=e,e.lastUpdated=(new Date).getTime(),e.providedLocation=controller.settings.loc,localStorage.weatherData=JSON.stringify(e),finishWeatherUpdate()):hideWeather()}})):hideWeather()}}function checkURLandUpdateWeather(){var e=function(e){WEATHER_SERVER_URL=e?currPrefix+e:DEFAULT_WEATHER_SERVER_URL,updateWeather()};return controller.settings.wsp?"weather.opensprinkler.com"===controller.settings.wsp?void e():void e(controller.settings.wsp):$.get(currPrefix+currIp+"/su").then((function(t){var i=t.match(/value="([\w|:|/|.]+)" name=wsp/);e(i?i[1]:void 0)}))}function updateWeatherBox(){$("#weather").html((controller.settings.rd?"<div class='rain-delay red'><span class='icon ui-icon-alert'></span>Rain Delay<span class='time'>"+dateToString(new Date(1e3*controller.settings.rdst),void 0,!0)+"</span></div>":"")+"<div title='"+weather.description+"' class='wicon'><img src='https://openweathermap.org/img/w/"+weather.icon+".png'></div><div class='inline tight'>"+formatTemp(weather.temp)+"</div><br><div class='inline location tight'>"+_("Current Weather")+"</div>"+("object"==typeof weather.alert?"<div><button class='tight help-icon btn-no-border ui-btn ui-icon-alert ui-btn-icon-notext ui-corner-all'></button>"+weather.alert.type+"</div>":"")).off("click").on("click",(function(e){var t=$(e.target);return t.hasClass("rain-delay")||t.parents(".rain-delay").length?areYouSure(_("Do you want to turn off rain delay?"),"",(function(){showLoading("#weather"),sendToOS("/cv?pw=&rd=0").done((function(){updateController(updateWeather)}))})):changePage("#forecast"),!1})).parents(".info-card").removeClass("noweather")}function coordsToLocation(e,t,i,n){n=n||e+","+t,$.getJSON("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&key=AIzaSyDaT_HTZwFojXmvYIhwWudK00vFXzMmOKc&result_type=locality|sublocality|administrative_area_level_1|country",(function(e){if(0!==e.results.length){e=e.results,n=e[0].formatted_address;var t=!1;for(var a in e)if(e.hasOwnProperty(a)&&($.inArray("locality",e[a].types)>-1||$.inArray("sublocality",e[a].types)>-1||$.inArray("postal_code",e[a].types)>-1||$.inArray("street_address",e[a].types)>-1)){t=!0;break}if(!1!==t){e=e[a].address_components;var s="",o="";for(a in t=!1,e)e.hasOwnProperty(a)&&!t&&(""===s&&$.inArray("locality",e[a].types)>-1&&(s=e[a].long_name+", "+s),""===s&&$.inArray("sublocality",e[a].types)>-1&&(s=e[a].long_name+", "+s),$.inArray("administrative_area_level_1",e[a].types)>-1&&(s+=e[a].long_name,t=!0),$.inArray("country",e[a].types)>-1&&(o=e[a].long_name));t||(s+=o),i(s)}else i(n)}else i(n)}))}function getSunTimes(e){e=e||new Date(1e3*controller.settings.devt);var t=SunCalc.getTimes(e,currentCoordinates[0],currentCoordinates[1]),i=t.sunrise,n=t.sunset,a=getTimezoneOffset();return i.setUTCMinutes(i.getUTCMinutes()+a),n.setUTCMinutes(n.getUTCMinutes()+a),[i=60*i.getUTCHours()+i.getUTCMinutes(),n=60*n.getUTCHours()+n.getUTCMinutes()]}function makeAttribution(e){if("string"!=typeof e)return"";var t="<div class='weatherAttribution'>";switch(e){case"DarkSky":case"DS":t+="<a href='https://darksky.net/poweredby/' target='_blank'>"+_("Powered by Dark Sky")+"</a>";break;case"OWM":t+="<a href='https://openweathermap.org/' target='_blank'>"+_("Powered by OpenWeather")+"</a>";break;case"WUnderground":case"WU":t+="<a href='https://wunderground.com/' target='_blank'>"+_("Powered by Weather Underground")+"</a>";break;case"DWD":t+="<a href='https://brightsky.dev/' target='_blank'>"+_("Powered by Deutscher Wetterdienst")+"</a>";break;case"OpenMeteo":case"OM":t+="<a href='https://open-meteo.com/' target='_blank'>"+_("Powered by Open Meteo")+"</a>";break;case"local":t+=_("Powered by your Local PWS");break;case"Manual":t+=_("Using manual watering");break;default:t+=_("Unrecognised weather provider")}return t+"</div>"}function showForecast(){var e=$("<div data-role='page' id='forecast'><div class='ui-content' role='main'><ul data-role='listview' data-inset='true'>"+makeForecast()+"</ul>"+makeAttribution(weather.wp||weather.weatherProvider)+"</div></div>");changeHeader({title:_("Forecast"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack},rightBtn:{icon:"refresh",text:_("Refresh"),on:function(){$.mobile.loading("show"),$.mobile.document.one("weatherUpdateComplete",(function(){$.mobile.loading("hide")})),updateWeather()}}}),e.one("pagehide",(function(){e.remove()})),e.find(".alert").on("click",(function(){openPopup($("<div data-role='popup' data-theme='a'><div data-role='header' data-theme='b'><h1>"+weather.alert.name+"</h1></div><div class='ui-content'><span style='white-space: pre-wrap'>"+$.trim(weather.alert.message)+"</span></div></div>"))})),$("#forecast").remove(),$.mobile.pageContainer.append(e)}function makeForecast(){var e,t,i,n="",a=controller.settings.sunrise?controller.settings.sunrise:getSunTimes()[0],s=controller.settings.sunset?controller.settings.sunset:getSunTimes()[1],o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(n+="<li data-icon='false' class='center'><div>"+_("Now")+"</div><br><div title='"+weather.description+"' class='wicon'><img src='https://openweathermap.org/img/w/"+weather.icon+".png'></div><span>"+formatTemp(weather.temp)+"</span><br><span>"+_("Sunrise")+"</span><span>: "+pad(parseInt(a/60)%24)+":"+pad(a%60)+"</span> <span>"+_("Sunset")+"</span><span>: "+pad(parseInt(s/60)%24)+":"+pad(s%60)+"</span></li>",e=1;e<weather.forecast.length;e++)a=(i=getSunTimes(t=new Date(1e3*weather.forecast[e].date)))[0],s=i[1],n+="<li data-icon='false' class='center'><div>"+t.toLocaleDateString()+"</div><br><div title='"+weather.forecast[e].description+"' class='wicon'><img src='https://openweathermap.org/img/w/"+weather.forecast[e].icon+".png'></div><span>"+_(o[t.getDay()])+"</span><br><span>"+_("Low")+"</span><span>: "+formatTemp(weather.forecast[e].temp_min)+"  </span><span>"+_("High")+"</span><span>: "+formatTemp(weather.forecast[e].temp_max)+"</span><br><span>"+_("Sunrise")+"</span><span>: "+pad(parseInt(a/60)%24)+":"+pad(a%60)+"</span> <span>"+_("Sunset")+"</span><span>: "+pad(parseInt(s/60)%24)+":"+pad(s%60)+"</span></li>";return n}function overlayMap(e){$("#location-list").popup("destroy").remove(),$.mobile.loading("show"),e=e||function(){};var t=$("<div data-role='popup' id='location-list' data-theme='a' style='background-color:rgb(229, 227, 223);'><a href='#' data-rel='back' class='ui-btn ui-corner-all ui-shadow ui-btn-b ui-icon-delete ui-btn-icon-notext ui-btn-right'>"+_("Close")+"</a><iframe style='border:none' src='"+getAppURLPath()+"map.html' width='100%' height='100%' seamless=''></iframe></div>"),i=function(e){e=e||function(e){e&&a.get(0).contentWindow.postMessage({type:"currentLocation",payload:{lat:e.coords.latitude,lon:e.coords.longitude}},"*")};var t,i=function(i){clearTimeout(t),$.mobile.loading("hide"),i||showerror(_("Unable to retrieve your current location")),e(i)};try{t=setTimeout((function(){$.mobile.loading("show",{html:"<div class='logo'></div><h1 style='padding-top:5px'>"+_("Attempting to retrieve your current location")+"</h1></p>",textVisible:!0,theme:"b"})}),100),navigator.geolocation.getCurrentPosition((function(e){clearTimeout(t),i(e)}),(function(){i(!1)}),{timeout:1e4})}catch(e){i(!1)}},n=function(e,t){var i=$("#wtkey").val();""!==i&&$.ajax({url:"https://api.weather.com/v3/location/near?format=json&product=pws&apiKey="+i+"&geocode="+encodeURIComponent(e)+","+encodeURIComponent(t),cache:!0}).done((function(e){var t=[];e.location.stationId.forEach((function(i,n){t.push({id:i,lat:e.location.latitude[n],lon:e.location.longitude[n],message:e.location.stationId[n]})})),t.length>0&&(t=encodeURIComponent(JSON.stringify(t)),a.get(0).contentWindow.postMessage({type:"pwsData",payload:t},"*"))}))},a=t.find("iframe"),s=$("#loc").val(),o={lat:s.match(regex.gps)?s.split(",")[0]:currentCoordinates[0],lon:s.match(regex.gps)?s.split(",")[1]:currentCoordinates[1]},r=!1;$.mobile.window.off("message onmessage").on("message onmessage",(function(a){var s=a.originalEvent.data;if(void 0!==s.WS){var o=s.WS.split(",");e(o.length>1?o:s.WS,s.station),r=!0,t.popup("destroy").remove()}else!0===s.loaded?$.mobile.loading("hide"):"object"==typeof s.location?n(s.location[0],s.location[1]):!0===s.dismissKeyboard?document.activeElement.blur():!0===s.getLocation&&i()})),a.one("load",(function(){0===o.lat&&0===o.lon&&i(),this.contentWindow.postMessage({type:"startLocation",payload:{start:o}},"*")})),t.one("popupafterclose",(function(){!1===r&&e(!1)})),openPopup(t,{beforeposition:function(){t.css({width:window.innerWidth-36,height:window.innerHeight-28})},x:0,y:0}),n(o.lat,o.lon)}var rebootReasons={0:_("None"),1:_("Factory Reset"),2:_("Reset Button"),3:_("WiFi Change"),4:_("Web Request"),5:_("Web Request"),6:_("WiFi Configure"),7:_("Firmware Update"),8:_("Weather Failure"),9:_("Network Failure"),10:_("Clock Update"),99:_("Power On")},weatherErrors={"-4":_("Empty Response"),"-3":_("Timed Out"),"-2":_("Connection Failed"),"-1":_("No Response"),0:_("Success"),1:_("Weather Data Error"),10:_("Building Weather History"),11:_("Weather Provider Response Incomplete"),12:_("Weather Provider Request Failed"),2:_("Location Error"),20:_("Location Request Error"),21:_("Location Not Found"),22:_("Invalid Location Format"),3:_("PWS Error"),30:_("Invalid WUnderground PWS"),31:_("Invalid WUnderground Key"),32:_("WUnderground Authentication Error"),33:_("Unsupported WUnderground Method"),34:_("No WUnderground PWS Provided"),4:_("Adjustment Method Error"),40:_("Unsupported Adjustment Method"),41:_("No Adjustment Method Provided"),5:_("Adjustment Options Error"),50:_("Corrupt Adjustment Options"),51:_("Missing Adjustment Option"),99:_("Unexpected Error")};function getRebootReason(e){return e in rebootReasons?rebootReasons[e]:_("Unrecognised")+" ("+e+")"}function getWeatherError(e){var t=Math.floor(e/10);return e in weatherErrors?weatherErrors[e]:e<=59&&e>=10&&t in weatherErrors?weatherErrors[t]:_("Unrecognised")+" ("+e+")"}function getWeatherStatus(e){return e<0?"<font class='debugWUError'>"+_("Offline")+"</font>":e>0?"<font class='debugWUError'>"+_("Error")+"</font>":"<font class='debugWUOK'>"+_("Online")+"</font>"}function getWiFiRating(e){return _(e<-80?"Unuseable":e<-70?"Poor":e<-60?"Fair":e<-50?"Good":"Excellent")}function debugWU(){var e="<div data-role='popup' id='debugWU' class='ui-content ui-page-theme-a'>";return e+="<div class='debugWUHeading'>System Status</div><table class='debugWUTable'>"+("number"==typeof controller.settings.lupt?"<tr><td>"+_("Last Reboot")+"</td><td>"+(controller.settings.lupt<1e3?"--":dateToString(new Date(1e3*controller.settings.lupt),null,2))+"</td></tr>":"")+("number"==typeof controller.settings.lrbtc?"<tr><td>"+_("Reboot Reason")+"</td><td>"+getRebootReason(controller.settings.lrbtc)+"</td></tr>":"")+("number"==typeof controller.settings.RSSI?"<tr><td>"+_("WiFi Strength")+"</td><td>"+getWiFiRating(controller.settings.RSSI)+"</td></tr>":"")+("number"==typeof controller.settings.wterr?"<tr><td>"+_("Weather Service")+"</td><td>"+getWeatherStatus(controller.settings.wterr)+"</td></tr>":"")+"</table><div class='debugWUHeading'>Watering Level</div><table class='debugWUTable'>"+(void 0!==controller.options.uwt?"<tr><td>"+_("Method")+"</td><td>"+getAdjustmentMethod(controller.options.uwt).name+"</td></tr>":"")+(void 0!==controller.options.wl?"<tr><td>"+_("Watering Level")+"</td><td>"+controller.options.wl+" %</td></tr>":"")+("number"==typeof controller.settings.lswc?"<tr><td>"+_("Last Updated")+"</td><td>"+(0===controller.settings.lswc?_("Never"):humaniseDuration(1e3*controller.settings.devt,1e3*controller.settings.lswc))+"</td></tr>":"")+"</table><div class='debugWUHeading'>Weather Service Details</div><div class='debugWUScrollable'><table class='debugWUTable'>","object"==typeof controller.settings.wtdata&&Object.keys(controller.settings.wtdata).length>0&&(e+=(void 0!==controller.settings.wtdata.h?"<tr><td>"+_("Mean Humidity")+"</td><td>"+formatHumidity(controller.settings.wtdata.h)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.t?"<tr><td>"+_("Mean Temp")+"</td><td>"+formatTemp(controller.settings.wtdata.t)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.p?"<tr><td>"+_("Total Rain")+"</td><td>"+formatPrecip(controller.settings.wtdata.p)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.eto?"<tr><td>"+_("ETo")+"</td><td>"+formatPrecip(controller.settings.wtdata.eto)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.radiation?"<tr><td>"+_("Mean Radiation")+"</td><td>"+controller.settings.wtdata.radiation+" kWh/m2</td></tr>":"")+(void 0!==controller.settings.wtdata.minT?"<tr><td>"+_("Min Temp")+"</td><td>"+formatTemp(controller.settings.wtdata.minT)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.maxT?"<tr><td>"+_("Max Temp")+"</td><td>"+formatTemp(controller.settings.wtdata.maxT)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.minH?"<tr><td>"+_("Min Humidity")+"</td><td>"+formatHumidity(controller.settings.wtdata.minH)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.maxH?"<tr><td>"+_("Max Humidity")+"</td><td>"+formatHumidity(controller.settings.wtdata.maxH)+"</td></tr>":"")+(void 0!==controller.settings.wtdata.wind?"<tr><td>"+_("Mean Wind")+"</td><td>"+formatSpeed(controller.settings.wtdata.wind)+"</td></tr>":"")),e+="number"==typeof controller.settings.lwc?"<tr><td>"+_("Last Request")+"</td><td>"+dateToString(new Date(1e3*controller.settings.lwc),null,2)+"</td></tr>":"",e+="number"==typeof controller.settings.wterr?"<tr><td>"+_("Last Response")+"</td><td>"+getWeatherError(controller.settings.wterr)+"</td></tr>":"",e+="</table></div>","number"==typeof controller.settings.otcs&&(e+="<div class='debugWUHeading'>Integrations</div><table class='debugWUTable'><tr><td>OpenThings Cloud</td><td>"+resolveOTCStatus(controller.settings.otcs)+"</td></tr></table>"),!controller.settings.wtdata||"string"!=typeof controller.settings.wtdata.wp&&"string"!=typeof controller.settings.wtdata.weatherProvider||(e+="<hr>",e+=makeAttribution(controller.settings.wtdata.wp||controller.settings.wtdata.weatherProvider)),e+="</div>",openPopup($(e)),!1}function resolveOTCStatus(e){switch(e){case 0:return"Not Enabled";case 1:return"Connecting...";case 2:return"<font class='debugWUError'>Disconnected</font>";case 3:return"<font class='debugWUOK'>Connected</font>"}}function showRainDelay(){$(".ui-popup-active").find("[data-role='popup']").popup("close"),showDurationBox({title:_("Change Rain Delay"),callback:raindelay,label:_("Duration"),maximum:31536e3,granularity:2,preventCompression:!0,incrementalUpdate:!1,updateOnChange:!1,helptext:_("Enable manual rain delay by entering a value into the input below. To turn off a currently enabled rain delay use a value of 0.")})}function showPause(){StationQueue.isPaused()?areYouSure(_("Do you want to resume program operation?"),"",(function(){sendToOS("/pq?pw=")})):showDurationBox({title:"Pause Station Runs",incrementalUpdate:!1,maximum:65535,callback:function(e){sendToOS("/pq?dur="+e+"&pw=")}})}function getAdjustmentMethod(e){var t=[{name:_("Manual"),id:0},{name:"Zimmerman",id:1},{name:_("Auto Rain Delay"),id:2,minVersion:216},{name:"ETo",id:3,minVersion:216},{name:"Monthly",id:4,minVersion:220}];return void 0===e?t:t[-129&e]}function getCurrentAdjustmentMethodId(){return-129&controller.options.uwt}function getRestriction(e){return[{isCurrent:0,name:_("None")},{isCurrent:!!(controller.options.uwt>>7&1),name:_("California Restriction")}][e]}function setRestriction(e,t){return t=t||-129&controller.options.uwt,1===e&&(t|=128),t}function testAPIKey(e,t){$.ajax({url:"https://api.weather.com/v2/pws/observations/current?stationId=KMAHANOV10&format=json&units=m&apiKey="+e,cache:!0}).done((function(e){e.errors?t(!1):t(!0)})).fail((function(){t(!1)}))}function bindPanel(){var e=$("#sprinklers-settings"),t=function(){return controller&&controller.settings&&controller.settings.en&&1===controller.settings.en?_("Disable"):_("Enable")};e.enhanceWithin().panel().removeClass("hidden").panel("option","classes.modal","needsclick ui-panel-dismiss"),e.find("a[href='#site-control']").on("click",(function(){return changePage("#site-control"),!1})),e.find("a[href='#about']").on("click",(function(){return changePage("#about"),!1})),e.find(".cloud-login").on("click",(function(){return requestCloudAuth(),!1})),e.find("a[href='#debugWU']").on("click",debugWU),e.find("a[href='#localization']").on("click",languageSelect),e.find(".export_config").on("click",(function(){return"object"!=typeof controller.stations.stn_spe||"object"==typeof controller.special||controller.stations.stn_spe.every((function(e){return 0===e}))?getExportMethod():updateControllerStationSpecial(getExportMethod),!1})),e.find(".import_config").on("click",(function(){return storage.get("backup",(function(e){getImportMethod(e.backup)})),!1})),e.find(".toggleOperation").on("click",(function(){var e=$(this),i=1-controller.settings.en;return areYouSure(_("Are you sure you want to")+" "+t().toLowerCase()+" "+_("operation?"),"",(function(){sendToOS("/cv?pw=&en="+i).done((function(){$.when(updateControllerSettings(),updateControllerStatus()).done((function(){checkStatus(),e.find("span:first").html(t()).attr("data-translate",t())}))}))})),!1})).find("span:first").html(t()).attr("data-translate",t()),e.find(".reboot-os").on("click",(function(){return areYouSure(_("Are you sure you want to reboot OpenSprinkler?"),"",(function(){$.mobile.loading("show"),sendToOS("/cv?pw=&rbt=1").done((function(){$.mobile.loading("hide"),showerror(_("OpenSprinkler is rebooting now"))}))})),!1})),e.find(".changePassword > a").on("click",changePassword),e.find("#downgradeui").on("click",(function(){return areYouSure(_("Are you sure you want to downgrade the UI?"),"",(function(){var e="http://rayshobby.net/scripts/java/svc"+getOSVersion();sendToOS("/cu?jsp="+encodeURIComponent(e)+"&pw=").done((function(){storage.remove(["sites","current_site","lang","provider","wapikey","runonce"]),location.reload()}))})),!1})),e.find("#logout").on("click",(function(){return logout(),!1})),openPanel=function(){var e=$("#sprinklers-settings"),t=function(){var t=controller&&controller.settings&&controller.settings.en&&1===controller.settings.en?_("Disable"):_("Enable");e.find(".toggleOperation span:first").html(t).attr("data-translate",t)};return $("html").on("datarefresh",t),function(){var i=$(".ui-page-active").attr("id");"start"!==i&&"loadingPage"!==i&&isControllerConnected()&&1===$(".ui-page-active").length&&(t(),e.panel("open"))}}()}function showOptions(e){var t,i,n,a="",s=$("<div data-role='page' id='os-options'><div class='ui-content' role='main'><div data-role='collapsibleset' id='os-options-list'></div><a class='submit preventBack' style='display:none'></a></div></div>"),o=function(e,t,i){return"<div class='ui-field-contain'><fieldset data-role='controlgroup' class='ui-mini center sensor-options' data-type='horizontal'><legend class='left'>"+_("Sensor")+(i?" "+i+" ":" ")+_("Type")+"</legend><input class='noselect' type='radio' name='o"+e+"' id='o"+e+"-none' value='0'"+(0===t?" checked='checked'":"")+"><label for='o"+e+"-none'>"+_("None")+"</label><input class='noselect' type='radio' name='o"+e+"' id='o"+e+"-rain' value='1'"+(1===t?" checked='checked'":"")+"><label for='o"+e+"-rain'>"+_("Rain")+"</label>"+(52===e?"":"<input class='noselect' type='radio' name='o"+e+"' id='o"+e+"-flow' value='2'"+(2===t?" checked='checked'":"")+"><label for='o"+e+"-flow'>"+_("Flow")+"</label>")+(checkOSVersion(219)?"<input class='noselect' type='radio' name='o"+e+"' id='o"+e+"-soil' value='3'"+(3===t?" checked='checked'":"")+"><label for='o"+e+"-soil'>"+_("Soil")+"</label>":"")+(checkOSVersion(217)?"<input class='noselect' type='radio' name='o"+e+"' id='o"+e+"-program' value='240'"+(240===t?" checked='checked'":"")+"><label for='o"+e+"-program'>"+_("Program Switch")+"</label>":"")+"</fieldset></div>"},r=function(){var e,t={},i=!1,n=isOSPi(),a=l.eq(2);if(a.prop("disabled",!0),s.find(".submit").removeClass("hasChanges"),s.find("#os-options-list").find(":input,button").filter(":not(.noselect)").each((function(){var a,o=$(this),r=o.attr("id"),l=o.val();if(!r||!l&&""!==l)return!0;switch(r){case"o1":var c=l.split(":");c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10),c[1]=(c[1]/15>>0)/4,c[0]=c[0]+(c[0]>=0?c[1]:-c[1]),l=4*(c[0]+12)>>0;break;case"datetime":var d=new Date(1e3*l);return t.tyy=d.getUTCFullYear(),t.tmm=d.getUTCMonth(),t.tdd=d.getUTCDate(),t.thh=d.getUTCHours(),t.tmi=d.getUTCMinutes(),t.ttt=Math.round(d.getTime()/1e3),!0;case"ip_addr":return"0.0.0.0"===(a=l.split("."))?(showerror(_("A valid IP address is required when DHCP is not used")),i=!0,!1):(t.o4=a[0],t.o5=a[1],t.o6=a[2],t.o7=a[3],!0);case"subnet":return"0.0.0.0"===(a=l.split("."))?(showerror(_("A valid subnet address is required when DHCP is not used")),i=!0,!1):(t.o58=a[0],t.o59=a[1],t.o60=a[2],t.o61=a[3],!0);case"gateway":return"0.0.0.0"===(a=l.split("."))?(showerror(_("A valid gateway address is required when DHCP is not used")),i=!0,!1):(t.o8=a[0],t.o9=a[1],t.o10=a[2],t.o11=a[3],!0);case"dns":return"0.0.0.0"===(a=l.split("."))?(showerror(_("A valid DNS address is required when DHCP is not used")),i=!0,!1):(t.o44=a[0],t.o45=a[1],t.o46=a[2],t.o47=a[3],!0);case"ntp_addr":return a=l.split("."),t.o32=a[0],t.o33=a[1],t.o34=a[2],t.o35=a[3],!0;case"wtkey":return!0;case"wto":if(l=escapeJSON($.extend({},unescapeJSON(l),{key:s.find("#wtkey").val()})),escapeJSON(controller.settings.wto)===l)return!0;break;case"mqtt":if(escapeJSON(controller.settings.mqtt)===l)return!0;break;case"otc":if(escapeJSON(controller.settings.otc)===l)return!0;break;case"isMetric":return isMetric=o.is(":checked"),storage.set({isMetric:isMetric}),!0;case"groupView":return groupView=o.is(":checked"),storage.set({groupView:groupView}),!0;case"o12":return n||(t.o12=255&l,t.o13=l>>8&255),!0;case"o31":if(3===parseInt(l)&&!unescapeJSON($("#wto")[0].value).baseETo)return showerror(_("You must specify a baseline ETo adjustment method option to use the ET adjustment method.")),i=!0,!1;var h=s.find("#weatherRestriction");h.length&&(l=setRestriction(parseInt(h.val()),l));break;case"o18":case"o37":parseInt(l)>8*(parseInt(s.find("#o15").val())+1)&&(l=0);break;case"o41":return"gallon"===s.find("#o41-units").val()&&(l*=3.78541),t.o41=100*l&255,t.o42=100*l>>8&255,!0;case"o2":case"o3":case"o14":case"o16":case"o21":case"o22":case"o25":case"o36":case"o48":case"o50":case"o51":case"o52":case"o53":if(l=o.is(":checked")?1:0,!checkOSVersion(219)&&!l)return!0}n&&("loc"===r||"lg"===r?r="o"+r:(e=/\d+/.exec(r),r="o"+Object.keys(keyIndex).find((function(t){return keyIndex[t]===e})))),!0===checkOSVersion(208)&&"loc"===r&&(l=l.replace(/\s/g,"_")),t[r]=l})),i)return a.prop("disabled",!1),void s.find(".submit").addClass("hasChanges");void 0!==controller.options.fpr0&&(void 0!==controller.options.urs?t.o21=s.find("input[name='o21'][type='radio']:checked").val():(void 0!==controller.options.sn1t&&(t.o50=s.find("input[name='o50'][type='radio']:checked").val()),void 0!==controller.options.sn2t&&(t.o52=s.find("input[name='o52'][type='radio']:checked").val()))),t=transformKeys(t),$.mobile.loading("show"),sendToOS("/co?pw=&"+$.param(t)).done((function(){$.mobile.document.one("pageshow",(function(){showerror(_("Settings have been saved"))})),goBack(),updateController(updateWeather)})).fail((function(){a.prop("disabled",!1),s.find(".submit").addClass("hasChanges")}))},l=changeHeader({title:_("Edit Options"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:checkChangesBeforeBack},rightBtn:{icon:"check",text:_("Submit"),class:"submit",on:r}});if(s.find(".submit").on("click",r),a="<fieldset data-role='collapsible'"+("string"!=typeof e||"system"===e?" data-collapsed='false'":"")+"><legend>"+_("System")+"</legend>",void 0!==controller.options.ntp&&(a+="<div class='ui-field-contain datetime-input'><label for='datetime'>"+_("Device Time")+"</label><button "+(controller.options.ntp?"disabled ":"")+"data-mini='true' id='datetime' value='"+(controller.settings.devt+60*new Date(1e3*controller.settings.devt).getTimezoneOffset())+"'>"+dateToString(new Date(1e3*controller.settings.devt)).slice(0,-3)+"</button></div>"),!isOSPi()&&void 0!==controller.options.tz){for(t=["-12:00","-11:30","-11:00","-10:00","-09:30","-09:00","-08:30","-08:00","-07:00","-06:00","-05:00","-04:30","-04:00","-03:30","-03:00","-02:30","-02:00","+00:00","+01:00","+02:00","+03:00","+03:30","+04:00","+04:30","+05:00","+05:30","+05:45","+06:00","+06:30","+07:00","+08:00","+08:45","+09:00","+09:30","+10:00","+10:30","+11:00","+11:30","+12:00","+12:45","+13:00","+13:45","+14:00"],i=((i=controller.options.tz-48)>=0?"+":"-")+pad(Math.abs(i)/4>>0)+":"+(Math.abs(i)%4*15/10>>0)+Math.abs(i)%4*15%10,a+="<div class='ui-field-contain'><label for='o1' class='select'>"+_("Timezone")+"</label><select "+(checkOSVersion(210)&&"object"==typeof weather?"disabled='disabled' ":"")+"data-mini='true' id='o1'>",n=0;n<t.length;n++)a+="<option "+(t[n]===i?"selected":"")+" value='"+t[n]+"'>"+t[n]+"</option>";a+="</select></div>"}if(a+="<div class='ui-field-contain'><label for='loc'>"+_("Location")+"</label><button data-mini='true' id='loc' value='"+("''"===controller.settings.loc.trim()?_("Not specified"):controller.settings.loc)+"'><span>"+controller.settings.loc+"</span><a class='ui-btn btn-no-border ui-btn-icon-notext ui-icon-delete ui-btn-corner-all clear-loc'></a></button></div>",void 0!==controller.options.lg&&(a+="<label for='o36'><input data-mini='true' id='o36' type='checkbox' "+(1===controller.options.lg?"checked='checked'":"")+">"+_("Enable Logging")+"</label>"),a+="<label for='isMetric'><input data-mini='true' id='isMetric' type='checkbox' "+(isMetric?"checked='checked'":"")+">"+_("Use Metric")+"</label>",Supported.groups()&&(a+="<label for='groupView'><input data-mini='true' id='groupView' type='checkbox' "+(groupView?"checked='checked'":"")+">"+_("Order Stations by Groups")+"</label>"),a+="</fieldset><fieldset data-role='collapsible'"+("string"==typeof e&&"master"===e?" data-collapsed='false'":"")+"><legend>"+_("Configure Master")+"</legend>",void 0!==controller.options.mas){for(a+="<div class='ui-field-contain ui-field-no-border'><label for='o18' class='select'>"+_("Master Station")+" "+(void 0!==controller.options.mas2?"1":"")+"</label><select data-mini='true' id='o18'><option value='0'>"+_("None")+"</option>",n=0;n<controller.stations.snames.length&&(a+="<option "+(1===Station.isMaster(n)?"selected":"")+" value='"+(n+1)+"'>"+controller.stations.snames[n]+"</option>",checkOSVersion(214)||7!==n);n++);a+="</select></div>",void 0!==controller.options.mton&&(a+="<div "+(0===controller.options.mas?"style='display:none' ":"")+"class='ui-field-no-border ui-field-contain duration-field'><label for='o19'>"+_("Master On Adjustment")+"</label><button data-mini='true' id='o19' value='"+controller.options.mton+"'>"+controller.options.mton+"s</button></div>"),void 0!==controller.options.mtof&&(a+="<div "+(0===controller.options.mas?"style='display:none' ":"")+"class='ui-field-no-border ui-field-contain duration-field'><label for='o20'>"+_("Master Off Adjustment")+"</label><button data-mini='true' id='o20' value='"+controller.options.mtof+"'>"+controller.options.mtof+"s</button></div>")}if(void 0!==controller.options.mas2){for(a+="<hr style='width:95%' class='content-divider'>",a+="<div class='ui-field-contain ui-field-no-border'><label for='o37' class='select'>"+_("Master Station")+" 2</label><select data-mini='true' id='o37'><option value='0'>"+_("None")+"</option>",n=0;n<controller.stations.snames.length&&(a+="<option "+(2===Station.isMaster(n)?"selected":"")+" value='"+(n+1)+"'>"+controller.stations.snames[n]+"</option>",checkOSVersion(214)||7!==n);n++);a+="</select></div>",void 0!==controller.options.mton2&&(a+="<div "+(0===controller.options.mas2?"style='display:none' ":"")+"class='ui-field-no-border ui-field-contain duration-field'><label for='o38'>"+_("Master On Adjustment")+"</label><button data-mini='true' id='o38' value='"+controller.options.mton2+"'>"+controller.options.mton2+"s</button></div>"),void 0!==controller.options.mtof2&&(a+="<div "+(0===controller.options.mas2?"style='display:none' ":"")+"class='ui-field-no-border ui-field-contain duration-field'><label for='o39'>"+_("Master Off Adjustment")+"</label><button data-mini='true' id='o39' value='"+controller.options.mtof2+"'>"+controller.options.mtof2+"s</button></div>")}if(a+="</fieldset><fieldset data-role='collapsible'"+("string"==typeof e&&"station"===e?" data-collapsed='false'":"")+"><legend>"+_("Station Handling")+"</legend>",void 0!==controller.options.ext){for(a+="<div class='ui-field-contain'><label for='o15' class='select'>"+_("Number of Stations")+("number"==typeof controller.options.dexp&&controller.options.dexp<255&&controller.options.dexp>=0?" <span class='nobr'>("+(8*controller.options.dexp+8)+" "+_("available")+")</span>":"")+"</label><select data-mini='true' id='o15'>",n=0;n<=(controller.options.mexp||5);n++)a+="<option "+(controller.options.ext===n?"selected":"")+" value='"+n+"'>"+(8*n+8)+" "+_("stations")+"</option>";a+="</select></div>"}if(void 0!==controller.options.sdt&&(a+="<div class='ui-field-contain duration-field'><label for='o17'>"+_("Station Delay")+"</label><button data-mini='true' id='o17' value='"+controller.options.sdt+"'>"+dhms2str(sec2dhms(controller.options.sdt))+"</button></div>"),a+="<label for='showDisabled'><input data-mini='true' class='noselect' id='showDisabled' type='checkbox' "+("true"===localStorage.showDisabled?"checked='checked'":"")+">"+_("Show Disabled")+" "+_("(Changes Auto-Saved)")+"</label>",void 0!==controller.options.seq&&(a+="<label for='o16'><input data-mini='true' id='o16' type='checkbox' "+(1===controller.options.seq?"checked='checked'":"")+">"+_("Sequential")+"</label>"),a+="</fieldset><fieldset data-role='collapsible'"+("string"==typeof e&&"weather"===e?" data-collapsed='false'":"")+"><legend>"+_("Weather and Sensors")+"</legend>",void 0!==controller.options.uwt){for(a+="<div class='ui-field-contain'><label for='o31' class='select'>"+_("Weather Adjustment Method")+"<button data-helptext='"+_("Weather adjustment uses DarkSky data in conjunction with the selected method to adjust the watering percentage.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><select data-mini='true' id='o31'>",n=0;n<getAdjustmentMethod().length;n++){var c=getAdjustmentMethod()[n];c.minVersion&&!checkOSVersion(c.minVersion)||(a+="<option "+(c.id===getCurrentAdjustmentMethodId()?"selected":"")+" value='"+n+"'>"+c.name+"</option>")}if(a+="</select></div>","object"==typeof controller.settings.wto&&(a+="<div class='ui-field-contain"+(0===getCurrentAdjustmentMethodId()?" hidden":"")+"'><label for='wto'>"+_("Adjustment Method Options")+"</label><button data-mini='true' id='wto' value='"+escapeJSON(controller.settings.wto)+"'>"+_("Tap to Configure")+"</button></div>"),checkOSVersion(214)){for(a+="<div class='ui-field-contain'><label for='weatherRestriction' class='select'>"+_("Weather-Based Restrictions")+"<button data-helptext='"+_("Prevents watering when the selected restriction is met.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><select data-mini='true' class='noselect' id='weatherRestriction'>",n=0;n<2;n++){var d=getRestriction(n);a+="<option "+(!0===d.isCurrent?"selected":"")+" value='"+n+"'>"+d.name+"</option>"}a+="</select></div>"}}if(void 0!==controller.options.wl&&(a+="<div class='ui-field-contain duration-field'><label for='o23'>"+_("% Watering")+"<button data-helptext='"+_("The watering percentage scales station run times by the set value.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><button "+(controller.options.uwt&&getCurrentAdjustmentMethodId()>0?"disabled='disabled' ":"")+"data-mini='true' id='o23' value='"+controller.options.wl+"'>"+controller.options.wl+"%</button></div>"),void 0===controller.options.urs&&void 0===controller.options.sn1t||(void 0!==controller.options.fpr0?a+=void 0!==controller.options.urs?o(keyIndex.urs,controller.options.urs):void 0!==controller.options.sn1t?o(keyIndex.sn1t,controller.options.sn1t,1):"":a+="<label for='o21'><input data-mini='true' id='o21' type='checkbox' "+(1===controller.options.urs?"checked='checked'":"")+">"+_("Use Rain Sensor")+"</label>"),void 0!==controller.options.rso&&(a+="<label for='o22'><input "+(1===controller.options.urs||240===controller.options.urs?"":"data-wrapper-class='hidden' ")+"data-mini='true' id='o22' type='checkbox' "+(1===controller.options.rso?"checked='checked'":"")+">"+_("Normally Open")+"</label>"),void 0!==controller.options.sn1o&&(a+="<label for='o51'><input "+(1===controller.options.sn1t||3===controller.options.sn1t||240===controller.options.sn1t?"":"data-wrapper-class='hidden' ")+"data-mini='true' id='o51' type='checkbox' "+(1===controller.options.sn1o?"checked='checked'":"")+">"+_("Normally Open")+"</label>"),void 0!==controller.options.fpr0&&(a+="<div class='ui-field-contain"+(2===controller.options.urs||2===controller.options.sn1t?"":" hidden")+"'><label for='o41'>"+_("Flow Pulse Rate")+"</label><table><tr style='width:100%;vertical-align: top;'><td style='width:100%'><div class='ui-input-text controlgroup-textinput ui-btn ui-body-inherit ui-corner-all ui-mini ui-shadow-inset ui-input-has-clear'><input data-role='none' data-mini='true' type='number' pattern='^[-+]?[0-9]*.?[0-9]*$' id='o41' value='"+(256*controller.options.fpr1+controller.options.fpr0)/100+"'></div></td><td class='tight-select'><select id='o41-units' class='noselect' data-mini='true'><option selected='selected' value='liter'>L/pulse</option><option value='gallon'>Gal/pulse</option></select></td></tr></table></div>"),void 0!==controller.options.sn1on&&(a+="<div class='"+(1===controller.options.sn1t||3===controller.options.sn1t?"":"hidden ")+"ui-field-no-border ui-field-contain duration-field'><label for='o54'>"+_("Sensor 1 Delayed On Time")+"</label><button data-mini='true' id='o54' value='"+controller.options.sn1on+"'>"+controller.options.sn1on+"m</button></div>"),void 0!==controller.options.sn1of&&(a+="<div class='"+(1===controller.options.sn1t||3===controller.options.sn1t?"":"hidden ")+"ui-field-no-border ui-field-contain duration-field'><label for='o55'>"+_("Sensor 1 Delayed Off Time")+"</label><button data-mini='true' id='o55' value='"+controller.options.sn1of+"'>"+controller.options.sn1of+"m</button></div>"),checkOSVersion(217)&&(a+="<label id='prgswitch' class='center smaller"+(240===controller.options.urs||240===controller.options.sn1t||240===controller.options.sn2t?"":" hidden")+"'>"+_("When using program switch, a switch is connected to the sensor port to trigger Program 1 every time the switch is pressed for at least 1 second.")+"</label>"),void 0!==controller.options.sn2t&&checkOSVersion(219)&&(a+=o(keyIndex.sn2t,controller.options.sn2t,2)),void 0!==controller.options.sn2o&&(a+="<label for='o53'><input "+(1===controller.options.sn2t||3===controller.options.sn2t||240===controller.options.sn2t?"":"data-wrapper-class='hidden' ")+"data-mini='true' id='o53' type='checkbox' "+(1===controller.options.sn2o?"checked='checked'":"")+">"+_("Normally Open")+"</label>"),void 0!==controller.options.sn2on&&(a+="<div class='"+(1===controller.options.sn2t||3===controller.options.sn2t?"":"hidden ")+"ui-field-no-border ui-field-contain duration-field'><label for='o56'>"+_("Sensor 2 Delayed On Time")+"</label><button data-mini='true' id='o56' value='"+controller.options.sn2on+"'>"+controller.options.sn2on+"m</button></div>"),void 0!==controller.options.sn2of&&(a+="<div class='"+(1===controller.options.sn2t||3===controller.options.sn2t?"":"hidden ")+"ui-field-no-border ui-field-contain duration-field'><label for='o57'>"+_("Sensor 2 Delayed Off Time")+"</label><button data-mini='true' id='o57' value='"+controller.options.sn2of+"'>"+controller.options.sn2of+"m</button></div>"),void 0!==controller.options.sn2t&&(a+="<label id='prgswitch-2' class='center smaller"+(240===controller.options.urs||240===controller.options.sn1t||240===controller.options.sn2t?"":" hidden")+"'>"+_("When using program switch, a switch is connected to the sensor port to trigger Program 2 every time the switch is pressed for at least 1 second.")+"</label>"),void 0===controller.settings.ifkey&&void 0===controller.settings.mqtt&&void 0===controller.settings.otc||(a+="</fieldset><fieldset data-role='collapsible'"+("string"==typeof e&&"integrations"===e?" data-collapsed='false'":"")+"><legend>"+_("Integrations")+"</legend>",void 0!==controller.settings.otc&&(a+="<div class='ui-field-contain'><label for='otc'>"+_("OTC")+"<button style='display:inline-block;' data-helptext='"+_("OpenThings Cloud (OTC) allows remote access using OTC Token .")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><button data-mini='true' id='otc' value='"+escapeJSON(controller.settings.otc)+"'>"+_("Tap to Configure")+"</button></div>"),void 0!==controller.settings.mqtt&&(a+="<div class='ui-field-contain'><label for='mqtt'>"+_("MQTT")+"<button style='display:inline-block;' data-helptext='"+_("OpenSprinkler can send notifications to an MQTT broker at a specified host and port.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><button data-mini='true' id='mqtt' value='"+escapeJSON(controller.settings.mqtt)+"'>"+_("Tap to Configure")+"</button></div>"),void 0!==controller.settings.ifkey&&(a+="<div class='ui-field-contain'><label for='ifkey'>"+_("IFTTT Key")+"<button data-helptext='"+_("To enable IFTTT, a Webhooks key is required which can be obtained from https://ifttt.com")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' data-mini='true' type='text' id='ifkey' value='"+controller.settings.ifkey+"'></div>",a+="<div class='ui-field-contain'><label for='o49'>"+_("IFTTT Events")+"<button data-helptext='"+_("Select which events to send to IFTTT for use in recipes.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><button data-mini='true' id='o49' value='"+controller.options.ife+"'>"+_("Configure Events")+"</button></div>"),void 0!==controller.settings.dname&&(a+="<div class='ui-field-contain'><label for='dname'>"+_("Device Name")+"<button data-helptext='"+_("Device name is attached to all IFTTT notifications to help distinguish multiple devices")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' data-mini='true' type='text' id='dname' value=\""+controller.settings.dname+'"></div>')),a+="</fieldset><fieldset class='full-width-slider' data-role='collapsible'"+("string"==typeof e&&"lcd"===e?" data-collapsed='false'":"")+"><legend>"+_("LCD Screen")+"</legend>",void 0!==controller.options.con&&(a+="<div class='ui-field-contain'><label for='o27'>"+_("Contrast")+"</label><input type='range' id='o27' min='0' max='255' step='10' data-highlight='true' value='"+controller.options.con+"'></div>"),void 0!==controller.options.lit&&(a+="<div class='ui-field-contain'><label for='o28'>"+_("Brightness")+"</label><input type='range' id='o28' min='0' max='255' step='10' data-highlight='true' value='"+controller.options.lit+"'></div>"),void 0!==controller.options.dim&&(a+="<div class='ui-field-contain'><label for='o29'>"+_("Idle Brightness")+"</label><input type='range' id='o29' min='0' max='255' step='10' data-highlight='true' value='"+controller.options.dim+"'></div>"),a+="</fieldset><fieldset data-role='collapsible' data-theme='b'"+("string"==typeof e&&"advanced"===e?" data-collapsed='false'":"")+"><legend>"+_("Advanced")+"</legend>",checkOSVersion(219)&&void 0!==controller.options.uwt&&"object"==typeof controller.settings.wto&&(a+="<div class='ui-field-contain'><label for='wtkey'>"+_("Wunderground Key").replace("Wunderground","Wunder&shy;ground")+"<button data-helptext='"+_("We use DarkSky normally however with a user provided API key the weather source will switch to Weather Underground.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><table><tr style='width:100%;vertical-align: top;'><td style='width:100%'><div class='"+(controller.settings.wto.key&&""!==controller.settings.wto.key?"green ":"")+"ui-input-text controlgroup-textinput ui-btn ui-body-inherit ui-corner-all ui-mini ui-shadow-inset ui-input-has-clear'><input data-role='none' data-mini='true' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='text' id='wtkey' value='"+(controller.settings.wto.key||"")+"'><a href='#' tabindex='-1' aria-hidden='true' data-helptext='"+_("An invalid API key has been detected.")+"' class='hidden help-icon ui-input-clear ui-btn ui-icon-alert ui-btn-icon-notext ui-corner-all'></a></div></td><td><button class='noselect' data-mini='true' id='verify-api'>"+_("Verify")+"</button></td></tr></table></div>"),void 0!==controller.options.hp0&&(a+="<div class='ui-field-contain'><label for='o12'>"+_("HTTP Port (restart required)")+"</label><input data-mini='true' type='number' pattern='[0-9]*' id='o12' value='"+(256*controller.options.hp1+controller.options.hp0)+"'></div>"),void 0!==controller.options.devid&&(a+="<div class='ui-field-contain'><label for='o26'>"+_("Device ID (restart required)")+"<button data-helptext='"+_("Device ID modifies the last byte of the MAC address.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><input data-mini='true' type='number' pattern='[0-9]*' max='255' id='o26' value='"+controller.options.devid+"'></div>"),void 0!==controller.options.rlp?a+="<div class='ui-field-contain duration-field'><label for='o30'>"+_("Relay Pulse")+"<button data-helptext='"+_("Relay pulsing is used for special situations where rapid pulsing is needed in the output with a range from 1 to 2000 milliseconds. A zero value disables the pulsing option.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><button data-mini='true' id='o30' value='"+controller.options.rlp+"'>"+controller.options.rlp+"ms</button></div>":!0!==checkOSVersion(215)&&void 0!==controller.options.bst&&(a+="<div class='ui-field-contain duration-field'><label for='o30'>"+_("Boost Time")+"<button data-helptext='"+_("Boost time changes how long the boost converter is activated with a range from 0 to 1000 milliseconds.")+"' class='help-icon btn-no-border ui-btn ui-icon-info ui-btn-icon-notext'></button></label><button data-mini='true' id='o30' value='"+controller.options.bst+"'>"+controller.options.bst+"ms</button></div>"),void 0!==controller.options.ntp&&checkOSVersion(210)){var h=[controller.options.ntp1,controller.options.ntp2,controller.options.ntp3,controller.options.ntp4].join(".");a+="<div class='"+(1===controller.options.ntp?"":"hidden ")+"ui-field-contain duration-field'><label for='ntp_addr'>"+_("NTP IP Address")+"</label><button data-mini='true' id='ntp_addr' value='"+h+"'>"+h+"</button></div>"}if(void 0!==controller.options.dhcp&&checkOSVersion(210)){var u=[controller.options.ip1,controller.options.ip2,controller.options.ip3,controller.options.ip4].join("."),p=[controller.options.gw1,controller.options.gw2,controller.options.gw3,controller.options.gw4].join(".");if(a+="<div class='"+(1===controller.options.dhcp?"hidden ":"")+"ui-field-contain duration-field'><label for='ip_addr'>"+_("IP Address")+"</label><button data-mini='true' id='ip_addr' value='"+u+"'>"+u+"</button></div>",a+="<div class='"+(1===controller.options.dhcp?"hidden ":"")+"ui-field-contain duration-field'><label for='gateway'>"+_("Gateway Address")+"</label><button data-mini='true' id='gateway' value='"+p+"'>"+p+"</button></div>",void 0!==controller.options.subn1){var f=[controller.options.subn1,controller.options.subn2,controller.options.subn3,controller.options.subn4].join(".");a+="<div class='"+(1===controller.options.dhcp?"hidden ":"")+"ui-field-contain duration-field'><label for='subnet'>"+_("Subnet Mask")+"</label><button data-mini='true' id='subnet' value='"+f+"'>"+f+"</button></div>"}if(void 0!==controller.options.dns1){var g=[controller.options.dns1,controller.options.dns2,controller.options.dns3,controller.options.dns4].join(".");a+="<div class='"+(1===controller.options.dhcp?"hidden ":"")+"ui-field-contain duration-field'><label for='dns'>"+_("DNS Address")+"</label><button data-mini='true' id='dns' value='"+g+"'>"+g+"</button></div>"}a+="<label for='o3'><input data-mini='true' id='o3' type='checkbox' "+(1===controller.options.dhcp?"checked='checked'":"")+">"+_("Use DHCP (restart required)")+"</label>"}void 0!==controller.options.ntp&&(a+="<label for='o2'><input data-mini='true' id='o2' type='checkbox' "+(1===controller.options.ntp?"checked='checked'":"")+">"+_("NTP Sync")+"</label>"),void 0!==controller.options.ar&&(a+="<label for='o14'><input data-mini='true' id='o14' type='checkbox' "+(1===controller.options.ar?"checked='checked'":"")+">"+_("Auto Reconnect")+"</label>"),void 0!==controller.options.ipas&&(a+="<label for='o25'><input data-mini='true' id='o25' type='checkbox' "+(1===controller.options.ipas?"checked='checked'":"")+">"+_("Ignore Password")+"</label>"),void 0!==controller.options.sar&&(a+="<label for='o48'><input data-mini='true' id='o48' type='checkbox' "+(1===controller.options.sar?"checked='checked'":"")+">"+_("Special Station Auto-Refresh")+"</label>"),a+="</fieldset><fieldset data-role='collapsible' data-theme='b'"+("string"==typeof e&&"reset"===e?" data-collapsed='false'":"")+"><legend>"+_("Reset")+"</legend>",a+="<button data-mini='true' class='center-div reset-log'>"+_("Clear Log Data")+"</button>",a+="<button data-mini='true' class='center-div reset-options'>"+_("Reset All Options")+"</button>",a+="<button data-mini='true' class='center-div reset-programs'>"+_("Delete All Programs")+"</button>",a+="<button data-mini='true' class='center-div reset-stations'>"+_("Reset Station Attributes")+"</button>",controller.options.hwv>=30&&controller.options.hwv<40&&(a+="<hr class='divider'><button data-mini='true' class='center-div reset-wireless'>"+_("Reset Wireless Settings")+"</button>"),a+="</fieldset>",s.find("#os-options-list").html(a).one("change input",":not(.noselect)",(function(){l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges")})).find("fieldset").each((function(){var e=$(this);1===e.children().length&&e.remove()})),s.find(".clear-loc").on("click",(function(e){e.stopImmediatePropagation(),areYouSure(_("Are you sure you want to clear the current location?"),"",(function(){s.find("#loc").val("''").removeClass("green").find("span").text(_("Not specified")),s.find("#o1").selectmenu("enable"),l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges")}))})),s.find("#showDisabled").on("change",(function(){return storage.set({showDisabled:this.checked}),!1})),s.find("#loc").on("click",(function(){var e=$(this);e.prop("disabled",!0),overlayMap((function(t,i){if(!1===t)""===e.val()&&(e.removeClass("green"),s.find("#o1").selectmenu("enable"));else{if(checkOSVersion(210)&&s.find("#o1").selectmenu("disable"),"string"==typeof t)e.val(t).find("span").text(t);else{t[0]=parseFloat(t[0]).toFixed(5),t[1]=parseFloat(t[1]).toFixed(5),"string"==typeof i&&validateWULocation(i,(function(t){t?e.addClass("green"):t||e.removeClass("green")}));var n=s.find("#wto");n&&void 0!==n.val()&&n.val(escapeJSON($.extend({},unescapeJSON(n.val()),{pws:i||""}))),e.val(t),coordsToLocation(t[0],t[1],(function(t){e.find("span").text(t)}))}l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges")}e.prop("disabled",!1)}))})),s.find("#wto").on("click",(function(){var e=this,t=unescapeJSON(this.value),i={pws:t.pws,key:t.key},n=parseInt(s.find("#o31").val()),a=function(){e.value=escapeJSON($.extend({},unescapeJSON(e.value),i)),l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges")};1===n?showZimmermanAdjustmentOptions(this,a):2===n?showAutoRainDelayAdjustmentOptions(this,a):3===n?showEToAdjustmentOptions(this,a):4===n&&showMonthlyAdjustmentOptions(this,a)})),s.find(".reset-log").on("click",clearLogs),s.find(".reset-programs").on("click",clearPrograms),s.find(".reset-options").on("click",(function(){resetAllOptions((function(){$.mobile.document.one("pageshow",(function(){showerror(_("Settings have been saved"))})),goBack()}))})),s.find(".reset-stations").on("click",(function(){var e,t="";if(Supported.groups())for(e=0;e<controller.stations.snames.length;e++)t+="g"+e+"=0&";if(void 0!==controller.options.mas)for(e=0;e<controller.settings.nbrd;e++)t+="m"+e+"=255&";if(void 0!==controller.options.mas2)for(e=0;e<controller.settings.nbrd;e++)t+="n"+e+"=0&";if("object"==typeof controller.stations.ignore_rain)for(e=0;e<controller.settings.nbrd;e++)t+="i"+e+"=0&";if("object"==typeof controller.stations.ignore_sn1)for(e=0;e<controller.settings.nbrd;e++)t+="j"+e+"=0&";if("object"==typeof controller.stations.ignore_sn2)for(e=0;e<controller.settings.nbrd;e++)t+="k"+e+"=0&";if("object"==typeof controller.stations.act_relay)for(e=0;e<controller.settings.nbrd;e++)t+="a"+e+"=0&";if("object"==typeof controller.stations.stn_dis)for(e=0;e<controller.settings.nbrd;e++)t+="d"+e+"=0&";if("object"==typeof controller.stations.stn_seq)for(e=0;e<controller.settings.nbrd;e++)t+="q"+e+"=255&";if("object"==typeof controller.stations.stn_spe)for(e=0;e<controller.settings.nbrd;e++)t+="p"+e+"=0&";areYouSure(_("Are you sure you want to reset station attributes?"),_("This will reset all station attributes"),(function(){$.mobile.loading("show"),storage.get(["sites","current_site"],(function(e){var t=parseSites(e.sites);t[e.current_site].notes={},t[e.current_site].images={},t[e.current_site].lastRunTime={},storage.set({sites:JSON.stringify(t)},cloudSaveSites)})),sendToOS("/cs?pw=&"+t).done((function(){showerror(_("Stations have been updated")),updateController()}))}))})),s.find(".reset-wireless").on("click",(function(){areYouSure(_("Are you sure you want to reset the wireless settings?"),_("This will delete the stored SSID/password for your wireless network and return the device to access point mode"),(function(){sendToOS("/cv?pw=&ap=1").done((function(){$.mobile.document.one("pageshow",(function(){showerror(_("Wireless settings have been reset. Please follow the OpenSprinkler user manual on restoring connectivity."))})),goBack()}))}))})),s.find("#o3").on("change",(function(){var e=$(this).is(":checked"),t=s.find("#ip_addr,#gateway,#dns,#subnet").parents(".ui-field-contain");e?t.addClass("hidden"):t.removeClass("hidden")})),s.find(".sensor-options input[type='radio']").on("change",(function(){var e=this.value,t=parseInt(this.id.match(/o(\d+)/)[1],10);"2"===e?s.find("#o41").parents(".ui-field-contain").removeClass("hidden"):21!==t&&50!==t||s.find("#o41").parents(".ui-field-contain").addClass("hidden"),"1"===e||"3"===e||"240"===e?s.find("#o"+(t+1)).parent().removeClass("hidden"):s.find("#o"+(t+1)).parent().addClass("hidden"),"240"===$("input[name='o21'][type='radio']:checked").val()||"240"===$("input[name='o50'][type='radio']:checked").val()?s.find("#prgswitch").removeClass("hidden"):s.find("#prgswitch").addClass("hidden"),"240"===$("input[name='o52'][type='radio']:checked").val()?s.find("#prgswitch-2").removeClass("hidden"):s.find("#prgswitch-2").addClass("hidden"),"1"===e||"3"===e?s.find("#o"+(t+4)+",#o"+(t+5)).parent().removeClass("hidden"):s.find("#o"+(t+4)+",#o"+(t+5)).parent().addClass("hidden")})),s.find("#o21").on("change",(function(){s.find("#o22").parent().toggleClass("hidden",$(this).is(":checked"))})),s.find("#verify-api").on("click",(function(){var e=s.find("#wtkey"),t=$(this);t.prop("disabled",!0),testAPIKey(e.val(),(function(i){!0===i?(e.parent().find(".ui-icon-alert").hide(),e.parent().removeClass("red").addClass("green")):(e.parent().find(".ui-icon-alert").removeClass("hidden").show(),e.parent().removeClass("green").addClass("red")),t.prop("disabled",!1)}))})),s.find(".help-icon").on("click",showHelpText),s.find(".duration-field button:not(.help-icon)").on("click",(function(){var e=$(this),t=e.attr("id"),i=s.find("label[for='"+t+"']").text(),n=e.parent().find(".help-icon").data("helptext"),a=240;if(l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges"),"ip_addr"===t||"gateway"===t||"dns"===t||"ntp_addr"===t||"subnet"===t)showIPRequest({title:i,ip:e.val().split("."),callback:function(t){e.val(t.join(".")).text(t.join("."))}});else if("o19"===t||"o38"===t)showSingleDurationInput({data:e.val(),title:i,callback:function(t){e.val(t).text(t+"s")},label:_("Seconds"),maximum:checkOSVersion(220)?600:60,minimum:checkOSVersion(220)?-600:0,helptext:n});else if("o30"===t)showSingleDurationInput({data:e.val(),title:i,callback:function(t){e.val(t).text(t+"ms")},label:_("Milliseconds"),maximum:2e3,helptext:n});else if("o20"===t||"o39"===t)showSingleDurationInput({data:e.val(),title:i,callback:function(t){e.val(t).text(t+"s")},label:_("Seconds"),maximum:checkOSVersion(220)?600:0,minimum:checkOSVersion(220)?-600:-60,helptext:n});else if("o23"===t)showSingleDurationInput({data:e.val(),title:i,callback:function(t){e.val(t).text(t+"%")},label:_("% Watering"),maximum:250,helptext:n});else if("o17"===t){var o=0;checkOSVersion(210)&&(a=checkOSVersion(214)?57600:64800),checkOSVersion(211)&&(o=-3540,a=3540),checkOSVersion(217)&&(o=-600,a=600),showSingleDurationInput({data:e.val(),title:i,label:_("Seconds"),callback:function(t){e.val(t),e.text(dhms2str(sec2dhms(t)))},maximum:a,minimum:o})}else"o54"!==t&&"o55"!==t&&"o56"!==t&&"o57"!==t||showSingleDurationInput({data:e.val(),title:i,callback:function(t){e.val(t).text(t+"m")},label:_("Minutes"),maximum:240,minimum:0,helptext:n});return!1})),s.find("#o2").on("change",(function(){var e=$(this).is(":checked");s.find(".datetime-input button").prop("disabled",e),s.find("#ntp_addr").parents(".ui-field-contain").toggleClass("hidden",!e)})),s.find("#o18,#o37").on("change",(function(){s.find("#o19,#o20").parents(".ui-field-contain").toggle(0!==parseInt(s.find("#o18").val())),void 0!==controller.options.mas2&&s.find("#o38,#o39").parents(".ui-field-contain").toggle(0!==parseInt(s.find("#o37").val()))})),s.find("#o31").on("change",(function(){s.find("#o23").prop("disabled",0!==parseInt(this.value)),s.find("#wto").click().parents(".ui-field-contain").toggleClass("hidden",0===parseInt(this.value))})),s.find("#wtkey").on("change input",(function(){s.find("#wtkey").siblings(".help-icon").hide(),s.find("#wtkey").parent().removeClass("red green")})),s.find("#o49").on("click",(function(){var e={program:_("Program Start"),sensor1:_("Sensor 1 Update"),flow:_("Flow Sensor Update"),weather:_("Weather Adjustment Update"),reboot:_("Controller Reboot"),run:_("Station Run"),sensor2:_("Sensor 2 Update"),rain:_("Rain Delay Update")},t=this,i=parseInt(t.value),n="",a=0,o=0;$.each(e,(function(e,t){n+="<label for='ifttt-"+e+"'><input class='needsclick' data-iconpos='right' id='ifttt-"+e+"' type='checkbox' "+(getBitFromByte(i,a)?"checked='checked'":"")+">"+t+"</label>",a++}));var r=$("<div data-role='popup' data-theme='a'><div data-role='controlgroup' data-mini='true' class='tight'><div class='ui-bar ui-bar-a'>"+_("Select IFTTT Events")+"</div>"+n+"<input data-wrapper-class='attrib-submit' class='submit' data-theme='b' type='submit' value='"+_("Submit")+"' /></div></div>");r.find(".submit").on("click",(function(){a=0,$.each(e,(function(e){o|=r.find("#ifttt-"+e).is(":checked")<<a,a++})),r.popup("close"),i!==o&&(t.value=o,l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges"))})),openPopup(r)})),s.find("#mqtt").on("click",(function(){var e=this,t=e.value,i=$.extend({},{en:0,host:"server",port:1883,user:"",pass:""},unescapeJSON(t));$(".ui-popup-active").find("[data-role='popup']").popup("close");var n=$("<div data-role='popup' data-theme='a' id='mqttSettings'><div data-role='header' data-theme='b'><h1>"+_("MQTT Settings")+"</h1></div><div class='ui-content'><label for='enable'>"+_("Enable")+"</label><input class='needsclick mqtt_enable' data-mini='true' data-iconpos='right' id='enable' type='checkbox' "+(i.en?"checked='checked'":"")+"><div class='ui-body'><div class='ui-grid-a' style='display:table;'><div class='ui-block-a' style='width:40%'><label for='server' style='padding-top:10px'>"+_("Broker/Server")+"</label></div><div class='ui-block-b' style='width:60%'><input class='mqtt-input' type='text' id='server' data-mini='true' maxlength='50' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'"+(i.en?"":"disabled='disabled'")+" placeholder='"+_("broker/server")+"' value='"+i.host+"' required /></div><div class='ui-block-a' style='width:40%'><label for='port' style='padding-top:10px'>"+_("Port")+"</label></div><div class='ui-block-b' style='width:60%'><input class='mqtt-input' type='number' id='port' data-mini='true' pattern='[0-9]*' min='0' max='65535'"+(i.en?"":"disabled='disabled'")+" placeholder='1883' value='"+i.port+"' required /></div><div class='ui-block-a' style='width:40%'><label for='username' style='padding-top:10px'>"+_("Username")+"</label></div><div class='ui-block-b' style='width:60%'><input class='mqtt-input' type='text' id='username' data-mini='true' maxlength='32' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'"+(i.en?"":"disabled='disabled'")+" placeholder='"+_("username (optional)")+"' value='"+i.user+"' required /></div><div class='ui-block-a' style='width:40%'><label for='password' style='padding-top:10px'>"+_("Password")+"</label></div><div class='ui-block-b' style='width:60%'><input class='mqtt-input' type='password' id='password' data-mini='true' maxlength='32' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'"+(i.en?"":"disabled='disabled'")+" placeholder='"+_("password (optional)")+"' value='"+i.pass+"' required /></div></div></div><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>");n.find("#enable").on("change",(function(){this.checked?n.find(".mqtt-input").textinput("enable"):n.find(".mqtt-input").textinput("disable")})),n.find(".submit").on("click",(function(){var i={en:n.find("#enable").prop("checked")?1:0,host:n.find("#server").val(),port:parseInt(n.find("#port").val()),user:n.find("#username").val(),pass:n.find("#password").val()};n.popup("close"),t!==escapeJSON(i)&&(e.value=escapeJSON(i),l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges"))})),n.css("max-width","380px"),openPopup(n,{positionTo:"window"})})),s.find("#otc").on("click",(function(){var e=this,t=e.value,i=$.extend({},{en:0,token:"",server:"ws.cloud.openthings.io",port:80},unescapeJSON(t));$(".ui-popup-active").find("[data-role='popup']").popup("close");var n=$("<div data-role='popup' data-theme='a' id='otcSettings'><div data-role='header' data-theme='b'><h1>"+_("OpenThings Cloud (OTC) Settings")+"</h1></div><div class='ui-content'><label for='enable'>"+_("Enable")+"</label><input class='needsclick otc_enable' data-mini='true' data-iconpos='right' id='enable' type='checkbox' "+(i.en?"checked='checked'":"")+"><div class='ui-body'><div class='ui-grid-a' style='display:table;'><div class='ui-block-a' style='width:25%'><label for='token' style='padding-top:10px'>"+_("Token")+"</label></div><div class='ui-block-b' style='width:75%'><input class='otc-input' type='text' id='token' data-mini='true' maxlength='36' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'"+(i.en?"":"disabled='disabled'")+" placeholder='"+_("token")+"' value='"+i.token+"' required /></div><div class='ui-block-a' style='width:25%'><label for='server' style='padding-top:10px'>"+_("Server")+"</label></div><div class='ui-block-b' style='width:75%'><input class='otc-input' type='text' id='server' data-mini='true' maxlength='50' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'"+(i.en?"":"disabled='disabled'")+" placeholder='"+_("server")+"' value='"+i.server+"' required /></div><div class='ui-block-a' style='width:25%'><label for='port' style='padding-top:10px'>"+_("Port")+"</label></div><div class='ui-block-b' style='width:75%'><input class='otc-input' type='number' id='port' data-mini='true' pattern='[0-9]*' min='0' max='65535'"+(i.en?"":"disabled='disabled'")+" placeholder='80' value='"+i.port+"' required /></div></div></div><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>");n.find("#enable").on("change",(function(){this.checked?n.find(".otc-input").textinput("enable"):n.find(".otc-input").textinput("disable")})),n.find(".submit").on("click",(function(){if(n.find("#enable").prop("checked")&&32!==n.find("#token").val().length)showerror(_("OpenThings Token must be 32 characters long."));else{var i={en:n.find("#enable").prop("checked")?1:0,token:n.find("#token").val(),server:n.find("#server").val(),port:parseInt(n.find("#port").val())};n.popup("close"),t!==escapeJSON(i)&&(e.value=escapeJSON(i),l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges"))}})),n.css("max-width","380px"),openPopup(n,{positionTo:"window"})})),s.find(".datetime-input").on("click",(function(){var e=$(this).find("button");if(!e.prop("disabled"))return l.eq(2).prop("disabled",!1),s.find(".submit").addClass("hasChanges"),showDateTimeInput(e.val(),(function(t){e.text(dateToString(t).slice(0,-3)).val(Math.round(t.getTime()/1e3))})),!1})),s.one("pagehide",(function(){s.remove()})),l.eq(2).prop("disabled",!0),$("#os-options").remove(),$.mobile.pageContainer.append(s)}var showHomeMenu=function(){var e,t,i,n;return function(a){a=a instanceof $?a:$(a),$(".ui-popup-active").find("[data-role='popup']").popup("close"),e=$(".ui-page-active"),t=e.attr("id"),i=e.hasClass("show-hidden"),(n=$("<div data-role='popup' data-theme='a' id='mainMenu'><ul data-role='listview' data-inset='true' data-corners='false'><li data-role='list-divider'>"+_("Information")+"</li><li><a href='#preview' class='squeeze'>"+_("Preview Programs")+"</a></li>"+(checkOSVersion(206)||checkOSPiVersion("1.9")?"<li><a href='#logs'>"+_("View Logs")+"</a></li>":"")+"<li data-role='list-divider'>"+_("Programs and Settings")+"</li><li><a href='#raindelay'>"+_("Change Rain Delay")+"</a></li>"+(Supported.pausing()?StationQueue.isPaused()?"<li><a href='#globalpause'>"+_("Resume Station Runs")+"</a></li>":StationQueue.isActive()>=-1?"<li><a href='#globalpause'>"+_("Pause Station Runs")+"</a></li>":"":"")+"<li><a href='#runonce'>"+_("Run-Once Program")+"</a></li><li><a href='#programs'>"+_("Edit Programs")+"</a></li><li><a href='#os-options'>"+_("Edit Options")+"</a></li>"+(checkOSVersion(230)?"<li><a href='#analogsensorconfig'>"+_("Analog Sensor Config")+"</a></li><li><a href='#analogsensorchart'>"+_("Show Sensor Log")+"</a></li>":"")+(checkOSVersion(210)?"":"<li><a href='#manual'>"+_("Manual Control")+"</a></li>")+("sprinklers"===t||"runonce"===t||"programs"===t||"manual"===t||"addprogram"===t?"</ul><div class='ui-grid-a ui-mini tight'><div class='ui-block-a'><a class='ui-btn tight' href='#show-hidden'>"+_(i?"Hide":"Show")+" "+_("Disabled")+"</a></div><div class='ui-block-b'><a class='ui-btn red tight' href='#stop-all'>"+_("Stop All Stations")+"</a></div></div>":"<li><a class='ui-btn red' href='#stop-all'>"+_("Stop All Stations")+"</a></li></ul>")+"</div>")).on("click","a",(function(){var t=$(this).attr("href");return n.popup("close"),"#stop-all"===t?stopAllStations():"#show-hidden"===t?i?($(".station-hidden").hide(),e.removeClass("show-hidden")):($(".station-hidden").show(),e.addClass("show-hidden")):"#raindelay"===t?showRainDelay():"#globalpause"===t?showPause():checkChanges((function(){changePage(t)})),!1})),$("#mainMenu").remove(),n.one("popupafterclose",(function(){a.show()})),openPopup(n,{positionTo:a}),a.hide()}}(),showHome=function(){var e,t,i,n,a,s=$("<div data-role='page' id='sprinklers'><div class='ui-panel-wrapper'><div class='ui-content' role='main'><div class='ui-grid-a ui-body ui-corner-all info-card noweather'><div class='ui-block-a'><div id='weather' class='pointer'></div></div><div class='ui-block-b center home-info pointer'><div class='sitename bold'></div><div id='clock-s' class='nobr'></div>"+_("Water Level")+": <span class='waterlevel'></span>%</div></div><div id='os-stations-list' class='card-group center'></div><div id='os-sensor-show' class='card-group center'></div></div></div></div>"),o=function(e,t){timers["station-"+e]={val:t,station:e,update:function(){s.find("#countdown-"+e).text("("+sec2hms(this.val)+" "+_("remaining")+")")},done:function(){s.find("#countdown-"+e).parent("p").empty().siblings(".station-status").removeClass("on").addClass("off")}}},r=function(t){var n=Station.getName(t),s=Station.getPID(t)>0,r=Station.isRunning(t),l=s?pidname(Station.getPID(t)):"",c=Station.getRemainingRuntime(t),d=Supported.pausing()&&StationQueue.isPaused(),h=!!a[i].images[t];Station.getStatus(t)&&c>0&&o(t,c),e+="<div data-station='"+t+"' class='ui-corner-all card"+(Station.isDisabled(t)?" station-hidden' style='display:none":"")+"'>",e+="<div class='ui-body ui-body-a center'>",e+="<img src='"+(h?"data:image/jpeg;base64,"+a[i].images[t]:getAppURLPath()+"img/placeholder.png")+"' />",e+="<p class='station-name center inline-icon' id='station_"+t+"'>"+n+"</p>",e+="<span class='btn-no-border ui-btn ui-btn-icon-notext ui-corner-all card-icon station-status "+(r?"on":s?"wait":"off")+"'></span>",e+="<span class='btn-no-border ui-btn ui-btn-icon-notext ui-icon-wifi card-icon special-station "+(Station.isSpecial(t)?"":"hidden")+"'></span>",Supported.groups()&&(e+="<span class='btn-no-border ui-btn card-icon station-gid "+(Station.isMaster(t)?"hidden":"")+"'>"+mapGIDValueToName(Station.getGIDValue(t))+"</span>"),e+="<span class='btn-no-border ui-btn "+(Station.isMaster(t)?"ui-icon-master":"ui-icon-gear")+" card-icon ui-btn-icon-notext station-settings' data-station='"+t+"' id='attrib-"+t+"' "+(Supported.master(MASTER_STATION_1)?"data-um='"+StationAttribute.getMasterOperation(t,MASTER_STATION_1)+"' ":"")+(Supported.master(MASTER_STATION_2)?"data-um2='"+StationAttribute.getMasterOperation(t,MASTER_STATION_2)+"' ":"")+(Supported.ignoreRain()?"data-ir='"+StationAttribute.getIgnoreRain(t)+"' ":"")+(Supported.ignoreSensor(IGNORE_SENSOR_1)?"data-sn1='"+StationAttribute.getIgnoreSensor(t,IGNORE_SENSOR_1)+"' ":"")+(Supported.ignoreSensor(IGNORE_SENSOR_2)?"data-sn2='"+StationAttribute.getIgnoreSensor(t,IGNORE_SENSOR_2)+"' ":"")+(Supported.actRelay()?"data-ar='"+StationAttribute.getActRelay(t)+"' ":"")+(Supported.disabled()?"data-sd='"+StationAttribute.getDisabled(t)+"' ":"")+(Supported.sequential()?"data-us='"+StationAttribute.getSequential(t)+"' ":"")+(Supported.special()?"data-hs='"+StationAttribute.getSpecial(t)+"' ":"")+(Supported.groups()?"data-gid='"+Station.getGIDValue(t)+"' ":"")+"></span>",Station.isMaster(t)||(s||r)&&(e+="<p class='rem center'>"+(r?_("Running")+" "+l:_("Scheduled")+" "+(Station.getStartTime(t)?_("for")+" "+dateToString(new Date(1e3*Station.getStartTime(t))):l)),c>0&&(e+=" <span id="+(d?"'pause":"'countdown-")+t+"' class='nobr'>("+sec2hms(c)+" "+_("remaining")+")</span>"),e+="</p>"),e+="</div><hr style='display:none' class='content-divider'"+(Supported.groups()?"divider-gid="+Station.getGIDValue(t):"")+"></div>"},l=function(){$("#stn_attrib").popup("destroy").remove();var e=$(this),t=e.data("station"),n=e.siblings("[id='station_"+t+"']"),s=function(){var e=r.find("#http-server").val()+","+r.find("#http-port").val()+","+r.find("#http-on").val()+","+r.find("#http-off").val(),t=encodeURIComponent(e).length;r.find("#character-count").text(240-t),t>240?(r.find(".attrib-submit").addClass("ui-disabled"),r.find("#character-tracking").addClass("red-text bold")):(r.find(".attrib-submit").removeClass("ui-disabled"),r.find("#character-tracking").removeClass("red-text bold"))},o=function(s){var l=parseInt(r.find("#hs").val());if(e.data("hs",l),1===l)e.data("specialData",r.find("#rf-code").val());else if(2===l){for(var d=r.find("#remote-address").val().split("."),h=parseInt(r.find("#remote-port").val())||80,u=(r.find("#remote-station").val()||1)-1,p="",f=0;f<4;f++)p+=pad(parseInt(d[f]).toString(16));if(p+=(h<256?"00":"")+pad(h.toString(16)),p+=pad(u.toString(16)),!0!==s)return $.mobile.loading("show"),r.find(".attrib-submit").addClass("ui-disabled"),void verifyRemoteStation(p,(function(e){var t;if(!0!==e){!1===e||-1===e?t=_("Unable to reach the remote station."):-2===e?t=_("Password on remote controller does not match the password on this controller."):-3===e&&(t=_("Remote controller is not configured as an extender. Would you like to do this now?")),r.one("popupafterclose",(function(){$.mobile.loading("hide"),i.css("opacity","")})),$.mobile.loading("show",{html:"<h1>"+t+"</h1><button class='ui-btn cancel'>"+_("Cancel")+"</button><button class='ui-btn continue'>"+_("Continue")+"</button>",textVisible:!0,theme:"b"});var i=$(".ui-loader");i.css("opacity",".96"),i.find(".cancel").one("click",(function(){$.mobile.loading("hide"),i.css("opacity","")})),i.find(".continue").one("click",(function(){$.mobile.loading("hide"),i.css("opacity",""),-3===e&&convertRemoteToExtender(p),o(!0)})),r.find(".attrib-submit").removeClass("ui-disabled")}else o(!0)}));e.data("specialData",p)}else if(3===l){var g=pad(r.find("#gpio-pin").val()||"05");g+=r.find("#active-state").val()||"1",e.data("specialData",g)}else if(4===l){var m=r.find("#http-server").val();m+=","+r.find("#http-port").val(),m+=","+r.find("#http-on").val(),m+=","+r.find("#http-off").val(),e.data("specialData",m)}e.data("um",r.find("#um").is(":checked")?1:0),e.data("um2",r.find("#um2").is(":checked")?1:0),e.data("ir",r.find("#ir").is(":checked")?1:0),e.data("sn1",r.find("#sn1").is(":checked")?1:0),e.data("sn2",r.find("#sn2").is(":checked")?1:0),e.data("ar",r.find("#ar").is(":checked")?1:0),e.data("sd",r.find("#sd").is(":checked")?1:0),e.data("us",r.find("#us").is(":checked")?1:0),n.html(r.find("#stn-name").val());var v=r.find("span.seqgrp").text();e.attr("data-gid",mapGIDNameToValue(v)),a[i].notes[t]=r.find("#stn-notes").val(),storage.set({sites:JSON.stringify(a)},cloudSaveSites),c(t),r.popup("destroy").remove()},r="<div data-overlay-theme='b' data-role='popup' data-theme='a' id='stn_attrib'><fieldset style='margin:0' data-mini='true' data-corners='false' data-role='controlgroup'><form><div id='station-tabs'>";if("number"!=typeof t)return!1;if(Supported.special()&&(r+="<ul class='tabs'><li class='current' data-tab='tab-basic'>"+_("Basic")+"</li><li data-tab='tab-advanced'>"+_("Advanced")+"</li></ul>"),r+="<div id='tab-basic' class='tab-content current'>",r+="<div class='ui-bar-a ui-bar'>"+_("Station Name")+":</div><input class='bold center' data-corners='false' data-wrapper-class='tight stn-name ui-btn' id='stn-name' type='text' value=\""+n.text()+'">',void 0!==navigator.camera&&"function"==typeof navigator.camera.getPicture&&(r+="<button class='changeBackground'>"+("string"!=typeof a[i].images[t]?_("Add"):_("Change"))+" "+_("Image")+"</button>"),Station.isMaster(t)||(Supported.master(MASTER_STATION_1)&&(r+="<label for='um'><input class='needsclick' data-iconpos='right' id='um' type='checkbox' "+(1===e.data("um")?"checked='checked'":"")+">"+_("Use Master")+" "+(Supported.master(MASTER_STATION_2)?"1":"")+"</label>"),Supported.master(MASTER_STATION_2)&&(r+="<label for='um2'><input class='needsclick' data-iconpos='right' id='um2' type='checkbox' "+(1===e.data("um2")?"checked='checked'":"")+">"+_("Use Master")+" 2</label>"),Supported.ignoreRain()&&(r+="<label for='ir'><input class='needsclick' data-iconpos='right' id='ir' type='checkbox' "+(1===e.data("ir")?"checked='checked'":"")+">"+_("Ignore Rain")+"</label>"),Supported.ignoreSensor(IGNORE_SENSOR_1)&&(r+="<label for='sn1'><input class='needsclick' data-iconpos='right' id='sn1' type='checkbox' "+(1===e.data("sn1")?"checked='checked'":"")+">"+_("Ignore Sensor 1")+"</label>"),Supported.ignoreSensor(IGNORE_SENSOR_2)&&(r+="<label for='sn2'><input class='needsclick' data-iconpos='right' id='sn2' type='checkbox' "+(1===e.data("sn2")?"checked='checked'":"")+">"+_("Ignore Sensor 2")+"</label>"),Supported.actRelay()&&(r+="<label for='ar'><input class='needsclick' data-iconpos='right' id='ar' type='checkbox' "+(1===e.data("ar")?"checked='checked'":"")+">"+_("Activate Relay")+"</label>"),Supported.disabled()&&(r+="<label for='sd'><input class='needsclick' data-iconpos='right' id='sd' type='checkbox' "+(1===e.data("sd")?"checked='checked'":"")+">"+_("Disable")+"</label>"),Supported.sequential()&&!Supported.groups()&&(r+="<label for='us'><input class='needsclick' data-iconpos='right' id='us' type='checkbox' "+(1===e.data("us")?"checked='checked'":"")+">"+_("Sequential")+"</label>")),r+="<div class='ui-bar-a ui-bar'>"+_("Station Notes")+":</div><textarea data-corners='false' class='tight stn-notes' id='stn-notes'>"+(a[i].notes[t]?a[i].notes[t]:"")+"</textarea>",r+="</div>",r+="<div id='tab-advanced' class='tab-content'>",Supported.groups()&&!Station.isMaster(t)&&(r+="<div class='ui-bar-a ui-bar seq-container'>"+_("Sequential Group")+":</div><select id='gid' class='seqgrp' data-mini='true'></select><div><p id='prohibit-change' class='center hidden' style='color: #ff0033;'>Changing group designation is prohibited while station is running</p></div>"),Supported.special()&&(r+="<div class='ui-bar-a ui-bar'>"+_("Station Type")+":</div><select data-mini='true' id='hs'"+(Station.isSpecial(t)?" class='ui-disabled'":"")+"><option data-hs='0' value='0'"+(Station.isSpecial(t)?"":"selected")+">"+_("Standard")+"</option><option data-hs='1' value='1'>"+_("RF")+"</option><option data-hs='2' value='2'>"+_("Remote")+"</option><option data-hs='3' value='3'"+(checkOSVersion(217)&&(void 0!==controller.settings.gpio&&controller.settings.gpio.length>0||"OSPi"===getHWVersion()||"2.3"===getHWVersion())?">":" disabled>")+_("GPIO")+"</option><option data-hs='4' value='4'"+(checkOSVersion(217)?">":" disabled>")+_("HTTP")+"</option></select><div id='specialOpts'></div>"),r+="</div>",r+="<input data-wrapper-class='attrib-submit' data-theme='b' type='submit' value='"+_("Submit")+"' /></form></fieldset></div>",r=$(r).enhanceWithin().on("submit","form",(function(){return o(t),!1})),Supported.groups()){var l=r.find("select.seqgrp"),d=r.find("span.seqgrp"),h=Station.getGIDValue(t),u=Station.isRunning(t),p=r.find("p#prohibit-change");u?(l.addClass("ui-state-disabled"),p.removeClass("hidden")):(l.removeClass("ui-state-disabled"),p.addClass("hidden"));for(var g=0;g<=NUM_SEQ_GROUPS;g++){var m=mapIndexToGIDValue(g),v=mapGIDValueToName(m),b=$("<option data-gid='"+m+"' value='"+m+"'>"+_(v)+"</option>");m===h?(b.prop("selected",!0),d.text(v)):b.prop("selected",!1),l.append(b)}}r.find("ul.tabs li").click((function(){var e=$(this).attr("data-tab");$("ul.tabs li").removeClass("current"),$(".tab-content").removeClass("current"),$(this).addClass("current"),$("#"+e).addClass("current")})),r.find("#hs").on("change",(function(){return function(e){var i=r.find("#specialOpts"),n=controller.special&&controller.special.hasOwnProperty(t)?controller.special[t].sd:"",a=controller.special&&controller.special.hasOwnProperty(t)?controller.special[t].st:0;if(i.empty(),0===e)i.append("<p class='special-desc center small'>"+_("Select the station type using the dropdown selector above and configure the station properties.")+"</p>").enhanceWithin();else if(1===e)n=a===e?n:"0000000000000000",i.append("<div class='ui-bar-a ui-bar'>"+_("RF Code")+":</div><input class='center' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='rf-code' required='true' type='text' value='"+n+"'>").enhanceWithin();else if(2===e)n=parseRemoteStationData(a===e?n:"00000000005000"),i.append("<div class='ui-bar-a ui-bar'>"+_("Remote Address")+":</div><input class='center' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='remote-address' required='true' type='text' pattern='^(?:[0-9]{1,3}.){3}[0-9]{1,3}$' value='"+n.ip+"'><div class='ui-bar-a ui-bar'>"+_("Remote Port")+":</div><input class='center' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='remote-port' required='true' type='number' placeholder='80' min='0' max='65535' value='"+n.port+"'><div class='ui-bar-a ui-bar'>"+_("Remote Station (index)")+":</div><input class='center' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='remote-station' required='true' type='number' min='1' max='200' placeholder='1' value='"+(n.station+1)+"'>").enhanceWithin();else if(3===e){var o,l=5,c=1,d=[];if(controller.settings.gpio?d=controller.settings.gpio:"OSPi"===getHWVersion()?d=[5,6,7,8,9,10,11,12,13,16,18,19,20,21,23,24,25,26]:"2.3"===getHWVersion()&&(d=[2,10,12,13,14,15,18,19]),a===e&&(n=n.split(""),l=parseInt(n[0]+n[1]),c=parseInt(n[2])),d.length){o="<div class='ui-bar-a ui-bar'>"+_("GPIO Pin")+":</div><select class='center' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='gpio-pin'>";for(var h=0;h<d.length;h++)o+="<option value='"+d[h]+"' "+(d[h]===l?"selected='selected'":"")+">"+d[h];o+="</select>"}else o="";o+="<div class='ui-bar-a ui-bar'>"+_("Active State")+":</div><select class='center' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='active-state'><option value='1' "+(1===c?"selected='selected'":"")+">"+_("HIGH")+"<option value='0' "+(0===c?"selected='selected'":"")+">"+_("LOW")+"</select>",i.append(o).enhanceWithin()}else 4===e&&(n=a===e?n.split(","):["server","80","On","Off"],i.append("<div class='ui-bar-a ui-bar'>"+_("Server Name")+":</div><input class='center  validate-length' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='http-server' required='true' type='text' value='"+n[0]+"'><div class='ui-bar-a ui-bar'>"+_("Server Port")+":</div><input class='center  validate-length' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='http-port' required='true' type='number' min='0' max='65535' value='"+parseInt(n[1])+"'><div class='ui-bar-a ui-bar'>"+_("On Command")+":</div><input class='center validate-length' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='http-on' required='true' type='text' value='"+n[2]+"'><div class='ui-bar-a ui-bar'>"+_("Off Command")+":</div><input class='center validate-length' data-corners='false' data-wrapper-class='tight ui-btn stn-name' id='http-off' required='true' type='text' value='"+n[3]+"'><div class='center smaller' id='character-tracking' style='color:#999;'><p>"+_("Note: There is a limit on the number of character used to configure this station type.")+"</p><span>"+_("Characters remaining")+": </span><span id='character-count'>placeholder</span></div>").enhanceWithin(),s(),$(".validate-length").on("input",s))}(parseInt($(this).val())),!1})),Station.isSpecial(t)?updateControllerStationSpecial((function(){r.find("#hs").removeClass("ui-disabled").find("option[data-hs='"+controller.special[t].st+"']").prop("selected",!0),r.find("#hs").change()})):(r.find("#hs").removeClass("ui-disabled"),r.find("option[data-hs='0']").prop("selected",!0),r.find("#hs").change()),r.find(".changeBackground").on("click",(function(e){e.preventDefault();var n=this;takePicture((function(e){a[i].images[t]=e,storage.set({sites:JSON.stringify(a)},cloudSaveSites),f(),n.innerHTML=_("Change")+" "+_("Image")}))})),$.mobile.pageContainer.append(r);var x={history:!1};if(isiOS){var y=getPageTop();x.x=y.x,x.y=y.y}else x.positionTo="window";r.popup(x).popup("open")},c=function(e){var t,i,n,a,o,r=!0===checkOSVersion(208),l={},c={},d={},h={},u={},p={},f={},g={},m={},v={};for(i=0;i<controller.settings.nbrd;i++)for(Supported.master(MASTER_STATION_1)&&(l["m"+i]=0),Supported.master(MASTER_STATION_2)&&(c["n"+i]=0),Supported.sequential()&&(d["q"+i]=0),Supported.special()&&(h["p"+i]=0),Supported.ignoreRain()&&(u["i"+i]=0),Supported.ignoreSensor(IGNORE_SENSOR_1)&&(p["j"+i]=0),Supported.ignoreSensor(IGNORE_SENSOR_2)&&(f["k"+i]=0),Supported.actRelay()&&(g["a"+i]=0),Supported.disabled()&&(m["d"+i]=0),o=0;o<8;o++)n=8*i+o,t=s.find("#attrib-"+n),Supported.master(MASTER_STATION_1)&&(l["m"+i]=l["m"+i]+(t.data("um")<<o)),Supported.master(MASTER_STATION_2)&&(c["n"+i]=c["n"+i]+(t.data("um2")<<o)),Supported.sequential()&&(d["q"+i]=d["q"+i]+(t.data("us")<<o)),Supported.special()&&(h["p"+i]=h["p"+i]+((t.data("hs")?1:0)<<o)),Supported.ignoreRain()&&(u["i"+i]=u["i"+i]+(t.data("ir")<<o)),Supported.ignoreSensor(IGNORE_SENSOR_1)&&(p["j"+i]=p["j"+i]+(t.data("sn1")<<o)),Supported.ignoreSensor(IGNORE_SENSOR_2)&&(f["k"+i]=f["k"+i]+(t.data("sn2")<<o)),Supported.actRelay()&&(g["a"+i]=g["a"+i]+(t.data("ar")<<o)),Supported.disabled()&&(m["d"+i]=m["d"+i]+(t.data("sd")<<o)),n===e&&(v["s"+n]=r?s.find("#station_"+n).text().replace(/\s/g,"_"):s.find("#station_"+n).text(),Supported.special()&&t.data("hs")&&(h.st=t.data("hs"),h.sd=t.data("specialData"),h.sid=e),Supported.groups()&&(a=t.attr("data-gid")));$.mobile.loading("show"),sendToOS("/cs?pw=&"+$.param(v)+(Supported.master(MASTER_STATION_1)?"&"+$.param(l):"")+(Supported.master(MASTER_STATION_2)?"&"+$.param(c):"")+(Supported.sequential()?"&"+$.param(d):"")+(Supported.special()?"&"+$.param(h):"")+(Supported.ignoreRain()?"&"+$.param(u):"")+(Supported.ignoreSensor(IGNORE_SENSOR_1)?"&"+$.param(p):"")+(Supported.ignoreSensor(IGNORE_SENSOR_2)?"&"+$.param(f):"")+(Supported.actRelay()?"&"+$.param(g):"")+(Supported.disabled()?"&"+$.param(m):"")+(Supported.groups()?"&g"+e+"="+a:"")).done((function(){showerror(_("Stations have been updated")),updateController((function(){$("html").trigger("datarefresh")}))}))},d=function(){timers.clock={val:controller.settings.devt,update:function(){s.find("#clock-s").text(dateToString(new Date(1e3*this.val),null,1))}}},h=function(e,t){var i=$(e),n=$(t),a=Card.getSID(i),s=Card.getSID(n),o=Station.isMaster(a)>0?1:0,r=Station.isMaster(s)>0?1:0;if(o>r)return-1;if(o<r)return 1;var l=Station.getGIDValue(Card.getSID(i)),c=Station.getGIDValue(Card.getSID(n));if(l<c)return-1;if(l>c)return 1;var d=Station.getStatus(a),h=Station.getStatus(s);return d>h?-1:d<h?1:a<s?-1:a>s?1:0},u=function(e,t){var i=$(e),n=$(t),a=Card.getSID(i),s=Card.getSID(n),o=Station.getStatus(a),r=Station.getStatus(s);return o>r?-1:o<r?1:a<s?-1:a>s?1:0},p=function(){var e=s.find("#os-stations-list"),t=e.children(),i=groupView?h:u;t.sort(i).detach().appendTo(e),Supported.groups()&&groupView?function(e,t){var i,n,a,s,o;for(o=0;o<e.children().length;o++)i=CardList.getCardByIndex(t,o),Card.setGroupLabel(i,Card.getGIDName(i));for(o=0;o<e.children().length-1;o++)i=CardList.getCardByIndex(t,o),n=CardList.getCardByIndex(t,o+1),a=Card.getDivider(i),s=Card.getGroupLabel(i),Card.isMasterStation(i)?(Card.isMasterStation(n)?a.hide():a.show(),s.addClass("hidden")):Station.getGIDValue(Card.getSID(i))!==Station.getGIDValue(Card.getSID(n))?a.show():a.hide();Card.getDivider(n).show(),Card.setGroupLabel(n,Card.getGIDName(n))}(e,t):function(e,t){var i,n,a,s,o;for(o=0;o<e.children().length-1;o++)i=CardList.getCardByIndex(t,o),n=CardList.getCardByIndex(t,o+1),(a=Card.getDivider(i)).hide(),Card.setGroupLabel(i,mapGIDValueToName(Station.getGIDValue(o))),void 0!==(s=Card.getGroupLabel(i))&&Card.isMasterStation(i)&&s.addClass("hidden"),Station.isRunning(Card.getSID(i))&&!Station.isRunning(Card.getSID(n))&&a.show();Card.getDivider(n).hide(),Card.setGroupLabel(n,mapGIDValueToName(Station.getGIDValue(o))),void 0!==(s=Card.getGroupLabel(n))&&Card.isMasterStation(n)&&s.addClass("hidden")}(e,t)},f=function(){var n,l,c,h,u,f,m,v,b=s.find("#os-stations-list"),x=b.children();if(s.hasClass("ui-page-active")){d(),g(),updateSensorShowArea(s),s.find(".waterlevel").text(controller.options.wl),s.find(".sitename").text(t.val()),CardList.getAllCards(x).filter((function(e,t){return parseInt($(t).data("station"),10)>=controller.stations.snames.length})).remove();for(var y=0;y<controller.stations.snames.length;y++)n=Station.getPID(y)>0,l=Station.getStatus(y)>0,c=n?pidname(Station.getPID(y)):"",h=Station.getRemainingRuntime(y),u=StationQueue.isPaused(),v=!!a[i].images[y],f=CardList.getCardBySID(x,y),Card.getDivider(f),0===f.length?(e="",r(y),b.append(e)):(f.find(".ui-body > img").attr("src",v?"data:image/jpeg;base64,"+a[i].images[y]:getAppURLPath()+"img/placeholder.png"),Station.isDisabled(y)?(s.hasClass("show-hidden")||f.hide(),f.addClass("station-hidden")):f.show().removeClass("station-hidden"),f.find("#station_"+y).text(controller.stations.snames[y]),f.find(".special-station").removeClass("hidden").addClass(Station.isSpecial(y)?"":"hidden"),f.find(".station-status").removeClass("on off wait").addClass(l?"on":n?"wait":"off"),Station.isMaster(y)?f.find(".station-settings").removeClass("ui-icon-gear").addClass("ui-icon-master"):f.find(".station-settings").removeClass("ui-icon-master").addClass("ui-icon-gear"),f.find(".station-settings").data({um:Supported.master(MASTER_STATION_1)?StationAttribute.getMasterOperation(y,MASTER_STATION_1):void 0,um2:Supported.master(MASTER_STATION_2)?StationAttribute.getMasterOperation(y,MASTER_STATION_2):void 0,ir:Supported.ignoreRain()?StationAttribute.getIgnoreRain(y):void 0,sn1:Supported.ignoreSensor(IGNORE_SENSOR_1)?StationAttribute.getIgnoreSensor(y,IGNORE_SENSOR_1):void 0,sn2:Supported.ignoreSensor(IGNORE_SENSOR_2)?StationAttribute.getIgnoreSensor(y,IGNORE_SENSOR_2):void 0,ar:Supported.actRelay()?StationAttribute.getActRelay(y):void 0,sd:Supported.disabled()?StationAttribute.getDisabled(y):void 0,us:Supported.sequential()?StationAttribute.getSequential(y):void 0,hs:Supported.special()?StationAttribute.getSpecial(y):void 0,gid:Supported.groups()?Station.getGIDValue(y):void 0}),Station.isMaster(y)||!n&&!l?f.find(".rem").remove():(m=l?_("Running")+" "+c:_("Scheduled")+" "+(Station.getStartTime(y)?_("for")+" "+dateToString(new Date(1e3*Station.getStartTime(y))):c),h>0&&(m+=" <span id="+(u?"'pause":"'countdown-")+y+"' class='nobr'>("+sec2hms(h)+" "+_("remaining")+")</span>",controller.status[y]&&o(y,h)),0===f.find(".rem").length?f.find(".ui-body").append("<p class='rem center'>"+m+"</p>"):f.find(".rem").html(m)));p()}},g=function(e){e=e||function(){},i=t.val(),storage.get("sites",(function(t){"object"!=typeof(a=parseSites(t.sites))[i].images||$.isEmptyObject(a[i].images)?(a[i].images={},s.removeClass("has-images")):s.addClass("has-images"),"object"!=typeof a[i].notes&&(a[i].notes={}),"object"!=typeof a[i].lastRunTime&&(a[i].lastRunTime={}),e()}))};return s.one("pageshow",(function(){$("html").on("datarefresh",f)})),function(o){if(!isControllerConnected())return!1;e="",t=$("#site-selector"),g((function(){for(n=0;n<controller.stations.snames.length;n++)r(n);s.find("#os-stations-list").html(e),p()})),s.find(".sitename").toggleClass("hidden",!!currLocal).text(t.val()),s.find(".waterlevel").text(controller.options.wl),updateSensorShowArea(s),d(),s.on("click",".station-settings",l),s.on("click",".home-info",(function(){return changePage("#os-options",{expandItem:"weather"}),!1})),s.on("click",".card",(function(){if(!checkOSVersion(210))return!1;var e,t=$(this),n=Card.getSID(t),s=Card.getGIDValue(t),o=Station.getStatus(n),r=Station.getName(n),l={};if(Station.isMaster(n))return!1;if(l.type=dialog.REMOVE_STATION,l.station=n,l.gid=s,o)e=_("Do you want to stop the selected station?");else{if(!t.find("span.nobr").length)return void showDurationBox({title:r,incrementalUpdate:!1,maximum:65535,seconds:a[i].lastRunTime[n]>0?a[i].lastRunTime[n]:0,helptext:_("Enter a duration to manually run ")+r,callback:function(e){sendToOS("/cm?sid="+n+"&en=1&t="+e+"&pw=","json").done((function(){Station.setPID(n,MANUAL_STATION_PID),Station.setRemainingRuntime(n,e),refreshStatus(),showerror(_("Station has been queued")),a[i].lastRunTime[n]=e,storage.set({sites:JSON.stringify(a)},cloudSaveSites)}))}});e=_("Do you want to unschedule the selected station?")}areYouSure(e,Station.getName(n),(function(){var e=!0===popupData.shift?1:0;sendToOS("/cm?sid="+n+"&ssta="+e+"&en=0&pw=").done((function(){Station.setPID(n,0),Station.setRemainingRuntime(n,0),Station.setStatus(n,0),delete timers["station-"+n],refreshStatus(),showerror(_("Station has been stopped"))}))}),null,l)})).on("click","img",(function(){var e=$(this),t=e.parents(".card").data("station");return-1!==e.attr("src").indexOf("data:image/jpeg;base64")?areYouSure(_("Do you want to delete the current image?"),"",(function(){delete a[i].images[t],storage.set({sites:JSON.stringify(a)},cloudSaveSites),f()})):takePicture((function(e){a[i].images[t]=e,storage.set({sites:JSON.stringify(a)},cloudSaveSites),f()})),!1})).on({pagebeforeshow:function(){var e=changeHeader({class:"logo",leftBtn:{icon:"bullets",on:function(){return openPanel(),!1}},rightBtn:{icon:"bell",class:"notifications",text:"<span class='notificationCount ui-li-count ui-btn-corner-all'>"+notifications.length+"</span>",on:function(){return showNotifications(),!1}},animate:!o});0===notifications.length&&$(e[2]).hide()}}),$("#sprinklers").remove(),$.mobile.pageContainer.append(s),$.isEmptyObject(weather)||updateWeatherBox()}}(),showStart=function(){var e=$("<div data-role='page' id='start'><ul data-role='none' id='welcome_list' class='ui-listview ui-listview-inset ui-corner-all'><li><div class='logo' id='welcome_logo'></div></li><li class='ui-li-static ui-body-inherit ui-first-child ui-last-child ui-li-separate'><p class='rain-desc'>"+_("Welcome to the OpenSprinkler application. This app only works with the OpenSprinkler controller which must be installed and setup on your home network.")+"</p><a class='iab iabNoScale ui-btn ui-mini center' target='_blank' href='https://opensprinkler.com/product/opensprinkler/'>"+_("Purchase OpenSprinkler")+"</a></li><li class='ui-first-child ui-last-child'><a href='#' class='ui-btn center cloud-login'>"+_("OpenSprinkler.com Login")+"</a></li><hr class='content-divider'><li id='auto-scan' class='ui-first-child'><a href='#' class='ui-btn ui-btn-icon-right ui-icon-carat-r'>"+_("Scan For Device")+"</a></li><li class='ui-first-child ui-last-child'><a class='ui-btn ui-btn-icon-right ui-icon-carat-r' data-rel='popup' href='#addnew'>"+_("Add Controller")+"</a></li></ul></div>"),t=function(){updateDeviceIP((function(e){void 0!==e&&isLocalIP(e)?(a.removeClass("ui-first-child").find("a.ui-btn").text(_("Manually Add Device")),n.show()):i()}))},i=function(){a.addClass("ui-first-child").find("a.ui-btn").text(_("Add Controller")),n.hide()},n=e.find("#auto-scan"),a=n.next();return e.find("#auto-scan").find("a").on("click",(function(){return startScan(),!1})),e.find("a[href='#addnew']").on("click",(function(){showAddNew()})),e.find(".cloud-login").on("click",(function(){return requestCloudAuth(),!1})),e.on("pagehide",(function(){e.detach()})),function(){if(isControllerConnected())return!1;$("#start").remove(),$.mobile.pageContainer.append(e),t()}}();function showGuidedSetup(){}function parseRemoteStationData(e){e=e.split("");for(var t,i=[],n={},a=0;a<8;a++)t=parseInt(e[a]+e[a+1],16)||0,i.push(t),a++;return n.ip=i.join("."),n.port=parseInt(e[8]+e[9]+e[10]+e[11],16),n.station=parseInt(e[12]+e[13],16),n}function verifyRemoteStation(e,t){e=parseRemoteStationData(e),$.ajax({url:"http://"+e.ip+":"+e.port+"/jo?pw="+encodeURIComponent(currPass),type:"GET",dataType:"json"}).then((function(e){"object"==typeof e&&e.hasOwnProperty("fwv")?1===Object.keys(e).length?t(-2):e.hasOwnProperty("re")&&0!==e.re?t(!0):t(-3):t(-1)}),(function(){t(!1)}))}function convertRemoteToExtender(e){e=parseRemoteStationData(e),$.ajax({url:"http://"+e.ip+":"+e.port+"/cv?re=1&pw="+encodeURIComponent(currPass),type:"GET",dataType:"json"})}function refreshStatus(e){if(isControllerConnected()){e=e||function(){};var t=function(){$("html").trigger("datarefresh"),checkStatus(),e()};checkOSVersion(216)?updateController((function(){checkOSVersion(230)?updateAnalogSensor((function(){updateProgramAdjustments(t)})):t()}),networkFail):$.when(updateControllerStatus(),updateControllerSettings(),updateControllerOptions()).then(t,networkFail)}}function refreshData(){isControllerConnected()&&(checkOSVersion(216)?updateController(null,networkFail):$.when(updateControllerPrograms(),updateControllerStations()).fail(networkFail))}function changeStatus(e,t,i,n){var a=$("#footer-running"),s="";n=n||function(){},e>1&&(timers.statusbar={val:e,type:"statusbar",update:function(){$("#countdown").text("("+sec2hms(this.val)+" "+_("remaining")+")")}}),isControllerConnected()&&void 0!==controller.settings.curr&&(s+=_("Current")+": "+controller.settings.curr+" mA "),!isControllerConnected()||2!==controller.options.urs&&2!==controller.options.sn1t||void 0===controller.settings.flcrt||void 0===controller.settings.flwrt||(s+="<span style='padding-left:5px'>"+_("Flow")+": "+(flowCountToVolume(controller.settings.flcrt)/(controller.settings.flwrt/60)).toFixed(2)+" L/min</span>"),s=""!==s?i+"<p class='running-text smaller center'>"+s+"</p>":i,a.removeClass().addClass(t).html(s).off("click").on("click",n)}function checkStatus(){var e,t,i,n,a,s,o;if(isControllerConnected())if(1!==controller.options.re)if(controller.settings.en){if(controller.settings.pq)return n="<p class='running-text center pointer'>"+_("Stations Currently Paused"),controller.settings.pt&&(n+=" <span id='countdown' class='nobr'>("+sec2hms(controller.settings.pt)+" "+_("remaining")+")</span>"),n+="</p>",void changeStatus(controller.settings.pt||0,"yellow",n,(function(){areYouSure(_("Do you want to resume station operation?"),"",(function(){showLoading("#footer-running"),sendToOS("/pq?pw=&dur=0").done((function(){setTimeout(refreshStatus,1e3)}))}))}));for(e={},o=0;o<controller.status.length;o++)controller.status[o]&&!Station.isMaster(o)&&(e[o]=controller.status[o]);if(Object.keys(e).length>=2){for(o in t=0,e)e.hasOwnProperty(o)&&(s=Station.getRemainingRuntime(o))>t&&(t=s);return i=Object.keys(e)[0],n="<div><div class='running-icon'></div><div class='running-text pointer'>",n+=pidname(Station.getPID(i))+" "+_("is running on")+" "+Object.keys(e).length+" "+_("stations")+" ",t>0&&(n+="<span id='countdown' class='nobr'>("+sec2hms(t)+" "+_("remaining")+")</span>"),void changeStatus(t,"green",n+="</div></div>",goHome)}for(a=!1,o=0;o<controller.stations.snames.length;o++)if(controller.settings.ps[o]&&Station.getPID(o)&&Station.getStatus(o)&&!Station.isMaster(o)){a=!0,n="<div><div class='running-icon'></div><div class='running-text pointer'>",n+=pidname(Station.getPID(o))+" "+_("is running on station")+" <span class='nobr'>"+Station.getName(o)+"</span> ",Station.getRemainingRuntime(o)>0&&(n+="<span id='countdown' class='nobr'>("+sec2hms(Station.getRemainingRuntime(o))+" "+_("remaining")+")</span>"),n+="</div></div>";break}if(a)changeStatus(Station.getRemainingRuntime(o),"green",n,goHome);else if(controller.settings.rd)changeStatus(0,"red","<p class='running-text center pointer'>"+_("Rain delay until")+" "+dateToString(new Date(1e3*controller.settings.rdst))+"</p>",(function(){areYouSure(_("Do you want to turn off rain delay?"),"",(function(){showLoading("#footer-running"),sendToOS("/cv?pw=&rd=0").done((function(){refreshStatus(updateWeather)}))}))}));else if(1!==controller.options.urs||1!==controller.settings.rs)if(1!==controller.settings.sn1)if(1!==controller.settings.sn2)if(1!==controller.settings.mm){var r=controller.settings.lrun[2];if(0===r)changeStatus(0,"transparent","<p class='running-text smaller center pointer'>"+_("System Idle")+"</p>",goHome);else changeStatus(0,"transparent","<p class='running-text smaller center pointer'>"+pidname(controller.settings.lrun[1])+" "+_("last ran station")+" "+controller.stations.snames[controller.settings.lrun[0]]+" "+_("for")+" "+(r/60>>0)+"m "+r%60+"s "+_("on")+" "+dateToString(new Date(1e3*(controller.settings.lrun[3]-r)))+"</p>",goHome)}else changeStatus(0,"red","<p class='running-text center pointer'>"+_("Manual mode enabled")+"</p>",(function(){areYouSure(_("Do you want to turn off manual mode?"),"",(function(){showLoading("#footer-running"),sendToOS("/cv?pw=&mm=0").done((function(){updateController()}))}))}));else changeStatus(0,"red","<p class='running-text center'>Sensor 2 ("+(3===controller.options.sn2t?_("Soil"):_("Rain"))+_(") Activated")+"</p>");else changeStatus(0,"red","<p class='running-text center'>Sensor 1 ("+(3===controller.options.sn1t?_("Soil"):_("Rain"))+_(") Activated")+"</p>");else changeStatus(0,"red","<p class='running-text center'>"+_("Rain detected")+"</p>")}else changeStatus(0,"red","<p class='running-text center pointer'>"+_("System Disabled")+"</p>",(function(){areYouSure(_("Do you want to re-enable system operation?"),"",(function(){showLoading("#footer-running"),sendToOS("/cv?pw=&en=1").done((function(){updateController()}))}))}));else changeStatus(0,"red","<p class='running-text center pointer'>"+_("Configured as Extender")+"</p>",(function(){areYouSure(_("Do you wish to disable extender mode?"),"",(function(){showLoading("#footer-running"),sendToOS("/cv?pw=&re=0").done((function(){updateController()}))}))}));else changeStatus(0,"transparent","<p class='running-text smaller'></p>")}function calculateTotalRunningTime(e){var t,i,n=controller.options.sdt;if(Supported.groups()){t=new Array(NUM_SEQ_GROUPS).fill(0),i=0;var a=0;$.each(controller.stations.snames,(function(a){var s=e[a],o=Station.getGIDValue(a);s>0&&(o!==PARALLEL_GID_VALUE?t[o]+=s+n:s>i&&(i=s))}));for(var s=0;s<NUM_SEQ_GROUPS;s++)t[s]>n&&(t[s]-=n),t[s]>a&&(a=t[s]);return Math.max(a,i)}return t=0,i=0,$.each(controller.stations.snames,(function(a){var s=e[a];s>0&&(Station.isSequential(a)?t+=s+n:s>i&&(i=s))})),t>n&&(t-=n),Math.max(t,i)}function updateTimers(){var e=(new Date).getTime();setInterval((function(){if(!isControllerConnected())return!1;var t=(new Date).getTime();if(t-e>2e3&&(checkStatus(),refreshStatus()),e=t,!$.isEmptyObject(timers))for(var i in timers)timers.hasOwnProperty(i)&&(timers[i].val<=0?("statusbar"===i&&(showLoading("#footer-running"),refreshStatus()),"function"==typeof timers[i].done&&timers[i].done(),delete timers[i]):"clock"===i?(++timers[i].val,timers[i].update()):"statusbar"!==i&&"number"!=typeof timers[i].station||(--timers[i].val,timers[i].update()))}),1e3)}function removeStationTimers(){for(var e in timers)timers.hasOwnProperty(e)&&"clock"!==e&&delete timers[e]}var getManual=function(){var e,t,i,n=$("<div data-role='page' id='manual'><div class='ui-content' role='main'><p class='center'>"+_("With manual mode turned on, tap a station to toggle it.")+"</p><fieldset data-role='collapsible' data-collapsed='false' data-mini='true'><legend>"+_("Options")+"</legend><div class='ui-field-contain'><label for='mmm'><b>"+_("Manual Mode")+"</b></label><input type='checkbox' data-on-text='On' data-off-text='Off' data-role='flipswitch' name='mmm' id='mmm'></div><p class='rain-desc smaller center' style='padding-top:5px'>"+_("Station timer prevents a station from running indefinitely and will automatically turn it off after the set duration (or when toggled off)")+"</p><div class='ui-field-contain duration-input'><label for='auto-off'><b>"+_("Station Timer")+"</b></label><button data-mini='true' name='auto-off' id='auto-off' value='3600'>1h</button></div></fieldset><div id='manual-station-list'></div></div></div>"),a=function(e){updateControllerStatus().done((function(){var t=i.eq(e).find("a");controller.options.mas&&(controller.status[controller.options.mas-1]?i.eq(controller.options.mas-1).addClass("green"):i.eq(controller.options.mas-1).removeClass("green")),t.text(controller.stations.snames[e]),controller.status[e]?t.removeClass("yellow").addClass("green"):t.removeClass("green yellow")}))},s=function(){if(!controller.settings.mm)return showerror(_("Manual mode is not enabled. Please enable manual mode then try again.")),!1;var t=$(this),n=t.closest("li"),s=i.index(n),r=s+1,l=o.val();return t.hasClass("yellow")||(e=controller.status[s]?checkOSPiVersion("2.1")?"/sn?sid="+r+"&set_to=0&pw=":"/sn"+r+"=0":checkOSPiVersion("2.1")?"/sn?sid="+r+"&set_to=1&set_time="+l+"&pw=":"/sn"+r+"=1&t="+l,t.removeClass("green").addClass("yellow"),t.html("<p class='ui-icon ui-icon-loading mini-load'></p>"),sendToOS(e).always((function(){setTimeout(a,1e3,s)}))),!1},o=n.find("#auto-off");return n.on("pagehide",(function(){n.detach()})),storage.get("autoOff",(function(e){e.autoOff&&(o.val(e.autoOff),o.text(dhms2str(sec2dhms(e.autoOff))))})),o.on("click",(function(){var e=$(this),t=n.find("label[for='"+e.attr("id")+"']").text();return showDurationBox({seconds:e.val(),title:t,callback:function(t){e.val(t),e.text(dhms2str(sec2dhms(t))),storage.set({autoOff:t})},maximum:32768}),!1})),n.find("#mmm").on("change",flipSwitched),function(){var e="<li data-role='list-divider' data-theme='a'>"+_("Sprinkler Stations")+"</li>";n.find("#mmm").prop("checked",!!controller.settings.mm),$.each(controller.stations.snames,(function(t,i){Station.isMaster(t)?e+="<li data-icon='false' class='center"+(controller.status[t]?" green":"")+(Station.isDisabled(t)?" station-hidden' style='display:none":"")+"'>"+i+" ("+_("Master")+")</li>":e+="<li data-icon='false'><a class='mm_station center"+(controller.status[t]?" green":"")+(Station.isDisabled(t)?" station-hidden' style='display:none":"")+"'>"+i+"</a></li>"})),t=$("<ul data-role='listview' data-inset='true' id='mm_list'>"+e+"</ul>"),i=t.children("li").slice(1),t.find(".mm_station").on("vclick",s),n.find("#manual-station-list").html(t).enhanceWithin(),changeHeader({title:_("Manual Control"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack}}),$("#manual").remove(),$.mobile.pageContainer.append(n)}}(),getRunonce=function(){var e,t,i,n,a,s,o,r,l=$("<div data-role='page' id='runonce'><div class='ui-content' role='main' id='runonce_list'></div></div>"),c=function(e){a.l=e,$("<option value='l' selected='selected'>"+_("Last Used Program")+"</option>").insertAfter(l.find("#rprog").find("option[value='t']")),h(e)},d=function(){return l.find("[id^='zone-']").val(0).text("0s").removeClass("green"),!1},h=function(e){l.find("[id^='zone-']").each((function(t,i){if(!Station.isMaster(t)){var n=$(i);n.val(e[t]).text(getDurationText(e[t])),e[t]>0?n.addClass("green"):n.removeClass("green")}}))};return l.on("pagehide",(function(){l.detach()})),function(){if(t="<p class='center'>"+_("Zero value excludes the station from the run-once program.")+"</p>",n=[],controller.programs.pd.length)for(s=0;s<controller.programs.pd.length;s++){o=readProgram(controller.programs.pd[s]);var u=[];if(checkOSVersion(210))u=o.stations;else{var p=o.stations.split("");for(e=0;e<controller.stations.snames.length;e++)u.push(parseInt(p[e])?o.duration:0)}n.push(u)}for(a=n,i="<select data-mini='true' name='rprog' id='rprog'><option value='t'>"+_("Test All Stations")+"</option><option value='s' selected='selected'>"+_("Quick Programs")+"</option>",e=0;e<n.length;e++)r=checkOSVersion(210)?controller.programs.pd[e][5]:_("Program")+" "+(e+1),i+="<option value='"+e+"'>"+r+"</option>";if(t+=(i+="</select>")+"<form>",$.each(controller.stations.snames,(function(e,i){Station.isMaster(e)?t+="<div class='ui-field-contain duration-input"+(Station.isDisabled(e)?" station-hidden' style='display:none":"")+"'><label for='zone-"+e+"'>"+i+":</label><button disabled='true' data-mini='true' name='zone-"+e+"' id='zone-"+e+"' value='0'>Master</button></div>":t+="<div class='ui-field-contain duration-input"+(Station.isDisabled(e)?" station-hidden' style='display:none":"")+"'><label for='zone-"+e+"'>"+i+":</label><button data-mini='true' name='zone-"+e+"' id='zone-"+e+"' value='0'>0s</button></div>"})),t+="</form><a class='ui-btn ui-corner-all ui-shadow rsubmit' href='#'>"+_("Submit")+"</a><a class='ui-btn ui-btn-b ui-corner-all ui-shadow rreset' href='#'>"+_("Reset")+"</a>",l.find(".ui-content").html(t).enhanceWithin(),"object"==typeof controller.settings.rodur){var f=0;for(e=0;e<controller.settings.rodur.length;e++)f+=controller.settings.rodur[e];0!==f&&c(controller.settings.rodur)}else storage.get("runonce",(function(e){(e=e.runonce)&&(e=JSON.parse(e),c(e))}));l.find("#rprog").on("change",(function(){var e=$(this).val();"s"!==e?"t"!==e?void 0!==a[e]&&h(a[e]):h(Array.apply(null,Array(controller.stations.snames.length)).map((function(){return 60}))):d()})),l.on("click",".rsubmit",submitRunonce).on("click",".rreset",d),l.find("[id^='zone-']").on("click",(function(){var e=$(this),t=l.find("label[for='"+e.attr("id")+"']").text().slice(0,-1);return showDurationBox({seconds:e.val(),title:t,callback:function(t){e.val(t),e.text(getDurationText(t)),t>0?e.addClass("green"):e.removeClass("green")},maximum:65535,showSun:!!checkOSVersion(214)}),!1})),changeHeader({title:_("Run-Once"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack},rightBtn:{icon:"check",text:_("Submit"),on:submitRunonce}}),$("#runonce").remove(),$.mobile.pageContainer.append(l)}}();function submitRunonce(e){e instanceof Array||(e=[],$("#runonce").find("[id^='zone-']").each((function(){e.push(parseInt(this.value)||0)})),e.push(0));var t=function(){$.mobile.loading("show"),storage.set({runonce:JSON.stringify(e)}),sendToOS("/cr?pw=&t="+JSON.stringify(e)).done((function(){$.mobile.loading("hide"),$.mobile.document.one("pageshow",(function(){showerror(_("Run-once program has been scheduled"))})),refreshStatus(),goBack()}))},i=StationQueue.isActive();-1!==i?areYouSure(_("Do you want to stop the currently running program?"),pidname(Station.getPID(i)),(function(){$.mobile.loading("show"),stopStations(t)})):t()}var getPreview=function(){var e,t,i,n,a,s,o,r,l,c,d,h,u,p,f,g,m,v,b=$("<div data-role='page' id='preview'><div class='ui-content' role='main'><div id='preview_header' class='input_with_buttons'><button class='preview-minus ui-btn ui-btn-icon-notext ui-icon-carat-l btn-no-border'></button><input class='center' type='date' name='preview_date' id='preview_date'><button class='preview-plus ui-btn ui-btn-icon-notext ui-icon-carat-r btn-no-border'></button></div><div id='timeline'></div><div data-role='controlgroup' data-type='horizontal' id='timeline-navigation'><a class='ui-btn ui-corner-all ui-icon-plus ui-btn-icon-notext btn-no-border' title='"+_("Zoom in")+"'></a><a class='ui-btn ui-corner-all ui-icon-minus ui-btn-icon-notext btn-no-border' title='"+_("Zoom out")+"'></a><a class='ui-btn ui-corner-all ui-icon-carat-l ui-btn-icon-notext btn-no-border' title='"+_("Move left")+"'></a><a class='ui-btn ui-corner-all ui-icon-carat-r ui-btn-icon-notext btn-no-border' title='"+_("Move right")+"'></a></div></div></div>"),x=b.find("#timeline"),y=b.find("#timeline-navigation");return b.find("#preview_date").on("change",(function(){u=this.value.split("-"),p=new Date(u[0],u[1]-1,u[2]),h()})),b.one("pagebeforeshow",(function(){holdButton(b.find(".preview-plus"),(function(){d(1)})),holdButton(b.find(".preview-minus"),(function(){d(-1)}))})),b.on({pagehide:function(){b.detach()},pageshow:function(){h()}}),t=function(t,n,a){e=[];var s,o,c,d,h,u,p,f,b,x,y,w,k=Math.floor(controller.settings.devt/86400),S=0,C=Date.UTC(a,t-1,n,0,0,0,0),_=C/1e3/3600/24>>0,T=8*controller.settings.nbrd,A=new Array(T),P=new Array(T),D=new Array(T),I=new Array(T),E=[],L=new Array(T),M=0,O=0,N=new Array(NUM_SEQ_GROUPS);for(d=0;d<T;d++)A[d]=-1,P[d]=0,D[d]=0,I[d]=0,L[d]=255;for(u=0;u<NUM_SEQ_GROUPS;u++)N[u]=0;do{s=0,o=0;for(var R=0;R<controller.programs.pd.length;R++)if(c=controller.programs.pd[R],i(c,S,C,_,k))for(d=0;d<T;d++)if(b=d>>3,y=d%8,!Station.isMaster(d))if(g){if(controller.stations.stn_dis[b]&1<<y)continue;if(c[4][d]&&0===D[d]){var H=0;(H=2&c[0]&&(controller.options.uwt>0&&_===k||0===controller.options.uwt)?getStationDuration(c[4][d],C)*controller.options.wl/100>>0:getStationDuration(c[4][d],C))>0&&(v?E.length<T&&E.push({st:-1,dur:H,sid:d,pid:R+1,gid:controller.stations.stn_grp?controller.stations.stn_grp[d]:-1,pl:1}):(D[d]=H,P[d]=R+1),o=1)}}else c[7+b]&1<<y&&(D[d]=c[6]*controller.options.wl/100>>0,P[d]=R+1,o=1);if(o){var F=60*S,j=F,B=new Array(NUM_SEQ_GROUPS);if(m){for(O>F&&(j=O+controller.options.sdt),u=0;u<NUM_SEQ_GROUPS;u++)B[u]=F,N[u]>F&&(B[u]=N[u]+controller.options.sdt);if(v)for(h=0;h<E.length;h++)(p=E[h]).st>=0||0===p.dur||(x=(d=p.sid)>>3,w=7&d,-1===p.gid?controller.stations.stn_seq[x]&1<<w?(p.st=j,j+=p.dur,j+=controller.options.sdt):(p.st=F,F++):p.gid!==PARALLEL_GID_VALUE?(p.st=B[p.gid],B[p.gid]+=p.dur,B[p.gid]+=controller.options.sdt):(p.st=F,F++),s=1);else for(d=0;d<T;d++)x=d>>3,w=7&d,0===D[d]||A[d]>=0||(controller.stations.stn_seq[x]&1<<w?(A[d]=j,j+=D[d],D[d]=j,j+=controller.options.sdt,I[d]=1):(A[d]=F,D[d]=F+D[d],I[d]=1),s=1)}else if(g&&controller.options.seq&&M>F&&(F=M+controller.options.sdt),controller.options.seq)for(d=0;d<8*controller.settings.nbrd;d++)0!==D[d]&&0!==P[d]&&(A[d]=F,F+=D[d],D[d]=F,F+=controller.options.sdt,s=1);else for(d=0;d<8*controller.settings.nbrd;d++)0!==D[d]&&0!==P[d]&&(A[d]=F,D[d]=F+D[d],s=1)}if(v){for(h=0;h<E.length;h++)(f=L[d=(p=E[h]).sid])<255&&E[f].st<p.st||(L[d]=h);for(l(60*S,E,L,C),S++,d=0;d<8*controller.settings.nbrd;d++)if(255!==(f=L[d])&&(p=E[f]).st>=0&&60*S>=p.st+p.dur){var z=E.length;f<z-1&&(E[f]=E[z-1],L[E[f].sid]===z-1&&(L[E[f].sid]=f)),E.pop(),L[d]=255}for(O=0,u=0;u<NUM_SEQ_GROUPS;u++)O[u]=0;for(h=0;h<E.length;h++){x=(d=(p=E[h]).sid)>>3,w=7&d;var W=p.st+p.dur;-1===p.gid?controller.stations.stn_seq[x]&1<<w&&W>O&&(O=W):p.gid!==PARALLEL_GID_VALUE&&W>N[p.gid]&&(N[p.gid]=W)}}else if(s)if(m)for(O=r(60*S,A,P,D,I,C),S++,d=0;d<8*controller.settings.nbrd;d++)P[d]>0&&60*S>=D[d]&&(A[d]=-1,P[d]=0,D[d]=0,I[d]=0);else if(g)for(M=r(60*S,A,P,D,I,C),S++,d=0;d<8*controller.settings.nbrd;d++)A[d]=-1,P[d]=0,D[d]=0;else{var Y=r(60*S,A,P,D,I,C)/60>>0;for(controller.options.seq&&S!==Y?S=Y:S++,d=0;d<8*controller.settings.nbrd;d++)A[d]=-1,P[d]=0,D[d]=0}else if(S++,m)for(d=0;d<8*controller.settings.nbrd;d++)P[d]>0&&60*S>=D[d]&&(A[d]=-1,P[d]=0,D[d]=0,I[d]=0)}while(S<1440)},l=function(t,i,n,a){for(var s=0;s<8*controller.settings.nbrd;s++){var o=n[s];if(255!==o){var r=i[o];if(r.pl){var l=void 0!==controller.options.mas2,d=controller.stations.masop[s>>3]&1<<s%8,h=!!l&&controller.stations.masop2[s>>3]&1<<s%8;Station.isMaster(s)||(controller.options.mas>0&&d&&e.push({start:r.st+controller.options.mton,end:r.st+r.dur+controller.options.mtof,content:"",className:"master",shortname:"M"+(l?"1":""),group:"Master",station:s}),l&&controller.options.mas2>0&&h&&e.push({start:r.st+controller.options.mton2,end:r.st+r.dur+controller.options.mtof2,content:"",className:"master",shortname:"M2",group:"Master 2",station:s})),c(s,r.st,r.pid,r.st+r.dur,a),r.pl=0}}}},r=function(t,i,n,a,s,o){for(var r=t,l=0;l<8*controller.settings.nbrd;l++)if(n[l])if(m){if(s[l]){var d=void 0!==controller.options.mas2,h=controller.stations.masop[l>>3]&1<<l%8,u=!!d&&controller.stations.masop2[l>>3]&1<<l%8;Station.isMaster(l)||(controller.options.mas>0&&h&&e.push({start:i[l]+controller.options.mton,end:a[l]+controller.options.mtof,content:"",className:"master",shortname:"M"+(d?"1":""),group:"Master",station:l}),d&&controller.options.mas2>0&&u&&e.push({start:i[l]+controller.options.mton2,end:a[l]+controller.options.mtof2,content:"",className:"master",shortname:"M2",group:"Master 2",station:l})),c(l,i[l],n[l],a[l],o),s[l]=0,controller.stations.stn_seq[l>>3]&1<<(7&l)&&(r=r>a[l]?r:a[l])}}else 1===controller.options.seq?(Station.isMaster(l)&&controller.stations.masop[l>>3]&1<<l%8&&e.push({start:i[l]+controller.options.mton,end:a[l]+controller.options.mtof,content:"",className:"master",shortname:"M",group:"Master",station:l}),c(l,i[l],n[l],a[l],o),r=a[l]):(c(l,t,n[l],a[l],o),Station.isMaster(l)&&controller.stations.masop[l>>3]&1<<l%8&&(r=r>a[l]?r:a[l]));return m||0===controller.options.seq&&controller.options.mas>0&&e.push({start:t,end:r,content:"",className:"master",shortname:"M",group:"Master",station:l}),r},c=function(t,i,n,a,s){var o="program-"+(n+3)%4,r="P"+n;(0!==controller.settings.rd&&s+i+900*(controller.options.tz-48)<=1e3*controller.settings.rdst||1===controller.options.urs&&1===controller.settings.rs)&&"object"==typeof controller.stations.ignore_rain&&0==(controller.stations.ignore_rain[t/8>>0]&1<<t%8)&&(o="delayed"),checkOSVersion(210)&&(r=controller.programs.pd[n-1][5]),e.push({start:i,end:a,className:o,content:r,pid:n-1,shortname:"S"+(t+1),group:controller.stations.snames[t],station:t})},i=function(e,t,i,s,r){return v?o(e,t,i,s,r):g?a(e,t,i,s,r):n(e,t,i,s,r)},n=function(e,t,i,n,a){if(0===e[0])return 0;if(128&e[1]&&e[2]>1){var s=e[2];if(n%s!=(a+(127&e[1]))%s)return 0}else{var o=new Date(i),r=(o.getUTCDay()+6)%7;if(0==(e[1]&1<<r))return 0;var l=o.getUTCDate();if(128&e[1]&&0===e[2]&&l%2!=0)return 0;if(128&e[1]&&1===e[2]&&(31===l||29===l&&1===o.getUTCMonth()||l%2!=1))return 0}return t<e[3]||t>e[4]||isOSPi()&&t>=e[4]||0===e[5]?0:((t-e[3])/e[5]>>0)*e[5]==t-e[3]?1:0},s=function(e,t,i,n){var a=e[0]>>2&3,s=e[0]>>4&3,o=new Date(t),r=o.getUTCDate(),l=o.getUTCMonth()+1,c=e[6];if("object"==typeof c&&c[0]){var d=(l<<5)+r;if(c[1]<=c[2]){if(d<c[1]||d>c[2])return 0}else if(d>c[2]&&d<c[1])return 0}if(3===s){var h=e[2];if(i%h!=(n+e[1])%h)return 0}else{if(0!==s)return 0;var u=(o.getUTCDay()+6)%7;if(0==(e[1]&1<<u))return 0}if(2===a){if(r%2!=0)return 0}else if(1===a&&(31===r||29===r&&1===o.getUTCMonth()||r%2!=1))return 0;return 1},a=function(e,t,i,n,a){var o=1&e[0],r=e[0]>>6&1,l=new Date(i);if(0===o)return 0;if(!s(e,i,n,a))return 0;if(0===r){var c=getStartTime(e[3][0],l),d=e[3][1],h=e[3][2];if(t<c)return 0;if(0===d)return t===c?1:0;if(0===h)return 0;var u=Math.round((t-c)/h);if(u*h==t-c&&u<=d)return 1}else for(var p=e[3],f=0;f<4;f++)if(t===getStartTime(p[f],l))return 1;return 0},o=function(e,t,i,n,a){var o=1&e[0],r=e[0]>>6&1,l=new Date(i);if(0===o)return 0;var c,d=getStartTime(e[3][0],l),h=e[3][1],u=e[3][2];if(s(e,i,n,a)){if(0!==r){for(var p=e[3],f=0;f<4;f++)if(t===getStartTime(p[f],l))return 1;return 0}if(t===d)return 1;if(t>d&&u&&(c=Math.round((t-d)/u))*u==t-d&&c<=h)return 1}return r||!u?0:s(e,i-864e5,n-1,a)&&(c=Math.round((t-d+1440)/u))*u==t-d+1440&&c<=h?1:0},d=function(e){p.setDate(p.getDate()+e);var t=pad(p.getMonth()+1),i=pad(p.getDate()),n=p.getFullYear();u=[n,t,i],b.find("#preview_date").val(u.join("-")),h()},h=function(){if(t(u[1],u[2],u[0]),y.hide(),e.length){e.sort(sortByStation);var i=[],n=new Date(u[0],u[1]-1,u[2],24);$.each(e,(function(){var e=this.start+this.end;if(this.start=new Date(u[0],u[1]-1,u[2],0,0,this.start),e>86400){var t=Math.floor(this.end/86400);this.end=new Date(u[0],u[1]-1,parseInt(u[2])+t,0,0,this.end%86400),n=n>this.end?n:this.end}else this.end=new Date(u[0],u[1]-1,u[2],0,0,this.end);i[this.group]=this.shortname}));var a={width:"100%",editable:!1,axisOnTop:!0,eventMargin:10,eventMarginAxis:0,min:new Date(u[0],u[1]-1,u[2],0),max:n,selectable:!0,showMajorLabels:!1,zoomMax:864e5,zoomMin:36e5,groupsChangeable:!1,showNavigation:!1,groupsOrder:"none",groupMinHeight:20},s=function(){o.redraw()},o=new links.Timeline(x[0],a),r=new Date(f);r.setMinutes(r.getMinutes()+r.getTimezoneOffset()),o.setCurrentTime(r),links.events.addListener(o,"select",(function(){var e=o.getSelection();e.length&&void 0!==e[0].row&&changePage("#programs",{programToExpand:parseInt(o.getItem(e[0].row).pid)})})),$.mobile.window.on("resize",s),b.one("pagehide",(function(){$.mobile.window.off("resize",s)})),o.draw(e),b.find(".timeline-groups-text").each((function(){var e=$(this),t=i[e.text()];e.attr("data-shortname",t)})),b.find(".timeline-groups-axis").children().first().html("<div class='timeline-axis-text center dayofweek' data-shortname='"+getDayName(p,"short")+"'>"+getDayName(p)+"</div>"),isAndroid?(y.find(".ui-icon-plus").off("click").on("click",(function(){return o.zoom(.4),!1})),y.find(".ui-icon-minus").off("click").on("click",(function(){return o.zoom(-.4),!1})),y.find(".ui-icon-carat-l").off("click").on("click",(function(){return o.move(-.2),!1})),y.find(".ui-icon-carat-r").off("click").on("click",(function(){return o.move(.2),!1})),y.show()):y.hide(),x.on("swiperight swipeleft",(function(e){e.stopImmediatePropagation()}))}else b.find("#timeline").html("<p align='center'>"+_("No stations set to run on this day.")+"</p>")},function(){g=checkOSVersion(210),m=checkOSVersion(211),v=checkOSVersion(216),""===b.find("#preview_date").val()&&(f=new Date(1e3*controller.settings.devt),u=f.toISOString().slice(0,10).split("-"),p=new Date(u[0],u[1]-1,u[2]),b.find("#preview_date").val(u.join("-"))),changeHeader({title:_("Program Preview"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack}}),$("#preview").remove(),$.mobile.pageContainer.append(b)}}();function getStationDuration(e,t){if(checkOSVersion(214)){var i=getSunTimes(t);65535===e?e=60*(i[0]+1440-i[1]):65534===e&&(e=60*(i[1]-i[0]))}return e}var getLogs=function(){var e,t,i,n=$("<div data-role='page' id='logs'><div class='ui-content' role='main'><fieldset data-role='controlgroup' data-type='horizontal' data-mini='true' class='log_type'><input data-mini='true' type='radio' name='log_type' id='log_timeline' value='timeline'><label for='log_timeline'>"+_("Timeline")+"</label><input data-mini='true' type='radio' name='log_type' id='log_table' value='table'><label for='log_table'>"+_("Table")+"</label></fieldset><fieldset data-role='collapsible' data-mini='true' id='log_options' class='center'><legend>"+_("Options")+"</legend><fieldset data-role='controlgroup' data-type='horizontal' id='table_sort'><p class='tight'>"+_("Grouping:")+"</p><input data-mini='true' type='radio' name='table-group' id='table-sort-day' value='day' checked='checked'><label for='table-sort-day'>"+_("Day")+"</label><input data-mini='true' type='radio' name='table-group' id='table-sort-station' value='station'><label for='table-sort-station'>"+_("Station")+"</label></fieldset><div class='ui-field-contain'><label for='log_start'>"+_("Start:")+"</label><input data-mini='true' type='date' id='log_start'><label for='log_end'>"+_("End:")+"</label><input data-mini='true' type='date' id='log_end'></div><a data-role='button' data-icon='action' class='export_logs' href='#' data-mini='true'>"+_("Export")+"</a><a data-role='button' class='red clear_logs' href='#' data-mini='true' data-icon='alert'>"+_("Clear Logs")+"</a></fieldset><div id='logs_list' class='center'></div></div></div>"),a=n.find("#logs_list"),s=n.find("#table_sort"),o=n.find("#log_options"),r=[],l=[],c=[],d=function(t,n){var a=[],s={totalRuntime:0,totalCount:0};if("table"===t&&"station"===n)for(i=0;i<e.length;i++)a[i]=[];return $.each(r,(function(){var i=this[1],o=parseInt(this[2]);o<0&&(o+=65536);var r=new Date(parseInt(1e3*this[3])-1e3*o),l=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds());if("string"==typeof i)if("rd"===i)i=e.length-1;else if("s1"===i)i=e.length-3;else if("s2"===i)i=e.length-2;else{if("rs"!==i)return;i=e.length-2}else if("number"==typeof i){if(i>e.length-2||Station.isMaster(i))return;s.totalRuntime+=o,s.totalCount++}if("table"===t)switch(n){case"station":a[i].push([l,dhms2str(sec2dhms(o))]);break;case"day":var c=Math.floor(r.getTime()/1e3/60/60/24),d=[l,dhms2str(sec2dhms(o)),i];"object"!=typeof a[c]?a[c]=[d]:a[c].push(d)}else if("timeline"===t){var h,u,p,f,g=parseInt(this[0]);if("rs"===this[1])h="delayed",p=u=_("Rain Sensor"),f=_("RS");else if("rd"===this[1])h="delayed",p=u=_("Rain Delay"),f=_("RD");else if("s1"===this[1])h="delayed",p=u=3===controller.options.sn1t?_("Soil Sensor"):_("Rain Sensor"),f=_("SEN1");else if("s2"===this[1])h="delayed",p=u=3===controller.options.sn2t?_("Soil Sensor"):_("Rain Sensor"),f=_("SEN2");else{if(0===g)return;h="program-"+(g+3)%4,u=pidname(g),p=controller.stations.snames[i],f="S"+(i+1)}a.push({start:l,end:new Date(l.getTime()+1e3*o),className:h,content:u,pid:g-1,shortname:f,group:p,station:i})}})),"timeline"===t&&a.sort(sortByStation),[a,s]},h=function(e,t){var i=[],n=[];return l.length&&(e.avgWaterLevel=0,$.each(l,(function(){i[Math.floor(this[3]/60/60/24)]=this[2],e.avgWaterLevel+=this[2]})),e.avgWaterLevel=parseFloat((e.avgWaterLevel/l.length).toFixed(2))),c.length&&(e.totalVolume=0,$.each(c,(function(){var i=flowCountToVolume(this[0]);if("timeline"===t){var a=new Date(parseInt(1e3*this[3])),s=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds());n.push({start:new Date(s.getTime()-parseInt(1e3*this[2])),end:s,className:"",content:i+" L",shortname:_("FS"),group:_("Flow Sensor")})}else{var o=Math.floor(this[3]/60/60/24);n[o]=n[o]?n[o]+i:i}e.totalVolume+=i}))),[i,n,e]},u=function(e,t,i){if("object"!=typeof e||e.length<1||e.result&&32===e.result)return $.mobile.loading("hide"),void v();try{c=JSON.parse(c.replace(/,\s*inf/g,""))}catch(e){c=[]}r=e,l=$.isEmptyObject(t)?[]:t,c=$.isEmptyObject(i)?[]:i,p(),exportObj(".export_logs",r),$.mobile.loading("hide")},p=function(){n.find("#log_table").prop("checked")?g():n.find("#log_timeline").prop("checked")&&f()},f=function(){if(r.length<1)v();else{s.hide(),a.show(),o.collapsible("collapse");var e=d("timeline"),t=h(e[1],"timeline"),i=e[0].concat(t[1]),l=t[2],c={width:"100%",editable:!1,axisOnTop:!0,eventMargin:10,eventMarginAxis:0,min:x().start,max:new Date(x().end.getTime()+8634e4),selectable:!1,showMajorLabels:!1,groupsChangeable:!1,showNavigation:!1,groupsOrder:"none",groupMinHeight:20,zoomMin:6e4},u=function(){g.redraw()},p=function(){$.mobile.window.off("resize",u)},f=[];a.on("swiperight swipeleft",(function(e){e.stopImmediatePropagation()})),$.each(i,(function(){f[this.group]=this.shortname}));var g=new links.Timeline(a.get(0),c);$.mobile.window.on("resize",u),n.one("pagehide",p),n.find("input:radio[name='log_type']").one("change",p),g.draw(i),a.find(".timeline-groups-text").each((function(){this.setAttribute("data-shortname",f[this.textContent])})),a.prepend(m(l))}},g=function(){if(r.length<1)v();else{s.show(),a.show();var t,i,l,c=n.find("input:radio[name='table-group']:checked").val(),u=d("table",c),p=u[0],f=h(u[1]),g=[],b=f[0],x=f[1],y=f[2],k="<table><thead><tr><th data-priority='1'>"+_("Runtime")+"</th><th data-priority='2'>"+("station"===c?_("Date/Time"):_("Time")+"</th><th>"+_("Station"))+"</th></tr></thead><tbody>",S=m(y)+"<div data-role='collapsible-set' data-inset='true' data-theme='b' data-collapsed-icon='arrow-d' data-expanded-icon='arrow-u'>",C=0;for(t in p)if(p.hasOwnProperty(t)){if(0===(i=p[t].length))continue;for(g[C]="<div data-role='collapsible' data-collapsed='true'><h2>"+(checkOSVersion(210)&&"day"===c?"<a class='ui-btn red ui-btn-corner-all delete-day day-"+t+"'>"+_("delete")+"</a>":"")+"<div class='ui-btn-up-c ui-btn-corner-all custom-count-pos'>"+i+" "+_(1===i?"run":"runs")+"</div>"+("station"===c?e[t]:dateToString(new Date(1e3*t*60*60*24)).slice(0,-9))+"</h2>",b[t]&&(g[C]+="<span style='border:none' class='"+(100!==b[t]?b[t]<100?"green ":"red ":"")+"ui-body ui-body-a'>"+_("Average")+" "+_("Water Level")+": "+b[t]+"%</span>"),x[t]&&(g[C]+="<span style='border:none' class='ui-body ui-body-a'>"+_("Total Water Used")+": "+x[t]+" L</span>"),g[C]+=k,l=0;l<p[t].length;l++){var T=new Date(p[t][l][0]);g[C]+="<tr><td>"+p[t][l][1]+"</td><td>"+("station"===c?dateToString(T,!1):pad(T.getHours())+":"+pad(T.getMinutes())+":"+pad(T.getSeconds())+"</td><td>"+e[p[t][l][2]])+"</td></tr>"}g[C]+="</tbody></table></div>",C++}"day"===c&&g.reverse(),o.collapsible("collapse"),a.html(S+g.join("")+"</div>").enhanceWithin(),a.find(".delete-day").on("click",(function(){var e,t;return $.each(this.className.split(" "),(function(){if(0===this.indexOf("day-"))return e=this.split("day-")[1],!1})),t=dateToString(new Date(1e3*e*60*60*24)).slice(0,-9),areYouSure(_("Are you sure you want to ")+_("delete")+" "+t+"?","",(function(){$.mobile.loading("show"),sendToOS("/dl?pw=&day="+e).done((function(){w(),showerror(t+" "+_("deleted"))}))})),!1})),fixInputClick(a)}},m=function(e){if(0===e.totalCount||0===e.totalRuntime)return"";var t=void 0!==e.avgWaterLevel;return"<div class='ui-body-a smaller' id='logs_summary'><div><span class='bold'>"+_("Total Station Events")+"</span>: "+e.totalCount+"</div><div><span class='bold'>"+_("Total Runtime")+"</span>: "+dhms2str(sec2dhms(e.totalRuntime))+"</div>"+(t?"<div><span class='bold'>"+_("Average")+" "+_("Water Level")+"</span>: <span class='"+(100!==e.avgWaterLevel?e.avgWaterLevel<100?"green-text":"red-text":"")+"'>"+e.avgWaterLevel+"%</span></div>":"")+(void 0!==e.totalVolume&&e.totalVolume>0?"<div><span class='bold'>"+_("Total Water Used")+"</span>: "+e.totalVolume+" L"+(t&&e.avgWaterLevel<100?" (<span class='green-text'>"+(e.totalVolume-e.totalVolume*(e.avgWaterLevel/100)).toFixed(2)+"L saved</span>)":"")+"</div>":"")+"</div>"},v=function(){r=[],o.collapsible("expand"),s.hide(),a.show().html(_("No entries found in the selected date range"))},b=function(){$.mobile.loading("hide"),s.empty().hide(),a.show().html(_("Error retrieving log data. Please refresh to try again."))},x=function(){var e=S.val().split("-"),t=C.val().split("-");return{start:new Date(e[0],e[1]-1,e[2]),end:new Date(t[0],t[1]-1,t[2])}},y=function(){return"start="+x().start.getTime()/1e3+"&end="+(x().end.getTime()/1e3+86340)},w=function(){var e=x().end.getTime()/1e3,t=x().start.getTime()/1e3;if(e<t)return v(),void showerror(_("Start time cannot be greater than end time"));var i=0;if($.mobile.loading("show"),e-t>3154e4){showerror(_("The requested time span exceeds the maxiumum of 1 year and has been adjusted"),3500);var n=x().start;n.setFullYear(n.getFullYear()+1),$("#log_end").val(n.getFullYear()+"-"+pad(n.getMonth()+1)+"-"+pad(n.getDate())),i=500}var a=$.Deferred().resolve(),s=$.Deferred().resolve();checkOSVersion(211)&&(a=sendToOS("/jl?pw=&type=wl&"+y(),"json")),checkOSVersion(216)&&(s=sendToOS("/jl?pw=&type=fl&"+y())),setTimeout((function(){$.when(sendToOS("/jl?pw=&"+y(),"json"),a,s).then(u,b)}),i)},k=window.innerWidth<640,S=n.find("#log_start"),C=n.find("#log_end");return n.find(".clear_logs").on("click",(function(){return clearLogs(w),!1})),isiOS?S.add(C).on("blur",(function(){n.hasClass("ui-page-active")&&w()})):S.add(C).change((function(){clearTimeout(t),t=setTimeout(w,1e3)})),s.find("input[name='table-group']").change((function(){g()})),n.find("input:radio[name='log_type']").change(p),n.on({pagehide:function(){n.detach()},pageshow:w}),n.find("#log_timeline").prop("checked",!k),n.find("#log_table").prop("checked",k),function(){var t=checkOSVersion(219)?[3===controller.options.sn1t?_("Soil Sensor"):_("Rain Sensor"),3===controller.options.sn2t?_("Soil Sensor"):_("Rain Sensor"),_("Rain Delay")]:[_("Rain Sensor"),_("Rain Delay")];if(e=$.merge($.merge([],controller.stations.snames),t),n.find(".clear_logs").toggleClass("hidden",!isOSPi()&&!checkOSVersion(210)),""===S.val()||""===C.val()){var i=new Date(1e3*controller.settings.devt);S.val(new Date(i.getTime()-6048e5).toISOString().slice(0,10)),C.val(i.toISOString().slice(0,10))}changeHeader({title:_("Logs"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack},rightBtn:{icon:"refresh",text:_("Refresh"),on:w}}),$("#logs").remove(),$.mobile.pageContainer.append(n)}}();function clearLogs(e){areYouSure(_("Are you sure you want to clear ALL your log data?"),"",(function(){var t=isOSPi()?"/cl?pw=":"/dl?pw=&day=all";$.mobile.loading("show"),sendToOS(t).done((function(){"function"==typeof e&&e(),showerror(_("Logs have been cleared"))}))}))}function clearPrograms(e){areYouSure(_("Are you sure you want to delete ALL programs?"),"",(function(){$.mobile.loading("show"),sendToOS("/dp?pw=&pid=-1").done((function(){"function"==typeof e&&e(),showerror(_("Programs have been deleted"))}))}))}function resetAllOptions(e){areYouSure(_("Are you sure you want to delete all settings and return to the default settings?"),"",(function(){var t;isOSPi()?t="otz=32&ontp=1&onbrd=0&osdt=0&omas=0&omton=0&omtoff=0&orst=1&owl=100&orlp=0&ouwt=0&olg=1&oloc=Boston,MA":(t="o2=1&o3=1&o12=80&o13=0&o15=0&o17=0&o18=0&o19=0&o20=0&o22=1&o23=100&o26=0&o27=110&o28=100&o29=15&o30=320&o31=0&o36=1&o37=0&o38=0&o39=0&o41=100&o42=0&o43=0&o44=8&o45=8&o46=8&o47=8&o48=0&o49=0&o50=0&o51=1&o52=0&o53=1&o54=0&o55=0&o56=0&o57=0&",checkOSVersion(2199)?t+="o32=0&o33=0&o34=0&o35=0&":t+="o32=216&o33=239&o34=35&o35=12&",t=transformKeysinString(t+="loc=Boston,MA&wto=%22key%22%3A%22%22")),sendToOS("/co?pw=&"+t).done((function(){"function"==typeof e&&e(),updateController(updateWeather)}))}))}var getPrograms=function(){var e,t=$("<div data-role='page' id='programs'><div class='ui-content' role='main' id='programs_list'></div></div>");function i(){var e=$(makeAllPrograms());e.find("[id^=program-]").on({collapsiblecollapse:function(){$(this).find(".ui-collapsible-content").empty()},collapsiblebeforecollapse:function(e){var t=$(this),i=t.find(".hasChanges");i.length&&(areYouSure(_("Do you want to save your changes?"),"",(function(){i.removeClass("hasChanges").click(),t.collapsible("collapse")}),(function(){i.removeClass("hasChanges"),t.collapsible("collapse")})),e.preventDefault())},collapsibleexpand:function(){expandProgram($(this))}}),checkOSVersion(210)&&e.find(".move-up").removeClass("hidden").on("click",(function(){var e=$(this).parents("fieldset"),i=parseInt(e.attr("id").split("-")[1]);return $.mobile.loading("show"),sendToOS("/up?pw=&pid="+i).done((function(){updateControllerPrograms((function(){$.mobile.loading("hide"),t.trigger("programrefresh")}))})),!1})),e.find(".program-copy").on("click",(function(){return changePage("#addprogram",{copyID:parseInt($(this).parents("fieldset").attr("id").split("-")[1])}),!1})),t.find("#programs_list").html(e.enhanceWithin())}return t.on("programrefresh",i).on("pagehide",(function(){t.detach()})).on("pagebeforeshow",(function(){updateProgramHeader(),"number"!=typeof e&&1===controller.programs.pd.length&&(e=0),"number"==typeof e&&(t.find("fieldset[data-collapsed='false']").collapsible("collapse"),$("#program-"+e).collapsible("expand"))})),function(n){e=n,changeHeader({title:_("Programs"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:checkChangesBeforeBack},rightBtn:{icon:"plus",text:_("Add"),on:function(){checkChanges((function(){changePage("#addprogram")}))}}}),i(),$("#programs").remove(),$.mobile.pageContainer.append(t)}}();function expandProgram(e){var t=parseInt(e.attr("id").split("-")[1]);e.find(".ui-collapsible-content").html(makeProgram(t)).enhanceWithin().on("change input click",(function(t){"click"===t.type&&"BUTTON"!==t.target.tagName||($(this).off("change input click"),e.find("[id^='submit-']").addClass("hasChanges"))})),e.find("[id^='submit-']").on("click",(function(){return submitProgram(t),!1})),e.find("[id^='delete-']").on("click",(function(){return deleteProgram(t),!1})),e.find("[id^='run-']").on("click",(function(){return areYouSure(_("Are you sure you want to start "+(checkOSVersion(210)?controller.programs.pd[t][5]:"Program "+t)+" now?"),"",(function(){var e=[],i=function(){e.push(0),submitRunonce(e)};if(checkOSVersion(210)){if(e=controller.programs.pd[t][4],controller.programs.pd[t][0]>>1&1)return areYouSure(_("Do you wish to apply the current watering level?"),"",(function(){for(var t=e.length-1;t>=0;t--)e[t]=parseInt(e[t]*(controller.options.wl/100));i()}),i),!1}else{var n=parseInt($("#duration-"+t).val()),a=$("[id^='station_'][id$='-"+t+"']");$.each(a,(function(){$(this).is(":checked")?e.push(n):e.push(0)}))}i()})),!1}))}function readProgram(e){return checkOSVersion(210)?readProgram21(e):readProgram183(e)}function readProgram183(e){var t=e[1],i=e[2],n=!1,a=!1,s=!1,o="",r="",l={};l.en=e[0];for(var c=0;c<controller.programs.nboards;c++)for(var d=e[7+c],h=0;h<8;h++)r+=d&1<<h?"1":"0";if(l.stations=r,l.duration=e[6],l.start=e[3],l.end=e[4],l.interval=e[5],128&t&&i>1)o=[i,127&t],s=!0;else{for(var u=0;u<7;u++)o+=t&1<<u?"1":"0";128&t&&0===i&&(n=!0),128&t&&1===i&&(a=!0)}return l.days=o,l.is_even=n,l.is_odd=a,l.is_interval=s,l}function readProgram21(e){var t=e[1],i=e[2],n=e[0]>>2&3,a=e[0]>>4&3,s=e[0]>>6&1,o="",r={repeat:0,interval:0};if(r.en=e[0]>>0&1,r.weather=e[0]>>1&1,r.is_even=2===n,r.is_odd=1===n,r.is_interval=3===a,r.stations=e[4],r.name=e[5],0===s?(r.start=e[3][0],r.repeat=e[3][1],r.interval=e[3][2]):1===s&&(r.start=e[3]),3===a)o=[i,t];else if(0===a)for(var l=0;l<7;l++)o+=t&1<<l?"1":"0";return r.days=o,r}function getStartTime(e,t){var i=2047&e,n=0,a=getSunTimes(t);if(e<0)return e;if(e>>13&1)n=1;else if(1&!(e>>14))return e;return e>>12&1&&(i=-i),e=a[n],(e+=i)<0?e=0:e>1440&&(e=1440),e}function readStartTime(e){var t=2047&e,i=_("Sunrise");if(e>>13&1)i=_("Sunset");else if(1&!(e>>14))return minutesToTime(e);return e>>12&1&&(t=-t),i+(0!==t?(t>0?"+":"")+dhms2str(sec2dhms(60*t)):"")}function pidname(e){var t=_("Program")+" "+e;return 255===e||99===e?t=_("Manual program"):254===e||98===e?t=_("Run-once program"):checkOSVersion(210)&&e<=controller.programs.pd.length&&(t=controller.programs.pd[e-1][5]),t}function updateProgramHeader(){$("#programs_list").find("[id^=program-]").each((function(e,t){var i=$(t).find(".ui-collapsible-heading-toggle");(checkOSVersion(210)?1&controller.programs.pd[e][0]:controller.programs.pd[e][0])?i.removeClass("red"):i.addClass("red")}))}function makeAllPrograms(){if(0===controller.programs.pd.length)return"<p class='center'>"+_("You have no programs currently added. Tap the Add button on the top right corner to get started.")+"</p>";for(var e,t="<p class='center'>"+_("Click any program below to expand/edit. Be sure to save changes.")+"</p><div data-role='collapsible-set'>",i=0;i<controller.programs.pd.length;i++)e=_("Program")+" "+(i+1),checkOSVersion(210)&&(e=controller.programs.pd[i][5]),t+="<fieldset id='program-"+i+"' data-role='collapsible'><h3><a "+(i>0?"":"style='visibility:hidden' ")+"class='hidden ui-btn ui-btn-icon-notext ui-icon-arrow-u ui-btn-corner-all move-up'></a><a class='ui-btn ui-btn-corner-all program-copy'>"+_("copy")+"</a><span class='program-name'>"+e+"</span></h3>",t+="</fieldset>";return t+"</div>"}function makeProgram(e,t){return checkOSVersion(210)?makeProgram21(e,t):makeProgram183(e,t)}function makeProgram183(e,t){var i,n,a,s,o,r,l=[_("Monday"),_("Tuesday"),_("Wednesday"),_("Thursday"),_("Friday"),_("Saturday"),_("Sunday")],c="",d=t?"new":e;if("string"==typeof(o="new"===e?{en:0,weather:0,is_interval:0,is_even:0,is_odd:0,duration:0,interval:0,start:0,end:0,days:[0,0]}:readProgram(controller.programs.pd[e])).days)for(n=(i=o.days.split("")).length;n--;)i[n]=0|i[n];else i=[0,0,0,0,0,0,0];if(void 0!==o.stations)for(n=(s=o.stations.split("")).length-1;n>=0;n--)s[n]=0|s[n];for(c+="<label for='en-"+d+"'><input data-mini='true' type='checkbox' "+(o.en||"new"===e?"checked='checked'":"")+" name='en-"+d+"' id='en-"+d+"'>"+_("Enabled")+"</label>",c+="<fieldset data-role='controlgroup' data-type='horizontal' class='center'>",c+="<input data-mini='true' type='radio' name='rad_days-"+d+"' id='days_week-"+d+"' value='days_week-"+d+"' "+(o.is_interval?"":"checked='checked'")+"><label for='days_week-"+d+"'>"+_("Weekly")+"</label>",c+="<input data-mini='true' type='radio' name='rad_days-"+d+"' id='days_n-"+d+"' value='days_n-"+d+"' "+(o.is_interval?"checked='checked'":"")+"><label for='days_n-"+d+"'>"+_("Interval")+"</label>",c+="</fieldset><div id='input_days_week-"+d+"' "+(o.is_interval?"style='display:none'":"")+">",c+="<div class='center'><p class='tight'>"+_("Restrictions")+"</p><select data-inline='true' data-iconpos='left' data-mini='true' id='days_rst-"+d+"'>",c+="<option value='none' "+(o.is_even||o.is_odd?"":"selected='selected'")+">"+_("None")+"</option>",c+="<option value='odd' "+(!o.is_even&&o.is_odd?"selected='selected'":"")+">"+_("Odd Days Only")+"</option>",c+="<option value='even' "+(!o.is_odd&&o.is_even?"selected='selected'":"")+">"+_("Even Days Only")+"</option>",c+="</select></div>",c+="<div class='center'><p class='tight'>"+_("Days of the Week")+"</p><select "+($.mobile.window.width()>560?"data-inline='true' ":"")+"data-iconpos='left' data-mini='true' multiple='multiple' data-native-menu='false' id='d-"+d+"'><option>"+_("Choose day(s)")+"</option>",a=0;a<l.length;a++)c+="<option "+(!o.is_interval&&i[a]?"selected='selected'":"")+" value='"+a+"'>"+l[a]+"</option>";for(c+="</select></div></div>",c+="<div "+(o.is_interval?"":"style='display:none'")+" id='input_days_n-"+d+"' class='ui-grid-a'>",c+="<div class='ui-block-a'><label class='center' for='every-"+d+"'>"+_("Interval (Days)")+"</label><input data-wrapper-class='pad_buttons' data-mini='true' type='number' name='every-"+d+"' pattern='[0-9]*' id='every-"+d+"' value='"+o.days[0]+"'></div>",c+="<div class='ui-block-b'><label class='center' for='starting-"+d+"'>"+_("Starting In")+"</label><input data-wrapper-class='pad_buttons' data-mini='true' type='number' name='starting-"+d+"' pattern='[0-9]*' id='starting-"+d+"' value='"+o.days[1]+"'></div>",c+="</div>",c+="<fieldset data-role='controlgroup'><legend>"+_("Stations:")+"</legend>",a=0;a<controller.stations.snames.length;a++)c+="<label for='station_"+a+"-"+d+"'><input "+(Station.isDisabled(a)?"data-wrapper-class='station-hidden hidden' ":"")+"data-mini='true' type='checkbox' "+(void 0!==s&&s[a]?"checked='checked'":"")+" name='station_"+a+"-"+d+"' id='station_"+a+"-"+d+"'>"+controller.stations.snames[a]+"</label>";return c+="</fieldset>",c+="<fieldset data-role='controlgroup' data-type='horizontal' class='center'>",c+="<button class='ui-btn ui-mini' name='s_checkall-"+d+"' id='s_checkall-"+d+"'>"+_("Check All")+"</button>",c+="<button class='ui-btn ui-mini' name='s_uncheckall-"+d+"' id='s_uncheckall-"+d+"'>"+_("Uncheck All")+"</button>",c+="</fieldset>",c+="<div class='ui-grid-a'>",c+="<div class='ui-block-a'><label class='center' for='start-"+d+"'>"+_("Start Time")+"</label><button class='timefield pad_buttons' data-mini='true' id='start-"+d+"' value='"+o.start+"'>"+minutesToTime(o.start)+"</button></div>",c+="<div class='ui-block-b'><label class='center' for='end-"+d+"'>"+_("End Time")+"</label><button class='timefield pad_buttons' data-mini='true' id='end-"+d+"' value='"+o.end+"'>"+minutesToTime(o.end)+"</button></div>",c+="</div>",c+="<div class='ui-grid-a'>",c+="<div class='ui-block-a'><label class='pad_buttons center' for='duration-"+d+"'>"+_("Station Duration")+"</label><button class='pad_buttons' data-mini='true' name='duration-"+d+"' id='duration-"+d+"' value='"+o.duration+"'>"+dhms2str(sec2dhms(o.duration))+"</button></div>",c+="<div class='ui-block-b'><label class='pad_buttons center' for='interval-"+d+"'>"+_("Program Interval")+"</label><button class='pad_buttons' data-mini='true' name='interval-"+d+"' id='interval-"+d+"' value='"+60*o.interval+"'>"+dhms2str(sec2dhms(60*o.interval))+"</button></div>",c+="</div>",!0===t||"new"===e?c+="<input data-mini='true' data-icon='check' type='submit' data-theme='b' name='submit-"+d+"' id='submit-"+d+"' value='"+_("Save New Program")+"'>":(c+="<button data-mini='true' data-icon='check' data-theme='b' name='submit-"+d+"' id='submit-"+d+"'>"+_("Save Changes to Program")+" "+(e+1)+"</button>",c+="<button data-mini='true' data-icon='arrow-r' name='run-"+d+"' id='run-"+d+"'>"+_("Run Program")+" "+(e+1)+"</button>",c+="<button data-mini='true' data-icon='delete' class='red bold' data-theme='b' name='delete-"+d+"' id='delete-"+d+"'>"+_("Delete Program")+" "+(e+1)+"</button>"),(r=$(c)).find("input[name^='rad_days']").on("change",(function(){var e,t=$(this).val().split("-")[0];e="n"===(t=t.split("_")[1])?"week":"n",$("#input_days_"+t+"-"+d).show(),$("#input_days_"+e+"-"+d).hide()})),r.find("[id^='duration-'],[id^='interval-']").on("click",(function(){var e=$(this),t=e.attr("id").match("interval")?1:0,i=r.find("label[for='"+e.attr("id")+"']").text();showDurationBox({seconds:e.val(),title:i,callback:function(t){e.val(t),e.text(dhms2str(sec2dhms(t)))},maximum:t?86340:65535,granularity:t})})),r.find(".timefield").on("click",(function(){var e=$(this),t=r.find("label[for='"+e.attr("id")+"']").text();showTimeInput({minutes:e.val(),title:t,callback:function(t){e.val(t),e.text(minutesToTime(t))}})})),r.find("[id^='s_checkall-']").on("click",(function(){return r.find("[id^='station_'][id$='-"+d+"']").prop("checked",!0).checkboxradio("refresh"),!1})),r.find("[id^='s_uncheckall-']").on("click",(function(){return r.find("[id^='station_'][id$='-"+d+"']").prop("checked",!1).checkboxradio("refresh"),!1})),fixInputClick(r),r}function makeProgram21(e,t){var i,n,a,s,o,r,l,c,d=[_("Monday"),_("Tuesday"),_("Wednesday"),_("Thursday"),_("Friday"),_("Saturday"),_("Sunday")],h="",u=t?"new":e;if("string"==typeof(s="new"===e?{name:"",en:0,weather:0,is_interval:0,is_even:0,is_odd:0,interval:0,start:0,days:[0,0],repeat:0,stations:[]}:readProgram(controller.programs.pd[e])).days)for(n=(i=s.days.split("")).length;n--;)i[n]=0|i[n];else i=[0,0,0,0,0,0,0];if(r="object"==typeof s.start?s.start:[s.start,-1,-1,-1],h+="<div style='margin-top:5px' class='ui-corner-all'>",h+="<div class='ui-bar ui-bar-a'><h3>"+_("Basic Settings")+"</h3></div>",h+="<div class='ui-body ui-body-a center'>",h+="<label for='name-"+u+"'>"+_("Program Name")+"</label><input data-mini='true' type='text' name='name-"+u+"' id='name-"+u+"' maxlength='"+controller.programs.pnsize+"' placeholder='"+_("Program")+" "+(controller.programs.pd.length+1)+"' value=\""+s.name+'">',h+="<label for='en-"+u+"'><input data-mini='true' type='checkbox' "+(s.en||"new"===e?"checked='checked'":"")+" name='en-"+u+"' id='en-"+u+"'>"+_("Enabled")+"</label>",h+="<label for='uwt-"+u+"'><input data-mini='true' type='checkbox' "+(s.weather?"checked='checked'":"")+" name='uwt-"+u+"' id='uwt-"+u+"'>"+_("Use Weather Adjustment")+"</label>",Supported.dateRange()){var p=Program.getDateRangeStart(u),f=Program.getDateRangeEnd(u);h+="<label for='use-dr-"+u+"'><input data-mini='true' type='checkbox' "+(Program.isDateRangeEnabled(u)?"checked='checked'":"")+" name='use-dr-"+u+"' id='use-dr-"+u+"'>"+_("Enable Date Range")+"</label>",h+="<div id='date-range-options-"+u+"'"+(Program.isDateRangeEnabled(u)?"":"style='display:none'")+">",h+="<div class='ui-grid-a' style=''><div class='ui-block-a drfrom'><label class='center' for='from-dr-"+u+"'>"+_("From (mm/dd)")+"</label><div class='dr-input'><input type='text' placeholder='MM/DD' id='from-dr-"+u+"' value="+decodeDate(p)+"></input></div></div><div class='ui-block-b drto'><label class='center' for='to-dr-"+u+"'>"+_("To (mm/dd)")+"</label><div class='dr-input'><input type='text' placeholder='MM/DD' id='to-dr-"+u+"' value="+decodeDate(f)+"></input></div></div></div></div>"}for(h+="<label class='center' for='start_1-"+u+"'>"+_("Start Time")+"</label><button class='timefield' data-mini='true' id='start_1-"+u+"' value='"+r[0]+"'>"+readStartTime(r[0])+"</button>",h+="</div></div></div></div>",h+="<div style='margin-top:10px' class='ui-corner-all'>",h+="<div class='ui-bar ui-bar-a'><h3>"+_("Program Type")+"</h3></div>",h+="<div class='ui-body ui-body-a'>",h+="<fieldset data-role='controlgroup' data-type='horizontal' class='center'>",h+="<input data-mini='true' type='radio' name='rad_days-"+u+"' id='days_week-"+u+"' value='days_week-"+u+"' "+(s.is_interval?"":"checked='checked'")+"><label for='days_week-"+u+"'>"+_("Weekly")+"</label>",h+="<input data-mini='true' type='radio' name='rad_days-"+u+"' id='days_n-"+u+"' value='days_n-"+u+"' "+(s.is_interval?"checked='checked'":"")+"><label for='days_n-"+u+"'>"+_("Interval")+"</label>",h+="</fieldset>",h+="<div id='input_days_week-"+u+"' "+(s.is_interval?"style='display:none'":"")+">",h+="<div class='center'><p class='tight'>"+_("Days of the Week")+"</p><select "+($.mobile.window.width()>560?"data-inline='true' ":"")+"data-iconpos='left' data-mini='true' multiple='multiple' data-native-menu='false' id='d-"+u+"'><option>"+_("Choose day(s)")+"</option>",a=0;a<d.length;a++)h+="<option "+(!s.is_interval&&i[a]?"selected='selected'":"")+" value='"+a+"'>"+d[a]+"</option>";h+="</select></div></div>",h+="<div "+(s.is_interval?"":"style='display:none'")+" id='input_days_n-"+u+"' class='ui-grid-a'>",h+="<div class='ui-block-a'><label class='center' for='every-"+u+"'>"+_("Interval (Days)")+"</label><input data-wrapper-class='pad_buttons' data-mini='true' type='number' name='every-"+u+"' pattern='[0-9]*' id='every-"+u+"' value='"+s.days[0]+"'></div>",h+="<div class='ui-block-b'><label class='center' for='starting-"+u+"'>"+_("Starting In")+"</label><input data-wrapper-class='pad_buttons' data-mini='true' type='number' name='starting-"+u+"' pattern='[0-9]*' id='starting-"+u+"' value='"+s.days[1]+"'></div>",h+="</div>",h+="<div class='center'><p class='tight'>"+_("Restrictions")+"</p><select data-inline='true' data-iconpos='left' data-mini='true' id='days_rst-"+u+"'>",h+="<option value='none' "+(s.is_even||s.is_odd?"":"selected='selected'")+">"+_("None")+"</option>",h+="<option value='odd' "+(!s.is_even&&s.is_odd?"selected='selected'":"")+">"+_("Odd Days Only")+"</option>",h+="<option value='even' "+(!s.is_odd&&s.is_even?"selected='selected'":"")+">"+_("Even Days Only")+"</option>",h+="</select></div>",h+="</div></div>",h+="<div style='margin-top:10px' class='ui-corner-all'>",h+="<div class='ui-bar ui-bar-a'><h3>"+_("Stations")+"</h3></div>",h+="<div class='ui-body ui-body-a'>";var g=$("#programs").hasClass("show-hidden")?"":"' style='display:none";for(a=0;a<controller.stations.snames.length;a++)Station.isMaster(a)?h+="<div class='ui-field-contain duration-input"+(Station.isDisabled(a)?" station-hidden"+g:"")+"'><label for='station_"+a+"-"+u+"'>"+controller.stations.snames[a]+":</label><button disabled='true' data-mini='true' name='station_"+a+"-"+u+"' id='station_"+a+"-"+u+"' value='0'>"+_("Master")+"</button></div>":(l=s.stations[a]||0,h+="<div class='ui-field-contain duration-input"+(Station.isDisabled(a)?" station-hidden"+g:"")+"'><label for='station_"+a+"-"+u+"'>"+controller.stations.snames[a]+":</label><button "+(l>0?"class='green' ":"")+"data-mini='true' name='station_"+a+"-"+u+"' id='station_"+a+"-"+u+"' value='"+l+"'>"+getDurationText(l)+"</button></div>");for(h+="</div></div>",h+="<div style='margin-top:10px' class='ui-corner-all'>",h+="<div class='ui-bar ui-bar-a'><h3>"+_("Additional Start Times")+"</h3></div>",h+="<div class='ui-body ui-body-a'>",h+="<fieldset data-role='controlgroup' data-type='horizontal' class='center'>",h+="<input data-mini='true' type='radio' name='stype-"+u+"' id='stype_repeat-"+u+"' value='stype_repeat-"+u+"' "+("object"==typeof s.start?"":"checked='checked'")+"><label for='stype_repeat-"+u+"'>"+_("Repeating")+"</label>",h+="<input data-mini='true' type='radio' name='stype-"+u+"' id='stype_set-"+u+"' value='stype_set-"+u+"' "+("object"==typeof s.start?"checked='checked'":"")+"><label for='stype_set-"+u+"'>"+_("Fixed")+"</label>",h+="</fieldset>",h+="<div "+("object"==typeof s.start?"style='display:none'":"")+" id='input_stype_repeat-"+u+"'>",h+="<div class='ui-grid-a'>",h+="<div class='ui-block-a'><label class='pad_buttons center' for='interval-"+u+"'>"+_("Repeat Every")+"</label><button class='pad_buttons' data-mini='true' name='interval-"+u+"' id='interval-"+u+"' value='"+60*s.interval+"'>"+dhms2str(sec2dhms(60*s.interval))+"</button></div>",h+="<div class='ui-block-b'><label class='pad_buttons center' for='repeat-"+u+"'>"+_("Repeat Count")+"</label><button class='pad_buttons' data-mini='true' name='repeat-"+u+"' id='repeat-"+u+"' value='"+s.repeat+"'>"+s.repeat+"</button></div>",h+="</div></div>",h+="<table style='width:100%;"+("object"==typeof s.start?"":"display:none")+"' id='input_stype_set-"+u+"'><tr><th class='center'>"+_("Enable")+"</th><th>"+_("Start Time")+"</th></tr>",a=1;a<4;a++)h+="<tr><td data-role='controlgroup' data-type='horizontal' class='use_master center'><label for='ust_"+(a+1)+"'><input id='ust_"+(a+1)+"' type='checkbox' "+((c=-1===r[a])?"":"checked='checked'")+"></label></td>",h+="<td><button class='timefield' data-mini='true' type='time' id='start_"+(a+1)+"-"+u+"' value='"+(c?0:r[a])+"'>"+readStartTime(c?0:r[a])+"</button></td></tr>";return h+="</table>",h+="</div></div>",!0===t||"new"===e?h+="<button data-mini='true' data-icon='check' data-theme='b' id='submit-"+u+"'>"+_("Save New Program")+"</button>":(h+="<button data-mini='true' data-icon='check' data-theme='b' id='submit-"+u+"'>"+_("Save Changes to")+" <span class='program-name'>"+s.name+"</span></button>",h+="<button data-mini='true' data-icon='arrow-r' id='run-"+u+"'>"+_("Run")+" <span class='program-name'>"+s.name+"</span></button>",h+="<button data-mini='true' data-icon='delete' class='bold red' data-theme='b' id='delete-"+u+"'>"+_("Delete")+" <span class='program-name'>"+s.name+"</span></button>"),(o=$(h)).find("input[name^='rad_days'],input[name^='stype']").on("change",(function(){var e=$(this).val().split("-")[0].split("_");$("[id^='input_"+e[0]+"_']").hide(),$("#input_"+e[0]+"_"+e[1]+"-"+u).show()})),Supported.dateRange()&&o.find("#use-dr-"+u).on("click",(function(){o.find("#date-range-options-"+u).toggle()})),o.find("[id^='interval-']").on("click",(function(){var e=$(this),t=o.find("label[for='"+e.attr("id")+"']").text();showDurationBox({seconds:e.val(),title:t,callback:function(t){e.val(t),e.text(dhms2str(sec2dhms(t)))},maximum:86340,granularity:1,preventCompression:!0})})),o.find(".timefield").on("click",(function(){var e=$(this);showTimeInput({minutes:e.val(),title:_("Start Time"),showSun:!!checkOSVersion(213),callback:function(t){e.val(t),e.text(readStartTime(t))}})})),o.find("[id^='repeat-']").on("click",(function(){var e=$(this),t=o.find("label[for='"+e.attr("id")+"']").text();showSingleDurationInput({data:e.val(),title:t,label:_("Repeat Count"),callback:function(t){e.val(t).text(t)},maximum:1440})})),o.find("[id^=station_]").on("click",(function(){var e=$(this),t=controller.stations.snames[e.attr("id").split("_")[1].split("-")[0]];showDurationBox({seconds:e.val(),title:t,callback:function(t){e.val(t).addClass("green"),e.text(getDurationText(t)),0===t&&e.removeClass("green")},maximum:65535,showSun:!!checkOSVersion(214)})})),fixInputClick(o),o}function addProgram(e){e=e>=0?e:"new";var t=$("<div data-role='page' id='addprogram'><div class='ui-content' role='main' id='newprogram'><fieldset id='program-new'></fieldset></div></div>"),i=changeHeader({title:_("Add Program"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:checkChangesBeforeBack},rightBtn:{icon:"check",text:_("Submit"),on:function(){return submitProgram("new"),!1}}});t.find("#program-new").html(makeProgram(e,!0)).one("change input",(function(){i.eq(2).prop("disabled",!1).addClass("hasChanges")})),t.find("[id^='submit-']").on("click",(function(){return submitProgram("new"),!1})),t.one("pagehide",(function(){t.remove()})),"string"==typeof e&&i.eq(2).prop("disabled",!0),$("#addprogram").remove(),$.mobile.pageContainer.append(t)}function deleteProgram(e){var t=pidname(parseInt(e)+1);areYouSure(_("Are you sure you want to delete program")+" "+t+"?","",(function(){$.mobile.loading("show"),sendToOS("/dp?pw=&pid="+e).done((function(){$.mobile.loading("hide"),updateControllerPrograms((function(){$("#programs").trigger("programrefresh"),showerror(_("Program")+" "+t+" "+_("deleted"))}))}))}))}function submitProgram(e){$("#program-"+e).find(".hasChanges").removeClass("hasChanges"),checkOSVersion(210)?submitProgram21(e):submitProgram183(e)}function submitProgram183(e){var t,i,n,a=[],s=[0,0],o=0,r=$("#en-"+e).is(":checked")?1:0;if(a[0]=r,$("#days_week-"+e).is(":checked")){for(t=null===(t=$("#d-"+e).val())?[]:parseIntArray(t),i=0;i<7;i++)-1!==$.inArray(i,t)&&(s[0]|=1<<i);if(0===s[0])return void showerror(_("Error: You have not selected any days of the week."));"odd"===$("#days_rst-"+e).val()?(s[0]|=128,s[1]=1):"even"===$("#days_rst-"+e).val()&&(s[0]|=128,s[1]=0)}else if($("#days_n-"+e).is(":checked")){if(s[1]=parseInt($("#every-"+e).val(),10),!(s[1]>=2&&s[1]<=128))return void showerror(_("Error: Interval days must be between 2 and 128."));if(s[0]=parseInt($("#starting-"+e).val(),10),!(s[0]>=0&&s[0]<s[1]))return void showerror(_("Error: Starting in days wrong."));s[0]|=128}if(a[1]=s[0],a[2]=s[1],a[3]=parseInt($("#start-"+e).val()),a[4]=parseInt($("#end-"+e).val()),a[3]>a[4])showerror(_("Error: Start time must be prior to end time."));else{a[5]=parseInt($("#interval-"+e).val()/60);var l=$("[id^=station_][id$=-"+e+"]").length/8;a[6]=parseInt($("#duration-"+e).val());var c,d=[0];for(c=0;c<l;c++)for(d[c]=0,n=0;n<8;n++)$("#station_"+(8*c+n)+"-"+e).is(":checked")&&(d[c]|=1<<n,o=1);a=JSON.stringify(a.concat(d)),0!==o?($.mobile.loading("show"),"new"===e?sendToOS("/cp?pw=&pid=-1&v="+a).done((function(){$.mobile.loading("hide"),updateControllerPrograms((function(){$.mobile.document.one("pageshow",(function(){showerror(_("Program added successfully"))})),goBack()}))})):sendToOS("/cp?pw=&pid="+e+"&v="+a).done((function(){$.mobile.loading("hide"),updateControllerPrograms((function(){updateProgramHeader()})),showerror(_("Program has been updated"))}))):showerror(_("Error: You have not selected any stations."))}}function submitProgram21(e,t){var i,n,a,s,o,r=[],l=[0,0],c=[0,0,0,0],d=0,h=$("#en-"+e).is(":checked")?1:0,u=$("#uwt-"+e).is(":checked")?1:0,p=0,f=checkOSVersion(2199)?1:2;if(p|=h<<0,p|=u<<1,"odd"===$("#days_rst-"+e).val()?p|=4:"even"===$("#days_rst-"+e).val()&&(p|=8),$("#days_n-"+e).is(":checked")){if(p|=48,l[1]=parseInt($("#every-"+e).val(),10),!(l[1]>=f&&l[1]<=128))return void showerror(_("Error: Interval days must be between "+f+" and 128."));if(l[0]=parseInt($("#starting-"+e).val(),10),!(l[0]>=0&&l[0]<l[1]))return void showerror(_("Error: Starting in days wrong."))}else if($("#days_week-"+e).is(":checked")){for(p|=0,i=null===(i=$("#d-"+e).val())?[]:parseIntArray(i),n=0;n<7;n++)-1!==$.inArray(n,i)&&(l[0]|=1<<n);if(0===l[0])return void showerror(_("Error: You have not selected any days of the week."))}if($("#stype_repeat-"+e).is(":checked"))p|=0,c[0]=parseInt($("#start_1-"+e).val()),c[1]=parseInt($("#repeat-"+e).val()),c[2]=parseInt($("#interval-"+e).val()/60);else if($("#stype_set-"+e).is(":checked")){p|=64,$("[id^='start_'][id$='-"+e+"']").each((function(e,t){var i=parseInt(t.value);("number"!=typeof i||e>0&&!$("#ust_"+(e+1)).is(":checked"))&&(i=-1),c[e]=i}))}var g=$("[id^=station_][id$=-"+e+"]"),m=[];if(g.each((function(){var e=parseInt(this.value);parseInt(e)>0&&(d=1),m.push(e)})),r[0]=p,r[1]=l[0],r[2]=l[1],r[3]=c,r[4]=m,a=$("#name-"+e).val(),o="",Supported.dateRange()){var v=$("#use-dr-"+e).is(":checked"),b=$("#from-dr-"+e).val(),x=$("#to-dr-"+e).val();if(!isValidDateRange(b,x))return void showerror(_("Error: date range is malformed"));o="&endr="+(v?1:0)+"&from="+encodeDate(b)+"&to="+encodeDate(x),r[0]|=v?128:0}if(s="&v="+JSON.stringify(r)+"&name="+encodeURIComponent(a),0!==d){if(!t&&$("#stype_repeat-"+e).is(":checked")&&c[1]>0){var y=calculateTotalRunningTime(m),w=60*c[2];if(y>w)return void areYouSure(_("Warning: The repeat interval ("+w+" sec) is less than the program run time ("+y+" sec)."),_("Do you want to continue?"),(function(){submitProgram21(e,!0)}))}t||3!=(p>>4&3)||1&l[1]||!((p>>2&3)>0)?($.mobile.loading("show"),"new"===e?sendToOS("/cp?pw=&pid=-1"+s+o).done((function(){$.mobile.loading("hide"),updateControllerPrograms((function(){$.mobile.document.one("pageshow",(function(){showerror(_("Program added successfully"))})),goBack()}))})):sendToOS("/cp?pw=&pid="+e+s+o).done((function(){$.mobile.loading("hide"),updateControllerPrograms((function(){updateProgramHeader(),$("#program-"+e).find(".program-name").text(a)})),showerror(_("Program has been updated"))}))):areYouSure(_("Warning: The use of odd/even restrictions with the selected interval day may result in the program not running at all."),_("Do you want to continue?"),(function(){submitProgram21(e,!0)}))}else showerror(_("Error: You have not selected any stations."))}function raindelay(e){return $.mobile.loading("show"),sendToOS("/cv?pw=&rd="+e/3600).done((function(){$.mobile.loading("hide"),showLoading("#footer-running"),refreshStatus(updateWeather),showerror(_("Rain delay has been successfully set"))})),!1}function getExportMethod(){var e=$("<div data-role='popup' data-theme='a'><div class='ui-bar ui-bar-a'>"+_("Select Export Method")+"</div><div data-role='controlgroup' class='tight'><a class='ui-btn hidden fileMethod'>"+_("File")+"</a><a class='ui-btn pasteMethod'>"+_("Email")+"</a><a class='ui-btn localMethod'>"+_("Internal (within app)")+"</a></div></div>"),t=encodeURIComponent(JSON.stringify(controller)),i="OpenSprinkler Data Export on "+dateToString(new Date);isFileCapable&&e.find(".fileMethod").removeClass("hidden").attr({href:"data:text/json;charset=utf-8,"+t,download:"backup-"+(new Date).toLocaleDateString().replace(/\//g,"-")+".json"}).on("click",(function(){e.popup("close")}));var n="mailto:?subject="+encodeURIComponent(i)+"&body="+t;e.find(".pasteMethod").attr("href",n).on("click",(function(){window.open(n,isOSXApp?"_system":void 0),e.popup("close")})),e.find(".localMethod").on("click",(function(){e.popup("close"),storage.set({backup:JSON.stringify(controller)},(function(){showerror(_("Backup saved on this device"))}))})),openPopup(e,{positionTo:$("#sprinklers-settings").find(".export_config")})}function getImportMethod(e){var t=function(){var e=$("<div data-role='popup' data-theme='a' id='paste_config'><p class='ui-bar'><textarea class='textarea' rows='10' placeholder='"+_("Paste your backup here")+"'></textarea><button data-mini='true' data-theme='b'>"+_("Import")+"</button></p></div>"),t=$.mobile.window.width();return e.find("button").on("click",(function(){var t=e.find("textarea").val();if(""!==t)try{t=JSON.parse($.trim(t).replace(/||/g,'"')),e.popup("close"),importConfig(t)}catch(t){e.find("textarea").val(""),showerror(_("Unable to read the configuration file. Please check the file and try again."))}})),e.css("width",t>600?.4*t+"px":"100%"),openPopup(e),!1},i=$("<div data-role='popup' data-theme='a'><div class='ui-bar ui-bar-a'>"+_("Select Import Method")+"</div><div data-role='controlgroup' class='tight'><button class='hidden fileMethod'>"+_("File")+"</button><button class='pasteMethod'>"+_("Email (copy/paste)")+"</button><button class='hidden localMethod'>"+_("Internal (within app)")+"</button></div></div>");if(isFileCapable)i.find(".fileMethod").removeClass("hidden").on("click",(function(){i.popup("close");var e=$("<input type='file' id='configInput' data-role='none' style='visibility:hidden;position:absolute;top:-50px;left:-50px'/>").on("change",(function(){var e=this.files[0],t=new FileReader;"object"==typeof e&&(t.onload=function(e){try{importConfig(JSON.parse($.trim(e.target.result)))}catch(e){showerror(_("Unable to read the configuration file. Please check the file and try again."))}},t.readAsText(e))}));return e.appendTo("#sprinklers-settings"),e.click(),!1}));else if(!e)return void t();i.find(".pasteMethod").on("click",(function(){return i.popup("close"),t(),!1})),e&&i.find(".localMethod").removeClass("hidden").on("click",(function(){return i.popup("close"),importConfig(JSON.parse(e)),!1})),openPopup(i,{positionTo:$("#sprinklers-settings").find(".import_config")})}function importConfig(e){var t="";"object"==typeof e&&e.settings?((checkOSVersion(210)&&"object"==typeof e.options&&(e.options.hp0!==controller.options.hp0||e.options.hp1!==controller.options.hp1)||e.options.dhcp!==controller.options.dhcp||e.options.devid!==controller.options.devid)&&(t=_("Warning: Network changes will be made and the device may no longer be accessible from this address.")),areYouSure(_("Are you sure you want to restore the configuration?"),t,(function(){$.mobile.loading("show");var t,i,n,a,s,o="/cs?pw=",r="/co?pw=",l=Math.ceil(e.stations.snames.length/16),c=new Array(l).fill("/cs?pw="),d=isOSPi(),h=function(e){return keyIndex[e]===n};for(t in e.options)if(e.options.hasOwnProperty(t)&&keyIndex.hasOwnProperty(t)){if(n=keyIndex[t],-1!==$.inArray(n,[2,14,16,21,22,25,36])&&0===e.options[t])continue;if(3===n){checkOSVersion(210)&&1===controller.options.dhcp&&(r+="&o3=1");continue}if(d&&void 0===(n=Object.keys(keyIndex).find(h)))continue;a=!0===checkOSVersion(208)&&"string"==typeof e.options[t]?e.options[t].replace(/\s/g,"_"):e.options[t],r+="&o"+n+"="+a}for(!d&&"number"==typeof e.options.fwv&&e.options.fwv<211&&checkOSVersion(211)&&(r+="&o36=1"),"object"==typeof e.settings.wto&&checkOSVersion(215)&&(r+="&wto="+escapeJSON(e.settings.wto)),"string"==typeof e.settings.ifkey&&checkOSVersion(217)&&(r+="&ifkey="+e.settings.ifkey),"string"==typeof e.settings.dname&&checkOSVersion(2191)&&(r+="&dname="+e.settings.dname),"object"==typeof e.settings.mqtt&&checkOSVersion(2191)&&(r+="&mqtt="+escapeJSON(e.settings.mqtt)),"object"==typeof e.settings.otc&&checkOSVersion(2191)&&(r+="&otc="+escapeJSON(e.settings.otc)),r+="&"+(d?"o":"")+"loc="+e.settings.loc,i=0;i<l;i++)for(t=16*i;t<16*(i+1)&&t<e.stations.snames.length;t++)s=!0===checkOSVersion(208)?e.stations.snames[t].replace(/\s/g,"_"):e.stations.snames[t],c[i]+="&s"+t+"="+encodeURIComponent(s);for(t=0;t<e.stations.masop.length;t++)o+="&m"+t+"="+e.stations.masop[t];if("object"==typeof e.stations.masop2)for(t=0;t<e.stations.masop2.length;t++)o+="&n"+t+"="+e.stations.masop2[t];if("object"==typeof e.stations.ignore_rain)for(t=0;t<e.stations.ignore_rain.length;t++)o+="&i"+t+"="+e.stations.ignore_rain[t];if("object"==typeof e.stations.ignore_sn1)for(t=0;t<e.stations.ignore_sn1.length;t++)o+="&j"+t+"="+e.stations.ignore_sn1[t];if("object"==typeof e.stations.ignore_sn2)for(t=0;t<e.stations.ignore_sn2.length;t++)o+="&k"+t+"="+e.stations.ignore_sn2[t];if("object"==typeof e.stations.stn_dis)for(t=0;t<e.stations.stn_dis.length;t++)o+="&d"+t+"="+e.stations.stn_dis[t];if("object"==typeof e.stations.stn_spe)for(t=0;t<e.stations.stn_spe.length;t++)o+="&p"+t+"="+e.stations.stn_spe[t];if("object"==typeof e.stations.stn_seq)for(t=0;t<e.stations.stn_seq.length;t++)o+="&q"+t+"="+e.stations.stn_seq[t];else if(!d&&"number"==typeof e.options.fwv&&e.options.fwv<211&&!checkOSVersion(211)){var u;for(u=0;u<e.settings.nbrd;u++)o+="&q"+u+"="+(1===e.options.seq?255:0)}if("object"==typeof e.stations.act_relay)for(t=0;t<e.stations.act_relay.length;t++)o+="&a"+t+"="+e.stations.act_relay[t];e.special=e.special||{},$.when(sendToOS(transformKeysinString(r)),sendToOS(o),sendToOS("/dp?pw=&pid=-1"),$.each(c,(function(e,t){sendToOS(t)})),$.each(e.programs.pd,(function(t,i){var n="";if(d&&"number"==typeof e.options.fwv&&e.options.fwv>=210)return showerror(_("Program data is newer than the device firmware and cannot be imported")),!1;if(!d&&"number"==typeof e.options.fwv&&e.options.fwv>=210&&!checkOSVersion(210))return showerror(_("Program data is newer than the device firmware and cannot be imported")),!1;if(!d&&"number"==typeof e.options.fwv&&e.options.fwv>=210&&checkOSVersion(210)&&(n="&name="+i[5],i=i.slice(0,5)),!d&&"number"==typeof e.options.fwv&&e.options.fwv<210&&checkOSVersion(210)){var a,s,o,r=readProgram183(i),l=i.length-7,c=[],h=0;for(h|=r.en<<0,r.is_even?h|=8:r.is_odd?h|=4:h|=0,r.is_interval?h|=48:h|=0,h|=0,i[0]=h,s=0;s<l;s++)for(a=i[7+s],o=0;o<8;o++)c.push(a&1<<o?r.duration:0);i[3]=[r.start,parseInt((r.end-r.start)/r.interval),r.interval,0],i[4]=c,i=i.slice(0,5),n="&name="+_("Program")+" "+(t+1)}sendToOS("/cp?pw=&pid=-1&v="+JSON.stringify(i)+n)})),$.each(e.special,(function(e,t){checkOSVersion(216)&&sendToOS("/cs?pw=&sid="+e+"&st="+t.st+"&sd="+encodeURIComponent(t.sd))}))).then((function(){setTimeout((function(){updateController((function(){$.mobile.loading("hide"),showerror(_("Backup restored to your device")),updateWeather(),goHome(!0)}),(function(){$.mobile.loading("hide"),networkFail()}))}),1500)}),(function(){$.mobile.loading("hide"),showerror(_("Unable to import configuration."))}))}))):showerror(_("Invalid configuration"))}var showAbout=function(){var e,t=$("<div data-role='page' id='about'><div class='ui-content' role='main'><ul data-role='listview' data-inset='true'><li><p>"+_("User manual for OpenSprinkler is available at")+" <a class='iab' target='_blank' href='https://openthings.freshdesk.com/support/solutions/folders/5000147083'>https://support.openthings.io</a></p></li></ul><ul data-role='listview' data-inset='true'><li><p>"+_("This is open source software: source code and changelog for this application can be found at")+" <a class='iab squeeze' target='_blank' href='https://github.com/OpenSprinkler/OpenSprinkler-App/'>https://github.com/OpenSprinkler/OpenSprinkler-App/</a></p><p>"+_("Language localization is crowdsourced using Transifex available at")+" <a class='iab squeeze' target='_blank' href='https://www.transifex.com/albahra/opensprinkler/'>https://www.transifex.com/albahra/opensprinkler/</a></p><p>"+_("Open source attributions")+": <a class='iab iabNoScale squeeze' target='_blank' href='https://github.com/OpenSprinkler/OpenSprinkler-App/wiki/List-of-Integrated-Libraries'>https://github.com/OpenSprinkler/OpenSprinkler-App/wiki/List-of-Integrated-Libraries</a></p></li></ul><p class='smaller'>"+_("App Version")+": 2.3.0<br>"+_("Firmware")+": <span class='firmware'></span><br><span class='hardwareLabel'>"+_("Hardware Version")+":</span> <span class='hardware'></span></p></div></div>");return function(){e=void 0===controller.options.hwv,t.find(".hardware").toggleClass("hidden",e).text(getHWVersion()+getHWType()),t.find(".hardwareLabel").toggleClass("hidden",e),t.find(".firmware").text(getOSVersion()+getOSMinorVersion()),t.one("pagehide",(function(){t.detach()})),changeHeader({title:_("About"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack}}),$("#about").remove(),$.mobile.pageContainer.append(t)}}();function stopStations(e){$.mobile.loading("show"),sendToOS("/cv?pw=&rsn=1").done((function(){setTimeout((function(){$.mobile.loading("hide"),e()}),1e3)}))}function flowCountToVolume(e){return parseFloat((e*((controller.options.fpr1<<8)+controller.options.fpr0)/100).toFixed(2))}function isOSPi(){return!(!controller||"object"!=typeof controller.options||"string"!=typeof controller.options.fwv||-1===controller.options.fwv.search(/ospi/i))}function checkPW(e,t){var i="/sp?pw="+encodeURIComponent(e)+"&npw="+encodeURIComponent(e)+"&cpw="+encodeURIComponent(e);$.ajax({url:currToken?"https://cloud.openthings.io/forward/v1/"+currToken+i:currPrefix+currIp+i,cache:!1,crossDomain:!0,type:"GET"}).then((function(e){var i=e.result;t(!(void 0===i||i>1))}),(function(){t(!1)}))}function changePassword(e){e=$.extend({},{fixIncorrect:!1,name:"",callback:function(){},cancel:function(){}},e);var t=isOSPi(),i=!1,n=$("<div data-role='popup' class='modal' id='changePassword' data-theme='a' data-overlay-theme='b'><ul data-role='listview' data-inset='true'>"+(!0===e.fixIncorrect?"":"<li data-role='list-divider'>"+_("Change Password")+"</li>")+"<li>"+(!0===e.fixIncorrect?"<p class='rain-desc red-text bold'>"+_("Incorrect password for ")+e.name+". "+_("Please re-enter password to try again.")+"</p>":"")+"<form method='post' novalidate><label for='npw'>"+(!0===e.fixIncorrect?_("Password:"):_("New Password")+":")+"</label><input type='password' name='npw' id='npw' value=''"+(t?"":" maxlength='32'")+">"+(!0===e.fixIncorrect?"":"<label for='cpw'>"+_("Confirm New Password")+":</label><input type='password' name='cpw' id='cpw' value=''"+(t?"":" maxlength='32'")+">")+(!0===e.fixIncorrect?"<label for='save_pw'>"+_("Save Password")+"</label><input type='checkbox' data-wrapper-class='save_pw' name='save_pw' id='save_pw' data-mini='true'>":"")+"<input type='submit' value='"+_("Submit")+"'></form></li></ul></div>");n.find("form").on("submit",(function(){var a=n.find("#npw").val(),s=n.find("#cpw").val();return!0===e.fixIncorrect?(i=!0,storage.get(["sites"],(function(t){var i=parseSites(t.sites),s=function(t){currPass=t,i[e.name].os_pw=n.find("#save_pw").is(":checked")?t:"",storage.set({sites:JSON.stringify(i)},cloudSaveSites),n.popup("close"),e.callback()};checkPW(md5(a),(function(e){s(!0===e?md5(a):a)}))})),!1):a!==s?(showerror(_("The passwords don't match. Please try again.")),!1):""===a?(showerror(_("Password cannot be empty")),!1):(!t&&a.length>32&&showerror(_("Password cannot be longer than 32 characters")),checkOSVersion(213)&&(a=md5(a),s=md5(s)),$.mobile.loading("show"),sendToOS("/sp?pw=&npw="+encodeURIComponent(a)+"&cpw="+encodeURIComponent(s),"json").done((function(e){var t=e.result;!t||t>1?showerror(_(2===t?"Please check the current device password is correct then try again":"Unable to change password. Please try again.")):(storage.get(["sites","current_site"],(function(e){var t=parseSites(e.sites);t[e.current_site].os_pw=a,currPass=a,storage.set({sites:JSON.stringify(t)},cloudSaveSites)})),$.mobile.loading("hide"),n.popup("close"),showerror(_("Password changed successfully")))})),!1)})),n.one("popupafterclose",(function(){document.activeElement.blur(),n.remove(),e.fixIncorrect&&!i&&e.cancel()})).popup().enhanceWithin(),e.fixIncorrect?storage.get(["sites","current_site"],(function(t){var i=parseSites(t.sites),a=t.current_site,s=md5(i[a].os_pw);if(isMD5(i[a].os_pw))n.popup("open");else{var o="/jc?pw="+s;$.ajax({url:currToken?"https://cloud.openthings.io/forward/v1/"+currToken+o:currPrefix+currIp+o,type:"GET",dataType:"json"}).then((function(){i[a].os_pw=currPass=s,storage.set({sites:JSON.stringify(i)},cloudSaveSites),e.callback()}),(function(){n.popup("open")}))}})):n.popup("open")}function requestCloudAuth(e){e=e||function(){};var t=$("<div data-role='popup' class='modal' id='requestCloudAuth' data-theme='a'><ul data-role='listview' data-inset='true'><li data-role='list-divider'>"+_("OpenSprinkler.com Login")+"</li><li><p class='rain-desc tight'>"+_("Use your OpenSprinkler.com login and password to securely sync sites between all your devices.")+"<br><br>"+_("Don't have an account?")+" <a href='https://opensprinkler.com/my-account/' class='iab'>"+_("Register here")+"</a></p></li><li><form method='post' novalidate><label for='cloudUser'>"+_("Username:")+"</label><input type='text' name='cloudUser' id='cloudUser' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'><label for='cloudPass'>"+_("Password:")+"</label><input type='password' name='cloudPass' id='cloudPass'><input type='submit' value='"+_("Submit")+"'></form></li></ul></div>"),i=!1;t.find("form").on("submit",(function(){return $.mobile.loading("show"),cloudLogin(t.find("#cloudUser").val(),t.find("#cloudPass").val(),(function(e){!1!==e?($.mobile.loading("hide"),i=!0,t.popup("close")):showerror(_("Invalid username/password combination. Please try again."))})),!1})),t.one("popupafterclose",(function(){e(i),i&&cloudSyncStart()})),openPopup(t)}function cloudLogin(e,t,i){i=i||function(){},$.ajax({type:"POST",dataType:"json",url:"https://opensprinkler.com/wp-admin/admin-ajax.php",data:{action:"ajaxLogin",username:e,password:t},success:function(e){"string"==typeof e.token&&storage.set({cloudToken:e.token,cloudDataToken:sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(t))}),i(e.loggedin)},fail:function(){i(!1)}})}function cloudSaveSites(e){"function"!=typeof e&&(e=function(){}),storage.get(["cloudToken","cloudDataToken","sites"],(function(t){null!==t.cloudToken&&void 0!==t.cloudToken?$.ajax({type:"POST",dataType:"json",url:"https://opensprinkler.com/wp-admin/admin-ajax.php",data:{action:"saveSites",token:t.cloudToken,sites:encodeURIComponent(JSON.stringify(sjcl.encrypt(t.cloudDataToken,t.sites)))},success:function(t){!1===t.success?("BAD_TOKEN"===t.message&&handleExpiredLogin(),e(!1,t.message)):(storage.set({cloudToken:t.token}),e(t.success))},fail:function(){e(!1)}}):e(!1)}))}function cloudGetSites(e){e=e||function(){},storage.get(["cloudToken","cloudDataToken"],(function(t){if(void 0!==t.cloudToken&&null!==t.cloudToken)return void 0===t.cloudDataToken||null===t.cloudDataToken?(handleInvalidDataToken(),void e(!1)):void $.ajax({type:"POST",dataType:"json",url:"https://opensprinkler.com/wp-admin/admin-ajax.php",data:{action:"getSites",token:t.cloudToken},success:function(i){if(!1===i.success||""===i.sites)"BAD_TOKEN"===i.message&&handleExpiredLogin(),e(!1,i.message);else{var n;storage.set({cloudToken:i.token});try{n=sjcl.decrypt(t.cloudDataToken,i.sites)}catch(t){"ccm: tag doesn't match"===t.message&&handleInvalidDataToken(),e(!1)}try{e(JSON.parse(n))}catch(t){e(!1)}}},fail:function(){e(!1)}});e(!1)}))}function cloudSyncStart(){cloudGetSites((function(e){var t=$(".ui-page-active").attr("id");"start"===t?(Object.keys(e).length>0&&storage.set({sites:JSON.stringify(e)}),changePage("#site-control")):(updateLoginButtons(),storage.get("sites",(function(i){if(JSON.stringify(e)!==i.sites)if(i.sites=parseSites(i.sites),currLocal)findLocalSiteName(e,(function(t){!1===t?areYouSure(_("Do you wish to add this location to your cloud synced site list?"),_("This site is not found in the currently synced site list but may be added now."),(function(){e[currIp]=i.sites.Local,storage.set({sites:JSON.stringify(e)},cloudSaveSites),storage.set({current_site:currIp}),updateSiteList(Object.keys(e),currIp)}),(function(){storage.remove("cloudToken",updateLoginButtons)})):(storage.set({sites:JSON.stringify(e)},cloudSaveSites),storage.set({current_site:t}),updateSiteList(Object.keys(e),t))}));else if(Object.keys(e).length>0){var n=$("<div data-role='popup' data-theme='a' data-overlay-theme='b'><div class='ui-bar ui-bar-a'>"+_("Select Merge Method")+"</div><div data-role='controlgroup' class='tight'><button class='merge'>"+_("Merge")+"</button><button class='replaceLocal'>"+_("Replace local with cloud")+"</button><button class='replaceCloud'>"+_("Replace cloud with local")+"</button></div></div>"),a=function(){storage.set({sites:JSON.stringify(e)},cloudSaveSites),n.popup("close"),"site-control"===t&&changePage("#site-control")};n.find(".merge").on("click",(function(){e=$.extend({},i.sites,e),a()})),n.find(".replaceLocal").on("click",(function(){a()})),n.find(".replaceCloud").on("click",(function(){e=i.sites,a()})),n.one("popupafterclose",(function(){n.popup("destroy").remove()})).popup({history:!1,positionTo:"window"}).enhanceWithin().popup("open")}else cloudSaveSites()})))}))}function cloudSync(e){"function"!=typeof e&&(e=function(){}),storage.get(["cloudToken","current_site"],(function(t){"string"==typeof t.cloudToken&&cloudGetSites((function(i){!1!==i&&storage.set({sites:JSON.stringify(i)},(function(){updateSiteList(Object.keys(i),t.current_site),e(),$("html").trigger("siterefresh")}))}))}))}var corruptionNotificationShown=!1;function handleCorruptedWeatherOptions(e){corruptionNotificationShown||(addNotification({title:_("Weather Options have Corrupted"),desc:_("Click here to retrieve the partial weather option data"),on:function(){var t=$(this).parent(),i=$("<div data-role='popup' data-theme='a' class='modal ui-content' id='weatherOptionCorruption'><h3 class='center'>"+_("Weather option data has corrupted")+"</h3><h5 class='center'>"+_("Please note this may indicate other data corruption as well, please verify all settings.")+"</h5><h6 class='center'>"+_("Below is the corrupt data which could not be parsed but may be useful for restoration.")+"</h6><code>"+e[0].substr(7)+"</code><a class='ui-btn ui-corner-all ui-shadow red reset-options' style='width:80%;margin:5px auto;' href='#'>"+_("Reset All Options")+"</a><a class='ui-btn ui-corner-all ui-shadow submit' style='width:80%;margin:5px auto;' href='#'>"+_("Dismiss")+"</a></div>");return i.find(".submit").on("click",(function(){return removeNotification(t),i.popup("close"),!1})),i.find(".reset-options").on("click",(function(){return removeNotification(t),i.popup("close"),resetAllOptions((function(){showerror(_("Settings have been saved"))})),!1})),openPopup(i),!1}}),corruptionNotificationShown=!0)}function handleExpiredLogin(){storage.remove(["cloudToken"],updateLoginButtons),addNotification({title:_("OpenSprinkler.com Login Expired"),desc:_("Click here to re-login to OpenSprinkler.com"),on:function(){var e=$(this).parent();return requestCloudAuth((function(t){removeNotification(e),!0===t&&(updateLoginButtons(),cloudSync())})),!1}})}function handleInvalidDataToken(){storage.remove(["cloudDataToken"]),addNotification({title:_("Unable to read cloud data"),desc:_("Click here to enter a valid password to decrypt the data"),on:function(){var e=$(this).parent(),t=$("<div data-role='popup' data-theme='a' class='modal ui-content' id='dataPassword'><p class='tight rain-desc'>"+_("Please enter your OpenSprinkler.com password. If you have recently changed your password, you may need to enter your previous password to decrypt the data.")+"</p><form><input type='password' id='dataPasswordInput' name='dataPasswordInput' placeholder='"+_("Password")+"' /><input type='submit' data-theme='b' value='"+_("Submit")+"' /></form></div>"),i=!1;return t.find("form").on("submit",(function(){return removeNotification(e),i=!0,storage.set({cloudDataToken:sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash(t.find("#dataPasswordInput").val()))},(function(){t.popup("close")})),!1})),t.one("popupafterclose",(function(){!0===i&&cloudSync()})),openPopup(t),!1}})}function getTokenUser(e){return atob(e).split("|")[0]}function detectUnusedExpansionBoards(){"number"==typeof controller.options.dexp&&controller.options.dexp<255&&controller.options.dexp>=0&&controller.options.ext<controller.options.dexp&&addNotification({title:_("Unused Expanders Detected"),desc:_("Click here to enable all connected stations."),on:function(){return removeNotification($(this).parent()),changePage("#os-options",{expandItem:"station"}),!1}})}function showUnifiedFirmwareNotification(){isOSPi()&&storage.get("ignoreUnifiedFirmware",(function(e){"1"!==e.ignoreUnifiedFirmware&&addNotification({title:_("Unified firmware is now avaialble"),desc:_("Click here for more details"),on:function(){var e=window.open("https://openthings.freshdesk.com/support/solutions/articles/5000631599","_blank","location="+(isAndroid?"yes":"no")+",enableViewportScale=yes,toolbarposition=top,closebuttoncaption="+_("Back"));return isIEMobile&&($.mobile.document.data("iabOpen",!0),e.addEventListener("exit",(function(){$.mobile.document.removeData("iabOpen")}))),!1},off:function(){return storage.set({ignoreUnifiedFirmware:"1"}),!0}})}))}function intToIP(e){return(e>>24&255)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}function checkPublicAccess(e){if(0!==e&&!currToken){var t=intToIP(e),i=currIp.match(/.*:(\d+)/),n=function(){storage.get("ignoreRemoteFailed",(function(e){"1"!==e.ignoreRemoteFailed&&addNotification({title:_("Remote access is not enabled"),desc:_("Click here to troubleshoot remote access issues"),on:function(){var e=window.open("https://openthings.freshdesk.com/support/solutions/articles/5000569763","_blank","location="+(isAndroid?"yes":"no")+",enableViewportScale=yes,toolbarposition=top,closebuttoncaption="+_("Back"));return isIEMobile&&($.mobile.document.data("iabOpen",!0),e.addEventListener("exit",(function(){$.mobile.document.removeData("iabOpen")}))),!1},off:function(){return storage.set({ignoreRemoteFailed:"1"}),!0}})}))};t!==currIp&&!isLocalIP(t)&&isLocalIP(currIp)&&(i=i?parseInt(i[1]):80,$.ajax({url:currPrefix+t+":"+i+"/jo?pw="+currPass,global:!1,dataType:"json",type:"GET"}).then((function(e){("object"!=typeof e||!e.hasOwnProperty("fwv")||e.fwv!==controller.options.fwv||checkOSVersion(214)&&controller.options.ip4!==e.ip4)&&n()}),n))}}function logout(e){"function"!=typeof e&&(e=function(){}),areYouSure(_("Are you sure you want to logout?"),"",(function(){currLocal?storage.remove(["sites","current_site","lang","provider","wapikey","runonce","cloudToken"],(function(){location.reload()})):storage.remove(["cloudToken"],(function(){updateLoginButtons(),e()}))}))}function updateLoginButtons(){var e=$(".ui-page-active");storage.get("cloudToken",(function(t){var i=$(".login-button"),n=$(".logout-button");null===t.cloudToken||void 0===t.cloudToken?(i.removeClass("hidden"),currLocal||n.addClass("hidden"),n.find("a").text(_("Logout")),"site-control"===e.attr("id")&&e.find(".logged-in-alert").remove()):(n.removeClass("hidden").find("a").text(_("Logout")+" ("+getTokenUser(t.cloudToken)+")"),i.addClass("hidden"),"site-control"===e.attr("id")&&0===e.find(".logged-in-alert").length&&e.find(".ui-content").prepend(addSyncStatus(t.cloudToken)))}))}function addNotification(e){notifications.push(e),updateNotificationBadge();var t=$("#notificationPanel");t.hasClass("ui-panel-open")&&t.find("ul").append(createNotificationItem(e)).listview("refresh")}function updateNotificationBadge(){var e=notifications.length,t=$("#header");0===e?t.find(".notifications").hide():(t.find(".notifications").show(),t.find(".notificationCount").text(e))}function createNotificationItem(e){var t=$("<li><a class='primary' href='#'><h2>"+e.title+"</h2>"+(e.desc?"<p>"+e.desc+"</p>":"")+"</a><a class='ui-btn ui-btn-icon-notext ui-icon-delete'></a></li>");return t.find(".primary").on("click",e.on),t.find(".ui-icon-delete").on("click",(function(){removeNotification($(this).parent())})),t}function showNotifications(){if(0!==notifications.length){for(var e=$("#notificationPanel"),t=$("#footer-menu"),i=[$("<li data-role='list-divider'>"+_("Notifications")+"<button class='ui-btn ui-btn-icon-notext ui-icon-delete btn-no-border clear-all delete'></button></li>").on("click",".clear-all",(function(){var e=$(this);e.hasClass("clear")?clearNotifications():(e.removeClass("delete ui-btn-icon-notext ui-icon-delete").addClass("clear").text(_("Clear")),setTimeout((function(){$.mobile.document.one("click",(function(){e.removeClass("clear").addClass("delete ui-btn-icon-notext ui-icon-delete").text("")}))}),1))}))],n=notifications.length-1;n>=0;n--)i.push(createNotificationItem(notifications[n]));e.find("ul").replaceWith($("<ul/>").append(i).listview()),e.on("panelbeforeclose",(function(){t.removeClass("moveLeft")})),e.panel().panel("option","classes.modal","needsclick ui-panel-dismiss"),t.addClass("moveLeft"),e.panel("open")}}function clearNotifications(){var e=$("#notificationPanel");notifications=[],updateNotificationBadge(),e.find("ul").empty(),e.hasClass("ui-panel-open")&&e.panel("close")}function removeNotification(e){var t=$("#notificationPanel"),i=notifications[e.index()-1].off;("function"!=typeof i||i())&&(notifications.remove(e.index()-1),e.remove(),updateNotificationBadge(),0===notifications.length&&t.hasClass("ui-panel-open")&&t.panel("close"))}function checkFirmwareUpdate(){checkOSVersion(200)&&("3.0"===getHWVersion()||isOSPi())&&$.getJSON("https://api.github.com/repos/opensprinkler/opensprinkler-firmware/releases").done((function(e){controller.options.fwv<e[0].tag_name&&storage.get("updateDismiss",(function(t){(!t.updateDismiss||t.updateDismiss<e[0].tag_name)&&addNotification({title:_("Firmware update available"),on:function(){var t=$(this).parent(),i=30===controller.options.hwv||controller.options.hwv>63&&checkOSVersion(216),n=e[0].html_url,a=$("<div data-role='popup' class='modal' data-theme='a'><h3 class='center' style='margin-bottom:0'>"+_("Latest")+" "+_("Firmware")+": "+e[0].name+"</h3><h5 class='center' style='margin:0'>"+_("This Controller")+": "+getOSVersion()+getOSMinorVersion()+"</h5><a class='iab ui-btn ui-corner-all ui-shadow' style='width:80%;margin:5px auto;' target='_blank' href='"+n+"'>"+_("View Changelog")+"</a><a class='guide ui-btn ui-corner-all ui-shadow' style='width:80%;margin:5px auto;' href='#'>"+_("Update Guide")+"</a>"+(i?"<a class='update ui-btn ui-corner-all ui-shadow' style='width:80%;margin:5px auto;' href='#'>"+_("Update Now")+"</a>":"")+"<a class='dismiss ui-btn ui-btn-b ui-corner-all ui-shadow' style='width:80%;margin:5px auto;' href='#'>"+_("Dismiss")+"</a></div>");a.find(".update").on("click",(function(){30!==controller.options.hwv?sendToOS("/cv?pw=&update=1","json").then((function(){showerror(_("Update successful")),a.find(".dismiss").click()}),(function(){$.mobile.loading("show",{html:"<div class='center'>"+_("Update did not complete.")+"<br><a class='iab ui-btn' href='https://openthings.freshdesk.com/support/solutions/articles/5000631599-installing-and-updating-the-unified-firmware#upgrade'>"+_("Update Guide")+"</a></div>",textVisible:!0,theme:"b"}),setTimeout((function(){$.mobile.loading("hide")}),3e3)})):$("<a class='hidden iab' href='"+currPrefix+currIp+"/update'></a>").appendTo(a).click()})),a.find(".guide").on("click",(function(){var e=controller.options.hwv>63?"https://openthings.freshdesk.com/support/solutions/articles/5000631599-installing-and-updating-the-unified-firmware#upgrade":"https://openthings.freshdesk.com/support/solutions/articles/5000381694-opensprinkler-firmware-update-guide";$("<a class='hidden iab' href='"+e+"'></a>").appendTo(a).click()})),a.find(".dismiss").one("click",(function(){return storage.set({updateDismiss:e[0].tag_name}),a.popup("close"),removeNotification(t),!1})),openPopup(a)}})}))}))}function stopAllStations(){if(!isControllerConnected())return!1;areYouSure(_("Are you sure you want to stop all stations?"),"",(function(){$.mobile.loading("show"),sendToOS("/cv?pw=&rsn=1").done((function(){$.mobile.loading("hide"),removeStationTimers(),refreshStatus(),showerror(_("All stations have been stopped"))}))}))}function checkOSPiVersion(e){var t;return!!isOSPi()&&((t=controller.options.fwv.split("-")[0])===e||versionCompare(t=t.split("."),e=e.split(".")))}function checkOSVersion(e){var t=controller.options.fwv;if(e>=1e3){if(isNaN(controller.options.fwm))return!1;t=10*t+controller.options.fwm}return!isOSPi()&&(e===t||versionCompare(t.toString().split(""),e.toString().split("")))}function versionCompare(e,t){for(var i,n=Math.max(e.length,t.length);e.length<n;)e.push(0);for(;t.length<n;)t.push(0);for(var a=0;a<n&&0===(i=Math.max(-1,Math.min(1,e[a]-t[a])));a++);return-1===i&&(i=!1),i}function getOSVersion(e){return e||"object"!=typeof controller.options||(e=controller.options.fwv),"string"==typeof e&&-1!==e.search(/ospi/i)?e:(e/100>>0)+"."+(e/10>>0)%10+"."+e%10}function getOSMinorVersion(){return!isOSPi()&&"object"==typeof controller.options&&"number"==typeof controller.options.fwm&&controller.options.fwm>0?" ("+controller.options.fwm+")":""}function getHWVersion(e){if(!e){if("object"!=typeof controller.options||void 0===controller.options.hwv)return!1;e=controller.options.hwv}return"string"==typeof e?e:64===e?"OSPi":128===e?"OSBo":192===e?"Linux":255===e?"Demo":(e/10>>0)%10+"."+e%10}function getHWType(){return isOSPi()||"number"!=typeof controller.options.hwt||0===controller.options.hwt?"":172===controller.options.hwt?" - AC":220===controller.options.hwt?" - DC":26===controller.options.hwt?" - Latching":""}function areYouSure(e,t,i,n,a){$("#sure").popup("destroy").remove(),i=i||function(){},n=n||function(){};var s=0;"object"==typeof a&&(s=a.type===dialog.REMOVE_STATION&&Groups.canShift(a.gid)&&Station.isSequential(a.station));var o=$("<div data-role='popup' data-theme='a' id='sure'><h3 class='sure-1 center'>"+e+"</h3><p class='sure-2 center'>"+t+"</p><a class='sure-do ui-btn ui-btn-b ui-corner-all ui-shadow' href='#'>"+_("Yes")+"</a><a class='sure-dont ui-btn ui-corner-all ui-shadow' href='#'>"+_("No")+"</a>"+(s?"<label><input id='shift-sta' type='checkbox'>Move up remaining stations in the same sequential group?</label>":"")+"</div>");o.find(".sure-do").one("click.sure",(function(){return o.popup("close"),i(),!1})),o.find(".sure-dont").one("click.sure",(function(){return o.popup("close"),n(),!1})),openPopup(o)}function showIPRequest(e){var t={title:_("Enter IP Address"),ip:[0,0,0,0],showBack:!0,callback:function(){}};e=$.extend({},t,e),$("#ipInput").popup("destroy").remove();var i=$("<div data-role='popup' id='ipInput' data-theme='a'><div data-role='header' data-theme='b'><h1>"+e.title+"</h1></div><div class='ui-content'><span><fieldset class='ui-grid-c incr'><div class='ui-block-a'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div><div class='ui-block-b'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div><div class='ui-block-c'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div><div class='ui-block-d'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div></fieldset><div class='ui-grid-c inputs'><div class='ui-block-a'><input data-wrapper-class='pad_buttons' class='ip_addr' type='number' pattern='[0-9]*' max='255' value='"+e.ip[0]+"'></div><div class='ui-block-b'><input data-wrapper-class='pad_buttons' class='ip_addr' type='number' pattern='[0-9]*' max='255' value='"+e.ip[1]+"'></div><div class='ui-block-c'><input data-wrapper-class='pad_buttons' class='ip_addr' type='number' pattern='[0-9]*' max='255' value='"+e.ip[2]+"'></div><div class='ui-block-d'><input data-wrapper-class='pad_buttons' class='ip_addr' type='number' pattern='[0-9]*' max='255' value='"+e.ip[3]+"'></div></div><fieldset class='ui-grid-c decr'><div class='ui-block-a'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div><div class='ui-block-b'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div><div class='ui-block-c'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div><div class='ui-block-d'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div></fieldset></span>"+(e.showBack?"<button class='submit' data-theme='b'>"+_("Submit")+"</button>":"")+"</div></div>"),n=function(t,n){var s=i.find(".inputs input").eq(t),o=parseInt(s.val());-1===n&&0===o||1===n&&o>=255||(s.val(o+n),e.callback(a()))},a=function(){return $.makeArray(i.find(".ip_addr").map((function(){return parseInt($(this).val())})))};i.find("button.submit").on("click",(function(){e.callback(a()),i.popup("destroy").remove()})),i.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){""===this.value&&(this.value="0")})),holdButton(i.find(".incr").children(),(function(e){var t=$(e.currentTarget).index();return n(t,1),!1})),holdButton(i.find(".decr").children(),(function(e){var t=$(e.currentTarget).index();return n(t,-1),!1})),i.css("max-width","350px").one("popupafterclose",(function(){e.callback(a())})),openPopup(i)}function showDurationBox(e){var t={seconds:0,title:_("Duration"),granularity:0,preventCompression:!1,incrementalUpdate:!0,showBack:!0,showSun:!1,minimum:0,callback:function(){}},i=0;e=$.extend({},t,e),$("#durationBox").popup("destroy").remove(),e.seconds=parseInt(e.seconds),65535===e.seconds?(i=1,e.seconds=0):65534===e.seconds&&(i=2,e.seconds=0),checkOSVersion(217)&&(e.preventCompression=!0);var n,a=["days","hours","minutes","seconds"],s=[_("Days"),_("Hours"),_("Minutes"),_("Seconds")],o=[86400,3600,60,1],r=[0,23,59,59],l=4-e.granularity,c=0,d=sec2dhms(e.seconds);if(!e.preventCompression&&checkOSVersion(210)&&e.maximum>64800&&(e.maximum=checkOSVersion(214)?57600:64800),e.maximum)for(n=o.length-1;n>=0;n--)if(e.maximum<o[n]){l=o.length-(c=n+1)-e.granularity;break}var h="<fieldset class='ui-grid-"+String.fromCharCode(95+l)+" incr'>",u="<div class='ui-grid-"+String.fromCharCode(95+l)+" inputs'>",p="<fieldset class='ui-grid-"+String.fromCharCode(95+l)+" decr'>",f=$("<div data-role='popup' id='durationBox' data-theme='a'><div data-role='header' data-theme='b'><h1>"+e.title+"</h1></div><div class='ui-content'>"+(e.helptext?"<p class='rain-desc center smaller'>"+e.helptext+"</p>":"")+"<span></span>"+(e.showSun?"<div class='ui-grid-a useSun'><div class='ui-block-a'><button value='65534' class='ui-mini ui-btn rise "+(2===i?"ui-btn-active":"")+"'>"+_("Sunrise to Sunset")+"</button></div><div class='ui-block-b'><button value='65535' class='ui-mini ui-btn set "+(1===i?"ui-btn-active":"")+"'>"+_("Sunset to Sunrise")+"</button></div></div>":"")+(e.showBack?"<button class='submit' data-theme='b'>"+_("Submit")+"</button>":"")+"</div></div>"),g=function(t,i){var n=f.find(".inputs input").eq(t),a=t+c,s=parseInt(n.val());if(!n.prop("disabled")&&!(-1===i&&(m()<=e.minimum||s<=0)||1===i&&m()+o[a]>e.maximum)&&(0!==r[a]&&0!==t&&Math.abs(s)>=r[a]&&(n.val(0),n=f.find(".inputs input").eq(t-1),s=parseInt(n.val())),n.val(s+i),e.incrementalUpdate&&e.callback(m()),!e.preventCompression&&checkOSVersion(210))){var l=1===i;1===i?(m()>=60&&v("seconds",l),m()>=10800&&v("minutes",l)):-1===i&&(m()<=-60?v("seconds",!l):m()<=-10800?v("minutes",!l):m()<60?v("seconds",l):m()<10800&&v("minutes",l))}},m=function(){var e=f.find(".useSun").find("button.ui-btn-active");return 1===e.length?parseInt(e.val()):dhms2sec({days:parseInt(f.find(".days").val())||0,hours:parseInt(f.find(".hours").val())||0,minutes:parseInt(f.find(".minutes").val())||0,seconds:parseInt(f.find(".seconds").val())||0})},v=function(e,t){f.find("."+e).toggleClass("ui-state-disabled",t).prop("disabled",t).val((function(){return t?0:this.value})).parent(".ui-input-text").toggleClass("ui-state-disabled",t)};for(n=c;n<o.length-e.granularity;n++)h+="<div "+(l>1?"class='ui-block-"+String.fromCharCode(97+n-c)+"'":"")+"><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div>",u+="<div "+(l>1?"class='ui-block-"+String.fromCharCode(97+n-c)+"'":"")+"><label class='center'>"+_(s[n])+"</label><input data-wrapper-class='pad_buttons' class='"+a[n]+"' type='number' pattern='[0-9]*' value='"+d[a[n]]+"'></div>",p+="<div "+(l>1?"class='ui-block-"+String.fromCharCode(97+n-c)+"'":"")+"><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div>";h+="</fieldset>",u+="</div>",p+="</fieldset>",f.find("span").prepend(h+u+p),f.find("button.submit").on("click",(function(){e.callback(m()),f.popup("destroy").remove()})),!e.preventCompression&&checkOSVersion(210)&&(e.seconds<=-60&&v("seconds",!0),e.seconds<=-10800&&v("minutes",!0),e.seconds>=60&&v("seconds",!0),e.seconds>=10800&&v("minutes",!0)),f.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){""===this.value&&(this.value="0")})),holdButton(f.find(".incr").children(),(function(e){var t=$(e.currentTarget).index();return g(t,1),!1})),holdButton(f.find(".decr").children(),(function(e){var t=$(e.currentTarget).index();return g(t,-1),!1})),e.showSun&&f.find(".useSun").on("click","button",(function(){var t=$(this),i=f.find(".useSun").find("button").not(t),n=f.find("span").find(".ui-btn,input");i.removeClass("ui-btn-active"),t.hasClass("ui-btn-active")?(t.removeClass("ui-btn-active"),n.prop("disabled",!1).removeClass("ui-disabled")):(t.addClass("ui-btn-active"),n.prop("disabled",!0).addClass("ui-disabled")),e.incrementalUpdate&&e.callback(m())})),f.css("max-width","350px").one("popupafteropen",(function(){0!==i&&f.find("span").find(".ui-btn,input").prop("disabled",!0).addClass("ui-disabled")})).one("popupafterclose",(function(){e.incrementalUpdate&&e.callback(m())})),openPopup(f)}function showSingleDurationInput(e){$("#singleDuration").popup("destroy").remove();var t={data:0,title:_("Duration"),minimum:0,label:"",updateOnChange:!0,showBack:!0,callback:function(){}};e=$.extend({},t,e);var i=$("<div data-role='popup' id='singleDuration' data-theme='a'><div data-role='header' data-theme='b'><h1>"+e.title+"</h1></div><div class='ui-content'>"+(e.helptext?"<p class='rain-desc center smaller'>"+e.helptext+"</p>":"")+"<label class='center'>"+e.label+"</label><div class='input_with_buttons'><button class='decr ui-btn ui-btn-icon-notext ui-icon-carat-l btn-no-border'></button><input type='number' pattern='[0-9]*' value='"+e.data+"'><button class='incr ui-btn ui-btn-icon-notext ui-icon-carat-r btn-no-border'></button></div>"+(e.updateOnChange&&!e.showBack?"":"<input type='submit' data-theme='b' value='"+_("Submit")+"'>")+"</div></div>"),n=i.find("input"),a=function(t){e.callback(parseInt(t).clamp(e.minimum,e.maximum))},s=function(t){var i=parseInt(n.val());-1===t&&i===e.minimum||1===t&&i===e.maximum||(n.val(i+t),e.updateOnChange&&a(i+t))};holdButton(i.find(".incr"),(function(){return s(1),!1})),holdButton(i.find(".decr"),(function(){return s(-1),!1})),i.find("input[type='number']").on("focus",(function(){this.value=""})).on("blur",(function(){""===this.value&&(this.value="0")})),i.find("input[type='submit']").on("click",(function(){a(n.val()),i.popup("destroy").remove()})),i.one("popupafterclose",(function(){e.updateOnChange&&a(n.val())})),openPopup(i)}function showDateTimeInput(e,t){$("#datetimeInput").popup("destroy").remove(),e instanceof Date||(e=new Date(1e3*e)).setMinutes(e.getMinutes()-e.getTimezoneOffset()),t=t||function(){};var i=["Month","Date","FullYear","Hours","Minutes"],n=[_("Jan"),_("Feb"),_("Mar"),_("Apr"),_("May"),_("Jun"),_("Jul"),_("Aug"),_("Sep"),_("Oct"),_("Nov"),_("Dec")],a=$("<div data-role='popup' id='datetimeInput' data-theme='a'><div data-role='header' data-theme='b'><h1>"+_("Enter Date/Time")+"</h1></div><div class='ui-content'></div></div>"),s=function(i,n){e["setUTC"+i](e["getUTC"+i]()+n),t(new Date(e.getTime())),o()},o=function(){var t,o,r="<fieldset class='ui-grid-d incr'>",l="<div class='ui-grid-d inputs'>",c="<fieldset class='ui-grid-d decr'>";for(o=0;o<5;o++)t=e["getUTC"+i[o]](),"",t="Month"===i[o]?"<p class='center'>"+n[t]+"</p>":"Date"===i[o]?"<p class='center'>"+t+",</p>":"Hours"===i[o]?"<p style='width:90%;display:inline-block' class='center'>"+t+"</p><p style='display:inline-block'>:</p>":"<p class='center'>"+t+"</p>",r+="<div class='ui-block-"+String.fromCharCode(97+o)+"'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div>",l+="<div id='"+i[o]+"' class='ui-block-"+String.fromCharCode(97+o)+"'>"+t+"</div>",c+="<div class='ui-block-"+String.fromCharCode(97+o)+"'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div>";r+="</fieldset>",l+="</div>",c+="</fieldset>",a.find(".ui-content").html("<span>"+r+l+c+"</span>").enhanceWithin(),a.find(".incr").children().on("vclick",(function(){var e=$(this).index();return s(a.find(".inputs").children().eq(e).attr("id"),1),!1})),a.find(".decr").children().on("vclick",(function(){var e=$(this).index();return s(a.find(".inputs").children().eq(e).attr("id"),-1),!1}))};o(),a.css("width","280px").one("popupafterclose",(function(){t(e)})),openPopup(a)}function showTimeInput(e){var t={minutes:0,title:_("Time"),incrementalUpdate:!0,showBack:!0,showSun:!1,callback:function(){}};e=$.extend({},t,e),$("#timeInput").popup("destroy").remove();var i=2047&e.minutes,n=0;e.minutes>>12&1&&(i=-i),e.minutes>>14&1?n=1:e.minutes>>13&1&&(n=2);var a=e.minutes>719,s=function(){return _(a?"PM":"AM")},o=$("<div data-role='popup' id='timeInput' data-theme='a'><div data-role='header' data-theme='b'><h1>"+e.title+"</h1></div><div class='ui-content'>"+(e.helptext?"<p class='pad-top rain-desc center smaller'>"+e.helptext+"</p>":"")+"<span><fieldset class='ui-grid-"+(isMetric?"a":"b")+" incr'><div class='ui-block-a'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div><div class='ui-block-b'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div>"+(isMetric?"":"<div class='ui-block-c'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='plus' data-iconpos='bottom'></a></div>")+"</fieldset><div class='ui-grid-"+(isMetric?"a":"b")+" inputs'><div class='ui-block-a'><input data-wrapper-class='pad_buttons' class='hour dontPad' type='number' pattern='[0-9]*' value='"+(isMetric?pad((e.minutes/60>>0)%24)+"'>":(parseInt(e.minutes/60)%12==0?12:parseInt(e.minutes/60)%12)+"'>")+"</div><div class='ui-block-b'><input data-wrapper-class='pad_buttons' class='minute' type='number' pattern='[0-9]*' value='"+pad(e.minutes%60)+"'></div>"+(isMetric?"":"<div class='ui-block-c'><p class='center period'>"+s()+"</p></div>")+"</div><fieldset class='ui-grid-"+(isMetric?"a":"b")+" decr'><div class='ui-block-a'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div><div class='ui-block-b'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div>"+(isMetric?"":"<div class='ui-block-c'><a href='#' data-role='button' data-mini='true' data-corners='true' data-icon='minus' data-iconpos='bottom'></a></div>")+"</fieldset></span>"+(e.showSun?"<div class='ui-grid-a useSun'><div class='ui-block-a'><button class='ui-mini ui-btn rise "+(1===n?"ui-btn-active":"")+"'>"+_("Use Sunrise")+"</button></div><div class='ui-block-b'><button class='ui-mini ui-btn set "+(2===n?"ui-btn-active":"")+"'>"+_("Use Sunset")+"</button></div></div><div class='offsetInput'"+(0===n?" style='display: none;'":"")+"><h5 class='center tight'>"+_("Offset (minutes)")+"</h5><div class='input_with_buttons'><button class='decr ui-btn ui-btn-icon-notext ui-icon-carat-l btn-no-border'></button><input class='dontPad' type='number' pattern='[0-9]*' value='"+i+"'><button class='incr ui-btn ui-btn-icon-notext ui-icon-carat-r btn-no-border'></button></div></div>":"")+(e.showBack?"<button class='submit' data-theme='b'>"+_("Submit")+"</button>":"")+"</div></div>"),r=function(t,i){if(0===t||1===t){var n=l()+i*(0===t?60:1),r=o.find(".inputs input").eq(t),c=r.hasClass("hour"),d=parseInt(r.val());if(1===i){if(c&&(isMetric&&d>=24||!isMetric&&d>=12)&&(d=0),!c&&d>=59){d=-1;var h=o.find(".hour"),u=parseInt(h.val());isMetric||(12===u&&(u=0),h.val(u+1))}}else if(c&&d<=1)d=13;else if(!c&&d<=0)return;(!a&&n>719||a&&n<721||a&&n>1439||!a&&-1===i&&n<0)&&(a=!a,o.find(".period").text(s())),d=c?d+i:pad(d+i),r.val(d)}else 2===t&&(a=!a,o.find(".period").text(s()));e.incrementalUpdate&&e.callback(l())},l=function(){var e=o.find(".useSun").find("button.ui-btn-active");if(1===e.length){var t=0,i=parseInt(o.find(".offsetInput input").val());return e.hasClass("rise")?(i>=0?t=i:(t=-i,t|=4096),t|=16384):(i>=0?t=i:(t=-i,t|=4096),t|=8192),t}var n=parseInt(o.find(".hour").val());return isMetric||(a&&12!==n&&(n+=12),a||12!==n||(n=0)),60*n+parseInt(o.find(".minute").val())};if(o.find("button.submit").on("click",(function(){e.callback(l()),o.popup("destroy").remove()})),o.on("focus","input[type='number']",(function(e){e.target.value=""})).on("blur","input[type='number']",(function(e){var t=parseInt(e.target.value)||0;e.target.value=$(e.target).hasClass("dontPad")?t:pad(t)})),holdButton(o.find(".incr").children(),(function(e){var t=$(e.currentTarget),i=t.index();return 0===t.find(".ui-disabled").length&&r(i,1),!1})),holdButton(o.find(".decr").children(),(function(e){var t=$(e.currentTarget),i=t.index();return 0===t.find(".ui-disabled").length&&r(i,-1),!1})),e.showSun){o.find(".useSun").on("click","button",(function(){var t=$(this),i=o.find(".useSun").find("button").not(t),n=o.find(".offsetInput"),a=o.find("span").find(".ui-btn,input,p");i.removeClass("ui-btn-active"),t.hasClass("ui-btn-active")?(t.removeClass("ui-btn-active"),n.slideUp(),a.prop("disabled",!1).removeClass("ui-disabled")):(t.addClass("ui-btn-active"),n.slideDown(),a.prop("disabled",!0).addClass("ui-disabled")),e.incrementalUpdate&&e.callback(l())}));var c=o.find(".offsetInput").find("input"),d=function(t){var i=parseInt(c.val());-1===t&&-240===i||1===t&&240===i||(c.val(i+t),e.incrementalUpdate&&e.callback(l()))};c.on("focus",(function(){this.value=""})).on("blur",(function(){""===this.value?this.value="0":this.value>240?this.value="240":this.value<-240&&(this.value="-240")})),holdButton(o.find(".offsetInput").find(".incr"),(function(){return d(1),!1})),holdButton(o.find(".offsetInput").find(".decr"),(function(){return d(-1),!1}))}o.css("max-width","350px").one("popupafteropen",(function(){0!==n&&o.find("span").find(".ui-btn,input,p").prop("disabled",!0).addClass("ui-disabled")})).one("popupafterclose",(function(){e.incrementalUpdate&&e.callback(l())})),openPopup(o)}function showHelpText(e){e.stopImmediatePropagation();var t=$(this),i=t.data("helptext");return openPopup($("<div data-role='popup' data-theme='a'><p>"+i+"</p></div>"),{positionTo:t}),!1}function changePage(e,t){t=t||{},0!==e.indexOf("#")&&(e="#"+e),closePanel((function(){$.mobile.pageContainer.pagecontainer("change",e,t)}))}function openPopup(e,t){t=$.extend({},{history:!1,positionTo:"window",overlayTheme:"b"},t),$.mobile.pageContainer.append(e),e.one("popupafterclose",(function(){var t=$("#shift-sta").is(":checked");void 0!==t&&(popupData.shift=t),e.popup("destroy").remove()})).popup(t).enhanceWithin(),e.popup("open")}function closePanel(e){var t=$(".ui-panel-open");if(t.length>0)return t.one("panelclose",(function(){e()})),void t.panel("close");e()}function changeHeader(e){var t=$("#header");""===(e=$.extend(!0,{},{title:"",class:"",animate:!0,leftBtn:{icon:"",class:"",text:"",on:function(){}},rightBtn:{icon:"",class:"",text:"",on:function(){}}},e)).title&&""===e.class&&(e.class="logo");var i=$("<button data-icon='"+e.leftBtn.icon+"' "+(""===e.leftBtn.text?"data-iconpos='notext' ":"")+"class='ui-btn-left "+e.leftBtn.class+"'>"+e.leftBtn.text+"</button><h3 class='"+e.class+"'>"+e.title+"</h3><button data-icon='"+e.rightBtn.icon+"' "+(""===e.rightBtn.text?"data-iconpos='notext' ":"")+"class='ui-btn-right "+e.rightBtn.class+"'>"+e.rightBtn.text+"</button>"),n=e.animate?"fast":0;return t.children().stop().fadeOut(n,(function(){t.html(i).toolbar(t.hasClass("ui-header")?"refresh":null),t.find(".ui-btn-left").on("click",e.leftBtn.on),t.find(".ui-btn-right").on("click",e.rightBtn.on)})).fadeIn(n),i}function getPageTop(){var e=$.mobile.window;return{x:(e[0].innerWidth||e.width())/2+e.scrollLeft(),y:e.scrollTop()+22.5}}function showLoading(e){(e="string"==typeof e?$(e):e).off("click").html("<p class='ui-icon ui-icon-loading mini-load'></p>");var t=e.filter("#footer-running");1===t.length&&t.find(".mini-load").addClass("bottom")}function takePicture(e){"object"==typeof navigator.camera&&"function"==typeof navigator.camera.getPicture&&navigator.camera.getPicture(e,(function(){}),{quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,targetWidth:200,targetHeight:200})}function goHome(e){if("sprinklers"!==$(".ui-page-active").attr("id")){$.mobile.document.one("pageshow",(function(){delete $.mobile.navigate.history.getActive().transition}));var t={reverse:!0};!0===e&&(t={firstLoad:!0,showLoading:!1,transition:"none"}),changePage("#sprinklers",t)}}function goBack(){var e=$(".ui-page-active");if(1===e.length){var t="site-control"===(e=e.attr("id"))&&!isControllerConnected(),i=$(".ui-popup-active");if(i.length)i.find("[data-role='popup']").popup("close");else if("sprinklers"===e||"start"===e||t)try{navigator.app.exitApp()}catch(e){}else if(isChromeApp||"file:"===window.location.protocol){var n=$.mobile.navigate.history.getPrev().url;if("#"!==n.slice(0,1))return;changePage(n,{reverse:!0}),$.mobile.document.one("pagehide",(function(){$.mobile.navigate.history.activeIndex-=2}))}else pageHistoryCount>0&&pageHistoryCount--,0===pageHistoryCount?navigator.app.exitApp():(goingBack=!0,$.mobile.back())}}function checkChangesBeforeBack(){checkChanges(goBack)}function checkChanges(e){var t=$(".ui-page-active").find(".hasChanges");if(e=e||function(){},0!==t.length)return areYouSure(_("Do you want to save your changes?"),"",(function(){t.click(),t.hasClass("preventBack")||e()}),e),!1;e()}function showerror(e,t){t=t||2500,clearTimeout(errorTimeout),$.mobile.loading("show",{text:e,textVisible:!0,textonly:!0,theme:"b"}),errorTimeout=setTimeout((function(){$.mobile.loading("hide")}),t)}function loadLocalSettings(){storage.get("isMetric",(function(e){switch(e.isMetric){case"true":isMetric=!0;break;case"false":isMetric=!1}})),storage.get("groupView",(function(e){switch(e.groupView){case"true":groupView=!0;break;case"false":groupView=!1}}))}function fixInputClick(e){FastClick.notNeeded(document.body)||(e.find("input[type='checkbox']:not([data-role='flipswitch']),.ui-select > .ui-btn").addClass("needsclick"),e.find(".ui-collapsible-heading-toggle").on("click",(function(){var e=$(this);setTimeout((function(){e.removeClass("ui-btn-active")}),100)})))}function holdButton(e,t){var i;e.on(isTouchCapable?"tap":"click",t).on("taphold",(function(e){i=setInterval((function(){t(e)}),100)})).on("vmouseup vmouseout vmousecancel touchend",(function(){clearInterval(i)})).on("touchmove",(function(e){e.preventDefault()}))}function insertStyle(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)}function parseIntArray(e){for(var t=0;t<e.length;t++)e[t]=+e[t];return e}function getDurationText(e){return 65535===e?_("Sunset to Sunrise"):65534===e?_("Sunrise to Sunset"):dhms2str(sec2dhms(e))}function sec2hms(e){var t="",i=Math.max(0,parseInt(e/3600)%24),n=Math.max(0,parseInt(e/60)%60),a=e%60;return i&&(t+=pad(i)+":"),t+pad(n)+":"+pad(a)}function sec2dhms(e){var t=e<0?-1:1;return e=Math.abs(e),{days:Math.max(0,parseInt(e/86400))*t,hours:Math.max(0,parseInt(e%86400/3600))*t,minutes:Math.max(0,parseInt(e%86400%3600/60))*t,seconds:Math.max(0,parseInt(e%86400%3600%60))*t}}function dhms2str(e){var t="";return e.days&&(t+=e.days+_("d")+" "),e.hours&&(t+=e.hours+_("h")+" "),e.minutes&&(t+=e.minutes+_("m")+" "),e.seconds&&(t+=e.seconds+_("s")+" "),""===t&&(t="0"+_("s")),t.trim()}function dhms2sec(e){return parseInt(86400*e.days+3600*e.hours+60*e.minutes+e.seconds)}function isControllerConnected(){return!(!currIp&&!currToken||$.isEmptyObject(controller)||$.isEmptyObject(controller.options)||$.isEmptyObject(controller.programs)||$.isEmptyObject(controller.settings)||$.isEmptyObject(controller.status)||$.isEmptyObject(controller.stations))}function exportObj(e,t,i){if(t=encodeURIComponent(JSON.stringify(t)),isFileCapable)$(e).attr({href:"data:text/json;charset=utf-8,"+t,download:"backup-"+(new Date).toLocaleDateString().replace(/\//g,"-")+".json"});else{i=i||"OpenSprinkler Data Export on "+dateToString(new Date);var n="mailto:?subject="+encodeURIComponent(i)+"&body="+t;$(e).attr("href",n).on("click",(function(){window.open(n)}))}}function sortObj(e,t){var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(n);"function"==typeof t?i.sort(t):"value"===t?i.sort((function(t,i){var n=e[t],a=e[i];return n<a?-1:n>a?1:0})):i.sort();for(var a={},s=0;s<i.length;s++)a[i[s]]=e[i[s]];return a}function getDayName(e,t){var i=[_("Sunday"),_("Monday"),_("Tuesday"),_("Wednesday"),_("Thursday"),_("Friday"),_("Saturday")],n=[_("Sun"),_("Mon"),_("Tue"),_("Wed"),_("Thu"),_("Fri"),_("Sat")];return"short"===t?n[e.getDay()]:i[e.getDay()]}function pad(e){var t=String(e);return 1===t.length&&(t="0"+t),t}function htmlEscape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _(e){if("object"==typeof language&&language.hasOwnProperty(e)){var t=language[e];return t||e}return e}function setLang(){$("[data-translate]").text((function(){var e=$(this),t=e.data("translate");if(!e.is("input[type='submit']"))return _(t);e.val(_(t)),e.parent("div.ui-btn").length>0&&e.button("refresh")})),$(".ui-toolbar-back-btn").text(_("Back")),checkCurrLang()}function updateLang(e){language={},void 0!==e?(storage.set({lang:e}),currLang=e,"en"!==e?$.getJSON(getAppURLPath()+"locale/"+e+".js",(function(e){language=e.messages,setLang()})).fail(setLang):setLang()):storage.get("lang",(function(e){updateLang((e.lang||navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"en").substring(0,2))}))}function languageSelect(){$("#localization").popup("destroy").remove();var e="<div data-role='popup' data-theme='a' id='localization' data-corners='false'><ul data-inset='true' data-role='listview' id='lang' data-corners='false'><li data-role='list-divider' data-theme='b' class='center' data-translate='Localization'>"+_("Localization")+"</li>";return $.each({af:"Afrikaans",am:"Amharic",bg:"Bulgarian",zh:"Chinese",hr:"Croatian",cs:"Czech",nl:"Dutch",en:"English",et:"Estonian",pes:"Farsi",fr:"French",de:"German",el:"Greek",he:"Hebrew",hu:"Hungarian",is:"Icelandic",it:"Italian",lv:"Latvian",mn:"Mongolian",no:"Norwegian",pl:"Polish",pt:"Portuguese",ru:"Russian",sk:"Slovak",sl:"Slovenian",es:"Spanish",ta:"Tamil",th:"Thai",tr:"Turkish",sv:"Swedish",ro:"Romanian"},(function(t,i){e+="<li><a href='#' data-lang-code='"+t+"'><span data-translate='"+i+"'>"+_(i)+"</span> ("+t.toUpperCase()+")</a></li>"})),e+="</ul></div>",(e=$(e)).find("a").on("click",(function(){updateLang($(this).data("lang-code"))})),openPopup(e),!1}function checkCurrLang(){storage.get("lang",(function(e){var t=$("#localization");t.find("a").each((function(){var t=$(this);t.data("lang-code")===e.lang?t.removeClass("ui-icon-carat-r").addClass("ui-icon-check"):t.removeClass("ui-icon-check").addClass("ui-icon-carat-r")})),t.find("li.ui-last-child").removeClass("ui-last-child")}))}function getAppURLPath(){return currLocal?$.mobile.path.parseUrl($("head").find("script[src$='app.js']").attr("src")).hrefNoHash.slice(0,-9):""}function getUrlVars(e){for(var t,i={},n=e.slice(e.indexOf("?")+1).split("&"),a=0;a<n.length;a++)i[(t=n[a].split("="))[0]]=decodeURIComponent(t[1].replace(/\+/g,"%20"));return i}function escapeJSON(e){return JSON.stringify(e).replace(/\{|\}/g,"")}function unescapeJSON(e){return JSON.parse("{"+e+"}")}function isMD5(e){return/^[a-f0-9]{32}$/i.test(e)}function sortByStation(e,t){return e.station<t.station?-1:e.station>t.station?1:0}function minutesToTime(e){var t=e>719?"PM":"AM",i=parseInt(e/60)%12;return 0===i&&(i=12),isMetric?pad((e/60>>0)%24)+":"+pad(e%60):i+":"+pad(e%60)+" "+t}function getBitFromByte(e,t){return 0!=(e&1<<t)}function getTimezoneOffset(){var e=controller.options.tz-48,t=e>=0?1:-1;return(e=60*(Math.abs(e)/4>>0)+(Math.abs(e)%4*15/10>>0)+Math.abs(e)%4*15%10)*t}function humaniseDuration(e,t){var i,n=Math.floor((t-e)/1e3),a=n>0;if((n=Math.abs(n))<10)return _("Just Now");var s=Math.floor(n/31536e3);return i=_(s>=1?s>1?"years":"year":(s=Math.floor(n/2592e3))>=1?s>1?"months":"month":(s=Math.floor(n/86400))>=1?s>1?"days":"day":(s=Math.floor(n/3600))>=1?s>1?"hours":"hour":(s=Math.floor(n/60))>=1?s>1?"minutes":"minute":(s=n)>1?"seconds":"second"),a?_("In")+" "+s+" "+i:s+" "+i+" "+_("ago")}function dateToString(e,t,i){var n=[_("Sun"),_("Mon"),_("Tue"),_("Wed"),_("Thu"),_("Fri"),_("Sat")],a=[_("Jan"),_("Feb"),_("Mar"),_("Apr"),_("May"),_("Jun"),_("Jul"),_("Aug"),_("Sep"),_("Oct"),_("Nov"),_("Dec")];return 0===e.getTime()?"--":(!1!==t&&e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),"de"===currLang?pad(e.getDate())+"."+pad(e.getMonth()+1)+"."+e.getFullYear()+" "+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds()):1===i?a[e.getMonth()]+" "+pad(e.getDate())+", "+e.getFullYear()+" "+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds()):2===i?a[e.getMonth()]+" "+pad(e.getDate())+", "+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds()):n[e.getDay()]+", "+pad(e.getDate())+" "+a[e.getMonth()]+" "+e.getFullYear()+" "+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds()))}function transformKeys(e){if(checkOSVersion(219)){var t={};return Object.keys(e).forEach((function(i){var n=i.match(/^o(\d+)$/);n&&n[1]?t[Object.keys(keyIndex).find((function(e){return keyIndex[e]===parseInt(n[1],10)}))]=e[i]:t[i]=e[i]})),t}return e}function transformKeysinString(e){var t={};e.split("&").forEach((function(e){e=e.split("="),t[e[0]]=e[1]})),t=transformKeys(t);var i=[];return Object.keys(t).forEach((function(e){i.push(e+"="+t[e])})),e=i.join("&")}function Supported(){}function Station(){}$.fn.focusInput=function(){if(this.get(0).setSelectionRange)this.focus(),this.get(0).setSelectionRange(0,this.val().length);else if(this.get(0).createTextRange){var e=this.get(0).createTextRange();e.collapse(!0),e.moveEnd("character",this.val().length),e.moveStart("character",0),e.select()}return this},Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},Supported.master=function(e){switch(e){case MASTER_STATION_1:return!!controller.options.mas;case MASTER_STATION_2:return!!controller.options.mas2;default:return!1}},Supported.ignoreRain=function(){return"object"==typeof controller.stations.ignore_rain},Supported.ignoreSensor=function(e){switch(e){case IGNORE_SENSOR_1:return"object"==typeof controller.stations.ignore_sn1;case IGNORE_SENSOR_2:return"object"==typeof controller.stations.ignore_sn2;default:return!1}},Supported.actRelay=function(){return"object"==typeof controller.stations.act_relay},Supported.disabled=function(){return"object"==typeof controller.stations.stn_dis},Supported.sequential=function(){return!checkOSVersion(220)&&"object"==typeof controller.stations.stn_seq},Supported.special=function(){return"object"==typeof controller.stations.stn_spe},Supported.pausing=function(){return void 0!==controller.settings.pq},Supported.groups=function(){return getNumberProgramStatusOptions()>=4},Supported.dateRange=function(){return checkOSVersion(220)};var ProgramStatusOptions={PID:0,REM:1,START:2,GID:3};function getNumberProgramStatusOptions(){if(!(controller.settings.ps.length<=0))return controller.settings.ps[0].length}function StationAttribute(){}function CardList(){}function Card(){}function Groups(){}function StationQueue(){}function mapIndexToGIDValue(e){return e-NUM_SEQ_GROUPS?e:PARALLEL_GID_VALUE}function mapGIDValueToName(e){switch(e){case PARALLEL_GID_VALUE:return PARALLEL_GROUP_NAME;case MASTER_GID_VALUE:return MASTER_GROUP_NAME;default:return String.fromCharCode(65+e)}}function mapGIDNameToValue(e){switch(e){case PARALLEL_GROUP_NAME:return PARALLEL_GID_VALUE;case MASTER_GROUP_NAME:return MASTER_GID_VALUE;default:return e.charCodeAt(0)-65}}Station.getName=function(e){return controller.stations.snames[e]},Station.setName=function(e,t){controller.settings.snames[e]=t},Station.getPID=function(e){return controller.settings.ps[e][ProgramStatusOptions.PID]},Station.setPID=function(e,t){controller.settings.ps[e][ProgramStatusOptions.PID]=t},Station.getRemainingRuntime=function(e){return controller.settings.ps[e][ProgramStatusOptions.REM]},Station.setRemainingRuntime=function(e,t){controller.settings.ps[e][ProgramStatusOptions.REM]=t},Station.getStartTime=function(e){return controller.settings.ps[e][ProgramStatusOptions.START]},Station.setStartTime=function(e,t){controller.settings.ps[e][ProgramStatusOptions.START]=t},Station.getGIDValue=function(e){if(Supported.groups())return controller.settings.ps[e][ProgramStatusOptions.GID]},Station.setGIDValue=function(e,t){Supported.groups()&&(controller.settings.ps[e][ProgramStatusOptions.GID]=t)},Station.getStatus=function(e){return controller.status[e]},Station.setStatus=function(e,t){controller.status[e]=t},Station.isRunning=function(e){return Station.getStatus(e)>0},Station.isMaster=function(e){var t="number"==typeof controller.options.mas?controller.options.mas:0,i="number"==typeof controller.options.mas2?controller.options.mas2:0;return t===++e?1:i===e?2:0},Station.isSequential=function(e){return StationAttribute.getSequential(e)>0},Station.isSpecial=function(e){return StationAttribute.getSpecial(e)>0},Station.isDisabled=function(e){return StationAttribute.getDisabled(e)>0},StationAttribute.getMasterOperation=function(e,t){var i,n=e/8>>0;if(!Supported.master(t))return 0;switch(t){case MASTER_STATION_1:i=controller.stations.masop;break;case MASTER_STATION_2:i=controller.stations.masop2;break;default:return 0}return i[n]&1<<e%8?1:0},StationAttribute.getIgnoreRain=function(e){if(!Supported.ignoreRain())return 0;var t=e/8>>0;return controller.stations.ignore_rain[t]&1<<e%8?1:0},StationAttribute.getIgnoreSensor=function(e,t){var i,n=e/8>>0;if(!Supported.ignoreSensor(t))return 0;switch(t){case IGNORE_SENSOR_1:i=controller.stations.ignore_sn1;break;case IGNORE_SENSOR_2:i=controller.stations.ignore_sn2;break;default:return 0}return i[n]&1<<e%8?1:0},StationAttribute.getActRelay=function(e){if(!Supported.actRelay())return 0;var t=e/8>>0;return controller.stations.act_relay[t]&1<<e%8?1:0},StationAttribute.getDisabled=function(e){if(!Supported.disabled())return 0;var t=e/8>>0;return controller.stations.stn_dis[t]&1<<e%8?1:0},StationAttribute.getSequential=function(e){if(Supported.groups())return Station.getGIDValue!==PARALLEL_GID_VALUE?1:0;if(!Supported.sequential())return 0;var t=e/8>>0;return controller.stations.stn_seq[t]&1<<e%8?1:0},StationAttribute.getSpecial=function(e){if(!Supported.special())return 0;var t=e/8>>0;return controller.stations.stn_spe[t]&1<<e%8?1:0},CardList.getAllCards=function(e){return e.filter(".card")},CardList.getCardBySID=function(e,t){return e.filter("[data-station='"+t+"']")},CardList.getCardByIndex=function(e,t){return $(e[t])},Card.getSID=function(e){return e.data("station")},Card.getDivider=function(e){return e.find(".content-divider")},Card.getGroupLabel=function(e){if(Supported.groups())return e.find(".station-gid")},Card.setGroupLabel=function(e,t){if(Supported.groups()){var i=Card.getGroupLabel(e);i.removeClass("hidden"),i.text(t)}},Card.getGIDValue=function(e){if(!Supported.groups())return 0;var t=$(e.children()[0]).children().filter("span"),i=$(t[t.length-1]);return parseInt(i.attr("data-gid"))},Card.getGIDName=function(e){return mapGIDValueToName(Station.getGIDValue(Card.getSID(e)))},Card.isMasterStation=function(e){return Station.isMaster(Card.getSID(e))},Groups.numActiveStations=function(e){var t=$(".station-status.on, .station-status.wait").parents(".card"),i=0;return $.each(t,(function(n){var a=$(t[n]);Card.getGIDValue(a)!==e||Card.isMasterStation(a)||i++})),i},Groups.canShift=function(e){return Groups.numActiveStations(e)>1},StationQueue.isActive=function(){for(var e=0;e<controller.status.length;e++)if(Station.getStatus(e)>0&&Station.getPID(e)>0)return e;return-1},StationQueue.isPaused=function(){return controller.settings.pq},StationQueue.size=function(){return controller.settings.nq};var dateRegex=/[0-9]{1,2}[\/][0-9]{1,2}/g;function Program(){}function extractDateFromString(e){return e.match(dateRegex)}function isValidDateFormat(e){return null!==extractDateFromString(e)}function isValidDateRange(e,t){return isValidDateFormat(e)&&isValidDateFormat(t)}function encodeDate(e){var t=extractDateFromString(e);if(null===t)return-1;var i=t[0].split("/",2);return(parseInt(i[0])<<5)+parseInt(i[1])}Program.getDateRange=function(e){return controller.programs.pd[e][6]},Program.isDateRangeEnabled=function(e){return"new"===e?0:Program.getDateRange(e)[0]},Program.getDateRangeStart=function(e){return"new"===e?minEncodedDate:Program.getDateRange(e)[1]},Program.getDateRangeEnd=function(e){return"new"===e?maxEncodedDate:Program.getDateRange(e)[2]};var minEncodedDate=encodeDate("01/01"),maxEncodedDate=encodeDate("12/31");function decodeDate(e){var t,i,n=[];return minEncodedDate<=e&&e<=maxEncodedDate?(t=e>>5,i=e%32,n.push(t/10>>0,t%10,"/",i/10>>0,i%10),n.join("")):e<minEncodedDate?"01/01":"12/31"}var analogSensors={},progAdjusts={};function refresh(){setTimeout((function(){location.reload()}),100)}function updateProgramAdjustments(e){return e=e||function(){},sendToOS("/se?pw=","json").then((function(t){progAdjusts=t.progAdjust,e()}))}function updateAnalogSensor(e){return e=e||function(){},sendToOS("/sl?pw=","json").then((function(t){analogSensors=t.sensors,e()}))}function updateSensorShowArea(e){if(checkOSVersion(230)){var t,i,n=e.find("#os-sensor-show"),a="";for(t=0;t<progAdjusts.length;t++){var s=progAdjusts[t],o="";for(i=0;i<analogSensors.length;i++)analogSensors[i].nr===s.sensor&&(o=analogSensors[i].name);var r="?";s.prog>=1&&s.prog<=controller.programs.pd.length&&(r=readProgram(controller.programs.pd[s.prog-1]).name),a+="<div id='progAdjust-show-"+s.nr+"' class='ui-body ui-body-a center'>",a+="<label>"+o+" - "+r+": "+Math.round(100*s.current)+"%</label>",a+="</div>"}for(t=0;t<analogSensors.length;t++){var l=analogSensors[t];l.show&&(a+="<div id='sensor-show-"+l.nr+"' class='ui-body ui-body-a center'>",a+="<label>"+l.name+": "+Math.round(l.data)+l.unit+"</label>",a+="</div>")}for(;n.firstChild;)n.removeChild(n.firstChild);n.html(a)}}function toByteArray(e){for(var t=[],i=4;i--;)t.push(Number(e%256)),e/=256;return Uint8Array.from(t)}function intFromBytes(e){try{for(var t=0,i=e.length-1;i>=0;i--)t*=256,t+=parseInt(e[i]);return t}catch(e){return 0}}function showAdjustmentsEditor(e,t){sendToOS("/sh?pw=","json").then((function(i){var n,a=i.progTypes;$(".ui-popup-active").find("[data-role='popup']").popup("close");var s="<div data-role='popup' data-theme='a' id='progAdjustEditor'><div data-role='header' data-theme='b'><h1>"+_(e.nr>0?"Edit Program Adjustment":"New Program Adjustment")+"</h1></div><div class='ui-content'><p class='rain-desc center smaller'>"+_("Notice: If you want to combine multiple sensors, then build a sensor group. ")+_("See Help Documentation for details.")+"</p><div class='ui-field-contain'><label>"+_("Adjustment-Nr")+"</label><input class='nr' type='number' min='1' max='99999' value='"+e.nr+(e.nr>0?"' disabled='disabled'>":"'>")+"<div class='ui-field-contain'><label for='type' class='select'>"+_("Type")+"</label><select data-mini='true' id='type'>";for(n=0;n<a.length;n++)s+="<option "+(e.type===a[n].type?"selected":"")+" value='"+a[n].type+"'>"+a[n].name+"</option>";for(s+="</select></div><div class='ui-field-contain'><label for='sensor' class='select'>"+_("Sensor")+"</label><select data-mini='true' id='sensor'>",n=0;n<analogSensors.length;n++)s+="<option "+(e.sensor===analogSensors[n].nr?"selected":"")+" value='"+analogSensors[n].nr+"'>"+analogSensors[n].nr+" - "+analogSensors[n].name+"</option>";for(s+="</select></div><div class='ui-field-contain'><label for='prog' class='select'>"+_("Program to adjust")+"</label><select data-mini='true' id='prog'>",n=0;n<controller.programs.pd.length;n++){var o=readProgram(controller.programs.pd[n]).name,r=n+1;s+="<option "+(e.prog===r?"selected":"")+" value='"+r+"'>"+o+"</option>"}s+="</select></div><label>"+_("Factor 1 (adjustment for Min)")+"</label><input class='factor1' type='number' value='"+e.factor1+"'><label>"+_("Factor 2 (adjustment for Max)")+"</label><input class='factor2' type='number' value='"+e.factor2+"'><label>"+_("Min Sensor value")+"</label><input class='min' type='number' value='"+e.min+"'><label>"+_("Max Sensor value")+"</label><input class='max' type='number' value='"+e.max+"'></div><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>";var l=$(s),c=function(e,t){var i=l.find(".inputs input").eq(e),n=parseInt(i.val());-1===t&&0===n||1===t&&100===n||i.val(n+t)};l.find(".submit").on("click",(function(){var e={nr:parseInt(l.find(".nr").val()),type:parseInt(l.find("#type").val()),sensor:parseInt(l.find("#sensor").val()),prog:parseInt(l.find("#prog").val()),factor1:parseFloat(l.find(".factor1").val()),factor2:parseFloat(l.find(".factor2").val()),min:parseFloat(l.find(".min").val()),max:parseFloat(l.find(".max").val())};return t(e),l.popup("close"),!1})),l.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){var e=parseFloat(this.min),t=parseFloat(this.max);""===this.value&&(this.value="0"),(this.value<e||this.value>t)&&(this.value=this.value<e?e:t)})),holdButton(l.find(".incr").children(),(function(e){var t=$(e.currentTarget).index();return c(t,1),!1})),holdButton(l.find(".decr").children(),(function(e){var t=$(e.currentTarget).index();return c(t,-1),!1})),$("#sensorEditor").remove(),l.css("max-width","580px"),openPopup(l,{positionTo:"window"})}))}function isSmt100(e){return!!e&&(1===e||2===e)}function showSensorEditor(e,t){sendToOS("/sf?pw=","json").then((function(i){var n,a=i.sensorTypes;$(".ui-popup-active").find("[data-role='popup']").popup("close");var s="<div data-role='popup' data-theme='a' id='sensorEditor'><div data-role='header' data-theme='b'><h1>"+_(e.nr>0?"Edit Sensor":"New Sensor")+"</h1></div><div class='ui-content'><p class='rain-desc center smaller'>"+_("Edit Sensor Configuration. ")+_("See Help Documentation for details.")+"</p><div class='ui-field-contain'><label>"+_("Sensor-Nr")+"</label><input class='nr' type='number' min='1' max='99999' value='"+e.nr+(e.nr>0?"' disabled='disabled'>":"'>")+"<div class='ui-field-contain'><label for='type' class='select'>"+_("Type")+"</label><select data-mini='true' id='type'>";for(n=0;n<a.length;n++)s+="<option "+(e.type===a[n].type?"selected":"")+" value='"+a[n].type+"'>"+a[n].name+"</option>";s+="</select></div>",s+="<button data-mini='true' class='center-div' id='smt100id' style='display:"+(isSmt100(e.type)?"block":"none")+"'>"+_("Set SMT100 Modbus ID")+"</button>",s+="<label>"+_("Group")+"</label><input class='group' type='number'  min='0' max='99999' value='"+e.group+"'><label>"+_("Name")+"</label><input class='name' type='text'  value='"+e.name+"'><label>"+_("IP-Address")+"</label><input class='ip' type='text'  value='"+(e.ip?toByteArray(e.ip).join("."):"")+"'><label>"+_("Port")+"</label><input class='port' type='number' min='0' max='65535' value='"+e.port+"'><label>"+_("ID")+"</label><input class='id' type='number' min='0' max='65535' value='"+e.id+"'><label>"+_("Read Interval (s)")+"</label><input class='ri' type='number' min='1' max='999999' value='"+e.ri+"'><label for='enable'><input data-mini='true' id='enable' type='checkbox' "+(1===e.enable?"checked='checked'":"")+">"+_("Sensor Enabled")+"</label><label for='log'><input data-mini='true' id='log' type='checkbox' "+(1===e.log?"checked='checked'":"")+">"+_("Enable Data Logging")+"</label><label for='log'><input data-mini='true' id='show' type='checkbox' "+(1===e.show?"checked='checked'":"")+">"+_("Show on Mainpage")+"</label></div><button class='submit' data-theme='b'>"+_("Submit")+"</button></div></div>";var o=$(s),r=function(e,t){var i=o.find(".inputs input").eq(e),n=parseInt(i.val());-1===t&&0===n||1===t&&100===n||i.val(n+t)};o.find("#smt100id").on("click",(function(){var e=parseInt(o.find(".nr").val()),t=parseInt(o.find(".id").val());o.popup("close"),areYouSure(_("This function sets the Modbus ID for one SMT100 sensor. Disconnect all other sensors on this Modbus port. Please confirm."),"new id="+t,(function(){sendToOS("/sa?pw=&nr="+e+"&id="+t).done((function(){window.alert("SMT100 id assigned!"),updateAnalogSensor(refresh)}))}))})),o.find("#type").change((function(){var e=parseInt(o.find("#type").val());document.getElementById("smt100id").style.display=isSmt100(e)?"block":"none"})),o.find(".submit").on("click",(function(){if(!e.nr)for(var i=parseInt(o.find(".nr").val()),n=0;n<analogSensors.length;n++)if(analogSensors[n].nr===i)return void window.alert(_("Sensor-Number exists!"));var a={nr:parseInt(o.find(".nr").val()),type:parseInt(o.find("#type").val()),group:parseInt(o.find(".group").val()),name:o.find(".name").val(),ip:intFromBytes(o.find(".ip").val().split(".")),port:parseInt(o.find(".port").val()),id:parseInt(o.find(".id").val()),ri:parseInt(o.find(".ri").val()),enable:o.find("#enable").is(":checked")?1:0,log:o.find("#log").is(":checked")?1:0,show:o.find("#show").is(":checked")?1:0};return t(a),o.popup("close"),!1})),o.on("focus","input[type='number']",(function(){this.value=""})).on("blur","input[type='number']",(function(){var e=parseFloat(this.min),t=parseFloat(this.max);""===this.value&&(this.value="0"),(this.value<e||this.value>t)&&(this.value=this.value<e?e:t)})),holdButton(o.find(".incr").children(),(function(e){var t=$(e.currentTarget).index();return r(t,1),!1})),holdButton(o.find(".decr").children(),(function(e){var t=$(e.currentTarget).index();return r(t,-1),!1})),$("#sensorEditor").remove(),o.css("max-width","580px"),openPopup(o,{positionTo:"window"})}))}var showAnalogSensorConfig=function(){var e=$("<div data-role='page' id='analogsensorconfig'><div class='ui-content' role='main' id='analogsensorlist'></div></div>");function t(){var i=$(buildSensorConfig());i.find("#delete-sensor").on("click",(function(){var e=$(this),i=e.attr("value"),n=e.attr("row");areYouSure(_("Are you sure you want to delete the sensor?"),i,(function(){sendToOS("/sc?pw=&nr="+i+"&type=0").done((function(){analogSensors.splice(n,1),t()}))}))})),i.find("#edit-sensor").on("click",(function(){var e=$(this).attr("row"),i=analogSensors[e];showSensorEditor(i,(function(n){n.nativedata=i.nativedata,n.data=i.data,n.last=i.last,sendToOS("/sc?pw=&nr="+n.nr+"&type="+n.type+"&group="+n.group+"&name="+n.name+"&ip="+n.ip+"&port="+n.port+"&id="+n.id+"&ri="+n.ri+"&enable="+n.enable+"&log="+n.log+"&show="+n.show).done((function(){analogSensors[e]=n,t()}))}))})),i.find("#add-sensor").on("click",(function(){showSensorEditor({name:"new sensor",type:1,ri:60,enable:1,log:1},(function(e){sendToOS("/sc?pw=&nr="+e.nr+"&type="+e.type+"&group="+e.group+"&name="+e.name+"&ip="+e.ip+"&port="+e.port+"&id="+e.id+"&ri="+e.ri+"&enable="+e.enable+"&log="+e.log+"&show="+e.show).done((function(){analogSensors.push(e),t()}))}))})),i.find("#refresh-sensor").on("click",(function(){updateProgramAdjustments((function(){updateAnalogSensor((function(){t()}))}))})),i.find("#delete-progadjust").on("click",(function(){var e=$(this),i=e.attr("value");row=e.attr("row"),areYouSure(_("Are you sure you want to delete this program adjustment?"),i,(function(){sendToOS("/sb?pw=&nr="+i+"&type=0").done((function(){progAdjusts.splice(row,1),t()}))}))})),i.find("#edit-progadjust").on("click",(function(){var e=$(this).attr("row");showAdjustmentsEditor(progAdjusts[e],(function(i){sendToOS("/sb?pw=&nr="+i.nr+"&type="+i.type+"&sensor="+i.sensor+"&prog="+i.prog+"&factor1="+i.factor1+"&factor2="+i.factor2+"&min="+i.min+"&max="+i.max).done((function(){progAdjusts[e]=i,t()}))}))})),i.find("#add-progadjust").on("click",(function(){showAdjustmentsEditor({type:1},(function(e){sendToOS("/sb?pw=&nr="+e.nr+"&type="+e.type+"&sensor="+e.sensor+"&prog="+e.prog+"&factor1="+e.factor1+"&factor2="+e.factor2+"&min="+e.min+"&max="+e.max).done((function(){progAdjusts.push(e),t()}))}))})),i.find("#clear-log").on("click",(function(){areYouSure(_("Are you sure you want to clear the sensor log?"),"",(function(){sendToOS("/sn?pw=&").done((function(e){window.alert(_("Log cleared: "+e.deleted+_(" records"))),t()}))}))})),i.find("#download-log").on("click",(function(){var e=document.createElement("a");e.setAttribute("download","sensorlog-"+(new Date).toLocaleDateString().replace(/\//g,"-")+".csv"),dest="/so?pw=&csv=1",dest=dest.replace("pw=","pw="+encodeURIComponent(currPass)),e.href=currToken?"https://cloud.openthings.io/forward/v1/"+currToken+dest:currPrefix+currIp+dest,alert(e.href),document.body.appendChild(e),e.click()})),i.find("#show-log").on("click",(function(){return changePage("#analogsensorchart"),!1})),e.find("#analogsensorlist").html(i.enhanceWithin())}return e.on("sensorrefresh",t).on("pagehide",(function(){e.detach()})),function(){changeHeader({title:_("Analog Sensor Config"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack}}),t(),$("#analogsensorconfig").remove(),$.mobile.pageContainer.append(e)}}();function buildSensorConfig(){var e='<table id=\'analog_sensor_table\'><tr style=\'width:100%;vertical-align: top;\'><tr><th>Nr</th><th class="hidecol">Type</th><th class="hidecol">Group</th><th>Name</th><th class="hidecol">IP</th><th class="hidecol">Port</th><th class="hidecol">ID</th><th class="hidecol">Read<br>Interval</th><th>Data</th><th>En</th><th class="hidecol">Log</th><th class="hidecol">Show</th><th class="hidecol2">Last</th></tr>',t='<img src="'+getAppURLPath()+'img/check-black.png">',i=0;return $.each(analogSensors,(function(n,a){var s=$("<tr>").append($("<td>").text(a.nr),$('<td class="hidecol">').text(a.type),$('<td class="hidecol">').text(a.group?a.group:""),$("<td>").text(a.name),$('<td class="hidecol">').text(a.ip?toByteArray(a.ip).join("."):""),$('<td class="hidecol">').text(a.port?a.port:""),$('<td class="hidecol">').text(a.type<1e3?a.id:""),$('<td class="hidecol">').text(a.ri),$("<td>").text(Math.round(a.data)+a.unit),"<td>"+(a.enable?t:"")+"</td>",'<td class="hidecol">'+(a.log?t:"")+"</td>",'<td class="hidecol">'+(a.show?t:"")+"</td>",$('<td class="hidecol2">').text(void 0===a.data_ok||a.data_ok?dateToString(new Date(1e3*a.last)):"Error",null,2),"<td><button data-mini='true' class='center-div' id='edit-sensor' value='"+a.nr+"' row='"+i+"'>"+_("Edit")+"</button></td>","<td><button data-mini='true' class='center-div' id='delete-sensor' value='"+a.nr+"' row='"+i+"'>"+_("Delete")+"</button></td>");e+=s.wrap("<p>").html()+"</tr>",i++})),e+="</table>",e+="<p><button data-mini='true' class='center-div' id='add-sensor' value='1'>"+_("Add Sensor")+"</button></p>",e+="<p><button data-mini='true' class='center-div' id='refresh-sensor' value='2'>"+_("Refresh Sensordata")+"</button></p>",e+='<table id=\'progadjusttable\'><tr style=\'width:100%;vertical-align: top;\'><tr><th>Nr</th><th class="hidecol">Type</th><th>S.Nr</th><th>Name</th><th class="hidecol2">Program-Nr</th><th>Program</th><th class="hidecol2">Factor 1</th><th class="hidecol2">Factor 2</th><th class="hidecol2">Min Value</th><th class="hidecol2">Max Value</th><th class="hidecol">Current</th></tr>',i=0,$.each(progAdjusts,(function(t,n){for(var a="",s=0;s<analogSensors.length;s++)analogSensors[s].nr===n.sensor&&(a=analogSensors[s].name);var o="?";n.prog>=1&&n.prog<=controller.programs.pd.length&&(o=readProgram(controller.programs.pd[n.prog-1]).name);var r=$("<tr>").append($("<td>").text(n.nr),$('<td class="hidecol">').text(n.type),$("<td>").text(n.sensor),$("<td>").text(a),$('<td class="hidecol2">').text(n.prog),$("<td>").text(o),$('<td class="hidecol2">').text(n.factor1),$('<td class="hidecol2">').text(n.factor2),$('<td class="hidecol2">').text(n.min),$('<td class="hidecol2">').text(n.max),$('<td class="hidecol">').text(Math.round(100*n.current)+"%"),"<td><button data-mini='true' class='center-div' id='edit-progadjust' value='"+n.nr+"' row='"+i+"'>"+_("Edit")+"</button></td>","<td><button data-mini='true' class='center-div' id='delete-progadjust' value='"+n.nr+"' row='"+i+"'>"+_("Delete")+"</button></td>");e+=r.wrap("<p>").html()+"</tr>",i++})),e+="</table>",e+="<p><button data-mini='true' class='center-div' id='add-progadjust' value='3'>"+_("Add program adjustment")+"</button></p>",e+="<table id='logfunctions'><tr style='width:100%;vertical-align: top;'><tr><th><button data-mini='true' class='center-div' id='clear-log'>"+_("Clear Log")+"</button></th><th><button data-mini='true' class='center-div' id='download-log'>"+_("Download Log")+"</button></th><th><a href='#analogsensorchart'><button data-mini='true' class='center-div' id='show-log'>"+_("Show Log")+"</button></a></th></tr></table>"}var showAnalogSensorCharts=function(){var e,t,i,n=$("<div data-role='page' id='analogsensorchart'><div class='ui-content' role='main' style='width: 95%'><div id='myChart1'></div><div id='myChart2'></div><div id='myChart3'></div><div id='myChart4'></div><div id='myChart5'></div><div id='myChartW1'></div><div id='myChartW2'></div><div id='myChartW3'></div><div id='myChartW4'></div><div id='myChartW5'></div><div id='myChartM1'></div><div id='myChartM2'></div><div id='myChartM3'></div><div id='myChartM4'></div><div id='myChartM5'></div></div></div>");return function(){e=new Array(6),t=new Array(6),i=new Array(6),n.one("pagehide",(function(){n.detach()})),changeHeader({title:_("Analog sensor log"),leftBtn:{icon:"carat-l",text:_("Back"),class:"ui-toolbar-back-btn",on:goBack}}),$("#analogsensorchart").remove(),$.mobile.pageContainer.append(n),sendToOS("/so?pw=&lasthours=24&csv=2","text").then((function(n){build_graph("#myChart",e,n,_("last 24h"),"HH:mm"),sendToOS("/so?pw=&csv=2&log=1","text").then((function(e){build_graph("#myChartW",t,e,_("last weeks"),"dd.MM.yyyy"),sendToOS("/so?pw=&csv=2&log=2","text").then((function(e){build_graph("#myChartM",i,e,_("last months"),"MM.yyyy")}))}))}))}}();function build_graph(e,t,i,n,a){let s=i.split(/(?:\r\n|\n)+/).filter((function(e){return 0!=e.length}));for(var o=0;o<analogSensors.length;o++)if(analogSensors[o].log){for(var r=analogSensors[o].nr,l=[],c=analogSensors[o].unitid,d=1;d<s.length;d++){let e=s[d].split(";");e.length>=3&&Number(e[0])===r&&l.push({x:1e3*Number(e[1]),y:Number(e[2])})}var h={name:analogSensors[o].name,data:l};if(t[c])t[c].appendSeries(h);else{var u,p;switch(c){case 1:u=_("% soil moisture"),p=_("Soil moisture ")+n;break;case 2:u=_("degree celsius temperature"),p=_("Temperature ")+n;break;case 3:u=_("degree fahrenheit temperature"),p=_("Temperature ")+n;break;case 4:u=_("Volt"),p=_("Voltage ")+n;break;default:u="",p=n}var f={chart:{type:"line",stacked:!1,width:"100%"},dataLabels:{enabled:!1},series:[h],stroke:{curve:"smooth",width:4},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!0}}},plotOptions:{bar:{columnWidth:"20%"}},tooltip:{x:{format:"dd.MM.yyyy HH:mm:ss"}},xaxis:{type:"datetime",labels:{datetimeUTC:!0,format:a}},yaxis:{title:{text:u},decimalsInFloat:0,forceNiceScale:!0},title:{text:p}};t[c]=new ApexCharts(document.querySelector(e+c),f),t[c].render()}}for(d=1;d<6;d++)if(!t[d]){var g=document.querySelector(e+d);g&&g.parentElement.removeChild(g)}}!function(e,t,i){"function"==typeof define&&define.amd?define(["jquery"],(function(n){return i(n,e,t),n.mobile})):i(e.jQuery,e,t)}(this,document,(function(e,t,i){!function(e){e.mobile={}}(e),function(e,t){function n(t,i){var n,s,o,r=t.nodeName.toLowerCase();return"area"===r?(s=(n=t.parentNode).name,!(!t.href||!s||"map"!==n.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+s+"]")[0])&&a(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r&&t.href||i)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}var s=0,o=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"c0ab71056b936627e8a7821f03c044aec6280a40",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each((function(){var t=this;setTimeout((function(){e(t).focus(),n&&n.call(t)}),i)})):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(this[0].ownerDocument||i):t},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++s)}))},removeUniqueId:function(){return this.each((function(){o.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(i){return!!e.data(i,t)}})):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),a=isNaN(i);return(a||i>=0)&&n(t,!a)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(i,n){function a(t,i,n,a){return e.each(s,(function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)})),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each((function(){e(this).css(o,a(this,i)+"px")}))},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each((function(){e(this).css(o,a(this,t,!0,i)+"px")}))}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in i.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var a,s,o=e(this[0]);o.length&&o[0]!==i;){if(("absolute"===(a=o.css("position"))||"relative"===a||"fixed"===a)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0}}),e.ui.plugin={add:function(t,i,n){var a,s=e.ui[t].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(e,t,i,n){var a,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;a<s.length;a++)e.options[s[a][0]]&&s[a][1].apply(e.element,i)}}}(e),function(e,t){e.extend(e.mobile,{window:e(t),document:e(i),keyCode:e.ui.keyCode,behaviors:{},silentScroll:function(i){"number"!==e.type(i)&&(i=e.mobile.defaultHomeScroll),e.event.special.scrollstart.enabled=!1,setTimeout((function(){t.scrollTo(0,i),e.mobile.document.trigger("silentscroll",{x:0,y:i})}),20),setTimeout((function(){e.event.special.scrollstart.enabled=!0}),150)},getClosestBaseUrl:function(t){var i=e(t).closest(".ui-page").jqmData("url"),n=e.mobile.path.documentBase.hrefNoHash;return e.mobile.dynamicBaseEnabled&&i&&e.mobile.path.isPath(i)||(i=n),e.mobile.path.makeUrlAbsolute(i,n)},removeActiveLinkClass:function(t){!e.mobile.activeClickedLink||e.mobile.activeClickedLink.closest("."+e.mobile.activePageClass).length&&!t||e.mobile.activeClickedLink.removeClass(e.mobile.activeBtnClass),e.mobile.activeClickedLink=null},getInheritedTheme:function(e,t){for(var i,n,a=e[0],s="",o=/ui-(bar|body|overlay)-([a-z])\b/;a&&!((i=a.className||"")&&(n=o.exec(i))&&(s=n[2]));)a=a.parentNode;return s||t||"a"},enhanceable:function(e){return this.haveParents(e,"enhance")},hijackable:function(e){return this.haveParents(e,"ajax")},haveParents:function(t,i){if(!e.mobile.ignoreContentEnabled)return t;var n,a,s,o,r=t.length,l=e();for(o=0;r>o;o++){for(a=t.eq(o),s=!1,n=t[o];n;){if("false"===(n.getAttribute?n.getAttribute("data-"+e.mobile.ns+i):"")){s=!0;break}n=n.parentNode}s||(l=l.add(a))}return l},getScreenHeight:function(){return t.innerHeight||e.mobile.window.height()},resetActivePageHeight:function(t){var i=e("."+e.mobile.activePageClass),n=i.height(),a=i.outerHeight(!0);t=function(t,i){var n=t.parent(),a=[],s=function(){var t=e(this),i=e.mobile.toolbar&&t.data("mobile-toolbar")?t.toolbar("option"):{position:t.attr("data-"+e.mobile.ns+"position"),updatePagePadding:!1!==t.attr("data-"+e.mobile.ns+"update-page-padding")};return!("fixed"===i.position&&!0===i.updatePagePadding)},o=n.children(":jqmData(role='header')").filter(s),r=t.children(":jqmData(role='header')"),l=n.children(":jqmData(role='footer')").filter(s),c=t.children(":jqmData(role='footer')");return 0===r.length&&o.length>0&&(a=a.concat(o.toArray())),0===c.length&&l.length>0&&(a=a.concat(l.toArray())),e.each(a,(function(t,n){i-=e(n).outerHeight()})),Math.max(0,i)}(i,"number"==typeof t?t:e.mobile.getScreenHeight()),i.css("min-height",""),i.height()<t&&i.css("min-height",t-(a-n))},loading:function(){var t=this.loading._widget||e(e.mobile.loader.prototype.defaultHtml).loader(),i=t.loader.apply(t,arguments);return this.loading._widget=t,i}}),e.addDependents=function(t,i){var n=e(t),a=n.jqmData("dependents")||e();n.jqmData("dependents",e(a).add(i))},e.fn.extend({removeWithDependents:function(){e.removeWithDependents(this)},enhanceWithin:function(){var t,i={},n=e.mobile.page.prototype.keepNativeSelector(),a=this;for(t in e.mobile.nojs&&e.mobile.nojs(this),e.mobile.links&&e.mobile.links(this),e.mobile.degradeInputsWithin&&e.mobile.degradeInputsWithin(this),e.fn.buttonMarkup&&this.find(e.fn.buttonMarkup.initSelector).not(n).jqmEnhanceable().buttonMarkup(),e.fn.fieldcontain&&this.find(":jqmData(role='fieldcontain')").not(n).jqmEnhanceable().fieldcontain(),e.each(e.mobile.widgets,(function(t,s){if(s.initSelector){var o=e.mobile.enhanceable(a.find(s.initSelector));o.length>0&&(o=o.not(n)),o.length>0&&(i[s.prototype.widgetName]=o)}})),i)i[t][t]();return this},addDependents:function(t){e.addDependents(this,t)},getEncodedText:function(){return e("<a>").text(this.text()).html()},jqmEnhanceable:function(){return e.mobile.enhanceable(this)},jqmHijackable:function(){return e.mobile.hijackable(this)}}),e.removeWithDependents=function(t){var i=e(t);(i.jqmData("dependents")||e()).remove(),i.remove()},e.addDependents=function(t,i){var n=e(t),a=n.jqmData("dependents")||e();n.jqmData("dependents",e(a).add(i))},e.find.matches=function(t,i){return e.find(t,null,null,i)},e.find.matchesSelector=function(t,i){return e.find(i,null,null,[t]).length>0}}(e,this),function(e){e.extend(e.mobile,{version:"1.4.5",subPageUrlKey:"ui-page",hideUrlBar:!0,keepNative:":jqmData(role='none'), :jqmData(role='nojs')",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:0,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"a",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,buttonMarkup:{hoverDelay:200},dynamicBaseEnabled:!0,pageContainer:e(),allowCrossDomainPages:!1,dialogHashKey:"&ui-state=dialog"})}(e),function(e,t){var i=0,n=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(e){}a(t)},e.widget=function(t,i,n){var a,s,o,r,l={},c=t.split(".")[0];return t=t.split(".")[1],a=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[c]=e[c]||{},s=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(r=new i).options=e.widget.extend({},r.options),e.each(n,(function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},a=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=a,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(l[t]=n)})),o.prototype=e.widget.extend(r,{widgetEventPrefix:s&&r.widgetEventPrefix||t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:a}),s?(e.each(s._childConstructors,(function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,o,i._proto)})),delete s._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(i){for(var a,s,o=n.call(arguments,1),r=0,l=o.length;l>r;r++)for(a in o[r])s=o[r][a],o[r].hasOwnProperty(a)&&s!==t&&(i[a]=e.isPlainObject(s)?e.isPlainObject(i[a])?e.widget.extend({},i[a],s):e.widget.extend({},s):s);return i},e.widget.bridge=function(i,a){var s=a.prototype.widgetFullName||i;e.fn[i]=function(o){var r="string"==typeof o,l=n.call(arguments,1),c=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,this.each(r?function(){var n,a=e.data(this,s);return"instance"===o?(c=a,!1):a?e.isFunction(a[o])&&"_"!==o.charAt(0)?(n=a[o].apply(a,l))!==a&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}:function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new a(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var a,s,o,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(s=r[i]=e.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)s[a[o]]=s[a[o]]||{},s=s[a[o]];if(i=a.pop(),n===t)return s[i]===t?null:s[i];s[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,n){var a,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=a=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,a=this.widget()),e.each(n,(function(n,o){function r(){return t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,d=l[2];d?a.delegate(d,c,r):i.bind(c,r)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var i=this;return setTimeout((function(){return("string"==typeof e?i[e]:e).apply(i,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,s,o=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(a in s)a in i||(i[a]=s[a]);return this.element.trigger(i,n),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,i){e.Widget.prototype["_"+t]=function(n,a,s){"string"==typeof a&&(a={effect:a});var o,r=a?!0===a||"number"==typeof a?i:a.effect||i:t;"number"==typeof(a=a||{})&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=s,a.delay&&n.delay(a.delay),o&&e.effects&&e.effects.effect[r]?n[t](a):r!==t&&n[r]?n[r](a.duration,a.easing,s):n.queue((function(i){e(this)[t](),s&&s.call(n[0]),i()}))}}))}(e),function(e,t,i){var n={},a=e.find,s=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,o=/:jqmData\(([^)]*)\)/g;e.extend(e.mobile,{ns:"",getAttribute:function(t,i){var n;(t=t.jquery?t[0]:t)&&t.getAttribute&&(n=t.getAttribute("data-"+e.mobile.ns+i));try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:s.test(n)?JSON.parse(n):n)}catch(e){}return n},nsNormalizeDict:n,nsNormalize:function(t){return n[t]||(n[t]=e.camelCase(e.mobile.ns+t))},closestPageData:function(e){return e.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")}}),e.fn.jqmData=function(t,n){var a;return void 0!==t&&(t&&(t=e.mobile.nsNormalize(t)),a=arguments.length<2||n===i?this.data(t):this.data(t,n)),a},e.jqmData=function(t,i,n){var a;return void 0!==i&&(a=e.data(t,i?e.mobile.nsNormalize(i):i,n)),a},e.fn.jqmRemoveData=function(t){return this.removeData(e.mobile.nsNormalize(t))},e.jqmRemoveData=function(t,i){return e.removeData(t,e.mobile.nsNormalize(i))},e.find=function(t,i,n,s){return t.indexOf(":jqmData")>-1&&(t=t.replace(o,"[data-"+(e.mobile.ns||"")+"$1]")),a.call(this,t,i,n,s)},e.extend(e.find,a)}(e),function(e){var t=/[A-Z]/g,i=function(e){return"-"+e.toLowerCase()};e.extend(e.Widget.prototype,{_getCreateOptions:function(){var n,a,s=this.element[0],o={};if(!e.mobile.getAttribute(s,"defaults"))for(n in this.options)null!=(a=e.mobile.getAttribute(s,n.replace(t,i)))&&(o[n]=a);return o}}),e.mobile.widget=e.Widget}(e),function(e){var t="ui-loader",i=e("html");e.widget("mobile.loader",{options:{theme:"a",textVisible:!1,html:"",text:"loading"},defaultHtml:"<div class='"+t+"'><span class='ui-icon-loading'></span><h1></h1></div>",fakeFixLoader:function(){var t=e("."+e.mobile.activeBtnClass).first();this.element.css({top:e.support.scrollTop&&this.window.scrollTop()+this.window.height()/2||t.length&&t.offset().top||100})},checkLoaderPosition:function(){var t=this.element.offset(),i=this.window.scrollTop(),n=e.mobile.getScreenHeight();(t.top<i||t.top-i>n)&&(this.element.addClass("ui-loader-fakefix"),this.fakeFixLoader(),this.window.unbind("scroll",this.checkLoaderPosition).bind("scroll",e.proxy(this.fakeFixLoader,this)))},resetHtml:function(){this.element.html(e(this.defaultHtml).html())},show:function(n,a,s){var o,r,l;this.resetHtml(),"object"===e.type(n)?n=(l=e.extend({},this.options,n)).theme:(l=this.options,n=n||l.theme),r=a||(!1===l.text?"":l.text),i.addClass("ui-loading"),o=l.textVisible,this.element.attr("class",t+" ui-corner-all ui-body-"+n+" ui-loader-"+(o||a||n.text?"verbose":"default")+(l.textonly||s?" ui-loader-textonly":"")),l.html?this.element.html(l.html):this.element.find("h1").text(r),this.element.appendTo(e(e.mobile.pagecontainer?":mobile-pagecontainer":"body")),this.checkLoaderPosition(),this.window.bind("scroll",e.proxy(this.checkLoaderPosition,this))},hide:function(){i.removeClass("ui-loading"),this.options.text&&this.element.removeClass("ui-loader-fakefix"),this.window.unbind("scroll",this.fakeFixLoader),this.window.unbind("scroll",this.checkLoaderPosition)}})}(e),function(e,t,n){function a(e){return"#"+(e=e||location.href).replace(/^[^#]*#?(.*)$/,"$1")}var s,o="hashchange",r=i,l=e.event.special,c=r.documentMode,d="on"+o in t&&(c===n||c>7);e.fn[o]=function(e){return e?this.bind(o,e):this.trigger(o)},e.fn[o].delay=50,l[o]=e.extend(l[o],{setup:function(){return!d&&void e(s.start)},teardown:function(){return!d&&void e(s.stop)}}),s=function(){function i(){var n=a(),r=p(c);n!==c?(u(c=n,r),e(t).trigger(o)):r!==c&&(location.href=location.href.replace(/#.*/,"")+r),s=setTimeout(i,e.fn[o].delay)}var s,l={},c=a(),h=function(e){return e},u=h,p=h;return l.start=function(){s||i()},l.stop=function(){s&&clearTimeout(s),s=n},t.attachEvent&&!t.addEventListener&&!d&&function(){var t,n;l.start=function(){t||(n=(n=e.fn[o].src)&&n+a(),t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",(function(){n||u(a()),i()})).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,r.onpropertychange=function(){try{"title"===event.propertyName&&(t.document.title=r.title)}catch(e){}})},l.stop=h,p=function(){return a(t.location.href)},u=function(i,n){var a=t.document,s=e.fn[o].domain;i!==n&&(a.title=r.title,a.open(),s&&a.write('<script>document.domain="'+s+'"<\/script>'),a.close(),t.location.hash=i)}}(),l}()}(e,this),function(e){t.matchMedia=t.matchMedia||function(e){var t,i=e.documentElement,n=i.firstElementChild||i.firstChild,a=e.createElement("body"),s=e.createElement("div");return s.id="mq-test-1",s.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(s),function(e){return s.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(a,n),t=42===s.offsetWidth,i.removeChild(a),{matches:t,media:e}}}(i),e.mobile.media=function(e){return t.matchMedia(e).matches}}(e),function(e){var t={touch:"ontouchend"in i};e.mobile.support=e.mobile.support||{},e.extend(e.support,t),e.extend(e.mobile.support,t)}(e),function(e){e.extend(e.support,{orientation:"orientation"in t&&"onorientationchange"in t})}(e),function(e,n){function a(e){var t,i=e.charAt(0).toUpperCase()+e.substr(1),a=(e+" "+l.join(i+" ")+i).split(" ");for(t in a)if(r[a[t]]!==n)return!0}var s,o=e("<body>").prependTo("html"),r=o[0].style,l=["Webkit","Moz","O"],c="palmGetResource"in t,d=t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini),h=t.blackberry&&!a("-webkit-transform");e.extend(e.mobile,{browser:{}}),e.mobile.browser.oldIE=function(){var e=3,t=i.createElement("div"),n=t.all||[];do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><br><![endif]--\x3e"}while(n[0]);return e>4?e:!e}(),e.extend(e.support,{pushState:"pushState"in history&&"replaceState"in history&&!(t.navigator.userAgent.indexOf("Firefox")>=0&&t.top!==t)&&-1===t.navigator.userAgent.search(/CriOS/),mediaquery:e.mobile.media("only all"),cssPseudoElement:!!a("content"),touchOverflow:!!a("overflowScrolling"),cssTransform3d:function(){var a,s,r,c="transform-3d",d=e.mobile.media("(-"+l.join("-"+c+"),(-")+"-"+c+"),("+c+")");if(d)return!!d;for(r in a=i.createElement("div"),s={MozTransform:"-moz-transform",transform:"transform"},o.append(a),s)a.style[r]!==n&&(a.style[r]="translate3d( 100px, 1px, 1px )",d=t.getComputedStyle(a).getPropertyValue(s[r]));return!!d&&"none"!==d}(),boxShadow:!!a("boxShadow")&&!h,fixedPosition:function(){var e=t,i=navigator.userAgent,n=navigator.platform,a=i.match(/AppleWebKit\/([0-9]+)/),s=!!a&&a[1],o=i.match(/Fennec\/([0-9]+)/),r=!!o&&o[1],l=i.match(/Opera Mobi\/([0-9]+)/),c=!!l&&l[1];return!((n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1||n.indexOf("iPod")>-1)&&s&&534>s||e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini)||l&&7458>c||i.indexOf("Android")>-1&&s&&533>s||r&&6>r||"palmGetResource"in t&&s&&534>s||i.indexOf("MeeGo")>-1&&i.indexOf("NokiaBrowser/8.5.0")>-1)}(),scrollTop:("pageXOffset"in t||"scrollTop"in i.documentElement||"scrollTop"in o[0])&&!c&&!d,dynamicBaseTag:function(){var t,i=location.protocol+"//"+location.host+location.pathname+"ui-dir/",n=e("head base"),a=null,s="";return n.length?s=n.attr("href"):n=a=e("<base>",{href:i}).appendTo("head"),t=e("<a href='testurl' />").prependTo(o)[0].href,n[0].href=s||location.pathname,a&&a.remove(),0===t.indexOf(i)}(),cssPointerEvents:function(){var e,n=i.createElement("x"),a=i.documentElement,s=t.getComputedStyle;return"pointerEvents"in n.style&&(n.style.pointerEvents="auto",n.style.pointerEvents="x",a.appendChild(n),e=s&&"auto"===s(n,"").pointerEvents,a.removeChild(n),!!e)}(),boundingRect:void 0!==i.createElement("div").getBoundingClientRect,inlineSVG:function(){var i=t,n=!(!i.document.createElementNS||!i.document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||i.opera&&-1===navigator.userAgent.indexOf("Chrome")),a=function(t){t&&n||e("html").addClass("ui-nosvg")},s=new i.Image;s.onerror=function(){a(!1)},s.onload=function(){a(1===s.width&&1===s.height)},s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}}),o.remove(),s=function(){var e=t.navigator.userAgent;return e.indexOf("Nokia")>-1&&(e.indexOf("Symbian/3")>-1||e.indexOf("Series60/5")>-1)&&e.indexOf("AppleWebKit")>-1&&e.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}(),e.mobile.gradeA=function(){return(e.support.mediaquery&&e.support.cssPseudoElement||e.mobile.browser.oldIE&&e.mobile.browser.oldIE>=8)&&(e.support.boundingRect||null!==e.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/))},e.mobile.ajaxBlacklist=t.blackberry&&!t.WebKitPoint||d||s,s&&e((function(){e("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")})),e.support.boxShadow||e("html").addClass("ui-noboxshadow")}(e),function(e,t){var i,n=e.mobile.window,a=function(){};e.event.special.beforenavigate={setup:function(){n.on("navigate",a)},teardown:function(){n.off("navigate",a)}},e.event.special.navigate=i={bound:!1,pushStateEnabled:!0,originalEventName:void 0,isPushStateEnabled:function(){return e.support.pushState&&!0===e.mobile.pushStateEnabled&&this.isHashChangeEnabled()},isHashChangeEnabled:function(){return!0===e.mobile.hashListeningEnabled},popstate:function(t){var i=new e.Event("navigate"),a=new e.Event("beforenavigate"),s=t.originalEvent.state||{};a.originalEvent=t,n.trigger(a),a.isDefaultPrevented()||(t.historyState&&e.extend(s,t.historyState),i.originalEvent=t,setTimeout((function(){n.trigger(i,{state:s})}),0))},hashchange:function(t){var i=new e.Event("navigate"),a=new e.Event("beforenavigate");a.originalEvent=t,n.trigger(a),a.isDefaultPrevented()||(i.originalEvent=t,n.trigger(i,{state:t.hashchangeState||{}}))},setup:function(){i.bound||(i.bound=!0,i.isPushStateEnabled()?(i.originalEventName="popstate",n.bind("popstate.navigate",i.popstate)):i.isHashChangeEnabled()&&(i.originalEventName="hashchange",n.bind("hashchange.navigate",i.hashchange)))}}}(e),function(e,i){var n,a,s="&ui-state=dialog";e.mobile.path=n={uiStateKey:"&ui-state",urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(e){var t=this.parseUrl(e||location.href),i=e?t:location,n=t.hash;return n="#"===n?"":n,i.protocol+t.doubleSlash+i.host+(""!==i.protocol&&"/"!==i.pathname.substring(0,1)?"/":"")+i.pathname+i.search+n},getDocumentUrl:function(t){return t?e.extend({},n.documentUrl):n.documentUrl.href},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(t){if("object"===e.type(t))return t;var i=n.urlParseRE.exec(t||"")||[];return{href:i[0]||"",hrefNoHash:i[1]||"",hrefNoSearch:i[2]||"",domain:i[3]||"",protocol:i[4]||"",doubleSlash:i[5]||"",authority:i[6]||"",username:i[8]||"",password:i[9]||"",host:i[10]||"",hostname:i[11]||"",port:i[12]||"",pathname:i[13]||"",directory:i[14]||"",filename:i[15]||"",search:i[16]||"",hash:i[17]||""}},makePathAbsolute:function(e,t){var i,n,a,s;if(e&&"/"===e.charAt(0))return e;for(e=e||"",i=(t=t?t.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"")?t.split("/"):[],n=e.split("/"),a=0;a<n.length;a++)switch(s=n[a]){case".":break;case"..":i.length&&i.pop();break;default:i.push(s)}return"/"+i.join("/")},isSameDomain:function(e,t){return n.parseUrl(e).domain.toLowerCase()===n.parseUrl(t).domain.toLowerCase()},isRelativeUrl:function(e){return""===n.parseUrl(e).protocol},isAbsoluteUrl:function(e){return""!==n.parseUrl(e).protocol},makeUrlAbsolute:function(e,t){if(!n.isRelativeUrl(e))return e;t===i&&(t=this.documentBase);var a=n.parseUrl(e),s=n.parseUrl(t),o=a.protocol||s.protocol,r=a.protocol?a.doubleSlash:a.doubleSlash||s.doubleSlash,l=a.authority||s.authority,c=""!==a.pathname;return o+r+l+n.makePathAbsolute(a.pathname||s.filename,s.pathname)+(a.search||!c&&s.search||"")+a.hash},addSearchParams:function(t,i){var a=n.parseUrl(t),s="object"==typeof i?e.param(i):i,o=a.search||"?";return a.hrefNoSearch+o+("?"!==o.charAt(o.length-1)?"&":"")+s+(a.hash||"")},convertUrlToDataUrl:function(e){var i=e,a=n.parseUrl(e);return n.isEmbeddedPage(a)?i=a.hash.split(s)[0].replace(/^#/,"").replace(/\?.*$/,""):n.isSameDomain(a,this.documentBase)&&(i=a.hrefNoHash.replace(this.documentBase.domain,"").split(s)[0]),t.decodeURIComponent(i)},get:function(e){return e===i&&(e=n.parseLocation().hash),n.stripHash(e).replace(/[^\/]*\.[^\/*]+$/,"")},set:function(e){location.hash=e},isPath:function(e){return/\//.test(e)},clean:function(e){return e.replace(this.documentBase.domain,"")},stripHash:function(e){return e.replace(/^#/,"")},stripQueryParams:function(e){return e.replace(/\?.*$/,"")},cleanHash:function(e){return n.stripHash(e.replace(/\?.*$/,"").replace(s,""))},isHashValid:function(e){return/^#[^#]+$/.test(e)},isExternal:function(e){var t=n.parseUrl(e);return!(!t.protocol||t.domain.toLowerCase()===this.documentUrl.domain.toLowerCase())},hasProtocol:function(e){return/^(:?\w+:)/.test(e)},isEmbeddedPage:function(e){var t=n.parseUrl(e);return""!==t.protocol?!this.isPath(t.hash)&&t.hash&&(t.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&t.hrefNoHash===this.documentBase.hrefNoHash):/^#/.test(t.href)},squash:function(e,t){var i,a,s,o,r,l=this.isPath(e),c=this.parseUrl(e),d=c.hash,h="";return t||(l?t=n.getLocation():(r=n.getDocumentUrl(!0),t=n.isPath(r.hash)?n.squash(r.href):r.href)),a=l?n.stripHash(e):e,(o=(a=n.isPath(c.hash)?n.stripHash(c.hash):a).indexOf(this.uiStateKey))>-1&&(h=a.slice(o),a=a.slice(0,o)),i=n.makeUrlAbsolute(a,t),s=this.parseUrl(i).search,l?((n.isPath(d)||0===d.replace("#","").indexOf(this.uiStateKey))&&(d=""),h&&-1===d.indexOf(this.uiStateKey)&&(d+=h),-1===d.indexOf("#")&&""!==d&&(d="#"+d),i=(i=n.parseUrl(i)).protocol+i.doubleSlash+i.host+i.pathname+s+d):i+=i.indexOf("#")>-1?h:"#"+h,i},isPreservableHash:function(e){return 0===e.replace("#","").indexOf(this.uiStateKey)},hashToSelector:function(e){var t="#"===e.substring(0,1);return t&&(e=e.substring(1)),(t?"#":"")+e.replace(/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,"\\$1")},getFilePath:function(e){return e&&e.split(s)[0]},isFirstPageUrl:function(t){var a=n.parseUrl(n.makeUrlAbsolute(t,this.documentBase)),s=a.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&a.hrefNoHash===this.documentBase.hrefNoHash,o=e.mobile.firstPage,r=o&&o[0]?o[0].id:i;return s&&(!a.hash||"#"===a.hash||r&&a.hash.replace(/^#/,"")===r)},isPermittedCrossDomainRequest:function(t,i){return e.mobile.allowCrossDomainPages&&("file:"===t.protocol||"content:"===t.protocol)&&-1!==i.search(/^https?:/)}},n.documentUrl=n.parseLocation(),a=e("head").find("base"),n.documentBase=a.length?n.parseUrl(n.makeUrlAbsolute(a.attr("href"),n.documentUrl.href)):n.documentUrl,n.documentBaseDiffers=n.documentUrl.hrefNoHash!==n.documentBase.hrefNoHash,n.getDocumentBase=function(t){return t?e.extend({},n.documentBase):n.documentBase.href},e.extend(e.mobile,{getDocumentUrl:n.getDocumentUrl,getDocumentBase:n.getDocumentBase})}(e),function(e,t){e.mobile.History=function(e,t){this.stack=e||[],this.activeIndex=t||0},e.extend(e.mobile.History.prototype,{getActive:function(){return this.stack[this.activeIndex]},getLast:function(){return this.stack[this.previousIndex]},getNext:function(){return this.stack[this.activeIndex+1]},getPrev:function(){return this.stack[this.activeIndex-1]},add:function(e,t){t=t||{},this.getNext()&&this.clearForward(),t.hash&&-1===t.hash.indexOf("#")&&(t.hash="#"+t.hash),t.url=e,this.stack.push(t),this.activeIndex=this.stack.length-1},clearForward:function(){this.stack=this.stack.slice(0,this.activeIndex+1)},find:function(e,t,i){var n,a,s,o=(t=t||this.stack).length;for(a=0;o>a;a++)if(n=t[a],(decodeURIComponent(e)===decodeURIComponent(n.url)||decodeURIComponent(e)===decodeURIComponent(n.hash))&&(s=a,i))return s;return s},closest:function(e){var i,n=this.activeIndex;return(i=this.find(e,this.stack.slice(0,n)))===t&&(i=(i=this.find(e,this.stack.slice(n),!0))===t?i:i+n),i},direct:function(i){var n=this.closest(i.url),a=this.activeIndex;n!==t&&(this.activeIndex=n,this.previousIndex=a),a>n?(i.present||i.back||e.noop)(this.getActive(),"back"):n>a?(i.present||i.forward||e.noop)(this.getActive(),"forward"):n===t&&i.missing&&i.missing(this.getActive())}})}(e),function(e){var n=e.mobile.path,a=location.href;e.mobile.Navigator=function(t){this.history=t,this.ignoreInitialHashChange=!0,e.mobile.window.bind({"popstate.history":e.proxy(this.popstate,this),"hashchange.history":e.proxy(this.hashchange,this)})},e.extend(e.mobile.Navigator.prototype,{squash:function(a,s){var o,r,l=n.isPath(a)?n.stripHash(a):a;return r=n.squash(a),o=e.extend({hash:l,url:r},s),t.history.replaceState(o,o.title||i.title,r),o},hash:function(e,t){var i,a,s,o;return i=n.parseUrl(e),(a=n.parseLocation()).pathname+a.search===i.pathname+i.search?s=i.hash?i.hash:i.pathname+i.search:n.isPath(e)?s=(o=n.parseUrl(t)).pathname+o.search+(n.isPreservableHash(o.hash)?o.hash.replace("#",""):""):s=e,s},go:function(a,s,o){var r,l,c,d,h=e.event.special.navigate.isPushStateEnabled();l=n.squash(a),c=this.hash(a,l),o&&c!==n.stripHash(n.parseLocation().hash)&&(this.preventNextHashChange=o),this.preventHashAssignPopState=!0,t.location.hash=c,this.preventHashAssignPopState=!1,r=e.extend({url:l,hash:c,title:i.title},s),h&&((d=new e.Event("popstate")).originalEvent={type:"popstate",state:null},this.squash(a,r),o||(this.ignorePopState=!0,e.mobile.window.trigger(d))),this.history.add(r.url,r)},popstate:function(t){var i,s;if(e.event.special.navigate.isPushStateEnabled())return this.preventHashAssignPopState?(this.preventHashAssignPopState=!1,void t.stopImmediatePropagation()):this.ignorePopState?void(this.ignorePopState=!1):!t.originalEvent.state&&1===this.history.stack.length&&this.ignoreInitialHashChange&&(this.ignoreInitialHashChange=!1,location.href===a)?void t.preventDefault():(i=n.parseLocation().hash,!t.originalEvent.state&&i?(s=this.squash(i),this.history.add(s.url,s),void(t.historyState=s)):void this.history.direct({url:(t.originalEvent.state||{}).url||i,present:function(i,n){t.historyState=e.extend({},i),t.historyState.direction=n}}))},hashchange:function(t){var a,s;if(e.event.special.navigate.isHashChangeEnabled()&&!e.event.special.navigate.isPushStateEnabled()){if(this.preventNextHashChange)return this.preventNextHashChange=!1,void t.stopImmediatePropagation();a=this.history,s=n.parseLocation().hash,this.history.direct({url:s,present:function(i,n){t.hashchangeState=e.extend({},i),t.hashchangeState.direction=n},missing:function(){a.add(s,{hash:s,title:i.title})}})}}})}(e),function(e){e.mobile.navigate=function(t,i,n){e.mobile.navigate.navigator.go(t,i,n)},e.mobile.navigate.history=new e.mobile.History,e.mobile.navigate.navigator=new e.mobile.Navigator(e.mobile.navigate.history);var t=e.mobile.path.parseLocation();e.mobile.navigate.history.add(t.href,{hash:t.hash})}(e),function(e,t){var n={animation:{},transition:{}},a=i.createElement("a"),s=["","webkit-","moz-","o-"];e.each(["animation","transition"],(function(i,o){var r=0===i?o+"-name":o;e.each(s,(function(i,s){return a.style[e.camelCase(s+r)]!==t?(n[o].prefix=s,!1):void 0})),n[o].duration=e.camelCase(n[o].prefix+o+"-duration"),n[o].event=e.camelCase(n[o].prefix+o+"-end"),""===n[o].prefix&&(n[o].event=n[o].event.toLowerCase())})),e.support.cssTransitions=n.transition.prefix!==t,e.support.cssAnimations=n.animation.prefix!==t,e(a).remove(),e.fn.animationComplete=function(a,s,o){var r,l,c=this,d=function(){clearTimeout(r),a.apply(this,arguments)},h=s&&"animation"!==s?"transition":"animation";return e.support.cssTransitions&&"transition"===h||e.support.cssAnimations&&"animation"===h?(o===t&&(e(this).context!==i&&(l=3e3*parseFloat(e(this).css(n[h].duration))),(0===l||l===t||isNaN(l))&&(l=e.fn.animationComplete.defaultDuration)),r=setTimeout((function(){e(c).off(n[h].event,d),a.apply(c)}),l),e(this).one(n[h].event,d)):(setTimeout(e.proxy(a,this),0),e(this))},e.fn.animationComplete.defaultDuration=1e3}(e),function(e,t,i,n){function a(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function s(t,i){var s,o,r,l,c,d,h,u,p,f=t.type;if((t=e.Event(t)).type=i,s=t.originalEvent,o=e.event.props,f.search(/^(mouse|click)/)>-1&&(o=A),s)for(h=o.length;h;)t[l=o[--h]]=s[l];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==f.search(/^touch/)&&(f=(r=a(s)).touches,c=r.changedTouches,d=f&&f.length?f[0]:c&&c.length?c[0]:n))for(u=0,p=_.length;p>u;u++)t[l=_[u]]=d[l];return t}function o(t){for(var i,n,a={};t;){for(n in i=e.data(t,k))i[n]&&(a[n]=a.hasVirtualBinding=!0);t=t.parentNode}return a}function r(){N=!0}function l(){N=!1}function c(){d(),D=setTimeout((function(){D=0,j=0,M.length=0,O=!1,r()}),e.vmouse.resetTimerDuration)}function d(){D&&(clearTimeout(D),D=0)}function h(t,i,n){var a;return(n&&n[t]||!n&&function(t,i){for(var n;t;){if((n=e.data(t,k))&&(!i||n[i]))return t;t=t.parentNode}return null}(i.target,t))&&(a=s(i,t),e(i.target).trigger(a)),a}function u(t){var i,n=e.data(t.target,S);O||j&&j===n||(i=h("v"+t.type,t))&&(i.isDefaultPrevented()&&t.preventDefault(),i.isPropagationStopped()&&t.stopPropagation(),i.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}function p(t){var i,n,s,r=a(t).touches;r&&1===r.length&&((n=o(i=t.target)).hasVirtualBinding&&(j=F++,e.data(i,S,j),d(),l(),L=!1,s=a(t).touches[0],I=s.pageX,E=s.pageY,h("vmouseover",t,n),h("vmousedown",t,n)))}function f(e){N||(L||h("vmousecancel",e,o(e.target)),L=!0,c())}function g(t){if(!N){var i=a(t).touches[0],n=L,s=e.vmouse.moveDistanceThreshold,r=o(t.target);(L=L||Math.abs(i.pageX-I)>s||Math.abs(i.pageY-E)>s)&&!n&&h("vmousecancel",t,r),h("vmousemove",t,r),c()}}function m(e){if(!N){r();var t,i,n=o(e.target);h("vmouseup",e,n),L||(t=h("vclick",e,n))&&t.isDefaultPrevented()&&(i=a(e).changedTouches[0],M.push({touchID:j,x:i.clientX,y:i.clientY}),O=!0),h("vmouseout",e,n),L=!1,c()}}function v(t){var i,n=e.data(t,k);if(n)for(i in n)if(n[i])return!0;return!1}function b(){}function x(t){var i=t.substr(1);return{setup:function(){v(this)||e.data(this,k,{}),e.data(this,k)[t]=!0,P[t]=(P[t]||0)+1,1===P[t]&&H.bind(i,u),e(this).bind(i,b),R&&(P.touchstart=(P.touchstart||0)+1,1===P.touchstart&&H.bind("touchstart",p).bind("touchend",m).bind("touchmove",g).bind("scroll",f))},teardown:function(){--P[t],P[t]||H.unbind(i,u),R&&(--P.touchstart,P.touchstart||H.unbind("touchstart",p).unbind("touchmove",g).unbind("touchend",m).unbind("scroll",f));var n=e(this),a=e.data(this,k);a&&(a[t]=!1),n.unbind(i,b),v(this)||n.removeData(k)}}}var y,w,k="virtualMouseBindings",S="virtualTouchID",C="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),_="clientX clientY pageX pageY screenX screenY".split(" "),T=e.event.mouseHooks?e.event.mouseHooks.props:[],A=e.event.props.concat(T),P={},D=0,I=0,E=0,L=!1,M=[],O=!1,N=!1,R="addEventListener"in i,H=e(i),F=1,j=0;for(e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},w=0;w<C.length;w++)e.event.special[C[w]]=x(C[w]);R&&i.addEventListener("click",(function(t){var i,n,a,s,o,r=M.length,l=t.target;if(r)for(i=t.clientX,n=t.clientY,y=e.vmouse.clickDistanceThreshold,a=l;a;){for(s=0;r>s;s++)if(o=M[s],0,a===l&&Math.abs(o.x-i)<y&&Math.abs(o.y-n)<y||e.data(a,S)===o.touchID)return t.preventDefault(),void t.stopPropagation();a=a.parentNode}}),!0)}(e,0,i),function(e,t,n){function a(t,i,a,s){var o=a.type;a.type=i,s?e.event.trigger(a,n,t):e.event.dispatch.call(t,a),a.type=o}var s=e(i),o=e.mobile.support.touch,r="touchmove scroll",l=o?"touchstart":"mousedown",c=o?"touchend":"mouseup",d=o?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),(function(t,i){e.fn[i]=function(e){return e?this.bind(i,e):this.trigger(i)},e.attrFn&&(e.attrFn[i]=!0)})),e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){a(s,(i=t)?"scrollstart":"scrollstop",e)}var i,n,s=this;e(s).bind(r,(function(a){e.event.special.scrollstart.enabled&&(i||t(a,!0),clearTimeout(n),n=setTimeout((function(){t(a,!1)}),50))}))},teardown:function(){e(this).unbind(r)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,i=e(t),n=!1;i.bind("vmousedown",(function(o){function r(){clearTimeout(d)}function l(){r(),i.unbind("vclick",c).unbind("vmouseup",r),s.unbind("vmousecancel",l)}function c(e){l(),n||h!==e.target?n&&e.preventDefault():a(t,"tap",e)}if(n=!1,o.which&&1!==o.which)return!1;var d,h=o.target;i.bind("vmouseup",r).bind("vclick",c),s.bind("vmousecancel",l),d=setTimeout((function(){e.event.special.tap.emitTapOnTaphold||(n=!0),a(t,"taphold",e.Event("taphold",{target:h}))}),e.event.special.tap.tapholdThreshold)}))},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),s.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var i=t.pageXOffset,n=t.pageYOffset,a=e.clientX,s=e.clientY;return 0===e.pageY&&Math.floor(s)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(a)>Math.floor(e.pageX)?(a-=i,s-=n):(s<e.pageY-n||a<e.pageX-i)&&(a=e.pageX-i,s=e.pageY-n),{x:a,y:s}},start:function(t){var i=t.originalEvent.touches?t.originalEvent.touches[0]:t,n=e.event.special.swipe.getLocation(i);return{time:(new Date).getTime(),coords:[n.x,n.y],origin:e(t.target)}},stop:function(t){var i=t.originalEvent.touches?t.originalEvent.touches[0]:t,n=e.event.special.swipe.getLocation(i);return{time:(new Date).getTime(),coords:[n.x,n.y]}},handleSwipe:function(t,i,n,s){if(i.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-i.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-i.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var o=t.coords[0]>i.coords[0]?"swipeleft":"swiperight";return a(n,"swipe",e.Event("swipe",{target:s,swipestart:t,swipestop:i}),!0),a(n,o,e.Event(o,{target:s,swipestart:t,swipestop:i}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,i=this,n=e(i),a={};(t=e.data(this,"mobile-events"))||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=a,a.start=function(t){if(!e.event.special.swipe.eventInProgress){e.event.special.swipe.eventInProgress=!0;var n,o=e.event.special.swipe.start(t),r=t.target,l=!1;a.move=function(t){o&&!t.isDefaultPrevented()&&(n=e.event.special.swipe.stop(t),l||(l=e.event.special.swipe.handleSwipe(o,n,i,r))&&(e.event.special.swipe.eventInProgress=!1),Math.abs(o.coords[0]-n.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())},a.stop=function(){l=!0,e.event.special.swipe.eventInProgress=!1,s.off(d,a.move),a.move=null},s.on(d,a.move).one(c,a.stop)}},n.on(l,a.start)},teardown:function(){var t,i;(t=e.data(this,"mobile-events"))&&(i=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),i&&(i.start&&e(this).off(l,i.start),i.move&&s.off(d,i.move),i.stop&&s.off(c,i.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},(function(t,i){e.event.special[t]={setup:function(){e(this).bind(i,e.noop)},teardown:function(){e(this).unbind(i)}}}))}(e,this),function(e){e.event.special.throttledresize={setup:function(){e(this).bind("resize",a)},teardown:function(){e(this).unbind("resize",a)}};var t,i,n,a=function(){i=(new Date).getTime(),(n=i-s)>=250?(s=i,e(this).trigger("throttledresize")):(t&&clearTimeout(t),t=setTimeout(a,250-n))},s=0}(e),function(e,t){function n(){var e=a();e!==s&&(s=e,d.trigger(h))}var a,s,o,r,l,c,d=e(t),h="orientationchange",u={0:!0,180:!0};e.support.orientation&&(50,o=(l=t.innerWidth||d.width())>(c=t.innerHeight||d.height())&&l-c>50,r=u[t.orientation],(o&&r||!o&&!r)&&(u={"-90":!0,90:!0})),e.event.special.orientationchange=e.extend({},e.event.special.orientationchange,{setup:function(){return!(e.support.orientation&&!e.event.special.orientationchange.disabled)&&(s=a(),void d.bind("throttledresize",n))},teardown:function(){return!(e.support.orientation&&!e.event.special.orientationchange.disabled)&&void d.unbind("throttledresize",n)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=a(),t.apply(this,arguments)}}}),e.event.special.orientationchange.orientation=a=function(){var n=i.documentElement;return(e.support.orientation?u[t.orientation]:n&&n.clientWidth/n.clientHeight<1.1)?"portrait":"landscape"},e.fn[h]=function(e){return e?this.bind(h,e):this.trigger(h)},e.attrFn&&(e.attrFn[h]=!0)}(e,this),function(e){var t=e("head").children("base"),i={element:t.length?t:e("<base>",{href:e.mobile.path.documentBase.hrefNoHash}).prependTo(e("head")),linkSelector:"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",set:function(t){e.mobile.dynamicBaseEnabled&&e.support.dynamicBaseTag&&i.element.attr("href",e.mobile.path.makeUrlAbsolute(t,e.mobile.path.documentBase))},rewrite:function(t,n){var a=e.mobile.path.get(t);n.find(i.linkSelector).each((function(t,i){var n=e(i).is("[href]")?"href":e(i).is("[src]")?"src":"action",s=e.mobile.path.parseLocation(),o=e(i).attr(n);o=o.replace(s.protocol+s.doubleSlash+s.host+s.pathname,""),/^(\w+:|#|\/)/.test(o)||e(i).attr(n,a+o)}))},reset:function(){i.element.attr("href",e.mobile.path.documentBase.hrefNoSearch)}};e.mobile.base=i}(e),function(e,t){e.mobile.widgets={};var i=e.widget,n=e.mobile.keepNative;e.widget=function(i){return function(){var n=i.apply(this,arguments),a=n.prototype.widgetName;return n.initSelector=n.prototype.initSelector!==t?n.prototype.initSelector:":jqmData(role='"+a+"')",e.mobile.widgets[a]=n,n}}(e.widget),e.extend(e.widget,i),e.mobile.document.on("create",(function(t){e(t.target).enhanceWithin()})),e.widget("mobile.page",{options:{theme:"a",domCache:!1,keepNativeDefault:e.mobile.keepNative,contentTheme:null,enhanced:!1},_createWidget:function(){e.Widget.prototype._createWidget.apply(this,arguments),this._trigger("init")},_create:function(){return!1!==this._trigger("beforecreate")&&(this.options.enhanced||this._enhance(),this._on(this.element,{pagebeforehide:"removeContainerBackground",pagebeforeshow:"_handlePageBeforeShow"}),this.element.enhanceWithin(),void("dialog"===e.mobile.getAttribute(this.element[0],"role")&&e.mobile.dialog&&this.element.dialog()))},_enhance:function(){var i="data-"+e.mobile.ns,n=this;this.options.role&&this.element.attr("data-"+e.mobile.ns+"role",this.options.role),this.element.attr("tabindex","0").addClass("ui-page ui-page-theme-"+this.options.theme),this.element.find("["+i+"role='content']").each((function(){var a=e(this),s=this.getAttribute(i+"theme")||t;n.options.contentTheme=s||n.options.contentTheme||n.options.dialog&&n.options.theme||"dialog"===n.element.jqmData("role")&&n.options.theme,a.addClass("ui-content"),n.options.contentTheme&&a.addClass("ui-body-"+n.options.contentTheme),a.attr("role","main").addClass("ui-content")}))},bindRemove:function(t){var i=this.element;!i.data("mobile-page").options.domCache&&i.is(":jqmData(external-page='true')")&&i.bind("pagehide.remove",t||function(t,i){if(!i.samePage){var n=e(this),a=new e.Event("pageremove");n.trigger(a),a.isDefaultPrevented()||n.removeWithDependents()}})},_setOptions:function(i){i.theme!==t&&this.element.removeClass("ui-page-theme-"+this.options.theme).addClass("ui-page-theme-"+i.theme),i.contentTheme!==t&&this.element.find("[data-"+e.mobile.ns+"='content']").removeClass("ui-body-"+this.options.contentTheme).addClass("ui-body-"+i.contentTheme)},_handlePageBeforeShow:function(){this.setContainerBackground()},removeContainerBackground:function(){this.element.closest(":mobile-pagecontainer").pagecontainer({theme:"none"})},setContainerBackground:function(e){this.element.parent().pagecontainer({theme:e||this.options.theme})},keepNativeSelector:function(){var t=this.options,i=e.trim(t.keepNative||""),a=e.trim(e.mobile.keepNative),s=e.trim(t.keepNativeDefault),o=n===a?"":a,r=""===o?s:"";return(i?[i]:[]).concat(o?[o]:[]).concat(r?[r]:[]).join(", ")}})}(e),function(e,n){e.widget("mobile.pagecontainer",{options:{theme:"a"},initSelector:!1,_create:function(){this._trigger("beforecreate"),this.setLastScrollEnabled=!0,this._on(this.window,{navigate:"_disableRecordScroll",scrollstop:"_delayedRecordScroll"}),this._on(this.window,{navigate:"_filterNavigateEvents"}),this._on({pagechange:"_afterContentChange"}),this.window.one("navigate",e.proxy((function(){this.setLastScrollEnabled=!0}),this))},_setOptions:function(e){e.theme!==n&&"none"!==e.theme?this.element.removeClass("ui-overlay-"+this.options.theme).addClass("ui-overlay-"+e.theme):e.theme!==n&&this.element.removeClass("ui-overlay-"+this.options.theme),this._super(e)},_disableRecordScroll:function(){this.setLastScrollEnabled=!1},_enableRecordScroll:function(){this.setLastScrollEnabled=!0},_afterContentChange:function(){this.setLastScrollEnabled=!0,this._off(this.window,"scrollstop"),this._on(this.window,{scrollstop:"_delayedRecordScroll"})},_recordScroll:function(){if(this.setLastScrollEnabled){var e,t,i,n=this._getActiveHistory();n&&(e=this._getScroll(),t=this._getMinScroll(),i=this._getDefaultScroll(),n.lastScroll=t>e?i:e)}},_delayedRecordScroll:function(){setTimeout(e.proxy(this,"_recordScroll"),100)},_getScroll:function(){return this.window.scrollTop()},_getMinScroll:function(){return e.mobile.minScrollBack},_getDefaultScroll:function(){return e.mobile.defaultHomeScroll},_filterNavigateEvents:function(t,i){var n;t.originalEvent&&t.originalEvent.isDefaultPrevented()||((n=t.originalEvent.type.indexOf("hashchange")>-1?i.state.hash:i.state.url)||(n=this._getHash()),n&&"#"!==n&&0!==n.indexOf("#"+e.mobile.path.uiStateKey)||(n=location.href),this._handleNavigate(n,i.state))},_getHash:function(){return e.mobile.path.parseLocation().hash},getActivePage:function(){return this.activePage},_getInitialContent:function(){return e.mobile.firstPage},_getHistory:function(){return e.mobile.navigate.history},_getActiveHistory:function(){return this._getHistory().getActive()},_getDocumentBase:function(){return e.mobile.path.documentBase},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(i){if(e.mobile.hashListeningEnabled)t.history.go(i);else{var n=e.mobile.navigate.history.activeIndex,a=n+parseInt(i,10),s=e.mobile.navigate.history.stack[a].url,o=i>=1?"forward":"back";e.mobile.navigate.history.activeIndex=a,e.mobile.navigate.history.previousIndex=n,this.change(s,{direction:o,changeHash:!1,fromHashChange:!0})}},_handleDestination:function(t){return"string"===e.type(t)&&(t=e.mobile.path.stripHash(t)),t&&(this._getHistory(),t=e.mobile.path.isPath(t)?t:e.mobile.path.makeUrlAbsolute("#"+t,this._getDocumentBase())),t||this._getInitialContent()},_transitionFromHistory:function(e,t){var i=this._getHistory(),n="back"===e?i.getLast():i.getActive();return n&&n.transition||t},_handleDialog:function(t,i){var n,a,s=this.getActivePage();return s&&!s.data("mobile-dialog")?("back"===i.direction?this.back():this.forward(),!1):(n=i.pageUrl,a=this._getActiveHistory(),e.extend(t,{role:a.role,transition:this._transitionFromHistory(i.direction,t.transition),reverse:"back"===i.direction}),n)},_handleNavigate:function(t,i){var n=e.mobile.path.stripHash(t),a=this._getHistory(),s=0===a.stack.length?"none":this._transitionFromHistory(i.direction),o={changeHash:!1,fromHashChange:!0,reverse:"back"===i.direction};e.extend(o,i,{transition:s}),a.activeIndex>0&&n.indexOf(e.mobile.dialogHashKey)>-1&&!1===(n=this._handleDialog(o,i))||this._changeContent(this._handleDestination(n),o)},_changeContent:function(t,i){e.mobile.changePage(t,i)},_getBase:function(){return e.mobile.base},_getNs:function(){return e.mobile.ns},_enhance:function(e,t){return e.page({role:t})},_include:function(e,t){e.appendTo(this.element),this._enhance(e,t.role),e.page("bindRemove")},_find:function(t){var i,n=this._createFileUrl(t),a=this._createDataUrl(t),s=this._getInitialContent();return 0===(i=this.element.children("[data-"+this._getNs()+"url='"+e.mobile.path.hashToSelector(a)+"']")).length&&a&&!e.mobile.path.isPath(a)&&(i=this.element.children(e.mobile.path.hashToSelector("#"+a)).attr("data-"+this._getNs()+"url",a).jqmData("url",a)),0===i.length&&e.mobile.path.isFirstPageUrl(n)&&s&&s.parent().length&&(i=e(s)),i},_getLoader:function(){return e.mobile.loading()},_showLoading:function(t,i,n,a){this._loadMsg||(this._loadMsg=setTimeout(e.proxy((function(){this._getLoader().loader("show",i,n,a),this._loadMsg=0}),this),t))},_hideLoading:function(){clearTimeout(this._loadMsg),this._loadMsg=0,this._getLoader().loader("hide")},_showError:function(){this._hideLoading(),this._showLoading(0,e.mobile.pageLoadErrorMessageTheme,e.mobile.pageLoadErrorMessage,!0),setTimeout(e.proxy(this,"_hideLoading"),1500)},_parse:function(t,i){var n,a=e("<div></div>");return a.get(0).innerHTML=t,(n=a.find(":jqmData(role='page'), :jqmData(role='dialog')").first()).length||(n=e("<div data-"+this._getNs()+"role='page'>"+(t.split(/<\/?body[^>]*>/gim)[1]||"")+"</div>")),n.attr("data-"+this._getNs()+"url",this._createDataUrl(i)).attr("data-"+this._getNs()+"external-page",!0),n},_setLoadedTitle:function(t,i){var n=i.match(/<title[^>]*>([^<]*)/)&&RegExp.$1;n&&!t.jqmData("title")&&(n=e("<div>"+n+"</div>").text(),t.jqmData("title",n))},_isRewritableBaseTag:function(){return e.mobile.dynamicBaseEnabled&&!e.support.dynamicBaseTag},_createDataUrl:function(t){return e.mobile.path.convertUrlToDataUrl(t)},_createFileUrl:function(t){return e.mobile.path.getFilePath(t)},_triggerWithDeprecated:function(t,i,n){var a=e.Event("page"+t),s=e.Event(this.widgetName+t);return(n||this.element).trigger(a,i),this._trigger(t,s,i),{deprecatedEvent:a,event:s}},_loadSuccess:function(t,i,a,s){var o=this._createFileUrl(t);return e.proxy((function(r,l,c){var d,h=new RegExp("(<[^>]+\\bdata-"+this._getNs()+"role=[\"']?page[\"']?[^>]*>)"),u=new RegExp("\\bdata-"+this._getNs()+"url=[\"']?([^\"'>]*)[\"']?");h.test(r)&&RegExp.$1&&u.test(RegExp.$1)&&RegExp.$1&&(o=e.mobile.path.getFilePath(e("<div>"+RegExp.$1+"</div>").text()),o=this.window[0].encodeURIComponent(o)),a.prefetch===n&&this._getBase().set(o),d=this._parse(r,o),this._setLoadedTitle(d,r),i.xhr=c,i.textStatus=l,i.page=d,i.content=d,i.toPage=d,this._triggerWithDeprecated("load",i).event.isDefaultPrevented()||(this._isRewritableBaseTag()&&d&&this._getBase().rewrite(o,d),this._include(d,a),a.showLoadMsg&&this._hideLoading(),s.resolve(t,a,d))}),this)},_loadDefaults:{type:"get",data:n,reloadPage:!1,reload:!1,role:n,showLoadMsg:!1,loadMsgDelay:50},load:function(t,i){var a,s,o,r,l,c=i&&i.deferred||e.Deferred(),d=i&&i.reload===n&&i.reloadPage!==n?{reload:i.reloadPage}:{},h=e.extend({},this._loadDefaults,i,d),u=e.mobile.path.makeUrlAbsolute(t,this._findBaseWithDefault());return h.data&&"get"===h.type&&(u=e.mobile.path.addSearchParams(u,h.data),h.data=n),h.data&&"post"===h.type&&(h.reload=!0),a=this._createFileUrl(u),s=this._createDataUrl(u),0===(l=this._find(u)).length&&e.mobile.path.isEmbeddedPage(a)&&!e.mobile.path.isFirstPageUrl(a)?(c.reject(u,h),c.promise()):(this._getBase().reset(),l.length&&!h.reload?(this._enhance(l,h.role),c.resolve(u,h,l),h.prefetch||this._getBase().set(t),c.promise()):(r={url:t,absUrl:u,toPage:t,prevPage:i?i.fromPage:n,dataUrl:s,deferred:c,options:h},(o=this._triggerWithDeprecated("beforeload",r)).deprecatedEvent.isDefaultPrevented()||o.event.isDefaultPrevented()?c.promise():(h.showLoadMsg&&this._showLoading(h.loadMsgDelay),h.prefetch===n&&this._getBase().reset(),e.mobile.allowCrossDomainPages||e.mobile.path.isSameDomain(e.mobile.path.documentUrl,u)?(e.ajax({url:a,type:h.type,data:h.data,contentType:h.contentType,dataType:"html",success:this._loadSuccess(u,r,h,c),error:this._loadError(u,r,h,c)}),c.promise()):(c.reject(u,h),c.promise()))))},_loadError:function(t,i,n,a){return e.proxy((function(s,o,r){this._getBase().set(e.mobile.path.get()),i.xhr=s,i.textStatus=o,i.errorThrown=r;var l=this._triggerWithDeprecated("loadfailed",i);l.deprecatedEvent.isDefaultPrevented()||l.event.isDefaultPrevented()||(n.showLoadMsg&&this._showError(),a.reject(t,n))}),this)},_getTransitionHandler:function(t){return t=e.mobile._maybeDegradeTransition(t),e.mobile.transitionHandlers[t]||e.mobile.defaultTransitionHandler},_triggerCssTransitionEvents:function(t,i,n){var a=!1;n=n||"",i&&(t[0]===i[0]&&(a=!0),this._triggerWithDeprecated(n+"hide",{nextPage:t,toPage:t,prevPage:i,samePage:a},i)),this._triggerWithDeprecated(n+"show",{prevPage:i||e(""),toPage:t},t)},_cssTransition:function(t,i,n){var a,s=n.transition,o=n.reverse,r=n.deferred;this._triggerCssTransitionEvents(t,i,"before"),this._hideLoading(),(a=new(this._getTransitionHandler(s))(s,o,t,i).transition()).done(e.proxy((function(){this._triggerCssTransitionEvents(t,i)}),this)),a.done((function(){r.resolve.apply(r,arguments)}))},_releaseTransitionLock:function(){s=!1,a.length>0&&e.mobile.changePage.apply(null,a.pop())},_removeActiveLinkClass:function(t){e.mobile.removeActiveLinkClass(t)},_loadUrl:function(t,i,n){n.target=t,n.deferred=e.Deferred(),this.load(t,n),n.deferred.done(e.proxy((function(e,t,n){s=!1,t.absUrl=i.absUrl,this.transition(n,i,t)}),this)),n.deferred.fail(e.proxy((function(){this._removeActiveLinkClass(!0),this._releaseTransitionLock(),this._triggerWithDeprecated("changefailed",i)}),this))},_triggerPageBeforeChange:function(t,i,n){var a;return i.prevPage=this.activePage,e.extend(i,{toPage:t,options:n}),i.absUrl="string"===e.type(t)?e.mobile.path.makeUrlAbsolute(t,this._findBaseWithDefault()):n.absUrl,!(a=this._triggerWithDeprecated("beforechange",i)).event.isDefaultPrevented()&&!a.deprecatedEvent.isDefaultPrevented()},change:function(t,i){if(s)a.unshift(arguments);else{var n=e.extend({},e.mobile.changePage.defaults,i),o={};n.fromPage=n.fromPage||this.activePage,this._triggerPageBeforeChange(t,o,n)&&(t=o.toPage,"string"===e.type(t)?(s=!0,this._loadUrl(t,o,n)):this.transition(t,o,n))}},transition:function(t,o,r){var l,c,d,h,u,p,f,g,m,v,b,x,y;if(s)a.unshift([t,r]);else if(this._triggerPageBeforeChange(t,o,r)&&(o.prevPage=r.fromPage,!(y=this._triggerWithDeprecated("beforetransition",o)).deprecatedEvent.isDefaultPrevented()&&!y.event.isDefaultPrevented())){if(s=!0,t[0]!==e.mobile.firstPage[0]||r.dataUrl||(r.dataUrl=e.mobile.path.documentUrl.hrefNoHash),l=r.fromPage,d=c=r.dataUrl&&e.mobile.path.convertUrlToDataUrl(r.dataUrl)||t.jqmData("url"),e.mobile.path.getFilePath(c),h=e.mobile.navigate.history.getActive(),u=0===e.mobile.navigate.history.activeIndex,p=0,f=i.title,g=("dialog"===r.role||"dialog"===t.jqmData("role"))&&!0!==t.jqmData("dialog"),l&&l[0]===t[0]&&!r.allowSamePageTransition)return s=!1,this._triggerWithDeprecated("transition",o),this._triggerWithDeprecated("change",o),void(r.fromHashChange&&e.mobile.navigate.history.direct({url:c}));t.page({role:r.role}),r.fromHashChange&&(p="back"===r.direction?-1:1);try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()?e(i.activeElement).blur():e("input:focus, textarea:focus, select:focus").blur()}catch(e){}m=!1,g&&h&&(h.url&&h.url.indexOf(e.mobile.dialogHashKey)>-1&&this.activePage&&!this.activePage.hasClass("ui-dialog")&&e.mobile.navigate.history.activeIndex>0&&(r.changeHash=!1,m=!0),c=h.url||"",c+=!m&&c.indexOf("#")>-1?e.mobile.dialogHashKey:"#"+e.mobile.dialogHashKey),(v=h?t.jqmData("title")||t.children(":jqmData(role='header')").find(".ui-title").text():f)&&f===i.title&&(f=v),t.jqmData("title")||t.jqmData("title",f),r.transition=r.transition||(p&&!u?h.transition:n)||(g?e.mobile.defaultDialogTransition:e.mobile.defaultPageTransition),!p&&m&&(e.mobile.navigate.history.getActive().pageUrl=d),c&&!r.fromHashChange&&(!e.mobile.path.isPath(c)&&c.indexOf("#")<0&&(c="#"+c),b={transition:r.transition,title:f,pageUrl:d,role:r.role},!1!==r.changeHash&&e.mobile.hashListeningEnabled?e.mobile.navigate(this.window[0].encodeURI(c),b,!0):t[0]!==e.mobile.firstPage[0]&&e.mobile.navigate.history.add(c,b)),i.title=f,e.mobile.activePage=t,this.activePage=t,r.reverse=r.reverse||0>p,x=e.Deferred(),this._cssTransition(t,l,{transition:r.transition,reverse:r.reverse,deferred:x}),x.done(e.proxy((function(i,n,a,s,l){e.mobile.removeActiveLinkClass(),r.duplicateCachedPage&&r.duplicateCachedPage.remove(),l||e.mobile.focusPage(t),this._releaseTransitionLock(),this._triggerWithDeprecated("transition",o),this._triggerWithDeprecated("change",o)}),this))}},_findBaseWithDefault:function(){return this.activePage&&e.mobile.getClosestBaseUrl(this.activePage)||e.mobile.path.documentBase.hrefNoHash}}),e.mobile.navreadyDeferred=e.Deferred();var a=[],s=!1}(e),function(e,n){function a(e){for(;e&&("string"!=typeof e.nodeName||"a"!==e.nodeName.toLowerCase());)e=e.parentNode;return e}var s=e.Deferred(),o=e.Deferred(),r=function(){o.resolve(),o=null},l=e.mobile.path.documentUrl,c=null;e.mobile.loadPage=function(t,i){var n;return n=(i=i||{}).pageContainer||e.mobile.pageContainer,i.deferred=e.Deferred(),n.pagecontainer("load",t,i),i.deferred.promise()},e.mobile.back=function(){var i=t.navigator;this.phonegapNavigationEnabled&&i&&i.app&&i.app.backHistory?i.app.backHistory():e.mobile.pageContainer.pagecontainer("back")},e.mobile.focusPage=function(e){var t=e.find("[autofocus]"),i=e.find(".ui-title:eq(0)");return t.length?void t.focus():void(i.length?i.focus():e.focus())},e.mobile._maybeDegradeTransition=e.mobile._maybeDegradeTransition||function(e){return e},e.mobile.changePage=function(t,i){e.mobile.pageContainer.pagecontainer("change",t,i)},e.mobile.changePage.defaults={transition:n,reverse:!1,changeHash:!0,fromHashChange:!1,role:n,duplicateCachedPage:n,pageContainer:n,showLoadMsg:!0,dataUrl:n,fromPage:n,allowSamePageTransition:!1},e.mobile._registerInternalEvents=function(){var i=function(t,i){var n,a,s,o,r=!0;return!(!e.mobile.ajaxEnabled||t.is(":jqmData(ajax='false')")||!t.jqmHijackable().length||t.attr("target"))&&(n=c&&c.attr("formaction")||t.attr("action"),o=(t.attr("method")||"get").toLowerCase(),n||(n=e.mobile.getClosestBaseUrl(t),"get"===o&&(n=e.mobile.path.parseUrl(n).hrefNoSearch),n===e.mobile.path.documentBase.hrefNoHash&&(n=l.hrefNoSearch)),n=e.mobile.path.makeUrlAbsolute(n,e.mobile.getClosestBaseUrl(t)),!(e.mobile.path.isExternal(n)&&!e.mobile.path.isPermittedCrossDomainRequest(l,n))&&(i||(a=t.serializeArray(),c&&c[0].form===t[0]&&((s=c.attr("name"))&&(e.each(a,(function(e,t){return t.name===s?(s="",!1):void 0})),s&&a.push({name:s,value:c.attr("value")}))),r={url:n,options:{type:o,data:e.param(a),transition:t.jqmData("transition"),reverse:"reverse"===t.jqmData("direction"),reloadPage:!0}}),r))};e.mobile.document.delegate("form","submit",(function(t){var n;t.isDefaultPrevented()||(n=i(e(this)))&&(e.mobile.changePage(n.url,n.options),t.preventDefault())})),e.mobile.document.bind("vclick",(function(t){var n,s,o=t.target,r=!1;if(!(t.which>1)&&e.mobile.linkBindingEnabled){if(c=e(o),e.data(o,"mobile-button")){if(!i(e(o).closest("form"),!0))return;o.parentNode&&(o=o.parentNode)}else{if(!(o=a(o))||"#"===e.mobile.path.parseUrl(o.getAttribute("href")||"#").hash)return;if(!e(o).jqmHijackable().length)return}~o.className.indexOf("ui-link-inherit")?o.parentNode&&(s=e.data(o.parentNode,"buttonElements")):s=e.data(o,"buttonElements"),s?o=s.outer:r=!0,n=e(o),r&&(n=n.closest(".ui-btn")),n.length>0&&!n.hasClass("ui-state-disabled")&&(e.mobile.removeActiveLinkClass(!0),e.mobile.activeClickedLink=n,e.mobile.activeClickedLink.addClass(e.mobile.activeBtnClass))}})),e.mobile.document.bind("click",(function(i){if(e.mobile.linkBindingEnabled&&!i.isDefaultPrevented()){var s,o,r,c,d,h=a(i.target),u=e(h),p=function(){t.setTimeout((function(){e.mobile.removeActiveLinkClass(!0)}),200)};if(e.mobile.activeClickedLink&&e.mobile.activeClickedLink[0]===i.target.parentNode&&p(),h&&!(i.which>1)&&u.jqmHijackable().length){if(u.is(":jqmData(rel='back')"))return e.mobile.back(),!1;if(s=e.mobile.getClosestBaseUrl(u),o=e.mobile.path.makeUrlAbsolute(u.attr("href")||"#",s),!e.mobile.ajaxEnabled&&!e.mobile.path.isEmbeddedPage(o))return void p();if(!(-1===o.search("#")||e.mobile.path.isExternal(o)&&e.mobile.path.isAbsoluteUrl(o))){if(!(o=o.replace(/[^#]*#/,"")))return void i.preventDefault();o=e.mobile.path.isPath(o)?e.mobile.path.makeUrlAbsolute(o,s):e.mobile.path.makeUrlAbsolute("#"+o,l.hrefNoHash)}if(u.is("[rel='external']")||u.is(":jqmData(ajax='false')")||u.is("[target]")||e.mobile.path.isExternal(o)&&!e.mobile.path.isPermittedCrossDomainRequest(l,o))return void p();r=u.jqmData("transition"),c="reverse"===u.jqmData("direction")||u.jqmData("back"),d=u.attr("data-"+e.mobile.ns+"rel")||n,e.mobile.changePage(o,{transition:r,reverse:c,role:d,link:u}),i.preventDefault()}}})),e.mobile.document.delegate(".ui-page","pageshow.prefetch",(function(){var t=[];e(this).find("a:jqmData(prefetch)").each((function(){var i=e(this),n=i.attr("href");n&&-1===e.inArray(n,t)&&(t.push(n),e.mobile.loadPage(n,{role:i.attr("data-"+e.mobile.ns+"rel"),prefetch:!0}))}))})),e.mobile.pageContainer.pagecontainer(),e.mobile.document.bind("pageshow",(function(){o?o.done(e.mobile.resetActivePageHeight):e.mobile.resetActivePageHeight()})),e.mobile.window.bind("throttledresize",e.mobile.resetActivePageHeight)},e((function(){s.resolve()})),"complete"===i.readyState?r():e.mobile.window.load(r),e.when(s,e.mobile.navreadyDeferred).done((function(){e.mobile._registerInternalEvents()}))}(e),function(e,t){e.mobile.Transition=function(){this.init.apply(this,arguments)},e.extend(e.mobile.Transition.prototype,{toPreClass:" ui-page-pre-in",init:function(t,i,n,a){e.extend(this,{name:t,reverse:i,$to:n,$from:a,deferred:new e.Deferred})},cleanFrom:function(){this.$from.removeClass(e.mobile.activePageClass+" out in reverse "+this.name).height("")},beforeDoneIn:function(){},beforeDoneOut:function(){},beforeStartOut:function(){},doneIn:function(){this.beforeDoneIn(),this.$to.removeClass("out in reverse "+this.name).height(""),this.toggleViewportClass(),e.mobile.window.scrollTop()!==this.toScroll&&this.scrollPage(),this.sequential||this.$to.addClass(e.mobile.activePageClass),this.deferred.resolve(this.name,this.reverse,this.$to,this.$from,!0)},doneOut:function(e,t,i,n){this.beforeDoneOut(),this.startIn(e,t,i,n)},hideIn:function(e){this.$to.css("z-index",-10),e.call(this),this.$to.css("z-index","")},scrollPage:function(){e.event.special.scrollstart.enabled=!1,(e.mobile.hideUrlBar||this.toScroll!==e.mobile.defaultHomeScroll)&&t.scrollTo(0,this.toScroll),setTimeout((function(){e.event.special.scrollstart.enabled=!0}),150)},startIn:function(t,i,n,a){this.hideIn((function(){this.$to.addClass(e.mobile.activePageClass+this.toPreClass),a||e.mobile.focusPage(this.$to),this.$to.height(t+this.toScroll),n||this.scrollPage()})),this.$to.removeClass(this.toPreClass).addClass(this.name+" in "+i),n?this.doneIn():this.$to.animationComplete(e.proxy((function(){this.doneIn()}),this))},startOut:function(t,i,n){this.beforeStartOut(t,i,n),this.$from.height(t+e.mobile.window.scrollTop()).addClass(this.name+" out"+i)},toggleViewportClass:function(){e.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+this.name)},transition:function(){var t,i=this.reverse?" reverse":"",n=e.mobile.getScreenHeight(),a=!1!==e.mobile.maxTransitionWidth&&e.mobile.window.width()>e.mobile.maxTransitionWidth;return this.toScroll=e.mobile.navigate.history.getActive().lastScroll||e.mobile.defaultHomeScroll,t=!e.support.cssTransitions||!e.support.cssAnimations||a||!this.name||"none"===this.name||Math.max(e.mobile.window.scrollTop(),this.toScroll)>e.mobile.getMaxScrollForTransition(),this.toggleViewportClass(),this.$from&&!t?this.startOut(n,i,t):this.doneOut(n,i,t,!0),this.deferred.promise()}})}(e,this),function(e){e.mobile.SerialTransition=function(){this.init.apply(this,arguments)},e.extend(e.mobile.SerialTransition.prototype,e.mobile.Transition.prototype,{sequential:!0,beforeDoneOut:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(t,i,n){this.$from.animationComplete(e.proxy((function(){this.doneOut(t,i,n)}),this))}})}(e),function(e){e.mobile.ConcurrentTransition=function(){this.init.apply(this,arguments)},e.extend(e.mobile.ConcurrentTransition.prototype,e.mobile.Transition.prototype,{sequential:!1,beforeDoneIn:function(){this.$from&&this.cleanFrom()},beforeStartOut:function(e,t,i){this.doneOut(e,t,i)}})}(e),function(e){e.mobile.transitionHandlers={sequential:e.mobile.SerialTransition,simultaneous:e.mobile.ConcurrentTransition},e.mobile.defaultTransitionHandler=e.mobile.transitionHandlers.sequential,e.mobile.transitionFallbacks={},e.mobile._maybeDegradeTransition=function(t){return t&&!e.support.cssTransform3d&&e.mobile.transitionFallbacks[t]&&(t=e.mobile.transitionFallbacks[t]),t},e.mobile.getMaxScrollForTransition=e.mobile.getMaxScrollForTransition||function(){return 3*e.mobile.getScreenHeight()}}(e),function(e){e.mobile.transitionFallbacks.flip="fade"}(e),function(e){e.mobile.transitionFallbacks.flow="fade"}(e),function(e){e.mobile.transitionFallbacks.pop="fade"}(e),function(e){e.mobile.transitionHandlers.slide=e.mobile.transitionHandlers.simultaneous,e.mobile.transitionFallbacks.slide="fade"}(e),function(e){e.mobile.transitionFallbacks.slidedown="fade"}(e),function(e){e.mobile.transitionFallbacks.slidefade="fade"}(e),function(e){e.mobile.transitionFallbacks.slideup="fade"}(e),function(e){e.mobile.transitionFallbacks.turn="fade"}(e),function(e){e.mobile.degradeInputs={color:!1,date:!1,datetime:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:"number",search:"text",tel:!1,time:!1,url:!1,week:!1},e.mobile.page.prototype.options.degradeInputs=e.mobile.degradeInputs,e.mobile.degradeInputsWithin=function(t){(t=e(t)).find("input").not(e.mobile.page.prototype.keepNativeSelector()).each((function(){var t,i,n,a,s=e(this),o=this.getAttribute("type"),r=e.mobile.degradeInputs[o]||"text";e.mobile.degradeInputs[o]&&(n=(i=(t=e("<div>").html(s.clone()).html()).indexOf(" type=")>-1)?/\s+type=["']?\w+['"]?/:/\/?>/,a=' type="'+r+'" data-'+e.mobile.ns+'type="'+o+'"'+(i?"":">"),s.replaceWith(t.replace(n,a)))}))}}(e),function(e,t,i){e.widget("mobile.page",e.mobile.page,{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0,dialog:!1},_create:function(){this._super(),this.options.dialog&&(e.extend(this,{_inner:this.element.children(),_headerCloseButton:null}),this.options.enhanced||this._setCloseBtn(this.options.closeBtn))},_enhance:function(){this._super(),this.options.dialog&&this.element.addClass("ui-dialog").wrapInner(e("<div/>",{role:"dialog",class:"ui-dialog-contain ui-overlay-shadow"+(this.options.corners?" ui-corner-all":"")}))},_setOptions:function(t){var n,a,s=this.options;t.corners!==i&&this._inner.toggleClass("ui-corner-all",!!t.corners),t.overlayTheme!==i&&e.mobile.activePage[0]===this.element[0]&&(s.overlayTheme=t.overlayTheme,this._handlePageBeforeShow()),t.closeBtnText!==i&&(n=s.closeBtn,a=t.closeBtnText),t.closeBtn!==i&&(n=t.closeBtn),n&&this._setCloseBtn(n,a),this._super(t)},_handlePageBeforeShow:function(){this.options.overlayTheme&&this.options.dialog?(this.removeContainerBackground(),this.setContainerBackground(this.options.overlayTheme)):this._super()},_setCloseBtn:function(t,i){var n,a=this._headerCloseButton;"none"===(t="left"===t?"left":"right"===t?"right":"none")?a&&(a.remove(),a=null):a?(a.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+t),i&&a.text(i)):(n=this._inner.find(":jqmData(role='header')").first(),a=e("<a></a>",{href:"#",class:"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+t}).attr("data-"+e.mobile.ns+"rel","back").text(i||this.options.closeBtnText||"").prependTo(n)),this._headerCloseButton=a}})}(e),function(e,t,i){e.widget("mobile.dialog",{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0},_handlePageBeforeShow:function(){this._isCloseable=!0,this.options.overlayTheme&&this.element.page("removeContainerBackground").page("setContainerBackground",this.options.overlayTheme)},_handlePageBeforeHide:function(){this._isCloseable=!1},_handleVClickSubmit:function(t){var i,n=e(t.target).closest("vclick"===t.type?"a":"form");n.length&&!n.jqmData("transition")&&((i={})["data-"+e.mobile.ns+"transition"]=(e.mobile.navigate.history.getActive()||{}).transition||e.mobile.defaultDialogTransition,i["data-"+e.mobile.ns+"direction"]="reverse",n.attr(i))},_create:function(){var t=this.element,i=this.options;t.addClass("ui-dialog").wrapInner(e("<div/>",{role:"dialog",class:"ui-dialog-contain ui-overlay-shadow"+(i.corners?" ui-corner-all":"")})),e.extend(this,{_isCloseable:!1,_inner:t.children(),_headerCloseButton:null}),this._on(t,{vclick:"_handleVClickSubmit",submit:"_handleVClickSubmit",pagebeforeshow:"_handlePageBeforeShow",pagebeforehide:"_handlePageBeforeHide"}),this._setCloseBtn(i.closeBtn)},_setOptions:function(t){var n,a,s=this.options;t.corners!==i&&this._inner.toggleClass("ui-corner-all",!!t.corners),t.overlayTheme!==i&&e.mobile.activePage[0]===this.element[0]&&(s.overlayTheme=t.overlayTheme,this._handlePageBeforeShow()),t.closeBtnText!==i&&(n=s.closeBtn,a=t.closeBtnText),t.closeBtn!==i&&(n=t.closeBtn),n&&this._setCloseBtn(n,a),this._super(t)},_setCloseBtn:function(t,i){var n,a=this._headerCloseButton;"none"===(t="left"===t?"left":"right"===t?"right":"none")?a&&(a.remove(),a=null):a?(a.removeClass("ui-btn-left ui-btn-right").addClass("ui-btn-"+t),i&&a.text(i)):(n=this._inner.find(":jqmData(role='header')").first(),a=e("<a></a>",{role:"button",href:"#",class:"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-"+t}).text(i||this.options.closeBtnText||"").prependTo(n),this._on(a,{click:"close"})),this._headerCloseButton=a},close:function(){var t=e.mobile.navigate.history;this._isCloseable&&(this._isCloseable=!1,e.mobile.hashListeningEnabled&&t.activeIndex>0?e.mobile.back():e.mobile.pageContainer.pagecontainer("back"))}})}(e),function(e,t){var i=/([A-Z])/g,n=function(e){return"ui-btn-icon-"+(null===e?"left":e)};e.widget("mobile.collapsible",{options:{enhanced:!1,expandCueText:null,collapseCueText:null,collapsed:!0,heading:"h1,h2,h3,h4,h5,h6,legend",collapsedIcon:null,expandedIcon:null,iconpos:null,theme:null,contentTheme:null,inset:null,corners:null,mini:null},_create:function(){var t=this.element,i={accordion:t.closest(":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')"+(e.mobile.collapsibleset?", :mobile-collapsibleset":"")).addClass("ui-collapsible-set")};this._ui=i,this._renderedOptions=this._getOptions(this.options),this.options.enhanced?(i.heading=this.element.children(".ui-collapsible-heading"),i.content=i.heading.next(),i.anchor=i.heading.children(),i.status=i.anchor.children(".ui-collapsible-heading-status")):this._enhance(t,i),this._on(i.heading,{tap:function(){i.heading.find("a").first().addClass(e.mobile.activeBtnClass)},click:function(e){this._handleExpandCollapse(!i.heading.hasClass("ui-collapsible-heading-collapsed")),e.preventDefault(),e.stopPropagation()}})},_getOptions:function(t){var n,a=this._ui.accordion,s=this._ui.accordionWidget;for(n in t=e.extend({},t),a.length&&!s&&(this._ui.accordionWidget=s=a.data("mobile-collapsibleset")),t)t[n]=null!=t[n]?t[n]:s?s.options[n]:a.length?e.mobile.getAttribute(a[0],n.replace(i,"-$1").toLowerCase()):null,null==t[n]&&(t[n]=e.mobile.collapsible.defaults[n]);return t},_themeClassFromOption:function(e,t){return t?"none"===t?"":e+t:""},_enhance:function(t,i){var a,s=this._renderedOptions,o=this._themeClassFromOption("ui-body-",s.contentTheme);return t.addClass("ui-collapsible "+(s.inset?"ui-collapsible-inset ":"")+(s.inset&&s.corners?"ui-corner-all ":"")+(o?"ui-collapsible-themed-content ":"")),i.originalHeading=t.children(this.options.heading).first(),i.content=t.wrapInner("<div class='ui-collapsible-content "+o+"'></div>").children(".ui-collapsible-content"),i.heading=i.originalHeading,i.heading.is("legend")&&(i.heading=e("<div role='heading'>"+i.heading.html()+"</div>"),i.placeholder=e("<div>\x3c!-- placeholder for legend --\x3e</div>").insertBefore(i.originalHeading),i.originalHeading.remove()),a=s.collapsed?s.collapsedIcon?"ui-icon-"+s.collapsedIcon:"":s.expandedIcon?"ui-icon-"+s.expandedIcon:"",i.status=e("<span class='ui-collapsible-heading-status'></span>"),i.anchor=i.heading.detach().addClass("ui-collapsible-heading").append(i.status).wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().addClass("ui-btn "+(a?a+" ":"")+(a?n(s.iconpos)+" ":"")+this._themeClassFromOption("ui-btn-",s.theme)+" "+(s.mini?"ui-mini ":"")),i.heading.insertBefore(i.content),this._handleExpandCollapse(this.options.collapsed),i},refresh:function(){this._applyOptions(this.options),this._renderedOptions=this._getOptions(this.options)},_applyOptions:function(e){var i,a,s,o,r,l=this.element,c=this._renderedOptions,d=this._ui,h=d.anchor,u=d.status,p=this._getOptions(e);e.collapsed!==t&&this._handleExpandCollapse(e.collapsed),(i=l.hasClass("ui-collapsible-collapsed"))?p.expandCueText!==t&&u.text(p.expandCueText):p.collapseCueText!==t&&u.text(p.collapseCueText),r=p.collapsedIcon!==t?!1!==p.collapsedIcon:!1!==c.collapsedIcon,(p.iconpos!==t||p.collapsedIcon!==t||p.expandedIcon!==t)&&(h.removeClass([n(c.iconpos)].concat(c.expandedIcon?["ui-icon-"+c.expandedIcon]:[]).concat(c.collapsedIcon?["ui-icon-"+c.collapsedIcon]:[]).join(" ")),r&&h.addClass([n(p.iconpos!==t?p.iconpos:c.iconpos)].concat(i?["ui-icon-"+(p.collapsedIcon!==t?p.collapsedIcon:c.collapsedIcon)]:["ui-icon-"+(p.expandedIcon!==t?p.expandedIcon:c.expandedIcon)]).join(" "))),p.theme!==t&&(s=this._themeClassFromOption("ui-btn-",c.theme),a=this._themeClassFromOption("ui-btn-",p.theme),h.removeClass(s).addClass(a)),p.contentTheme!==t&&(s=this._themeClassFromOption("ui-body-",c.contentTheme),a=this._themeClassFromOption("ui-body-",p.contentTheme),d.content.removeClass(s).addClass(a)),p.inset!==t&&(l.toggleClass("ui-collapsible-inset",p.inset),o=!(!p.inset||!p.corners&&!c.corners)),p.corners!==t&&(o=!(!p.corners||!p.inset&&!c.inset)),o!==t&&l.toggleClass("ui-corner-all",o),p.mini!==t&&h.toggleClass("ui-mini",p.mini)},_setOptions:function(e){this._applyOptions(e),this._super(e),this._renderedOptions=this._getOptions(this.options)},_handleExpandCollapse:function(t){var i=this._renderedOptions,n=this._ui;n.status.text(t?i.expandCueText:i.collapseCueText),n.heading.toggleClass("ui-collapsible-heading-collapsed",t).find("a").first().toggleClass("ui-icon-"+i.expandedIcon,!t).toggleClass("ui-icon-"+i.collapsedIcon,t||i.expandedIcon===i.collapsedIcon).removeClass(e.mobile.activeBtnClass),this.element.toggleClass("ui-collapsible-collapsed",t),n.content.toggleClass("ui-collapsible-content-collapsed",t).attr("aria-hidden",t).trigger("updatelayout"),this.options.collapsed=t,this._trigger(t?"collapse":"expand")},expand:function(){this._handleExpandCollapse(!1)},collapse:function(){this._handleExpandCollapse(!0)},_destroy:function(){var e=this._ui;this.options.enhanced||(e.placeholder?(e.originalHeading.insertBefore(e.placeholder),e.placeholder.remove(),e.heading.remove()):(e.status.remove(),e.heading.removeClass("ui-collapsible-heading ui-collapsible-heading-collapsed").children().contents().unwrap()),e.anchor.contents().unwrap(),e.content.contents().unwrap(),this.element.removeClass("ui-collapsible ui-collapsible-collapsed ui-collapsible-themed-content ui-collapsible-inset ui-corner-all"))}}),e.mobile.collapsible.defaults={expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsedIcon:"plus",contentTheme:"inherit",expandedIcon:"minus",iconpos:"left",inset:!0,corners:!0,theme:"inherit",mini:!1}}(e),function(e){function t(t){var n,a=t.length,s=[];for(n=0;a>n;n++)t[n].className.match(i)||s.push(t[n]);return e(s)}var i=/\bui-screen-hidden\b/;e.mobile.behaviors.addFirstLastClasses={_getVisibles:function(e,i){var n;return i?n=t(e):0===(n=e.filter(":visible")).length&&(n=t(e)),n},_addFirstLastClasses:function(e,t,i){e.removeClass("ui-first-child ui-last-child"),t.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child"),i||this.element.trigger("updatelayout")},_removeFirstLastClasses:function(e){e.removeClass("ui-first-child ui-last-child")}}}(e),function(e,t){var i=":mobile-collapsible, "+e.mobile.collapsible.initSelector;e.widget("mobile.collapsibleset",e.extend({initSelector:":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",options:e.extend({enhanced:!1},e.mobile.collapsible.defaults),_handleCollapsibleExpand:function(t){var i=e(t.target).closest(".ui-collapsible");i.parent().is(":mobile-collapsibleset, :jqmData(role='collapsible-set')")&&i.siblings(".ui-collapsible:not(.ui-collapsible-collapsed)").collapsible("collapse")},_create:function(){var t=this.element,i=this.options;e.extend(this,{_classes:""}),i.enhanced||(t.addClass("ui-collapsible-set "+this._themeClassFromOption("ui-group-theme-",i.theme)+" "+(i.corners&&i.inset?"ui-corner-all ":"")),this.element.find(e.mobile.collapsible.initSelector).collapsible()),this._on(t,{collapsibleexpand:"_handleCollapsibleExpand"})},_themeClassFromOption:function(e,t){return t?"none"===t?"":e+t:""},_init:function(){this._refresh(!0),this.element.children(i).filter(":jqmData(collapsed='false')").collapsible("expand")},_setOptions:function(e){var i,n,a=this.element,s=this._themeClassFromOption("ui-group-theme-",e.theme);return s&&a.removeClass(this._themeClassFromOption("ui-group-theme-",this.options.theme)).addClass(s),e.inset!==t&&(n=!(!e.inset||!e.corners&&!this.options.corners)),e.corners!==t&&(n=!(!e.corners||!e.inset&&!this.options.inset)),n!==t&&a.toggleClass("ui-corner-all",n),i=this._super(e),this.element.children(":mobile-collapsible").collapsible("refresh"),i},_destroy:function(){var e=this.element;this._removeFirstLastClasses(e.children(i)),e.removeClass("ui-collapsible-set ui-corner-all "+this._themeClassFromOption("ui-group-theme-",this.options.theme)).children(":mobile-collapsible").collapsible("destroy")},_refresh:function(t){var n=this.element.children(i);this.element.find(e.mobile.collapsible.initSelector).not(".ui-collapsible").collapsible(),this._addFirstLastClasses(n,this._getVisibles(n,t),t)},refresh:function(){this._refresh(!1)}},e.mobile.behaviors.addFirstLastClasses))}(e),function(e){e.fn.fieldcontain=function(){return this.addClass("ui-field-contain")}}(e),function(e){e.fn.grid=function(t){return this.each((function(){var i,n,a=e(this),s=e.extend({grid:null},t),o=a.children(),r={solo:1,a:2,b:3,c:4,d:5},l=s.grid;if(!l)if(o.length<=5)for(n in r)r[n]===o.length&&(l=n);else l="a",a.addClass("ui-grid-duo");i=r[l],a.addClass("ui-grid-"+l),o.filter(":nth-child("+i+"n+1)").addClass("ui-block-a"),i>1&&o.filter(":nth-child("+i+"n+2)").addClass("ui-block-b"),i>2&&o.filter(":nth-child("+i+"n+3)").addClass("ui-block-c"),i>3&&o.filter(":nth-child("+i+"n+4)").addClass("ui-block-d"),i>4&&o.filter(":nth-child("+i+"n+5)").addClass("ui-block-e")}))}}(e),function(e,t){e.widget("mobile.navbar",{options:{iconpos:"top",grid:null},_create:function(){var t=this.element,n=t.find("a, button"),a=n.filter(":jqmData(icon)").length?this.options.iconpos:undefined;t.addClass("ui-navbar").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid}),n.each((function(){var t=e.mobile.getAttribute(this,"icon"),i=e.mobile.getAttribute(this,"theme"),n="ui-btn";i&&(n+=" ui-btn-"+i),t&&(n+=" ui-icon-"+t+" ui-btn-icon-"+a),e(this).addClass(n)})),t.delegate("a","vclick",(function(){var t=e(this);t.hasClass("ui-state-disabled")||t.hasClass("ui-disabled")||t.hasClass(e.mobile.activeBtnClass)||(n.removeClass(e.mobile.activeBtnClass),t.addClass(e.mobile.activeBtnClass),e(i).one("pagehide",(function(){t.removeClass(e.mobile.activeBtnClass)})))})),t.closest(".ui-page").bind("pagebeforeshow",(function(){n.filter(".ui-state-persist").addClass(e.mobile.activeBtnClass)}))}})}(e),function(e){var t=e.mobile.getAttribute;e.widget("mobile.listview",e.extend({options:{theme:null,countTheme:null,dividerTheme:null,icon:"carat-r",splitIcon:"carat-r",splitTheme:null,corners:!0,shadow:!0,inset:!1},_create:function(){var e=this,t="";t+=e.options.inset?" ui-listview-inset":"",e.options.inset&&(t+=e.options.corners?" ui-corner-all":"",t+=e.options.shadow?" ui-shadow":""),e.element.addClass(" ui-listview"+t),e.refresh(!0)},_findFirstElementByTagName:function(e,t,i,n){var a={};for(a[i]=a[n]=!0;e;){if(a[e.nodeName])return e;e=e[t]}return null},_addThumbClasses:function(t){var i,n,a=t.length;for(i=0;a>i;i++)(n=e(this._findFirstElementByTagName(t[i].firstChild,"nextSibling","img","IMG"))).length&&e(this._findFirstElementByTagName(n[0].parentNode,"parentNode","li","LI")).addClass(n.hasClass("ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb")},_getChildrenByTagName:function(t,i,n){var a=[],s={};for(s[i]=s[n]=!0,t=t.firstChild;t;)s[t.nodeName]&&a.push(t),t=t.nextSibling;return e(a)},_beforeListviewRefresh:e.noop,_afterListviewRefresh:e.noop,refresh:function(i){var n,a,s,o,r,l,c,d,h,u,p,f,g,m,v,b,x,y,w=this.options,k=this.element,S=!!e.nodeName(k[0],"ol"),C=k.attr("start"),_={},T=k.find(".ui-li-count"),A=t(k[0],"counttheme")||this.options.countTheme,P=A?"ui-body-"+A:"ui-body-inherit";for(w.theme&&k.addClass("ui-group-theme-"+w.theme),S&&(C||0===C)&&(p=parseInt(C,10)-1,k.css("counter-reset","listnumbering "+p)),this._beforeListviewRefresh(),a=0,s=(y=this._getChildrenByTagName(k[0],"li","LI")).length;s>a;a++)o=y.eq(a),r="",(i||o[0].className.search(/\bui-li-static\b|\bui-li-divider\b/)<0)&&(h=this._getChildrenByTagName(o[0],"a","A"),u="list-divider"===t(o[0],"role"),g=o.attr("value"),l=t(o[0],"theme"),h.length&&h[0].className.search(/\bui-btn\b/)<0&&!u?(d=!1!==(c=t(o[0],"icon"))&&(c||w.icon),h.removeClass("ui-link"),n="ui-btn",l&&(n+=" ui-btn-"+l),h.length>1?(r="ui-li-has-alt",m=h.last(),b=(v=t(m[0],"theme")||w.splitTheme||t(o[0],"theme",!0))?" ui-btn-"+v:"",x="ui-btn ui-btn-icon-notext ui-icon-"+(t(m[0],"icon")||t(o[0],"icon")||w.splitIcon)+b,m.attr("title",e.trim(m.getEncodedText())).addClass(x).empty(),h=h.first()):d&&(n+=" ui-btn-icon-right ui-icon-"+d),h.addClass(n)):u?(r="ui-li-divider ui-bar-"+(t(o[0],"theme")||w.dividerTheme||w.theme||"inherit"),o.attr("role","heading")):h.length<=0&&(r="ui-li-static ui-body-"+(l||"inherit")),S&&g&&(f=parseInt(g,10)-1,o.css("counter-reset","listnumbering "+f))),_[r]||(_[r]=[]),_[r].push(o[0]);for(r in _)e(_[r]).addClass(r);T.each((function(){e(this).closest("li").addClass("ui-li-has-count")})),P&&T.not("[class*='ui-body-']").addClass(P),this._addThumbClasses(y),this._addThumbClasses(y.find(".ui-btn")),this._afterListviewRefresh(),this._addFirstLastClasses(y,this._getVisibles(y,i),i)}},e.mobile.behaviors.addFirstLastClasses))}(e),function(e){e.widget("mobile.listview",e.mobile.listview,{options:{autodividers:!1,autodividersSelector:function(t){var i=e.trim(t.text())||null;return i?i=i.slice(0,1).toUpperCase():null}},_beforeListviewRefresh:function(){this.options.autodividers&&(this._replaceDividers(),this._superApply(arguments))},_replaceDividers:function(){var t,n,a,s,o,r=null,l=this.element;for(l.children("li:jqmData(role='list-divider')").remove(),n=l.children("li"),t=0;t<n.length;t++)a=n[t],(s=this.options.autodividersSelector(e(a)))&&r!==s&&((o=i.createElement("li")).appendChild(i.createTextNode(s)),o.setAttribute("data-"+e.mobile.ns+"role","list-divider"),a.parentNode.insertBefore(o,a)),r=s}})}(e),function(e){var t=/(^|\s)ui-li-divider($|\s)/,i=/(^|\s)ui-screen-hidden($|\s)/;e.widget("mobile.listview",e.mobile.listview,{options:{hideDividers:!1},_afterListviewRefresh:function(){var e,n,a,s=!0;if(this._superApply(arguments),this.options.hideDividers)for(n=(e=this._getChildrenByTagName(this.element[0],"li","LI")).length-1;n>-1;n--)(a=e[n]).className.match(t)?(s&&(a.className=a.className+" ui-screen-hidden"),s=!0):a.className.match(i)||(s=!1)}})}(e),function(e){e.mobile.nojs=function(t){e(":jqmData(role='nojs')",t).addClass("ui-nojs")}}(e),function(e){e.mobile.behaviors.formReset={_handleFormReset:function(){this._on(this.element.closest("form"),{reset:function(){this._delay("_reset")}})}}}(e),function(e,t){var i=e.mobile.path.hashToSelector;e.widget("mobile.checkboxradio",e.extend({initSelector:"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",options:{theme:"inherit",mini:!1,wrapperClass:null,enhanced:!1,iconpos:"left"},_create:function(){var t=this.element,i=this.options,n=function(e,t){return e.jqmData(t)||e.closest("form, fieldset").jqmData(t)},a=this.options.enhanced?{element:this.element.siblings("label"),isParent:!1}:this._findLabel(),s=t[0].type,o="ui-"+s+"-on",r="ui-"+s+"-off";("checkbox"===s||"radio"===s)&&(this.element[0].disabled&&(this.options.disabled=!0),i.iconpos=n(t,"iconpos")||a.element.attr("data-"+e.mobile.ns+"iconpos")||i.iconpos,i.mini=n(t,"mini")||i.mini,e.extend(this,{input:t,label:a.element,labelIsParent:a.isParent,inputtype:s,checkedClass:o,uncheckedClass:r}),this.options.enhanced||this._enhance(),this._on(a.element,{vmouseover:"_handleLabelVMouseOver",vclick:"_handleLabelVClick"}),this._on(t,{vmousedown:"_cacheVals",vclick:"_handleInputVClick",focus:"_handleInputFocus",blur:"_handleInputBlur"}),this._handleFormReset(),this.refresh())},_findLabel:function(){var t,n,a,s=this.element,o=s[0].labels;return o&&o.length>0?(n=e(o[0]),a=e.contains(n[0],s[0])):n=(a=(t=s.closest("label")).length>0)?t:e(this.document[0].getElementsByTagName("label")).filter("[for='"+i(s[0].id)+"']").first(),{element:n,isParent:a}},_enhance:function(){this.label.addClass("ui-btn ui-corner-all"),this.labelIsParent?this.input.add(this.label).wrapAll(this._wrapper()):(this.element.wrap(this._wrapper()),this.element.parent().prepend(this.label)),this._setOptions({theme:this.options.theme,iconpos:this.options.iconpos,mini:this.options.mini})},_wrapper:function(){return e("<div class='"+(this.options.wrapperClass?this.options.wrapperClass:"")+" ui-"+this.inputtype+(this.options.disabled?" ui-state-disabled":"")+"' ></div>")},_handleInputFocus:function(){this.label.addClass(e.mobile.focusClass)},_handleInputBlur:function(){this.label.removeClass(e.mobile.focusClass)},_handleInputVClick:function(){this.element.prop("checked",this.element.is(":checked")),this._getInputSet().not(this.element).prop("checked",!1),this._updateAll(!0)},_handleLabelVMouseOver:function(e){this.label.parent().hasClass("ui-state-disabled")&&e.stopPropagation()},_handleLabelVClick:function(e){var t=this.element;return t.is(":disabled")?void e.preventDefault():(this._cacheVals(),t.prop("checked","radio"===this.inputtype||!t.prop("checked")),t.triggerHandler("click"),this._getInputSet().not(t).prop("checked",!1),this._updateAll(),!1)},_cacheVals:function(){this._getInputSet().each((function(){e(this).attr("data-"+e.mobile.ns+"cacheVal",this.checked)}))},_getInputSet:function(){var t,n,a=this.element[0],s=a.name,o=a.form,r=this.element.parents().last().get(0),l=this.element;return s&&"radio"===this.inputtype&&r&&(t="input[type='radio'][name='"+i(s)+"']",o?((n=o.getAttribute("id"))&&(l=e(t+"[form='"+i(n)+"']",r)),l=e(o).find(t).filter((function(){return this.form===o})).add(l)):l=e(t,r).filter((function(){return!this.form}))),l},_updateAll:function(t){var i=this;this._getInputSet().each((function(){var n=e(this);!this.checked&&"checkbox"!==i.inputtype||t||n.trigger("change")})).checkboxradio("refresh")},_reset:function(){this.refresh()},_hasIcon:function(){var t,i,n=e.mobile.controlgroup;return!(n&&(t=this.element.closest(":mobile-controlgroup,"+n.prototype.initSelector),t.length>0))||"horizontal"!==((i=e.data(t[0],"mobile-controlgroup"))?i.options.type:t.attr("data-"+e.mobile.ns+"type"))},refresh:function(){var t=this.element[0].checked,i=e.mobile.activeBtnClass,n="ui-btn-icon-"+this.options.iconpos,a=[],s=[];this._hasIcon()?(s.push(i),a.push(n)):(s.push(n),(t?a:s).push(i)),t?(a.push(this.checkedClass),s.push(this.uncheckedClass)):(a.push(this.uncheckedClass),s.push(this.checkedClass)),this.widget().toggleClass("ui-state-disabled",this.element.prop("disabled")),this.label.addClass(a.join(" ")).removeClass(s.join(" "))},widget:function(){return this.label.parent()},_setOptions:function(e){var i=this.label,n=this.options,a=this.widget(),s=this._hasIcon();e.disabled!==t&&(this.input.prop("disabled",!!e.disabled),a.toggleClass("ui-state-disabled",!!e.disabled)),e.mini!==t&&a.toggleClass("ui-mini",!!e.mini),e.theme!==t&&i.removeClass("ui-btn-"+n.theme).addClass("ui-btn-"+e.theme),e.wrapperClass!==t&&a.removeClass(n.wrapperClass).addClass(e.wrapperClass),e.iconpos!==t&&s?i.removeClass("ui-btn-icon-"+n.iconpos).addClass("ui-btn-icon-"+e.iconpos):s||i.removeClass("ui-btn-icon-"+n.iconpos),this._super(e)}},e.mobile.behaviors.formReset))}(e),function(e,t){e.widget("mobile.button",{initSelector:"input[type='button'], input[type='submit'], input[type='reset']",options:{theme:null,icon:null,iconpos:"left",iconshadow:!1,corners:!0,shadow:!0,inline:null,mini:null,wrapperClass:null,enhanced:!1},_create:function(){this.element.is(":disabled")&&(this.options.disabled=!0),this.options.enhanced||this._enhance(),e.extend(this,{wrapper:this.element.parent()}),this._on({focus:function(){this.widget().addClass(e.mobile.focusClass)},blur:function(){this.widget().removeClass(e.mobile.focusClass)}}),this.refresh(!0)},_enhance:function(){this.element.wrap(this._button())},_button:function(){var t=this.options,i=this._getIconClasses(this.options);return e("<div class='ui-btn ui-input-btn"+(t.wrapperClass?" "+t.wrapperClass:"")+(t.theme?" ui-btn-"+t.theme:"")+(t.corners?" ui-corner-all":"")+(t.shadow?" ui-shadow":"")+(t.inline?" ui-btn-inline":"")+(t.mini?" ui-mini":"")+(t.disabled?" ui-state-disabled":"")+(i?" "+i:"")+"' >"+this.element.val()+"</div>")},widget:function(){return this.wrapper},_destroy:function(){this.element.insertBefore(this.wrapper),this.wrapper.remove()},_getIconClasses:function(e){return e.icon?"ui-icon-"+e.icon+(e.iconshadow?" ui-shadow-icon":"")+" ui-btn-icon-"+e.iconpos:""},_setOptions:function(i){var n=this.widget();i.theme!==t&&n.removeClass(this.options.theme).addClass("ui-btn-"+i.theme),i.corners!==t&&n.toggleClass("ui-corner-all",i.corners),i.shadow!==t&&n.toggleClass("ui-shadow",i.shadow),i.inline!==t&&n.toggleClass("ui-btn-inline",i.inline),i.mini!==t&&n.toggleClass("ui-mini",i.mini),i.disabled!==t&&(this.element.prop("disabled",i.disabled),n.toggleClass("ui-state-disabled",i.disabled)),(i.icon!==t||i.iconshadow!==t||i.iconpos!==t)&&n.removeClass(this._getIconClasses(this.options)).addClass(this._getIconClasses(e.extend({},this.options,i))),this._super(i)},refresh:function(t){var i,n=this.element.prop("disabled");this.options.icon&&"notext"===this.options.iconpos&&this.element.attr("title")&&this.element.attr("title",this.element.val()),t||(i=this.element.detach(),e(this.wrapper).text(this.element.val()).append(i)),this.options.disabled!==n&&this._setOptions({disabled:n})}})}(e),function(e){var t=e("meta[name=viewport]"),i=t.attr("content"),n=i+",maximum-scale=1, user-scalable=no",a=i+",maximum-scale=10, user-scalable=yes",s=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(i);e.mobile.zoom=e.extend({},{enabled:!s,locked:!1,disable:function(i){s||e.mobile.zoom.locked||(t.attr("content",n),e.mobile.zoom.enabled=!1,e.mobile.zoom.locked=i||!1)},enable:function(i){s||e.mobile.zoom.locked&&!0!==i||(t.attr("content",a),e.mobile.zoom.enabled=!0,e.mobile.zoom.locked=!1)},restore:function(){s||(t.attr("content",i),e.mobile.zoom.enabled=!0)}})}(e),function(e,t){e.widget("mobile.textinput",{initSelector:"input[type='text'],input[type='search'],:jqmData(type='search'),input[type='number'],:jqmData(type='number'),input[type='password'],input[type='email'],input[type='url'],input[type='tel'],textarea,input[type='time'],input[type='date'],input[type='month'],input[type='week'],input[type='datetime'],input[type='datetime-local'],input[type='color'],input:not([type]),input[type='file']",options:{theme:null,corners:!0,mini:!1,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,wrapperClass:"",enhanced:!1},_create:function(){var t=this.options,i=this.element.is("[type='search'], :jqmData(type='search')"),n="TEXTAREA"===this.element[0].tagName,a=this.element.is("[data-"+(e.mobile.ns||"")+"type='range']"),s=(this.element.is("input")||this.element.is("[data-"+(e.mobile.ns||"")+"type='search']"))&&!a;this.element.prop("disabled")&&(t.disabled=!0),e.extend(this,{classes:this._classesFromOptions(),isSearch:i,isTextarea:n,isRange:a,inputNeedsWrap:s}),this._autoCorrect(),t.enhanced||this._enhance(),this._on({focus:"_handleFocus",blur:"_handleBlur"})},refresh:function(){this.setOptions({disabled:this.element.is(":disabled")})},_enhance:function(){var e=[];this.isTextarea&&e.push("ui-input-text"),(this.isTextarea||this.isRange)&&e.push("ui-shadow-inset"),this.inputNeedsWrap?this.element.wrap(this._wrap()):e=e.concat(this.classes),this.element.addClass(e.join(" "))},widget:function(){return this.inputNeedsWrap?this.element.parent():this.element},_classesFromOptions:function(){var e=this.options,t=[];return t.push("ui-body-"+(null===e.theme?"inherit":e.theme)),e.corners&&t.push("ui-corner-all"),e.mini&&t.push("ui-mini"),e.disabled&&t.push("ui-state-disabled"),e.wrapperClass&&t.push(e.wrapperClass),t},_wrap:function(){return e("<div class='"+(this.isSearch?"ui-input-search ":"ui-input-text ")+this.classes.join(" ")+" ui-shadow-inset'></div>")},_autoCorrect:function(){void 0===this.element[0].autocorrect||e.support.touchOverflow||(this.element[0].setAttribute("autocorrect","off"),this.element[0].setAttribute("autocomplete","off"))},_handleBlur:function(){this.widget().removeClass(e.mobile.focusClass),this.options.preventFocusZoom&&e.mobile.zoom.enable(!0)},_handleFocus:function(){this.options.preventFocusZoom&&e.mobile.zoom.disable(!0),this.widget().addClass(e.mobile.focusClass)},_setOptions:function(e){var i=this.widget();this._super(e),(e.disabled!==t||e.mini!==t||e.corners!==t||e.theme!==t||e.wrapperClass!==t)&&(i.removeClass(this.classes.join(" ")),this.classes=this._classesFromOptions(),i.addClass(this.classes.join(" "))),e.disabled!==t&&this.element.prop("disabled",!!e.disabled)},_destroy:function(){this.options.enhanced||(this.inputNeedsWrap&&this.element.unwrap(),this.element.removeClass("ui-input-text "+this.classes.join(" ")))}})}(e),function(e,n){e.widget("mobile.slider",e.extend({initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",widgetEventPrefix:"slide",options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!1},_create:function(){var a,s,o,r,l,c,d,h,u,p,f=this.element,g=this.options.trackTheme||e.mobile.getAttribute(f[0],"theme"),m=g?" ui-bar-"+g:" ui-bar-inherit",v=this.options.corners||f.jqmData("corners")?" ui-corner-all":"",b=this.options.mini||f.jqmData("mini")?" ui-mini":"",x=f[0].nodeName.toLowerCase(),y="select"===x,w=f.parent().is(":jqmData(role='rangeslider')"),k=y?"ui-slider-switch":"",S=f.attr("id"),C=e("[for='"+S+"']"),_=C.attr("id")||S+"-label",T=y?0:parseFloat(f.attr("min")),A=y?f.find("option").length-1:parseFloat(f.attr("max")),P=t.parseFloat(f.attr("step")||1),D=i.createElement("a"),I=e(D),E=i.createElement("div"),L=e(E),M=!(!this.options.highlight||y)&&function(){var t=i.createElement("div");return t.className="ui-slider-bg "+e.mobile.activeBtnClass,e(t).prependTo(L)}();if(C.attr("id",_),this.isToggleSwitch=y,D.setAttribute("href","#"),E.setAttribute("role","application"),E.className=[this.isToggleSwitch?"ui-slider ui-slider-track ui-shadow-inset ":"ui-slider-track ui-shadow-inset ",k,m,v,b].join(""),D.className="ui-slider-handle",E.appendChild(D),I.attr({role:"slider","aria-valuemin":T,"aria-valuemax":A,"aria-valuenow":this._value(),"aria-valuetext":this._value(),title:this._value(),"aria-labelledby":_}),e.extend(this,{slider:L,handle:I,control:f,type:x,step:P,max:A,min:T,valuebg:M,isRangeslider:w,dragging:!1,beforeStart:null,userModified:!1,mouseMoved:!1}),y){for((d=f.attr("tabindex"))&&I.attr("tabindex",d),f.attr("tabindex","-1").focus((function(){e(this).blur(),I.focus()})),(s=i.createElement("div")).className="ui-slider-inneroffset",o=0,r=E.childNodes.length;r>o;o++)s.appendChild(E.childNodes[o]);for(E.appendChild(s),I.addClass("ui-slider-handle-snapping"),l=0,c=(a=f.find("option")).length;c>l;l++)h=l?"a":"b",u=l?" "+e.mobile.activeBtnClass:"",(p=i.createElement("span")).className=["ui-slider-label ui-slider-label-",h,u].join(""),p.setAttribute("role","img"),p.appendChild(i.createTextNode(a[l].innerHTML)),e(p).prependTo(L);this._labels=e(".ui-slider-label",L)}f.addClass(y?"ui-slider-switch":"ui-slider-input"),this._on(f,{change:"_controlChange",keyup:"_controlKeyup",blur:"_controlBlur",vmouseup:"_controlVMouseUp"}),L.bind("vmousedown",e.proxy(this._sliderVMouseDown,this)).bind("vclick",!1),this._on(i,{vmousemove:"_preventDocumentDrag"}),this._on(L.add(i),{vmouseup:"_sliderVMouseUp"}),L.insertAfter(f),y||w||(s=this.options.mini?"<div class='ui-slider ui-mini'>":"<div class='ui-slider'>",f.add(L).wrapAll(s)),this._on(this.handle,{vmousedown:"_handleVMouseDown",keydown:"_handleKeydown",keyup:"_handleKeyup"}),this.handle.bind("vclick",!1),this._handleFormReset(),this.refresh(n,n,!0)},_setOptions:function(e){e.theme!==n&&this._setTheme(e.theme),e.trackTheme!==n&&this._setTrackTheme(e.trackTheme),e.corners!==n&&this._setCorners(e.corners),e.mini!==n&&this._setMini(e.mini),e.highlight!==n&&this._setHighlight(e.highlight),e.disabled!==n&&this._setDisabled(e.disabled),this._super(e)},_controlChange:function(e){return!1!==this._trigger("controlchange",e)&&void(this.mouseMoved||this.refresh(this._value(),!0))},_controlKeyup:function(){this.refresh(this._value(),!0,!0)},_controlBlur:function(){this.refresh(this._value(),!0)},_controlVMouseUp:function(){this._checkedRefresh()},_handleVMouseDown:function(){this.handle.focus()},_handleKeydown:function(t){var i=this._value();if(!this.options.disabled){switch(t.keyCode){case e.mobile.keyCode.HOME:case e.mobile.keyCode.END:case e.mobile.keyCode.PAGE_UP:case e.mobile.keyCode.PAGE_DOWN:case e.mobile.keyCode.UP:case e.mobile.keyCode.RIGHT:case e.mobile.keyCode.DOWN:case e.mobile.keyCode.LEFT:t.preventDefault(),this._keySliding||(this._keySliding=!0,this.handle.addClass("ui-state-active"))}switch(t.keyCode){case e.mobile.keyCode.HOME:this.refresh(this.min);break;case e.mobile.keyCode.END:this.refresh(this.max);break;case e.mobile.keyCode.PAGE_UP:case e.mobile.keyCode.UP:case e.mobile.keyCode.RIGHT:this.refresh(i+this.step);break;case e.mobile.keyCode.PAGE_DOWN:case e.mobile.keyCode.DOWN:case e.mobile.keyCode.LEFT:this.refresh(i-this.step)}}},_handleKeyup:function(){this._keySliding&&(this._keySliding=!1,this.handle.removeClass("ui-state-active"))},_sliderVMouseDown:function(e){return this.options.disabled||1!==e.which&&0!==e.which&&e.which!==n||!1===this._trigger("beforestart",e)||(this.dragging=!0,this.userModified=!1,this.mouseMoved=!1,this.isToggleSwitch&&(this.beforeStart=this.element[0].selectedIndex),this.refresh(e),this._trigger("start")),!1},_sliderVMouseUp:function(){return this.dragging?(this.dragging=!1,this.isToggleSwitch&&(this.handle.addClass("ui-slider-handle-snapping"),this.refresh(this.mouseMoved?this.userModified?0===this.beforeStart?1:0:this.beforeStart:0===this.beforeStart?1:0)),this.mouseMoved=!1,this._trigger("stop"),!1):void 0},_preventDocumentDrag:function(e){return!1!==this._trigger("drag",e)&&(this.dragging&&!this.options.disabled?(this.mouseMoved=!0,this.isToggleSwitch&&this.handle.removeClass("ui-slider-handle-snapping"),this.refresh(e),this.userModified=this.beforeStart!==this.element[0].selectedIndex,!1):void 0)},_checkedRefresh:function(){this.value!==this._value()&&this.refresh(this._value())},_value:function(){return this.isToggleSwitch?this.element[0].selectedIndex:parseFloat(this.element.val())},_reset:function(){this.refresh(n,!1,!0)},refresh:function(t,n,a){var s,o,r,l,c,d,h,u,p,f,g,m,v,b,x,y,w,k,S,C=this,_=e.mobile.getAttribute(this.element[0],"theme"),T=this.options.theme||_,A=T?" ui-btn-"+T:"",P=this.options.trackTheme||_,D=P?" ui-bar-"+P:" ui-bar-inherit",I=this.options.corners?" ui-corner-all":"",E=this.options.mini?" ui-mini":"";if(C.slider[0].className=[this.isToggleSwitch?"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset":"ui-slider-track ui-shadow-inset",D,I,E].join(""),(this.options.disabled||this.element.prop("disabled"))&&this.disable(),this.value=this._value(),this.options.highlight&&!this.isToggleSwitch&&0===this.slider.find(".ui-slider-bg").length&&(this.valuebg=function(){var t=i.createElement("div");return t.className="ui-slider-bg "+e.mobile.activeBtnClass,e(t).prependTo(C.slider)}()),this.handle.addClass("ui-btn"+A+" ui-shadow"),d=this.element,u=(h=!this.isToggleSwitch)?[]:d.find("option"),p=h?parseFloat(d.attr("min")):0,f=h?parseFloat(d.attr("max")):u.length-1,g=h&&parseFloat(d.attr("step"))>0?parseFloat(d.attr("step")):1,"object"==typeof t){if(r=t,8,s=this.slider.offset().left,l=(o=this.slider.width())/((f-p)/g),!this.dragging||r.pageX<s-8||r.pageX>s+o+8)return;c=l>1?(r.pageX-s)/o*100:Math.round((r.pageX-s)/o*100)}else null==t&&(t=h?parseFloat(d.val()||0):d[0].selectedIndex),c=(parseFloat(t)-p)/(f-p)*100;if(!isNaN(c)&&(b=(m=c/100*(f-p)+p)-(v=(m-p)%g),2*Math.abs(v)>=g&&(b+=v>0?g:-g),x=100/((f-p)/g),m=parseFloat(b.toFixed(5)),void 0===l&&(l=o/((f-p)/g)),l>1&&h&&(c=(m-p)*x*(1/g)),0>c&&(c=0),c>100&&(c=100),p>m&&(m=p),m>f&&(m=f),this.handle.css("left",c+"%"),this.handle[0].setAttribute("aria-valuenow",h?m:u.eq(m).attr("value")),this.handle[0].setAttribute("aria-valuetext",h?m:u.eq(m).getEncodedText()),this.handle[0].setAttribute("title",h?m:u.eq(m).getEncodedText()),this.valuebg&&this.valuebg.css("width",c+"%"),this._labels&&(y=this.handle.width()/this.slider.width()*100,w=c&&y+(100-y)*c/100,k=100===c?0:Math.min(y+100-w,100),this._labels.each((function(){var t=e(this).hasClass("ui-slider-label-a");e(this).width((t?w:k)+"%")}))),!a)){if(S=!1,h?(S=parseFloat(d.val())!==m,d.val(m)):(S=d[0].selectedIndex!==m,d[0].selectedIndex=m),!1===this._trigger("beforechange",t))return!1;!n&&S&&d.trigger("change")}},_setHighlight:function(e){(e=!!e)?(this.options.highlight=!!e,this.refresh()):this.valuebg&&(this.valuebg.remove(),this.valuebg=!1)},_setTheme:function(e){this.handle.removeClass("ui-btn-"+this.options.theme).addClass("ui-btn-"+e);var t=this.options.theme?this.options.theme:"inherit",i=e||"inherit";this.control.removeClass("ui-body-"+t).addClass("ui-body-"+i)},_setTrackTheme:function(e){var t=this.options.trackTheme?this.options.trackTheme:"inherit",i=e||"inherit";this.slider.removeClass("ui-body-"+t).addClass("ui-body-"+i)},_setMini:function(e){e=!!e,this.isToggleSwitch||this.isRangeslider||(this.slider.parent().toggleClass("ui-mini",e),this.element.toggleClass("ui-mini",e)),this.slider.toggleClass("ui-mini",e)},_setCorners:function(e){this.slider.toggleClass("ui-corner-all",e),this.isToggleSwitch||this.control.toggleClass("ui-corner-all",e)},_setDisabled:function(e){e=!!e,this.element.prop("disabled",e),this.slider.toggleClass("ui-state-disabled",e).attr("aria-disabled",e),this.element.toggleClass("ui-state-disabled",e)}},e.mobile.behaviors.formReset))}(e),function(e){function t(){return i||(i=e("<div></div>",{class:"ui-slider-popup ui-shadow ui-corner-all"})),i.clone()}var i;e.widget("mobile.slider",e.mobile.slider,{options:{popupEnabled:!1,showValue:!1},_create:function(){this._super(),e.extend(this,{_currentValue:null,_popup:null,_popupVisible:!1}),this._setOption("popupEnabled",this.options.popupEnabled),this._on(this.handle,{vmousedown:"_showPopup"}),this._on(this.slider.add(this.document),{vmouseup:"_hidePopup"}),this._refresh()},_positionPopup:function(){var e=this.handle.offset();this._popup.offset({left:e.left+(this.handle.width()-this._popup.width())/2,top:e.top-this._popup.outerHeight()-5})},_setOption:function(e,i){this._super(e,i),"showValue"===e?this.handle.html(i&&!this.options.mini?this._value():""):"popupEnabled"===e&&i&&!this._popup&&(this._popup=t().addClass("ui-body-"+(this.options.theme||"a")).hide().insertBefore(this.element))},refresh:function(){this._super.apply(this,arguments),this._refresh()},_refresh:function(){var e,t=this.options;t.popupEnabled&&this.handle.removeAttr("title"),(e=this._value())!==this._currentValue&&(this._currentValue=e,t.popupEnabled&&this._popup&&(this._positionPopup(),this._popup.html(e)),t.showValue&&!this.options.mini&&this.handle.html(e))},_showPopup:function(){this.options.popupEnabled&&!this._popupVisible&&(this.handle.html(""),this._popup.show(),this._positionPopup(),this._popupVisible=!0)},_hidePopup:function(){var e=this.options;e.popupEnabled&&this._popupVisible&&(e.showValue&&!e.mini&&this.handle.html(this._value()),this._popup.hide(),this._popupVisible=!1)}})}(e),function(e,t){e.widget("mobile.flipswitch",e.extend({options:{onText:"On",offText:"Off",theme:null,enhanced:!1,wrapperClass:null,corners:!0,mini:!1},_create:function(){this.options.enhanced?e.extend(this,{flipswitch:this.element.parent(),on:this.element.find(".ui-flipswitch-on").eq(0),off:this.element.find(".ui-flipswitch-off").eq(0),type:this.element.get(0).tagName}):this._enhance(),this._handleFormReset(),this._originalTabIndex=this.element.attr("tabindex"),null!=this._originalTabIndex&&this.on.attr("tabindex",this._originalTabIndex),this.element.attr("tabindex","-1"),this._on({focus:"_handleInputFocus"}),this.element.is(":disabled")&&this._setOptions({disabled:!0}),this._on(this.flipswitch,{click:"_toggle",swipeleft:"_left",swiperight:"_right"}),this._on(this.on,{keydown:"_keydown"}),this._on({change:"refresh"})},_handleInputFocus:function(){this.on.focus()},widget:function(){return this.flipswitch},_left:function(){this.flipswitch.removeClass("ui-flipswitch-active"),"SELECT"===this.type?this.element.get(0).selectedIndex=0:this.element.prop("checked",!1),this.element.trigger("change")},_right:function(){this.flipswitch.addClass("ui-flipswitch-active"),"SELECT"===this.type?this.element.get(0).selectedIndex=1:this.element.prop("checked",!0),this.element.trigger("change")},_enhance:function(){var t=e("<div>"),i=this.options,n=this.element,a=i.theme?i.theme:"inherit",s=e("<a></a>",{href:"#"}),o=e("<span></span>"),r=n.get(0).tagName,l="INPUT"===r?i.onText:n.find("option").eq(1).text(),c="INPUT"===r?i.offText:n.find("option").eq(0).text();s.addClass("ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit").text(l),o.addClass("ui-flipswitch-off").text(c),t.addClass("ui-flipswitch ui-shadow-inset ui-bar-"+a+" "+(i.wrapperClass?i.wrapperClass:"")+" "+(n.is(":checked")||n.find("option").eq(1).is(":selected")?"ui-flipswitch-active":"")+(n.is(":disabled")?" ui-state-disabled":"")+(i.corners?" ui-corner-all":"")+(i.mini?" ui-mini":"")).append(s,o),n.addClass("ui-flipswitch-input").after(t).appendTo(t),e.extend(this,{flipswitch:t,on:s,off:o,type:r})},_reset:function(){this.refresh()},refresh:function(){var e,t=this.flipswitch.hasClass("ui-flipswitch-active")?"_right":"_left";(e="SELECT"===this.type?this.element.get(0).selectedIndex>0?"_right":"_left":this.element.prop("checked")?"_right":"_left")!==t&&this[e]()},_toggle:function(){this[this.flipswitch.hasClass("ui-flipswitch-active")?"_left":"_right"]()},_keydown:function(t){t.which===e.mobile.keyCode.LEFT?this._left():t.which===e.mobile.keyCode.RIGHT?this._right():t.which===e.mobile.keyCode.SPACE&&(this._toggle(),t.preventDefault())},_setOptions:function(e){if(e.theme!==t){var i=e.theme?e.theme:"inherit",n=e.theme?e.theme:"inherit";this.widget().removeClass("ui-bar-"+i).addClass("ui-bar-"+n)}e.onText!==t&&this.on.text(e.onText),e.offText!==t&&this.off.text(e.offText),e.disabled!==t&&this.widget().toggleClass("ui-state-disabled",e.disabled),e.mini!==t&&this.widget().toggleClass("ui-mini",e.mini),e.corners!==t&&this.widget().toggleClass("ui-corner-all",e.corners),this._super(e)},_destroy:function(){this.options.enhanced||(null!=this._originalTabIndex?this.element.attr("tabindex",this._originalTabIndex):this.element.removeAttr("tabindex"),this.on.remove(),this.off.remove(),this.element.unwrap(),this.flipswitch.remove(),this.removeClass("ui-flipswitch-input"))}},e.mobile.behaviors.formReset))}(e),function(e,t){e.widget("mobile.rangeslider",e.extend({options:{theme:null,trackTheme:null,corners:!0,mini:!1,highlight:!0},_create:function(){var t=this.element,i=this.options.mini?"ui-rangeslider ui-mini":"ui-rangeslider",n=t.find("input").first(),a=t.find("input").last(),s=t.find("label").first(),o=e.data(n.get(0),"mobile-slider")||e.data(n.slider().get(0),"mobile-slider"),r=e.data(a.get(0),"mobile-slider")||e.data(a.slider().get(0),"mobile-slider"),l=o.slider,c=r.slider,d=o.handle,h=e("<div class='ui-rangeslider-sliders' />").appendTo(t);n.addClass("ui-rangeslider-first"),a.addClass("ui-rangeslider-last"),t.addClass(i),l.appendTo(h),c.appendTo(h),s.insertBefore(t),d.prependTo(c),e.extend(this,{_inputFirst:n,_inputLast:a,_sliderFirst:l,_sliderLast:c,_label:s,_targetVal:null,_sliderTarget:!1,_sliders:h,_proxy:!1}),this.refresh(),this._on(this.element.find("input.ui-slider-input"),{slidebeforestart:"_slidebeforestart",slidestop:"_slidestop",slidedrag:"_slidedrag",slidebeforechange:"_change",blur:"_change",keyup:"_change"}),this._on({mousedown:"_change"}),this._on(this.element.closest("form"),{reset:"_handleReset"}),this._on(d,{vmousedown:"_dragFirstHandle"})},_handleReset:function(){var e=this;setTimeout((function(){e._updateHighlight()}),0)},_dragFirstHandle:function(t){return e.data(this._inputFirst.get(0),"mobile-slider").dragging=!0,e.data(this._inputFirst.get(0),"mobile-slider").refresh(t),e.data(this._inputFirst.get(0),"mobile-slider")._trigger("start"),!1},_slidedrag:function(t){var i=e(t.target).is(this._inputFirst),n=i?this._inputLast:this._inputFirst;return this._sliderTarget=!1,"first"===this._proxy&&i||"last"===this._proxy&&!i?(e.data(n.get(0),"mobile-slider").dragging=!0,e.data(n.get(0),"mobile-slider").refresh(t),!1):void 0},_slidestop:function(t){var i=e(t.target).is(this._inputFirst);this._proxy=!1,this.element.find("input").trigger("vmouseup"),this._sliderFirst.css("z-index",i?1:"")},_slidebeforestart:function(t){this._sliderTarget=!1,e(t.originalEvent.target).hasClass("ui-slider-track")&&(this._sliderTarget=!0,this._targetVal=e(t.target).val())},_setOptions:function(e){e.theme!==t&&this._setTheme(e.theme),e.trackTheme!==t&&this._setTrackTheme(e.trackTheme),e.mini!==t&&this._setMini(e.mini),e.highlight!==t&&this._setHighlight(e.highlight),e.disabled!==t&&this._setDisabled(e.disabled),this._super(e),this.refresh()},refresh:function(){var e=this.element,t=this.options;(this._inputFirst.is(":disabled")||this._inputLast.is(":disabled"))&&(this.options.disabled=!0),e.find("input").slider({theme:t.theme,trackTheme:t.trackTheme,disabled:t.disabled,corners:t.corners,mini:t.mini,highlight:t.highlight}).slider("refresh"),this._updateHighlight()},_change:function(t){if("keyup"===t.type)return this._updateHighlight(),!1;var i=this,n=parseFloat(this._inputFirst.val(),10),a=parseFloat(this._inputLast.val(),10),s=e(t.target).hasClass("ui-rangeslider-first"),o=s?this._inputFirst:this._inputLast,r=s?this._inputLast:this._inputFirst;if(this._inputFirst.val()>this._inputLast.val()&&"mousedown"===t.type&&!e(t.target).hasClass("ui-slider-handle"))o.blur();else if("mousedown"===t.type)return;return n>a&&!this._sliderTarget?(o.val(s?a:n).slider("refresh"),this._trigger("normalize")):n>a&&(o.val(this._targetVal).slider("refresh"),setTimeout((function(){r.val(s?n:a).slider("refresh"),e.data(r.get(0),"mobile-slider").handle.focus(),i._sliderFirst.css("z-index",s?"":1),i._trigger("normalize")}),0),this._proxy=s?"first":"last"),n===a?(e.data(o.get(0),"mobile-slider").handle.css("z-index",1),e.data(r.get(0),"mobile-slider").handle.css("z-index",0)):(e.data(r.get(0),"mobile-slider").handle.css("z-index",""),e.data(o.get(0),"mobile-slider").handle.css("z-index","")),this._updateHighlight(),!(n>=a)&&void 0},_updateHighlight:function(){var t=parseInt(e.data(this._inputFirst.get(0),"mobile-slider").handle.get(0).style.left,10),i=parseInt(e.data(this._inputLast.get(0),"mobile-slider").handle.get(0).style.left,10)-t;this.element.find(".ui-slider-bg").css({"margin-left":t+"%",width:i+"%"})},_setTheme:function(e){this._inputFirst.slider("option","theme",e),this._inputLast.slider("option","theme",e)},_setTrackTheme:function(e){this._inputFirst.slider("option","trackTheme",e),this._inputLast.slider("option","trackTheme",e)},_setMini:function(e){this._inputFirst.slider("option","mini",e),this._inputLast.slider("option","mini",e),this.element.toggleClass("ui-mini",!!e)},_setHighlight:function(e){this._inputFirst.slider("option","highlight",e),this._inputLast.slider("option","highlight",e)},_setDisabled:function(e){this._inputFirst.prop("disabled",e),this._inputLast.prop("disabled",e)},_destroy:function(){this._label.prependTo(this.element),this.element.removeClass("ui-rangeslider ui-mini"),this._inputFirst.after(this._sliderFirst),this._inputLast.after(this._sliderLast),this._sliders.remove(),this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy")}},e.mobile.behaviors.formReset))}(e),function(e,t){e.widget("mobile.textinput",e.mobile.textinput,{options:{clearBtn:!1,clearBtnText:"Clear text"},_create:function(){this._super(),this.isSearch&&(this.options.clearBtn=!0),this.options.clearBtn&&this.inputNeedsWrap&&this._addClearBtn()},clearButton:function(){return e("<a href='#' tabindex='-1' aria-hidden='true' class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'></a>").attr("title",this.options.clearBtnText).text(this.options.clearBtnText)},_clearBtnClick:function(e){this.element.val("").focus().trigger("change"),this._clearBtn.addClass("ui-input-clear-hidden"),e.preventDefault()},_addClearBtn:function(){this.options.enhanced||this._enhanceClear(),e.extend(this,{_clearBtn:this.widget().find("a.ui-input-clear")}),this._bindClearEvents(),this._toggleClear()},_enhanceClear:function(){this.clearButton().appendTo(this.widget()),this.widget().addClass("ui-input-has-clear")},_bindClearEvents:function(){this._on(this._clearBtn,{click:"_clearBtnClick"}),this._on({keyup:"_toggleClear",change:"_toggleClear",input:"_toggleClear",focus:"_toggleClear",blur:"_toggleClear",cut:"_toggleClear",paste:"_toggleClear"})},_unbindClear:function(){this._off(this._clearBtn,"click"),this._off(this.element,"keyup change input focus blur cut paste")},_setOptions:function(e){this._super(e),e.clearBtn===t||this.element.is("textarea, :jqmData(type='range')")||(e.clearBtn?this._addClearBtn():this._destroyClear()),e.clearBtnText!==t&&this._clearBtn!==t&&this._clearBtn.text(e.clearBtnText).attr("title",e.clearBtnText)},_toggleClear:function(){this._delay("_toggleClearClass",0)},_toggleClearClass:function(){this._clearBtn.toggleClass("ui-input-clear-hidden",!this.element.val())},_destroyClear:function(){this.widget().removeClass("ui-input-has-clear"),this._unbindClear(),this._clearBtn.remove()},_destroy:function(){this._super(),this.options.clearBtn&&this._destroyClear()}})}(e),function(e,t){e.widget("mobile.textinput",e.mobile.textinput,{options:{autogrow:!0,keyupTimeoutBuffer:100},_create:function(){this._super(),this.options.autogrow&&this.isTextarea&&this._autogrow()},_autogrow:function(){this.element.addClass("ui-textinput-autogrow"),this._on({keyup:"_timeout",change:"_timeout",input:"_timeout",paste:"_timeout"}),this._on(!0,this.document,{pageshow:"_handleShow",popupbeforeposition:"_handleShow",updatelayout:"_handleShow",panelopen:"_handleShow"})},_handleShow:function(t){e.contains(t.target,this.element[0])&&this.element.is(":visible")&&("popupbeforeposition"!==t.type&&this.element.addClass("ui-textinput-autogrow-resize").animationComplete(e.proxy((function(){this.element.removeClass("ui-textinput-autogrow-resize")}),this),"transition"),this._prepareHeightUpdate())},_unbindAutogrow:function(){this.element.removeClass("ui-textinput-autogrow"),this._off(this.element,"keyup change input paste"),this._off(this.document,"pageshow popupbeforeposition updatelayout panelopen")},keyupTimeout:null,_prepareHeightUpdate:function(e){this.keyupTimeout&&clearTimeout(this.keyupTimeout),e===t?this._updateHeight():this.keyupTimeout=this._delay("_updateHeight",e)},_timeout:function(){this._prepareHeightUpdate(this.options.keyupTimeoutBuffer)},_updateHeight:function(){var e,t,i,n=this.window.scrollTop();this.keyupTimeout=0,"onpage"in this.element[0]||this.element.css({height:0,"min-height":0,"max-height":0}),e=this.element[0].scrollHeight,t=this.element[0].clientHeight,i=e+(parseFloat(this.element.css("border-top-width"))+parseFloat(this.element.css("border-bottom-width")))+15,0===t&&(i+=parseFloat(this.element.css("padding-top"))+parseFloat(this.element.css("padding-bottom"))),this.element.css({height:i,"min-height":"","max-height":""}),this.window.scrollTop(n)},refresh:function(){this.options.autogrow&&this.isTextarea&&this._updateHeight()},_setOptions:function(e){this._super(e),e.autogrow!==t&&this.isTextarea&&(e.autogrow?this._autogrow():this._unbindAutogrow())}})}(e),function(e){e.widget("mobile.selectmenu",e.extend({initSelector:"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",options:{theme:null,icon:"carat-d",iconpos:"right",inline:!1,corners:!0,shadow:!0,iconshadow:!1,overlayTheme:null,dividerTheme:null,hidePlaceholderMenuItems:!0,closeText:"Close",nativeMenu:!0,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,mini:!1},_button:function(){return e("<div/>")},_setDisabled:function(e){return this.element.attr("disabled",e),this.button.attr("aria-disabled",e),this._setOption("disabled",e)},_focusButton:function(){var e=this;setTimeout((function(){e.button.focus()}),40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var t=this.options.inline||this.element.jqmData("inline"),i=this.options.mini||this.element.jqmData("mini"),n="";~this.element[0].className.indexOf("ui-btn-left")&&(n=" ui-btn-left"),~this.element[0].className.indexOf("ui-btn-right")&&(n=" ui-btn-right"),t&&(n+=" ui-btn-inline"),i&&(n+=" ui-mini"),this.select=this.element.removeClass("ui-btn-left ui-btn-right").wrap("<div class='ui-select"+n+"'>"),this.selectId=this.select.attr("id")||"select-"+this.uuid,this.buttonId=this.selectId+"-button",this.label=e("label[for='"+this.selectId+"']"),this.isMultiple=this.select[0].multiple},_destroy:function(){var e=this.element.parents(".ui-select");e.length>0&&(e.is(".ui-btn-left, .ui-btn-right")&&this.element.addClass(e.hasClass("ui-btn-left")?"ui-btn-left":"ui-btn-right"),this.element.insertAfter(e),e.remove())},_create:function(){this._preExtension(),this.button=this._button();var i=this,n=this.options,a=!!n.icon&&(n.iconpos||this.select.jqmData("iconpos")),s=this.button.insertBefore(this.select).attr("id",this.buttonId).addClass("ui-btn"+(n.icon?" ui-icon-"+n.icon+" ui-btn-icon-"+a+(n.iconshadow?" ui-shadow-icon":""):"")+(n.theme?" ui-btn-"+n.theme:"")+(n.corners?" ui-corner-all":"")+(n.shadow?" ui-shadow":""));this.setButtonText(),n.nativeMenu&&t.opera&&t.opera.version&&s.addClass("ui-select-nativeonly"),this.isMultiple&&(this.buttonCount=e("<span>").addClass("ui-li-count ui-body-inherit").hide().appendTo(s.addClass("ui-li-has-count"))),(n.disabled||this.element.attr("disabled"))&&this.disable(),this.select.change((function(){i.refresh(),n.nativeMenu&&i._delay((function(){i.select.blur()}))})),this._handleFormReset(),this._on(this.button,{keydown:"_handleKeydown"}),this.build()},build:function(){var t=this;this.select.appendTo(t.button).bind("vmousedown",(function(){t.button.addClass(e.mobile.activeBtnClass)})).bind("focus",(function(){t.button.addClass(e.mobile.focusClass)})).bind("blur",(function(){t.button.removeClass(e.mobile.focusClass)})).bind("focus vmouseover",(function(){t.button.trigger("vmouseover")})).bind("vmousemove",(function(){t.button.removeClass(e.mobile.activeBtnClass)})).bind("change blur vmouseout",(function(){t.button.trigger("vmouseout").removeClass(e.mobile.activeBtnClass)})),t.button.bind("vmousedown",(function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)})),t.label.bind("click focus",(function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)})),t.select.bind("focus",(function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)})),t.button.bind("mouseup",(function(){t.options.preventFocusZoom&&setTimeout((function(){e.mobile.zoom.enable(!0)}),0)})),t.select.bind("blur",(function(){t.options.preventFocusZoom&&e.mobile.zoom.enable(!0)}))},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var e=this;return this.selected().map((function(){return e._selectOptions().index(this)})).get()},setButtonText:function(){var t=this,n=this.selected(),a=this.placeholder,s=e(i.createElement("span"));this.button.children("span").not(".ui-li-count").remove().end().end().prepend(((a=n.length?n.map((function(){return e(this).text()})).get().join(", "):t.placeholder)?s.text(a):s.html("&#160;"),s.addClass(t.select.attr("class")).addClass(n.attr("class")).removeClass("ui-screen-hidden")))},setButtonCount:function(){var e=this.selected();this.isMultiple&&this.buttonCount[e.length>1?"show":"hide"]().text(e.length)},_handleKeydown:function(){this._delay("_refreshButton")},_reset:function(){this.refresh()},_refreshButton:function(){this.setButtonText(),this.setButtonCount()},refresh:function(){this._refreshButton()},open:e.noop,close:e.noop,disable:function(){this._setDisabled(!0),this.button.addClass("ui-state-disabled")},enable:function(){this._setDisabled(!1),this.button.removeClass("ui-state-disabled")}},e.mobile.behaviors.formReset))}(e),function(e){e.mobile.links=function(t){e(t).find("a").jqmEnhanceable().filter(":jqmData(rel='popup')[href][href!='']").each((function(){var e=this,t=e.getAttribute("href").substring(1);t&&(e.setAttribute("aria-haspopup",!0),e.setAttribute("aria-owns",t),e.setAttribute("aria-expanded",!1))})).end().not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")}}(e),function(e,i){function n(e,t,i,n){return t>e?i+(e-t)/2:Math.min(Math.max(i,n-t/2),i+e-t)}function a(e){return{x:e.scrollLeft(),y:e.scrollTop(),cx:e[0].innerWidth||e.width(),cy:e[0].innerHeight||e.height()}}e.widget("mobile.popup",{options:{wrapperClass:null,theme:null,overlayTheme:null,shadow:!0,corners:!0,transition:"none",positionTo:"origin",tolerance:null,closeLinkSelector:"a:jqmData(rel='back')",closeLinkEvents:"click.popup",navigateEvents:"navigate.popup",closeEvents:"navigate.popup pagebeforechange.popup",dismissible:!0,enhanced:!1,history:!e.mobile.browser.oldIE},_handleDocumentVmousedown:function(t){this._isOpen&&e.contains(this._ui.container[0],t.target)&&this._ignoreResizeEvents()},_create:function(){var t=this.element,i=t.attr("id"),n=this.options;n.history=n.history&&e.mobile.ajaxEnabled&&e.mobile.hashListeningEnabled,this._on(this.document,{vmousedown:"_handleDocumentVmousedown"}),e.extend(this,{_scrollTop:0,_page:t.closest(".ui-page"),_ui:null,_fallbackTransition:"",_currentTransition:!1,_prerequisites:null,_isOpen:!1,_tolerance:null,_resizeData:null,_ignoreResizeTo:0,_orientationchangeInProgress:!1}),0===this._page.length&&(this._page=e("body")),n.enhanced?this._ui={container:t.parent(),screen:t.parent().prev(),placeholder:e(this.document[0].getElementById(i+"-placeholder"))}:(this._ui=this._enhance(t,i),this._applyTransition(n.transition)),this._setTolerance(n.tolerance)._ui.focusElement=this._ui.container,this._on(this._ui.screen,{vclick:"_eatEventAndClose"}),this._on(this.window,{orientationchange:e.proxy(this,"_handleWindowOrientationchange"),resize:e.proxy(this,"_handleWindowResize"),keyup:e.proxy(this,"_handleWindowKeyUp")}),this._on(this.document,{focusin:"_handleDocumentFocusIn"})},_enhance:function(t,i){var n=this.options,a=n.wrapperClass,s={screen:e("<div class='ui-screen-hidden ui-popup-screen "+this._themeClassFromOption("ui-overlay-",n.overlayTheme)+"'></div>"),placeholder:e("<div style='display: none;'>\x3c!-- placeholder --\x3e</div>"),container:e("<div class='ui-popup-container ui-popup-hidden ui-popup-truncate"+(a?" "+a:"")+"'></div>")},o=this.document[0].createDocumentFragment();return o.appendChild(s.screen[0]),o.appendChild(s.container[0]),i&&(s.screen.attr("id",i+"-screen"),s.container.attr("id",i+"-popup"),s.placeholder.attr("id",i+"-placeholder").html("\x3c!-- placeholder for "+i+" --\x3e")),this._page[0].appendChild(o),s.placeholder.insertAfter(t),t.detach().addClass("ui-popup "+this._themeClassFromOption("ui-body-",n.theme)+" "+(n.shadow?"ui-overlay-shadow ":"")+(n.corners?"ui-corner-all ":"")).appendTo(s.container),s},_eatEventAndClose:function(e){return e.preventDefault(),e.stopImmediatePropagation(),this.options.dismissible&&this.close(),!1},_resizeScreen:function(){var e=this._ui.screen,t=this._ui.container.outerHeight(!0),i=e.removeAttr("style").height(),n=this.document.height()-1;n>i?e.height(n):t>i&&e.height(t)},_handleWindowKeyUp:function(t){return this._isOpen&&t.keyCode===e.mobile.keyCode.ESCAPE?this._eatEventAndClose(t):void 0},_expectResizeEvent:function(){var e=a(this.window);if(this._resizeData){if(e.x===this._resizeData.windowCoordinates.x&&e.y===this._resizeData.windowCoordinates.y&&e.cx===this._resizeData.windowCoordinates.cx&&e.cy===this._resizeData.windowCoordinates.cy)return!1;clearTimeout(this._resizeData.timeoutId)}return this._resizeData={timeoutId:this._delay("_resizeTimeout",200),windowCoordinates:e},!0},_resizeTimeout:function(){this._isOpen?this._expectResizeEvent()||(this._ui.container.hasClass("ui-popup-hidden")&&(this._ui.container.removeClass("ui-popup-hidden ui-popup-truncate"),this.reposition({positionTo:"window"}),this._ignoreResizeEvents()),this._resizeScreen(),this._resizeData=null,this._orientationchangeInProgress=!1):(this._resizeData=null,this._orientationchangeInProgress=!1)},_stopIgnoringResizeEvents:function(){this._ignoreResizeTo=0},_ignoreResizeEvents:function(){this._ignoreResizeTo&&clearTimeout(this._ignoreResizeTo),this._ignoreResizeTo=this._delay("_stopIgnoringResizeEvents",1e3)},_handleWindowResize:function(){this._isOpen&&0===this._ignoreResizeTo&&(!this._expectResizeEvent()&&!this._orientationchangeInProgress||this._ui.container.hasClass("ui-popup-hidden")||this._ui.container.addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style"))},_handleWindowOrientationchange:function(){!this._orientationchangeInProgress&&this._isOpen&&0===this._ignoreResizeTo&&(this._expectResizeEvent(),this._orientationchangeInProgress=!0)},_handleDocumentFocusIn:function(t){var i,n=t.target,a=this._ui;if(this._isOpen){if(n!==a.container[0]){if(i=e(n),!e.contains(a.container[0],n))return e(this.document[0].activeElement).one("focus",e.proxy((function(){this._safelyBlur(n)}),this)),a.focusElement.focus(),t.preventDefault(),t.stopImmediatePropagation(),!1;a.focusElement[0]===a.container[0]&&(a.focusElement=i)}this._ignoreResizeEvents()}},_themeClassFromOption:function(e,t){return t?"none"===t?"":e+t:e+"inherit"},_applyTransition:function(t){return t&&(this._ui.container.removeClass(this._fallbackTransition),"none"!==t&&(this._fallbackTransition=e.mobile._maybeDegradeTransition(t),"none"===this._fallbackTransition&&(this._fallbackTransition=""),this._ui.container.addClass(this._fallbackTransition))),this},_setOptions:function(e){var t=this.options,n=this.element,a=this._ui.screen;return e.wrapperClass!==i&&this._ui.container.removeClass(t.wrapperClass).addClass(e.wrapperClass),e.theme!==i&&n.removeClass(this._themeClassFromOption("ui-body-",t.theme)).addClass(this._themeClassFromOption("ui-body-",e.theme)),e.overlayTheme!==i&&(a.removeClass(this._themeClassFromOption("ui-overlay-",t.overlayTheme)).addClass(this._themeClassFromOption("ui-overlay-",e.overlayTheme)),this._isOpen&&a.addClass("in")),e.shadow!==i&&n.toggleClass("ui-overlay-shadow",e.shadow),e.corners!==i&&n.toggleClass("ui-corner-all",e.corners),e.transition!==i&&(this._currentTransition||this._applyTransition(e.transition)),e.tolerance!==i&&this._setTolerance(e.tolerance),e.disabled!==i&&e.disabled&&this.close(),this._super(e)},_setTolerance:function(t){var n,a={t:30,r:15,b:30,l:15};if(t!==i)switch(n=String(t).split(","),e.each(n,(function(e,t){n[e]=parseInt(t,10)})),n.length){case 1:isNaN(n[0])||(a.t=a.r=a.b=a.l=n[0]);break;case 2:isNaN(n[0])||(a.t=a.b=n[0]),isNaN(n[1])||(a.l=a.r=n[1]);break;case 4:isNaN(n[0])||(a.t=n[0]),isNaN(n[1])||(a.r=n[1]),isNaN(n[2])||(a.b=n[2]),isNaN(n[3])||(a.l=n[3])}return this._tolerance=a,this},_clampPopupWidth:function(e){var t=a(this.window),i={x:this._tolerance.l,y:t.y+this._tolerance.t,cx:t.cx-this._tolerance.l-this._tolerance.r,cy:t.cy-this._tolerance.t-this._tolerance.b};return e||this._ui.container.css("max-width",i.cx),{rc:i,menuSize:{cx:this._ui.container.outerWidth(!0),cy:this._ui.container.outerHeight(!0)}}},_calculateFinalLocation:function(e,t){var i,a=t.rc,s=t.menuSize;return(i={left:n(a.cx,s.cx,a.x,e.x),top:n(a.cy,s.cy,a.y,e.y)}).top=Math.max(0,i.top),i.top-=Math.min(i.top,Math.max(0,i.top+s.cy-this.document.height())),i},_placementCoords:function(e){return this._calculateFinalLocation(e,this._clampPopupWidth())},_createPrerequisites:function(t,i,n){var a,s=this;(a={screen:e.Deferred(),container:e.Deferred()}).screen.then((function(){a===s._prerequisites&&t()})),a.container.then((function(){a===s._prerequisites&&i()})),e.when(a.screen,a.container).done((function(){a===s._prerequisites&&(s._prerequisites=null,n())})),s._prerequisites=a},_animate:function(t){return this._ui.screen.removeClass(t.classToRemove).addClass(t.screenClassToAdd),t.prerequisites.screen.resolve(),t.transition&&"none"!==t.transition&&(t.applyTransition&&this._applyTransition(t.transition),this._fallbackTransition)?void this._ui.container.addClass(t.containerClassToAdd).removeClass(t.classToRemove).animationComplete(e.proxy(t.prerequisites.container,"resolve")):(this._ui.container.removeClass(t.classToRemove),void t.prerequisites.container.resolve())},_desiredCoords:function(t){var i,n=null,s=a(this.window),o=t.x,r=t.y,l=t.positionTo;if(l&&"origin"!==l)if("window"===l)o=s.cx/2+s.x,r=s.cy/2+s.y;else{try{n=e(l)}catch(e){n=null}n&&(n.filter(":visible"),0===n.length&&(n=null))}return n&&(o=(i=n.offset()).left+n.outerWidth()/2,r=i.top+n.outerHeight()/2),("number"!==e.type(o)||isNaN(o))&&(o=s.cx/2+s.x),("number"!==e.type(r)||isNaN(r))&&(r=s.cy/2+s.y),{x:o,y:r}},_reposition:function(e){e={x:e.x,y:e.y,positionTo:e.positionTo},this._trigger("beforeposition",i,e),this._ui.container.offset(this._placementCoords(this._desiredCoords(e)))},reposition:function(e){this._isOpen&&this._reposition(e)},_safelyBlur:function(t){t!==this.window[0]&&"body"!==t.nodeName.toLowerCase()&&e(t).blur()},_openPrerequisitesComplete:function(){var t=this.element.attr("id"),i=this._ui.container.find(":focusable").first();this._ui.container.addClass("ui-popup-active"),this._isOpen=!0,this._resizeScreen(),e.contains(this._ui.container[0],this.document[0].activeElement)||this._safelyBlur(this.document[0].activeElement),i.length>0&&(this._ui.focusElement=i),this._ignoreResizeEvents(),t&&this.document.find("[aria-haspopup='true'][aria-owns='"+t+"']").attr("aria-expanded",!0),this._trigger("afteropen")},_open:function(t){var i=e.extend({},this.options,t),n=function(){var e=navigator.userAgent,t=e.match(/AppleWebKit\/([0-9\.]+)/),i=!!t&&t[1],n=e.match(/Android (\d+(?:\.\d+))/),a=!!n&&n[1],s=e.indexOf("Chrome")>-1;return!(!(null!==n&&"4.0"===a&&i&&i>534.13)||s)}();this._createPrerequisites(e.noop,e.noop,e.proxy(this,"_openPrerequisitesComplete")),this._currentTransition=i.transition,this._applyTransition(i.transition),this._ui.screen.removeClass("ui-screen-hidden"),this._ui.container.removeClass("ui-popup-truncate"),this._reposition(i),this._ui.container.removeClass("ui-popup-hidden"),this.options.overlayTheme&&n&&this.element.closest(".ui-page").addClass("ui-popup-open"),this._animate({additionalCondition:!0,transition:i.transition,classToRemove:"",screenClassToAdd:"in",containerClassToAdd:"in",applyTransition:!1,prerequisites:this._prerequisites})},_closePrerequisiteScreen:function(){this._ui.screen.removeClass("out").addClass("ui-screen-hidden")},_closePrerequisiteContainer:function(){this._ui.container.removeClass("reverse out").addClass("ui-popup-hidden ui-popup-truncate").removeAttr("style")},_closePrerequisitesDone:function(){var t=this._ui.container,n=this.element.attr("id");e.mobile.popup.active=i,e(":focus",t[0]).add(t[0]).blur(),n&&this.document.find("[aria-haspopup='true'][aria-owns='"+n+"']").attr("aria-expanded",!1),this._trigger("afterclose")},_close:function(t){this._ui.container.removeClass("ui-popup-active"),this._page.removeClass("ui-popup-open"),this._isOpen=!1,this._createPrerequisites(e.proxy(this,"_closePrerequisiteScreen"),e.proxy(this,"_closePrerequisiteContainer"),e.proxy(this,"_closePrerequisitesDone")),this._animate({additionalCondition:this._ui.screen.hasClass("in"),transition:t?"none":this._currentTransition,classToRemove:"in",screenClassToAdd:"out",containerClassToAdd:"reverse out",applyTransition:!0,prerequisites:this._prerequisites})},_unenhance:function(){this.options.enhanced||(this._setOptions({theme:e.mobile.popup.prototype.options.theme}),this.element.detach().insertAfter(this._ui.placeholder).removeClass("ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit"),this._ui.screen.remove(),this._ui.container.remove(),this._ui.placeholder.remove())},_destroy:function(){return e.mobile.popup.active===this?(this.element.one("popupafterclose",e.proxy(this,"_unenhance")),this.close()):this._unenhance(),this},_closePopup:function(i,n){var a,s,o=this.options,r=!1;i&&i.isDefaultPrevented()||e.mobile.popup.active!==this||(t.scrollTo(0,this._scrollTop),i&&"pagebeforechange"===i.type&&n&&(a="string"==typeof n.toPage?n.toPage:n.toPage.jqmData("url"),s=(a=e.mobile.path.parseUrl(a)).pathname+a.search+a.hash,this._myUrl!==e.mobile.path.makeUrlAbsolute(s)?r=!0:i.preventDefault()),this.window.off(o.closeEvents),this.element.undelegate(o.closeLinkSelector,o.closeLinkEvents),this._close(r))},_bindContainerClose:function(){this.window.on(this.options.closeEvents,e.proxy(this,"_closePopup"))},widget:function(){return this._ui.container},open:function(t){var i,n,a,s,o,r=this,l=this.options;return e.mobile.popup.active||l.disabled?this:(e.mobile.popup.active=this,this._scrollTop=this.window.scrollTop(),l.history?(o=e.mobile.navigate.history,n=e.mobile.dialogHashKey,s=!!(a=e.mobile.activePage)&&a.hasClass("ui-dialog"),this._myUrl=i=o.getActive().url,i.indexOf(n)>-1&&!s&&o.activeIndex>0?(r._open(t),r._bindContainerClose(),this):(-1!==i.indexOf(n)||s?i=e.mobile.path.parseLocation().hash+n:i+=i.indexOf("#")>-1?n:"#"+n,this.window.one("beforenavigate",(function(e){e.preventDefault(),r._open(t),r._bindContainerClose()})),this.urlAltered=!0,e.mobile.navigate(i,{role:"dialog"}),this)):(r._open(t),r._bindContainerClose(),r.element.delegate(l.closeLinkSelector,l.closeLinkEvents,(function(e){r.close(),e.preventDefault()})),this))},close:function(){return e.mobile.popup.active!==this||(this._scrollTop=this.window.scrollTop(),this.options.history&&this.urlAltered?(e.mobile.back(),this.urlAltered=!1):this._closePopup()),this}}),e.mobile.popup.handleLink=function(t){var i,n=e.mobile.path,a=e(n.hashToSelector(n.parseUrl(t.attr("href")).hash)).first();a.length>0&&a.data("mobile-popup")&&(i=t.offset(),a.popup("open",{x:i.left+t.outerWidth()/2,y:i.top+t.outerHeight()/2,transition:t.jqmData("transition"),positionTo:t.jqmData("position-to")})),setTimeout((function(){t.removeClass(e.mobile.activeBtnClass)}),300)},e.mobile.document.on("pagebeforechange",(function(t,i){"popup"===i.options.role&&(e.mobile.popup.handleLink(i.options.link),t.preventDefault())}))}(e),function(e,t){var n=".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",a=function(e,t,i){var a=e[i+"All"]().not(n).first();a.length&&(t.blur().attr("tabindex","-1"),a.find("a").first().focus())};e.widget("mobile.selectmenu",e.mobile.selectmenu,{_create:function(){var e=this.options;return e.nativeMenu=e.nativeMenu||this.element.parents(":jqmData(role='popup'),:mobile-popup").length>0,this._super()},_handleSelectFocus:function(){this.element.blur(),this.button.focus()},_handleKeydown:function(e){this._super(e),this._handleButtonVclickKeydown(e)},_handleButtonVclickKeydown:function(t){this.options.disabled||this.isOpen||this.options.nativeMenu||("vclick"===t.type||t.keyCode&&(t.keyCode===e.mobile.keyCode.ENTER||t.keyCode===e.mobile.keyCode.SPACE))&&(this._decideFormat(),"overlay"===this.menuType?this.button.attr("href","#"+this.popupId).attr("data-"+(e.mobile.ns||"")+"rel","popup"):this.button.attr("href","#"+this.dialogId).attr("data-"+(e.mobile.ns||"")+"rel","dialog"),this.isOpen=!0)},_handleListFocus:function(t){var i="focusin"===t.type?{tabindex:"0",event:"vmouseover"}:{tabindex:"-1",event:"vmouseout"};e(t.target).attr("tabindex",i.tabindex).trigger(i.event)},_handleListKeydown:function(t){var i=e(t.target),n=i.closest("li");switch(t.keyCode){case 38:return a(n,i,"prev"),!1;case 40:return a(n,i,"next"),!1;case 13:case 32:return i.trigger("click"),!1}},_handleMenuPageHide:function(){this._delayedTrigger(),this.thisPage.page("bindRemove")},_handleHeaderCloseClick:function(){return"overlay"===this.menuType?(this.close(),!1):void 0},_handleListItemClick:function(t){var i=e(t.target).closest("li"),n=this.select[0].selectedIndex,a=e.mobile.getAttribute(i,"option-index"),s=this._selectOptions().eq(a)[0];s.selected=!this.isMultiple||!s.selected,this.isMultiple&&i.find("a").toggleClass("ui-checkbox-on",s.selected).toggleClass("ui-checkbox-off",!s.selected),this.isMultiple||n===a||(this._triggerChange=!0),this.isMultiple?(this.select.trigger("change"),this.list.find("li:not(.ui-li-divider)").eq(a).find("a").first().focus()):this.close(),t.preventDefault()},build:function(){var i,n,a,s,o,r,l,c,d,h,u,p,f,g,m,v,b,x=this.options;return x.nativeMenu?this._super():(n=(i=this.selectId)+"-listbox",a=i+"-dialog",s=this.label,o=this.element.closest(".ui-page"),r=this.element[0].multiple,l=i+"-menu",c=x.theme?" data-"+e.mobile.ns+"theme='"+x.theme+"'":"",h=(d=x.overlayTheme||x.theme||null)?" data-"+e.mobile.ns+"overlay-theme='"+d+"'":"",u=x.dividerTheme&&r?" data-"+e.mobile.ns+"divider-theme='"+x.dividerTheme+"'":"",p=e("<div data-"+e.mobile.ns+"role='dialog' class='ui-selectmenu' id='"+a+"'"+c+h+"><div data-"+e.mobile.ns+"role='header'><div class='ui-title'></div></div><div data-"+e.mobile.ns+"role='content'></div></div>"),f=e("<div"+c+h+" id='"+n+"' class='ui-selectmenu'></div>").insertAfter(this.select).popup(),g=e("<ul class='ui-selectmenu-list' id='"+l+"' role='listbox' aria-labelledby='"+this.buttonId+"'"+c+u+"></ul>").appendTo(f),m=e("<div class='ui-header ui-bar-"+(x.theme?x.theme:"inherit")+"'></div>").prependTo(f),v=e("<h1 class='ui-title'></h1>").appendTo(m),this.isMultiple&&(b=e("<a>",{role:"button",text:x.closeText,href:"#",class:"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"}).appendTo(m)),e.extend(this,{selectId:i,menuId:l,popupId:n,dialogId:a,thisPage:o,menuPage:p,label:s,isMultiple:r,theme:x.theme,listbox:f,list:g,header:m,headerTitle:v,headerClose:b,menuPageContent:undefined,menuPageClose:undefined,placeholder:""}),this.refresh(),this._origTabIndex===t&&(this._origTabIndex=null!==this.select[0].getAttribute("tabindex")&&this.select.attr("tabindex")),this.select.attr("tabindex","-1"),this._on(this.select,{focus:"_handleSelectFocus"}),this._on(this.button,{vclick:"_handleButtonVclickKeydown"}),this.list.attr("role","listbox"),this._on(this.list,{focusin:"_handleListFocus",focusout:"_handleListFocus",keydown:"_handleListKeydown","click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)":"_handleListItemClick"}),this._on(this.menuPage,{pagehide:"_handleMenuPageHide"}),this._on(this.listbox,{popupafterclose:"_popupClosed"}),this.isMultiple&&this._on(this.headerClose,{click:"_handleHeaderCloseClick"}),this)},_popupClosed:function(){this.close(),this._delayedTrigger()},_delayedTrigger:function(){this._triggerChange&&this.element.trigger("change"),this._triggerChange=!1},_isRebuildRequired:function(){var e=this.list.find("li");return this._selectOptions().not(".ui-screen-hidden").text()!==e.text()},selected:function(){return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )")},refresh:function(t){var i,n;return this.options.nativeMenu?this._super(t):(i=this,(t||this._isRebuildRequired())&&i._buildList(),n=this.selectedIndices(),i.setButtonText(),i.setButtonCount(),void i.list.find("li:not(.ui-li-divider)").find("a").removeClass(e.mobile.activeBtnClass).end().attr("aria-selected",!1).each((function(t){var a=e(this);e.inArray(t,n)>-1?(a.attr("aria-selected",!0),i.isMultiple?a.find("a").removeClass("ui-checkbox-off").addClass("ui-checkbox-on"):a.hasClass("ui-screen-hidden")?a.next().find("a").addClass(e.mobile.activeBtnClass):a.find("a").addClass(e.mobile.activeBtnClass)):i.isMultiple&&a.find("a").removeClass("ui-checkbox-on").addClass("ui-checkbox-off")})))},close:function(){if(!this.options.disabled&&this.isOpen){var e=this;"page"===e.menuType?(e.menuPage.dialog("close"),e.list.appendTo(e.listbox)):e.listbox.popup("close"),e._focusButton(),e.isOpen=!1}},open:function(){this.button.click()},_focusMenuItem:function(){var t=this.list.find("a."+e.mobile.activeBtnClass);0===t.length&&(t=this.list.find("li:not("+n+") a.ui-btn")),t.first().focus()},_decideFormat:function(){var t=this,i=this.window,n=t.list.parent().outerHeight(),a=i.scrollTop(),s=t.button.offset().top,o=i.height();n>o-80||!e.support.scrollTop?(t.menuPage.appendTo(e.mobile.pageContainer).page(),t.menuPageContent=t.menuPage.find(".ui-content"),t.menuPageClose=t.menuPage.find(".ui-header a"),t.thisPage.unbind("pagehide.remove"),0===a&&s>o&&t.thisPage.one("pagehide",(function(){e(this).jqmData("lastScroll",s)})),t.menuPage.one({pageshow:e.proxy(this,"_focusMenuItem"),pagehide:e.proxy(this,"close")}),t.menuType="page",t.menuPageContent.append(t.list),t.menuPage.find("div .ui-title").text(t.label.getEncodedText()||t.placeholder)):(t.menuType="overlay",t.listbox.one({popupafteropen:e.proxy(this,"_focusMenuItem")}))},_buildList:function(){var t,n,a,s,o,r,l,c,d,h,u,p,f,g,m=this,v=this.options,b=this.placeholder,x=!0,y="data-"+e.mobile.ns,w=y+"option-index",k=y+"icon",S=y+"role",C=y+"placeholder",_=i.createDocumentFragment(),T=!1;for(m.list.empty().filter(".ui-listview").listview("destroy"),n=(t=this._selectOptions()).length,a=this.select[0],o=0;n>o;o++,T=!1)r=t[o],(l=e(r)).hasClass("ui-screen-hidden")||(c=r.parentNode,u=[],d=l.text(),(h=i.createElement("a")).setAttribute("href","#"),h.appendChild(i.createTextNode(d)),c!==a&&"optgroup"===c.nodeName.toLowerCase()&&((p=c.getAttribute("label"))!==s&&((f=i.createElement("li")).setAttribute(S,"list-divider"),f.setAttribute("role","option"),f.setAttribute("tabindex","-1"),f.appendChild(i.createTextNode(p)),_.appendChild(f),s=p)),!x||r.getAttribute("value")&&0!==d.length&&!l.jqmData("placeholder")||(x=!1,T=!0,null===r.getAttribute(C)&&(this._removePlaceholderAttr=!0),r.setAttribute(C,!0),v.hidePlaceholderMenuItems&&u.push("ui-screen-hidden"),b!==d&&(b=m.placeholder=d)),g=i.createElement("li"),r.disabled&&(u.push("ui-state-disabled"),g.setAttribute("aria-disabled",!0)),g.setAttribute(w,o),g.setAttribute(k,"false"),T&&g.setAttribute(C,!0),g.className=u.join(" "),g.setAttribute("role","option"),h.setAttribute("tabindex","-1"),this.isMultiple&&e(h).addClass("ui-btn ui-checkbox-off ui-btn-icon-right"),g.appendChild(h),_.appendChild(g));m.list[0].appendChild(_),this.isMultiple||b.length?this.headerTitle.text(this.placeholder):this.header.addClass("ui-screen-hidden"),m.list.listview()},_button:function(){return this.options.nativeMenu?this._super():e("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})},_destroy:function(){this.options.nativeMenu||(this.close(),this._origTabIndex!==t&&(!1!==this._origTabIndex?this.select.attr("tabindex",this._origTabIndex):this.select.removeAttr("tabindex")),this._removePlaceholderAttr&&this._selectOptions().removeAttr("data-"+e.mobile.ns+"placeholder"),this.listbox.remove(),this.menuPage.remove()),this._super()}})}(e),function(e,t){function i(e,t){var i=t||[];return i.push("ui-btn"),e.theme&&i.push("ui-btn-"+e.theme),e.icon&&(i=i.concat(["ui-icon-"+e.icon,"ui-btn-icon-"+e.iconpos]),e.iconshadow&&i.push("ui-shadow-icon")),e.inline&&i.push("ui-btn-inline"),e.shadow&&i.push("ui-shadow"),e.corners&&i.push("ui-corner-all"),e.mini&&i.push("ui-mini"),i}function n(e){var i,n,a,o=!1,r=!0,l={icon:"",inline:!1,shadow:!1,corners:!1,iconshadow:!1,mini:!1},c=[];for(e=e.split(" "),i=0;i<e.length;i++)a=!0,(n=s[e[i]])!==t?(a=!1,l[n]=!0):0===e[i].indexOf("ui-btn-icon-")?(a=!1,r=!1,l.iconpos=e[i].substring(12)):0===e[i].indexOf("ui-icon-")?(a=!1,l.icon=e[i].substring(8)):0===e[i].indexOf("ui-btn-")&&8===e[i].length?(a=!1,l.theme=e[i].substring(7)):"ui-btn"===e[i]&&(a=!1,o=!0),a&&c.push(e[i]);return r&&(l.icon=""),{options:l,unknownClasses:c,alreadyEnhanced:o}}function a(e){return"-"+e.toLowerCase()}var s={"ui-shadow":"shadow","ui-corner-all":"corners","ui-btn-inline":"inline","ui-shadow-icon":"iconshadow","ui-mini":"mini"},o=function(){var i=e.mobile.getAttribute.apply(this,arguments);return null==i?t:i},r=/[A-Z]/g;e.fn.buttonMarkup=function(s,l){var c,d,h,u,p,f=e.fn.buttonMarkup.defaults;for(c=0;c<this.length;c++){if(h=this[c],d=l?{alreadyEnhanced:!1,unknownClasses:[]}:n(h.className),u=e.extend({},d.alreadyEnhanced?d.options:{},s),!d.alreadyEnhanced)for(p in f)u[p]===t&&(u[p]=o(h,p.replace(r,a)));h.className=i(e.extend({},f,u),d.unknownClasses).join(" "),"button"!==h.tagName.toLowerCase()&&h.setAttribute("role","button")}return this},e.fn.buttonMarkup.defaults={icon:"",iconpos:"left",theme:null,inline:!1,shadow:!0,corners:!0,iconshadow:!1,mini:!1},e.extend(e.fn.buttonMarkup,{initSelector:"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)"})}(e),function(e,t){e.widget("mobile.controlgroup",e.extend({options:{enhanced:!1,theme:null,shadow:!1,corners:!0,excludeInvisible:!0,type:"vertical",mini:!1},_create:function(){var t=this.element,i=this.options,n=e.mobile.page.prototype.keepNativeSelector();e.fn.buttonMarkup&&this.element.find(e.fn.buttonMarkup.initSelector).not(n).buttonMarkup(),e.each(this._childWidgets,e.proxy((function(t,i){e.mobile[i]&&this.element.find(e.mobile[i].initSelector).not(n)[i]()}),this)),e.extend(this,{_ui:null,_initialRefresh:!0}),this._ui=i.enhanced?{groupLegend:t.children(".ui-controlgroup-label").children(),childWrapper:t.children(".ui-controlgroup-controls")}:this._enhance()},_childWidgets:["checkboxradio","selectmenu","button"],_themeClassFromOption:function(e){return e?"none"===e?"":"ui-group-theme-"+e:""},_enhance:function(){var t=this.element,i=this.options,n={groupLegend:t.children("legend"),childWrapper:t.addClass("ui-controlgroup ui-controlgroup-"+("horizontal"===i.type?"horizontal":"vertical")+" "+this._themeClassFromOption(i.theme)+" "+(i.corners?"ui-corner-all ":"")+(i.mini?"ui-mini ":"")).wrapInner("<div class='ui-controlgroup-controls "+(!0===i.shadow?"ui-shadow":"")+"'></div>").children()};return n.groupLegend.length>0&&e("<div role='heading' class='ui-controlgroup-label'></div>").append(n.groupLegend).prependTo(t),n},_init:function(){this.refresh()},_setOptions:function(e){var i,n,a=this.element;return e.type!==t&&(a.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical").addClass("ui-controlgroup-"+("horizontal"===e.type?"horizontal":"vertical")),i=!0),e.theme!==t&&a.removeClass(this._themeClassFromOption(this.options.theme)).addClass(this._themeClassFromOption(e.theme)),e.corners!==t&&a.toggleClass("ui-corner-all",e.corners),e.mini!==t&&a.toggleClass("ui-mini",e.mini),e.shadow!==t&&this._ui.childWrapper.toggleClass("ui-shadow",e.shadow),e.excludeInvisible!==t&&(this.options.excludeInvisible=e.excludeInvisible,i=!0),n=this._super(e),i&&this.refresh(),n},container:function(){return this._ui.childWrapper},refresh:function(){var t=this.container(),i=t.find(".ui-btn").not(".ui-slider-handle"),n=this._initialRefresh;e.mobile.checkboxradio&&t.find(":mobile-checkboxradio").checkboxradio("refresh"),this._addFirstLastClasses(i,this.options.excludeInvisible?this._getVisibles(i,n):i,n),this._initialRefresh=!1},_destroy:function(){var e,t,i=this.options;return i.enhanced?this:(e=this._ui,t=this.element.removeClass("ui-controlgroup ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini "+this._themeClassFromOption(i.theme)).find(".ui-btn").not(".ui-slider-handle"),this._removeFirstLastClasses(t),e.groupLegend.unwrap(),void e.childWrapper.children().unwrap())}},e.mobile.behaviors.addFirstLastClasses))}(e),function(e,t){e.widget("mobile.toolbar",{initSelector:":jqmData(role='footer'), :jqmData(role='header')",options:{theme:null,addBackBtn:!1,backBtnTheme:null,backBtnText:"Back"},_create:function(){var t=this.element.is(":jqmData(role='header')")?"header":"footer",i=this.element.closest(".ui-page");0===i.length&&(i=!1,this._on(this.document,{pageshow:"refresh"})),e.extend(this,{role:t,page:i,leftbtn:undefined,rightbtn:undefined}),this.element.attr("role","header"===t?"banner":"contentinfo").addClass("ui-"+t),this.refresh(),this._setOptions(this.options)},_setOptions:function(e){if(e.addBackBtn!==t&&this._updateBackButton(),null!=e.backBtnTheme&&this.element.find(".ui-toolbar-back-btn").addClass("ui-btn ui-btn-"+e.backBtnTheme),e.backBtnText!==t&&this.element.find(".ui-toolbar-back-btn .ui-btn-text").text(e.backBtnText),e.theme!==t){var i=this.options.theme?this.options.theme:"inherit",n=e.theme?e.theme:"inherit";this.element.removeClass("ui-bar-"+i).addClass("ui-bar-"+n)}this._super(e)},refresh:function(){"header"===this.role&&this._addHeaderButtonClasses(),this.page||(this._setRelative(),"footer"===this.role?this.element.appendTo("body"):"header"===this.role&&this._updateBackButton()),this._addHeadingClasses(),this._btnMarkup()},_setRelative:function(){e("[data-"+e.mobile.ns+"role='page']").css({position:"relative"})},_btnMarkup:function(){this.element.children("a").filter(":not([data-"+e.mobile.ns+"role='none'])").attr("data-"+e.mobile.ns+"role","button"),this.element.trigger("create")},_addHeaderButtonClasses:function(){var e=this.element.children("a, button");this.leftbtn=e.hasClass("ui-btn-left")&&!e.hasClass("ui-toolbar-back-btn"),this.rightbtn=e.hasClass("ui-btn-right"),this.leftbtn=this.leftbtn||e.eq(0).not(".ui-btn-right,.ui-toolbar-back-btn").addClass("ui-btn-left").length,this.rightbtn=this.rightbtn||e.eq(1).addClass("ui-btn-right").length},_updateBackButton:function(){var t,i=this.options,n=i.backBtnTheme||i.theme;t=this._backButton=this._backButton||{},this.options.addBackBtn&&"header"===this.role&&e(".ui-page").length>1&&(this.page?this.page[0].getAttribute("data-"+e.mobile.ns+"url")!==e.mobile.path.stripHash(location.hash):e.mobile.navigate&&e.mobile.navigate.history&&e.mobile.navigate.history.activeIndex>0)&&!this.leftbtn?t.attached||(this.backButton=t.element=(t.element||e("<a role='button' href='javascript:void(0);' class='ui-btn ui-corner-all ui-shadow ui-btn-left "+(n?"ui-btn-"+n+" ":"")+"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' data-"+e.mobile.ns+"rel='back'>"+i.backBtnText+"</a>")).prependTo(this.element),t.attached=!0):t.element&&(t.element.detach(),t.attached=!1)},_addHeadingClasses:function(){this.element.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading","aria-level":"1"})},_destroy:function(){var e;this.element.children("h1, h2, h3, h4, h5, h6").removeClass("ui-title").removeAttr("role").removeAttr("aria-level"),"header"===this.role&&(this.element.children("a, button").removeClass("ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all"),this.backButton&&this.backButton.remove()),e=this.options.theme?this.options.theme:"inherit",this.element.removeClass("ui-bar-"+e),this.element.removeClass("ui-"+this.role).removeAttr("role")}})}(e),function(e,t){e.widget("mobile.toolbar",e.mobile.toolbar,{options:{position:null,visibleOnPageShow:!0,disablePageZoom:!0,transition:"slide",fullscreen:!1,tapToggle:!0,tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",hideDuringFocus:"input, textarea, select",updatePagePadding:!0,trackPersistentToolbars:!0,supportBlacklist:function(){return!e.support.fixedPosition}},_create:function(){this._super(),this.pagecontainer=e(":mobile-pagecontainer"),"fixed"!==this.options.position||this.options.supportBlacklist()||this._makeFixed()},_makeFixed:function(){this.element.addClass("ui-"+this.role+"-fixed"),this.updatePagePadding(),this._addTransitionClass(),this._bindPageEvents(),this._bindToggleHandlers()},_setOptions:function(i){if("fixed"===i.position&&"fixed"!==this.options.position&&this._makeFixed(),"fixed"===this.options.position&&!this.options.supportBlacklist()){var n=this.page?this.page:e(".ui-page-active").length>0?e(".ui-page-active"):e(".ui-page").eq(0);i.fullscreen!==t&&(i.fullscreen?(this.element.addClass("ui-"+this.role+"-fullscreen"),n.addClass("ui-page-"+this.role+"-fullscreen")):(this.element.removeClass("ui-"+this.role+"-fullscreen"),n.removeClass("ui-page-"+this.role+"-fullscreen").addClass("ui-page-"+this.role+"-fixed")))}this._super(i)},_addTransitionClass:function(){var e=this.options.transition;e&&"none"!==e&&("slide"===e&&(e=this.element.hasClass("ui-header")?"slidedown":"slideup"),this.element.addClass(e))},_bindPageEvents:function(){var e=this.page?this.element.closest(".ui-page"):this.document;this._on(e,{pagebeforeshow:"_handlePageBeforeShow",webkitAnimationStart:"_handleAnimationStart",animationstart:"_handleAnimationStart",updatelayout:"_handleAnimationStart",pageshow:"_handlePageShow",pagebeforehide:"_handlePageBeforeHide"})},_handlePageBeforeShow:function(){var t=this.options;t.disablePageZoom&&e.mobile.zoom.disable(!0),t.visibleOnPageShow||this.hide(!0)},_handleAnimationStart:function(){this.options.updatePagePadding&&this.updatePagePadding(this.page?this.page:".ui-page-active")},_handlePageShow:function(){this.updatePagePadding(this.page?this.page:".ui-page-active"),this.options.updatePagePadding&&this._on(this.window,{throttledresize:"updatePagePadding"})},_handlePageBeforeHide:function(t,i){var n,a,s,o,r=this.options;r.disablePageZoom&&e.mobile.zoom.enable(!0),r.updatePagePadding&&this._off(this.window,"throttledresize"),r.trackPersistentToolbars&&(n=e(".ui-footer-fixed:jqmData(id)",this.page),a=e(".ui-header-fixed:jqmData(id)",this.page),s=n.length&&i.nextPage&&e(".ui-footer-fixed:jqmData(id='"+n.jqmData("id")+"')",i.nextPage)||e(),o=a.length&&i.nextPage&&e(".ui-header-fixed:jqmData(id='"+a.jqmData("id")+"')",i.nextPage)||e(),(s.length||o.length)&&(s.add(o).appendTo(e.mobile.pageContainer),i.nextPage.one("pageshow",(function(){o.prependTo(this),s.appendTo(this)}))))},_visible:!0,updatePagePadding:function(i){var n=this.element,a="header"===this.role,s=parseFloat(n.css(a?"top":"bottom"));this.options.fullscreen||(i=i&&i.type===t&&i||this.page||n.closest(".ui-page"),i=this.page?this.page:".ui-page-active",e(i).css("padding-"+(a?"top":"bottom"),n.outerHeight()+s))},_useTransition:function(t){var i=this.window,n=this.element,a=i.scrollTop(),s=n.height(),o=this.page?n.closest(".ui-page").height():e(".ui-page-active").height(),r=e.mobile.getScreenHeight();return!t&&(this.options.transition&&"none"!==this.options.transition&&("header"===this.role&&!this.options.fullscreen&&a>s||"footer"===this.role&&!this.options.fullscreen&&o-s>a+r)||this.options.fullscreen)},show:function(e){var t="ui-fixed-hidden",i=this.element;this._useTransition(e)?i.removeClass("out "+t).addClass("in").animationComplete((function(){i.removeClass("in")})):i.removeClass(t),this._visible=!0},hide:function(e){var t="ui-fixed-hidden",i=this.element,n="out"+("slide"===this.options.transition?" reverse":"");this._useTransition(e)?i.addClass(n).removeClass("in").animationComplete((function(){i.addClass(t).removeClass(n)})):i.addClass(t).removeClass(n),this._visible=!1},toggle:function(){this[this._visible?"hide":"show"]()},_bindToggleHandlers:function(){var t,i,n=this,a=n.options,s=!0;(this.page?this.page:e(".ui-page")).bind("vclick",(function(t){a.tapToggle&&!e(t.target).closest(a.tapToggleBlacklist).length&&n.toggle()})).bind("focusin focusout",(function(o){screen.width<1025&&e(o.target).is(a.hideDuringFocus)&&!e(o.target).closest(".ui-header-fixed, .ui-footer-fixed").length&&("focusout"!==o.type||s?"focusin"===o.type&&s&&(clearTimeout(t),s=!1,i=setTimeout((function(){n.hide()}),0)):(s=!0,clearTimeout(i),t=setTimeout((function(){n.show()}),0)))}))},_setRelative:function(){"fixed"!==this.options.position&&e("[data-"+e.mobile.ns+"role='page']").css({position:"relative"})},_destroy:function(){var t,i,n,a,s=this.pagecontainer.pagecontainer("getActivePage");this._super(),"fixed"===this.options.position&&(i=e("body>.ui-"+this.role+"-fixed").add(s.find(".ui-"+this.options.role+"-fixed")).not(this.element).length>0,a=e("body>.ui-"+this.role+"-fixed").add(s.find(".ui-"+this.options.role+"-fullscreen")).not(this.element).length>0,"ui-header-fixed ui-footer-fixed ui-header-fullscreen in out ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden",this.element.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen in out ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden"),a||(t="ui-page-"+this.role+"-fullscreen"),i||(n="header"===this.role,t+=" ui-page-"+this.role+"-fixed",s.css("padding-"+(n?"top":"bottom"),"")),s.removeClass(t))}})}(e),function(e){e.widget("mobile.toolbar",e.mobile.toolbar,{_makeFixed:function(){this._super(),this._workarounds()},_workarounds:function(){var e=navigator.userAgent,t=navigator.platform,i=e.match(/AppleWebKit\/([0-9]+)/),n=!!i&&i[1],a=null,s=this;if(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1||t.indexOf("iPod")>-1)a="ios";else{if(!(e.indexOf("Android")>-1))return;a="android"}if("ios"===a)s._bindScrollWorkaround();else{if(!("android"===a&&n&&534>n))return;s._bindScrollWorkaround(),s._bindListThumbWorkaround()}},_viewportOffset:function(){var e=this.element,t=e.hasClass("ui-header"),i=Math.abs(e.offset().top-this.window.scrollTop());return t||(i=Math.round(i-this.window.height()+e.outerHeight())-60),i},_bindScrollWorkaround:function(){var e=this;this._on(this.window,{scrollstop:function(){e._viewportOffset()>2&&e._visible&&e._triggerRedraw()}})},_bindListThumbWorkaround:function(){this.element.closest(".ui-page").addClass("ui-android-2x-fixed")},_triggerRedraw:function(){var t=parseFloat(e(".ui-page-active").css("padding-bottom"));e(".ui-page-active").css("padding-bottom",t+1+"px"),setTimeout((function(){e(".ui-page-active").css("padding-bottom",t+"px")}),0)},destroy:function(){this._super(),this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix")}})}(e),function(e,t){var i=e.mobile.browser.oldIE&&e.mobile.browser.oldIE<=8,n=e("<div class='ui-popup-arrow-guide'></div><div class='ui-popup-arrow-container"+(i?" ie":"")+"'><div class='ui-popup-arrow'></div></div>");e.widget("mobile.popup",e.mobile.popup,{options:{arrow:""},_create:function(){var e=this._super();return this.options.arrow&&(this._ui.arrow=this._addArrow()),e},_addArrow:function(){var e,t=this.options,i=function(){var e=n.clone(),t=e.eq(0),i=e.eq(1),a=i.children();return{arEls:i.add(t),gd:t,ct:i,ar:a}}();return e=this._themeClassFromOption("ui-body-",t.theme),i.ar.addClass(e+(t.shadow?" ui-overlay-shadow":"")),i.arEls.hide().appendTo(this.element),i},_unenhance:function(){var e=this._ui.arrow;return e&&e.arEls.remove(),this._super()},_tryAnArrow:function(e,t,i,n,a){var s,o,r,l={},c={};return n.arFull[e.dimKey]>n.guideDims[e.dimKey]||(l[e.fst]=i[e.fst]+(n.arHalf[e.oDimKey]+n.menuHalf[e.oDimKey])*e.offsetFactor-n.contentBox[e.fst]+(n.clampInfo.menuSize[e.oDimKey]-n.contentBox[e.oDimKey])*e.arrowOffsetFactor,l[e.snd]=i[e.snd],o={x:(s=n.result||this._calculateFinalLocation(l,n.clampInfo)).left,y:s.top},c[e.fst]=o[e.fst]+n.contentBox[e.fst]+e.tipOffset,c[e.snd]=Math.max(s[e.prop]+n.guideOffset[e.prop]+n.arHalf[e.dimKey],Math.min(s[e.prop]+n.guideOffset[e.prop]+n.guideDims[e.dimKey]-n.arHalf[e.dimKey],i[e.snd])),r=Math.abs(i.x-c.x)+Math.abs(i.y-c.y),(!a||r<a.diff)&&(c[e.snd]-=n.arHalf[e.dimKey]+s[e.prop]+n.contentBox[e.snd],a={dir:t,diff:r,result:s,posProp:e.prop,posVal:c[e.snd]})),a},_getPlacementState:function(e){var t,i,n=this._ui.arrow,a={clampInfo:this._clampPopupWidth(!e),arFull:{cx:n.ct.width(),cy:n.ct.height()},guideDims:{cx:n.gd.width(),cy:n.gd.height()},guideOffset:n.gd.offset()};return t=this.element.offset(),n.gd.css({left:0,top:0,right:0,bottom:0}),i=n.gd.offset(),a.contentBox={x:i.left-t.left,y:i.top-t.top,cx:n.gd.width(),cy:n.gd.height()},n.gd.removeAttr("style"),a.guideOffset={left:a.guideOffset.left-t.left,top:a.guideOffset.top-t.top},a.arHalf={cx:a.arFull.cx/2,cy:a.arFull.cy/2},a.menuHalf={cx:a.clampInfo.menuSize.cx/2,cy:a.clampInfo.menuSize.cy/2},a},_placementCoords:function(t){var n,a,s,o,r,l=this.options.arrow,c=this._ui.arrow;return c?(c.arEls.show(),r={},n=this._getPlacementState(!0),s={l:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:1,tipOffset:-n.arHalf.cx,arrowOffsetFactor:0},r:{fst:"x",snd:"y",prop:"top",dimKey:"cy",oDimKey:"cx",offsetFactor:-1,tipOffset:n.arHalf.cx+n.contentBox.cx,arrowOffsetFactor:1},b:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:-1,tipOffset:n.arHalf.cy+n.contentBox.cy,arrowOffsetFactor:1},t:{fst:"y",snd:"x",prop:"left",dimKey:"cx",oDimKey:"cy",offsetFactor:1,tipOffset:-n.arHalf.cy,arrowOffsetFactor:0}},e.each((!0===l?"l,t,r,b":l).split(","),e.proxy((function(e,i){a=this._tryAnArrow(s[i],i,t,n,a)}),this)),a?(c.ct.removeClass("ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b").addClass("ui-popup-arrow-"+a.dir).removeAttr("style").css(a.posProp,a.posVal).show(),i||(o=this.element.offset(),r[s[a.dir].fst]=c.ct.offset(),r[s[a.dir].snd]={left:o.left+n.contentBox.x,top:o.top+n.contentBox.y}),a.result):(c.arEls.hide(),this._super(t))):this._super(t)},_setOptions:function(e){var i,n=this.options.theme,a=this._ui.arrow,s=this._super(e);if(e.arrow!==t){if(!a&&e.arrow)return void(this._ui.arrow=this._addArrow());a&&!e.arrow&&(a.arEls.remove(),this._ui.arrow=null)}return(a=this._ui.arrow)&&(e.theme!==t&&(n=this._themeClassFromOption("ui-body-",n),i=this._themeClassFromOption("ui-body-",e.theme),a.ar.removeClass(n).addClass(i)),e.shadow!==t&&a.ar.toggleClass("ui-overlay-shadow",e.shadow)),s},_destroy:function(){var e=this._ui.arrow;return e&&e.arEls.remove(),this._super()}})}(e),function(e,i){e.widget("mobile.panel",{options:{classes:{panel:"ui-panel",panelOpen:"ui-panel-open",panelClosed:"ui-panel-closed",panelFixed:"ui-panel-fixed",panelInner:"ui-panel-inner",modal:"ui-panel-dismiss",modalOpen:"ui-panel-dismiss-open",pageContainer:"ui-panel-page-container",pageWrapper:"ui-panel-wrapper",pageFixedToolbar:"ui-panel-fixed-toolbar",pageContentPrefix:"ui-panel-page-content",animate:"ui-panel-animate"},animate:!0,theme:null,position:"left",dismissible:!0,display:"reveal",swipeClose:!0,positionFixed:!1},_closeLink:null,_parentPage:null,_page:null,_modal:null,_panelInner:null,_wrapper:null,_fixedToolbars:null,_create:function(){var t=this.element,i=t.closest(".ui-page, :jqmData(role='page')");e.extend(this,{_closeLink:t.find(":jqmData(rel='close')"),_parentPage:i.length>0&&i,_openedPage:null,_page:this._getPage,_panelInner:this._getPanelInner(),_fixedToolbars:this._getFixedToolbars}),"overlay"!==this.options.display&&this._getWrapper(),this._addPanelClasses(),e.support.cssTransform3d&&this.options.animate&&this.element.addClass(this.options.classes.animate),this._bindUpdateLayout(),this._bindCloseEvents(),this._bindLinkListeners(),this._bindPageEvents(),this.options.dismissible&&this._createModal(),this._bindSwipeEvents()},_getPanelInner:function(){var e=this.element.find("."+this.options.classes.panelInner);return 0===e.length&&(e=this.element.children().wrapAll("<div class='"+this.options.classes.panelInner+"' />").parent()),e},_createModal:function(){var t=this,i=t._parentPage?t._parentPage.parent():t.element.parent();t._modal=e("<div class='"+t.options.classes.modal+"'></div>").on("mousedown",(function(){t.close()})).appendTo(i)},_getPage:function(){return this._openedPage||this._parentPage||e("."+e.mobile.activePageClass)},_getWrapper:function(){var e=this._page().find("."+this.options.classes.pageWrapper);0===e.length&&(e=this._page().children(".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)").wrapAll("<div class='"+this.options.classes.pageWrapper+"'></div>").parent()),this._wrapper=e},_getFixedToolbars:function(){var t=e("body").children(".ui-header-fixed, .ui-footer-fixed"),i=this._page().find(".ui-header-fixed, .ui-footer-fixed");return t.add(i).addClass(this.options.classes.pageFixedToolbar)},_getPosDisplayClasses:function(e){return e+"-position-"+this.options.position+" "+e+"-display-"+this.options.display},_getPanelClasses:function(){var e=this.options.classes.panel+" "+this._getPosDisplayClasses(this.options.classes.panel)+" "+this.options.classes.panelClosed+" ui-body-"+(this.options.theme?this.options.theme:"inherit");return this.options.positionFixed&&(e+=" "+this.options.classes.panelFixed),e},_addPanelClasses:function(){this.element.addClass(this._getPanelClasses())},_handleCloseClick:function(e){e.isDefaultPrevented()||this.close()},_bindCloseEvents:function(){this._on(this._closeLink,{click:"_handleCloseClick"}),this._on({"click a:jqmData(ajax='false')":"_handleCloseClick"})},_positionPanel:function(t){var i=this,n=i._panelInner.outerHeight(),a=n>e.mobile.getScreenHeight();a||!i.options.positionFixed?(a&&(i._unfixPanel(),e.mobile.resetActivePageHeight(n)),t&&this.window[0].scrollTo(0,e.mobile.defaultHomeScroll)):i._fixPanel()},_bindFixListener:function(){this._on(e(t),{throttledresize:"_positionPanel"})},_unbindFixListener:function(){this._off(e(t),"throttledresize")},_unfixPanel:function(){this.options.positionFixed&&e.support.fixedPosition&&this.element.removeClass(this.options.classes.panelFixed)},_fixPanel:function(){this.options.positionFixed&&e.support.fixedPosition&&this.element.addClass(this.options.classes.panelFixed)},_bindUpdateLayout:function(){var e=this;e.element.on("updatelayout",(function(){e._open&&e._positionPanel()}))},_bindLinkListeners:function(){this._on("body",{"click a":"_handleClick"})},_handleClick:function(t){var i,n=this.element.attr("id");t.currentTarget.href.split("#")[1]===n&&undefined!==n&&(t.preventDefault(),(i=e(t.target)).hasClass("ui-btn")&&(i.addClass(e.mobile.activeBtnClass),this.element.one("panelopen panelclose",(function(){i.removeClass(e.mobile.activeBtnClass)}))),this.toggle())},_bindSwipeEvents:function(){var e=this,t=e._modal?e.element.add(e._modal):e.element;e.options.swipeClose&&("left"===e.options.position?t.on("swipeleft.panel",(function(){e.close()})):t.on("swiperight.panel",(function(){e.close()})))},_bindPageEvents:function(){var e=this;this.document.on("panelbeforeopen",(function(t){e._open&&t.target!==e.element[0]&&e.close()})).on("keyup.panel",(function(t){27===t.keyCode&&e._open&&e.close()})),this._parentPage||"overlay"===this.options.display||this._on(this.document,{pageshow:function(){this._openedPage=null,this._getWrapper()}}),e._parentPage?this.document.on("pagehide",":jqmData(role='page')",(function(){e._open&&e.close(!0)})):this.document.on("pagebeforehide",(function(){e._open&&e.close(!0)}))},_open:!1,_pageContentOpenClasses:null,_modalOpenClasses:null,open:function(t){if(!this._open){var i=this,n=i.options,a=function(){i._off(i.document,"panelclose"),i._page().jqmData("panel","open"),e.support.cssTransform3d&&n.animate&&"overlay"!==n.display&&(i._wrapper.addClass(n.classes.animate),i._fixedToolbars().addClass(n.classes.animate)),!t&&e.support.cssTransform3d&&n.animate?(i._wrapper||i.element).animationComplete(s,"transition"):setTimeout(s,0),n.theme&&"overlay"!==n.display&&i._page().parent().addClass(n.classes.pageContainer+"-themed "+n.classes.pageContainer+"-"+n.theme),i.element.removeClass(n.classes.panelClosed).addClass(n.classes.panelOpen),i._positionPanel(!0),i._pageContentOpenClasses=i._getPosDisplayClasses(n.classes.pageContentPrefix),"overlay"!==n.display&&(i._page().parent().addClass(n.classes.pageContainer),i._wrapper.addClass(i._pageContentOpenClasses),i._fixedToolbars().addClass(i._pageContentOpenClasses)),i._modalOpenClasses=i._getPosDisplayClasses(n.classes.modal)+" "+n.classes.modalOpen,i._modal&&i._modal.addClass(i._modalOpenClasses).height(Math.max(i._modal.height(),i.document.height()))},s=function(){i._open&&("overlay"!==n.display&&(i._wrapper.addClass(n.classes.pageContentPrefix+"-open"),i._fixedToolbars().addClass(n.classes.pageContentPrefix+"-open")),i._bindFixListener(),i._trigger("open"),i._openedPage=i._page())};i._trigger("beforeopen"),"open"===i._page().jqmData("panel")?i._on(i.document,{panelclose:a}):a(),i._open=!0}},close:function(t){if(this._open){var i=this,n=this.options,a=function(){n.theme&&"overlay"!==n.display&&i._page().parent().removeClass(n.classes.pageContainer+"-themed "+n.classes.pageContainer+"-"+n.theme),i.element.addClass(n.classes.panelClosed),"overlay"!==n.display&&(i._page().parent().removeClass(n.classes.pageContainer),i._wrapper.removeClass(n.classes.pageContentPrefix+"-open"),i._fixedToolbars().removeClass(n.classes.pageContentPrefix+"-open")),e.support.cssTransform3d&&n.animate&&"overlay"!==n.display&&(i._wrapper.removeClass(n.classes.animate),i._fixedToolbars().removeClass(n.classes.animate)),i._fixPanel(),i._unbindFixListener(),e.mobile.resetActivePageHeight(),i._page().jqmRemoveData("panel"),i._trigger("close"),i._openedPage=null};i._trigger("beforeclose"),i.element.removeClass(n.classes.panelOpen),"overlay"!==n.display&&(i._wrapper.removeClass(i._pageContentOpenClasses),i._fixedToolbars().removeClass(i._pageContentOpenClasses)),!t&&e.support.cssTransform3d&&n.animate?(i._wrapper||i.element).animationComplete(a,"transition"):setTimeout(a,0),i._modal&&i._modal.removeClass(i._modalOpenClasses).height(""),i._open=!1}},toggle:function(){this[this._open?"close":"open"]()},_destroy:function(){var t=this.options,i=e("body > :mobile-panel").length+e.mobile.activePage.find(":mobile-panel").length>1;"overlay"!==t.display&&(0===e("body > :mobile-panel").add(e.mobile.activePage.find(":mobile-panel")).not(".ui-panel-display-overlay").not(this.element).length&&this._wrapper.children().unwrap(),this._open&&(this._fixedToolbars().removeClass(t.classes.pageContentPrefix+"-open"),e.support.cssTransform3d&&t.animate&&this._fixedToolbars().removeClass(t.classes.animate),this._page().parent().removeClass(t.classes.pageContainer),t.theme&&this._page().parent().removeClass(t.classes.pageContainer+"-themed "+t.classes.pageContainer+"-"+t.theme))),i||this.document.off("panelopen panelclose"),this._open&&this._page().jqmRemoveData("panel"),this._panelInner.children().unwrap(),this.element.removeClass([this._getPanelClasses(),t.classes.panelOpen,t.classes.animate].join(" ")).off("swipeleft.panel swiperight.panel").off("panelbeforeopen").off("panelhide").off("keyup.panel").off("updatelayout"),this._modal&&this._modal.remove()}})}(e),function(e,t){e.widget("mobile.table",{options:{classes:{table:"ui-table"},enhanced:!1},_create:function(){this.options.enhanced||this.element.addClass(this.options.classes.table),e.extend(this,{headers:t,allHeaders:t}),this._refresh(!0)},_setHeaders:function(){var e=this.element.find("thead tr");this.headers=this.element.find("tr:eq(0)").children(),this.allHeaders=this.headers.add(e.children())},refresh:function(){this._refresh()},rebuild:e.noop,_refresh:function(){var t=this.element,i=t.find("thead tr");this._setHeaders(),i.each((function(){var n=0;e(this).children().each((function(){var a,s=parseInt(this.getAttribute("colspan"),10),o=":nth-child("+(n+1)+")";if(this.setAttribute("data-"+e.mobile.ns+"colstart",n+1),s)for(a=0;s-1>a;a++)o+=", :nth-child("+(++n+1)+")";e(this).jqmData("cells",t.find("tr").not(i.eq(0)).not(this).children(o)),n++}))}))}})}(e),function(e){e.widget("mobile.table",e.mobile.table,{options:{mode:"columntoggle",columnBtnTheme:null,columnPopupTheme:null,columnBtnText:"Columns...",classes:e.extend(e.mobile.table.prototype.options.classes,{popup:"ui-table-columntoggle-popup",columnBtn:"ui-table-columntoggle-btn",priorityPrefix:"ui-table-priority-",columnToggleTable:"ui-table-columntoggle"})},_create:function(){this._super(),"columntoggle"===this.options.mode&&(e.extend(this,{_menu:null}),this.options.enhanced?(this._menu=e(this.document[0].getElementById(this._id()+"-popup")).children().first(),this._addToggles(this._menu,!0)):(this._menu=this._enhanceColToggle(),this.element.addClass(this.options.classes.columnToggleTable)),this._setupEvents(),this._setToggleState())},_id:function(){return this.element.attr("id")||this.widgetName+this.uuid},_setupEvents:function(){this._on(this.window,{throttledresize:"_setToggleState"}),this._on(this._menu,{"change input":"_menuInputChange"})},_addToggles:function(t,i){var n,a=0,s=this.options,o=t.controlgroup("container");i?n=t.find("input"):o.empty(),this.headers.not("td").each((function(){var t,r,l=e(this),c=e.mobile.getAttribute(this,"priority");c&&((r=l.add(l.jqmData("cells"))).addClass(s.classes.priorityPrefix+c),t=(i?n.eq(a++):e("<label><input type='checkbox' checked />"+(l.children("abbr").first().attr("title")||l.text())+"</label>").appendTo(o).children(0).checkboxradio({theme:s.columnPopupTheme})).jqmData("header",l).jqmData("cells",r),l.jqmData("input",t))})),i||t.controlgroup("refresh")},_menuInputChange:function(t){var i=e(t.target),n=i[0].checked;i.jqmData("cells").toggleClass("ui-table-cell-hidden",!n).toggleClass("ui-table-cell-visible",n)},_unlockCells:function(e){e.removeClass("ui-table-cell-hidden ui-table-cell-visible")},_enhanceColToggle:function(){var t,i,n,a,s=this.element,o=this.options,r=e.mobile.ns,l=this.document[0].createDocumentFragment();return t=this._id()+"-popup",i=e("<a href='#"+t+"' class='"+o.classes.columnBtn+" ui-btn ui-btn-"+(o.columnBtnTheme||"a")+" ui-corner-all ui-shadow ui-mini' data-"+r+"rel='popup'>"+o.columnBtnText+"</a>"),n=e("<div class='"+o.classes.popup+"' id='"+t+"'></div>"),a=e("<fieldset></fieldset>").controlgroup(),this._addToggles(a,!1),a.appendTo(n),l.appendChild(n[0]),l.appendChild(i[0]),s.before(l),n.popup(),a},rebuild:function(){this._super(),"columntoggle"===this.options.mode&&this._refresh(!1)},_refresh:function(t){var i,n,a;if(this._super(t),!t&&"columntoggle"===this.options.mode)for(i=this.headers,n=[],this._menu.find("input").each((function(){var t=e(this),a=t.jqmData("header"),s=i.index(a[0]);s>-1&&!t.prop("checked")&&n.push(s)})),this._unlockCells(this.element.find(".ui-table-cell-hidden, .ui-table-cell-visible")),this._addToggles(this._menu,t),a=n.length-1;a>-1;a--)i.eq(n[a]).jqmData("input").prop("checked",!1).checkboxradio("refresh").trigger("change")},_setToggleState:function(){this._menu.find("input").each((function(){var t=e(this);this.checked="table-cell"===t.jqmData("cells").eq(0).css("display"),t.checkboxradio("refresh")}))},_destroy:function(){this._super()}})}(e),function(e){e.widget("mobile.table",e.mobile.table,{options:{mode:"reflow",classes:e.extend(e.mobile.table.prototype.options.classes,{reflowTable:"ui-table-reflow",cellLabels:"ui-table-cell-label"})},_create:function(){this._super(),"reflow"===this.options.mode&&(this.options.enhanced||(this.element.addClass(this.options.classes.reflowTable),this._updateReflow()))},rebuild:function(){this._super(),"reflow"===this.options.mode&&this._refresh(!1)},_refresh:function(e){this._super(e),e||"reflow"!==this.options.mode||this._updateReflow()},_updateReflow:function(){var t=this,i=this.options;e(t.allHeaders.get().reverse()).each((function(){var n,a,s=e(this).jqmData("cells"),o=e.mobile.getAttribute(this,"colstart"),r=s.not(this).filter("thead th").length&&" ui-table-cell-label-top",l=e(this).clone().contents();l.length>0&&(r?(a="",(n=parseInt(this.getAttribute("colspan"),10))&&(a="td:nth-child("+n+"n + "+o+")"),t._addLabels(s.filter(a),i.classes.cellLabels+r,l)):t._addLabels(s,i.classes.cellLabels,l))}))},_addLabels:function(t,i,n){1===n.length&&"abbr"===n[0].nodeName.toLowerCase()&&(n=n.eq(0).attr("title")),t.not(":has(b."+i+")").prepend(e("<b class='"+i+"'></b>").append(n))}})}(e),function(e,i){var n=function(t,i){return-1===(""+(e.mobile.getAttribute(this,"filtertext")||e(this).text())).toLowerCase().indexOf(i)};e.widget("mobile.filterable",{initSelector:":jqmData(filter='true')",options:{filterReveal:!1,filterCallback:n,enhanced:!1,input:null,children:"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"},_create:function(){var t=this.options;e.extend(this,{_search:null,_timer:0}),this._setInput(t.input),t.enhanced||this._filterItems((this._search&&this._search.val()||"").toLowerCase())},_onKeyUp:function(){var i,n,a=this._search;if(a){if(i=a.val().toLowerCase(),(n=e.mobile.getAttribute(a[0],"lastval")+"")&&n===i)return;this._timer&&(t.clearTimeout(this._timer),this._timer=0),this._timer=this._delay((function(){return!1!==this._trigger("beforefilter",null,{input:a})&&(a[0].setAttribute("data-"+e.mobile.ns+"lastval",i),this._filterItems(i),void(this._timer=0))}),250)}},_getFilterableItems:function(){var t=this.element,i=this.options.children,n=i?e.isFunction(i)?i():i.nodeName?e(i):i.jquery?i:this.element.find(i):{length:0};return 0===n.length&&(n=t.children()),n},_filterItems:function(t){var i,a,s,o=[],r=[],l=this.options,c=this._getFilterableItems();if(null!=t)for(a=l.filterCallback||n,s=c.length,i=0;s>i;i++)(a.call(c[i],i,t)?r:o).push(c[i]);0===r.length?c[l.filterReveal&&0===t.length?"addClass":"removeClass"]("ui-screen-hidden"):(e(r).addClass("ui-screen-hidden"),e(o).removeClass("ui-screen-hidden")),this._refreshChildWidget(),this._trigger("filter",null,{items:c})},_refreshChildWidget:function(){var t,i,n=["collapsibleset","selectmenu","controlgroup","listview"];for(i=n.length-1;i>-1;i--)t=n[i],e.mobile[t]&&((t=this.element.data("mobile-"+t))&&e.isFunction(t.refresh)&&t.refresh())},_setInput:function(i){var n=this._search;this._timer&&(t.clearTimeout(this._timer),this._timer=0),n&&(this._off(n,"keyup change input"),n=null),i&&(n=i.jquery?i:i.nodeName?e(i):this.document.find(i),this._on(n,{keydown:"_onKeyDown",keypress:"_onKeyPress",keyup:"_onKeyUp",change:"_onKeyUp",input:"_onKeyUp"})),this._search=n},_onKeyDown:function(t){t.keyCode===e.ui.keyCode.ENTER&&(t.preventDefault(),this._preventKeyPress=!0)},_onKeyPress:function(e){this._preventKeyPress&&(e.preventDefault(),this._preventKeyPress=!1)},_setOptions:function(e){var t=!(e.filterReveal===i&&e.filterCallback===i&&e.children===i);this._super(e),e.input!==i&&(this._setInput(e.input),t=!0),t&&this.refresh()},_destroy:function(){var e=this.options,t=this._getFilterableItems();e.enhanced?t.toggleClass("ui-screen-hidden",e.filterReveal):t.removeClass("ui-screen-hidden")},refresh:function(){this._timer&&(t.clearTimeout(this._timer),this._timer=0),this._filterItems((this._search&&this._search.val()||"").toLowerCase())}})}(e),function(e,t){var i=/(^|\s)ui-li-divider(\s|$)/,n=e.mobile.filterable.prototype.options.filterCallback;e.mobile.filterable.prototype.options.filterCallback=function(e,t){return!this.className.match(i)&&n.call(this,e,t)},e.widget("mobile.filterable",e.mobile.filterable,{options:{filterPlaceholder:"Filter items...",filterTheme:null},_create:function(){var t,i,n=this.element,a=["collapsibleset","selectmenu","controlgroup","listview"],s={};for(this._super(),e.extend(this,{_widget:null}),t=a.length-1;t>-1;t--)if(i=a[t],e.mobile[i]){if(this._setWidget(n.data("mobile-"+i)))break;s[i+"create"]="_handleCreate"}this._widget||this._on(n,s)},_handleCreate:function(e){this._setWidget(this.element.data("mobile-"+e.type.substring(0,e.type.length-6)))},_trigger:function(e,t,i){return this._widget&&"mobile-listview"===this._widget.widgetFullName&&"beforefilter"===e&&this._widget._trigger("beforefilter",t,i),this._super(e,t,i)},_setWidget:function(e){return!this._widget&&e&&(this._widget=e,this._widget._setOptions=function(e,t){return function(i){t.call(this,i),e._syncTextInputOptions(i)}}(this,this._widget._setOptions)),this._widget&&(this._syncTextInputOptions(this._widget.options),"listview"===this._widget.widgetName&&(this._widget.options.hideDividers=!0,this._widget.element.listview("refresh"))),!!this._widget},_isSearchInternal:function(){return this._search&&this._search.jqmData("ui-filterable-"+this.uuid+"-internal")},_setInput:function(t){var i=this.options,n=!0,a={};if(!t){if(this._isSearchInternal())return;n=!1,t=e("<input data-"+e.mobile.ns+"type='search' placeholder='"+i.filterPlaceholder+"'></input>").jqmData("ui-filterable-"+this.uuid+"-internal",!0),e("<form class='ui-filterable'></form>").append(t).submit((function(e){e.preventDefault(),t.blur()})).insertBefore(this.element),e.mobile.textinput&&(null!=this.options.filterTheme&&(a.theme=i.filterTheme),t.textinput(a))}this._super(t),this._isSearchInternal()&&n&&this._search.attr("placeholder",this.options.filterPlaceholder)},_setOptions:function(i){var n=this._super(i);return i.filterPlaceholder!==t&&this._isSearchInternal()&&this._search.attr("placeholder",i.filterPlaceholder),i.filterTheme!==t&&this._search&&e.mobile.textinput&&this._search.textinput("option","theme",i.filterTheme),n},_refreshChildWidget:function(){this._refreshingChildWidget=!0,this._superApply(arguments),this._refreshingChildWidget=!1},refresh:function(){this._refreshingChildWidget||this._superApply(arguments)},_destroy:function(){this._isSearchInternal()&&this._search.remove(),this._super()},_syncTextInputOptions:function(i){var n,a={};if(this._isSearchInternal()&&e.mobile.textinput){for(n in e.mobile.textinput.prototype.options)i[n]!==t&&(a[n]="theme"===n&&null!=this.options.filterTheme?this.options.filterTheme:i[n]);this._search.textinput("option",a)}}}),e.widget("mobile.listview",e.mobile.listview,{options:{filter:!1},_create:function(){return!0!==this.options.filter||this.element.data("mobile-filterable")||this.element.filterable(),this._super()},refresh:function(){var e;this._superApply(arguments),!0===this.options.filter&&((e=this.element.data("mobile-filterable"))&&e.refresh())}})}(e),function(e,t){function i(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;e.widget("ui.tabs",{version:"fadf2b312a05040436451c64bbfaf4814bc62c56",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),this.active=!1!==this.options.active&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each((function(i,a){return e(a).attr("aria-controls")===n?(t=i,!1):void 0})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=!!this.tabs.length&&0)),!1!==t&&(-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0)),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),a=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:a=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n!==this.options.active&&n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",n)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){for(var n=this.tabs.length-1;-1!==e.inArray((t>n&&(t=0),0>t&&(t=n),t),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+ ++n},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),(function(e){return i.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each((function(n,a){var s,o,r,l=e(a).uniqueId().attr("id"),c=e(a).closest("li"),d=c.attr("aria-controls");i(a)?(s=a.hash,o=t.element.find(t._sanitizeSelector(s))):(s="#"+(r=t._tabId(c)),(o=t.element.find(s)).length||(o=t._createPanel(r)).insertAfter(t.panels[n-1]||t.tablist),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),d&&c.data("ui-tabs-aria-controls",d),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)})),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)!0===t||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),(function(e,t){i[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){i-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each((function(){i=Math.max(i,e(this).height("").height())})).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,a=e(t.currentTarget).closest("li"),s=a[0]===n[0],o=s&&i.collapsible,r=o?e():this._getPanelForTab(a),l=n.length?this._getPanelForTab(n):e(),c={oldTab:n,oldPanel:l,newTab:o?e():a,newPanel:r};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||s&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!o&&this.tabs.index(a),this.active=s?e():a,this.xhr&&this.xhr.abort(),l.length||r.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),r.length&&this.load(this.tabs.index(a),t),this._toggle(t,c))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function a(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&s.options.show?s._show(o,s.options.show,n):(o.show(),n())}var s=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,(function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a()})):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),a()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")})),this.tabs.each((function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;!1!==n&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,(function(e){return e!==i?e:null})):e.map(this.tabs,(function(e,t){return t!==i?t:null}))),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(!0!==n){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,n){t=this._getIndex(t);var a=this,s=this.tabs.eq(t),o=s.find(".ui-tabs-anchor"),r=this._getPanelForTab(s),l={tab:s,panel:r};i(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success((function(e){setTimeout((function(){r.html(e),a._trigger("load",n,l)}),1)})).complete((function(e,t){setTimeout((function(){"abort"===t&&a.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===a.xhr&&delete a.xhr}),1)}))))},_ajaxSettings:function(t,i,n){var a=this;return{url:t.attr("href"),beforeSend:function(t,s){return a._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(e),function(e,t){function i(e){a=e.originalEvent,l=a.accelerationIncludingGravity,s=Math.abs(l.x),o=Math.abs(l.y),r=Math.abs(l.z),!t.orientation&&(s>7||(r>6&&8>o||8>r&&o>6)&&s>5)?n.enabled&&n.disable():n.enabled||n.enable()}e.mobile.iosorientationfixEnabled=!0;var n,a,s,o,r,l,c=navigator.userAgent;/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(c)&&c.indexOf("AppleWebKit")>-1?(n=e.mobile.zoom,e.mobile.document.on("mobileinit",(function(){e.mobile.iosorientationfixEnabled&&e.mobile.window.bind("orientationchange.iosorientationfix",n.enable).bind("devicemotion.iosorientationfix",i)}))):e.mobile.iosorientationfixEnabled=!1}(e,this),function(e,t,n){function a(){s.removeClass("ui-mobile-rendering")}var s=e("html"),o=e.mobile.window;e(t.document).trigger("mobileinit"),e.mobile.gradeA()&&(e.mobile.ajaxBlacklist&&(e.mobile.ajaxEnabled=!1),s.addClass("ui-mobile ui-mobile-rendering"),setTimeout(a,5e3),e.extend(e.mobile,{initializePage:function(){var t=e.mobile.path,n=e(":jqmData(role='page'), :jqmData(role='dialog')"),s=t.stripHash(t.stripQueryParams(t.parseLocation().hash)),r=e.mobile.path.parseLocation(),l=s?i.getElementById(s):undefined;n.length||(n=e("body").wrapInner("<div data-"+e.mobile.ns+"role='page'></div>").children(0)),n.each((function(){var i=e(this);i[0].getAttribute("data-"+e.mobile.ns+"url")||i.attr("data-"+e.mobile.ns+"url",i.attr("id")||t.convertUrlToDataUrl(r.pathname+r.search))})),e.mobile.firstPage=n.first(),e.mobile.pageContainer=e.mobile.firstPage.parent().addClass("ui-mobile-viewport").pagecontainer(),e.mobile.navreadyDeferred.resolve(),o.trigger("pagecontainercreate"),e.mobile.loading("show"),a(),e.mobile.hashListeningEnabled&&e.mobile.path.isHashValid(location.hash)&&(e(l).is(":jqmData(role='page')")||e.mobile.path.isPath(s)||s===e.mobile.dialogHashKey)?e.event.special.navigate.isPushStateEnabled()?(e.mobile.navigate.history.stack=[],e.mobile.navigate(e.mobile.path.isPath(location.hash)?location.hash:location.href)):o.trigger("hashchange",[!0]):(e.event.special.navigate.isPushStateEnabled()&&e.mobile.navigate.navigator.squash(t.parseLocation().href),e.mobile.changePage(e.mobile.firstPage,{transition:"none",reverse:!0,changeHash:!1,fromHashChange:!0}))}}),e((function(){e.support.inlineSVG(),e.mobile.hideUrlBar&&t.scrollTo(0,1),e.mobile.defaultHomeScroll=e.support.scrollTop&&1!==e.mobile.window.scrollTop()?1:0,e.mobile.autoInitializePage&&e.mobile.initializePage(),e.mobile.hideUrlBar&&o.load(e.mobile.silentScroll),e.support.cssPointerEvents||e.mobile.document.delegate(".ui-state-disabled,.ui-disabled","vclick",(function(e){e.preventDefault(),e.stopImmediatePropagation()}))})))}(e,this)})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ApexCharts=t()}(this,(function(){"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var a=l(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f=function(){function e(){n(this,e)}return s(e,[{key:"shadeRGBColor",value:function(e,t){var i=t.split(","),n=e<0?0:255,a=e<0?-1*e:e,s=parseInt(i[0].slice(4),10),o=parseInt(i[1],10),r=parseInt(i[2],10);return"rgb("+(Math.round((n-s)*a)+s)+","+(Math.round((n-o)*a)+o)+","+(Math.round((n-r)*a)+r)+")"}},{key:"shadeHexColor",value:function(e,t){var i=parseInt(t.slice(1),16),n=e<0?0:255,a=e<0?-1*e:e,s=i>>16,o=i>>8&255,r=255&i;return"#"+(16777216+65536*(Math.round((n-s)*a)+s)+256*(Math.round((n-o)*a)+o)+(Math.round((n-r)*a)+r)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,i){return e.isColorHex(i)?this.shadeHexColor(t,i):this.shadeRGBColor(t,i)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===i(e)&&!Array.isArray(e)&&null!=e}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,i=[];for(t=0;t<e.length;t++)i[t]=e[t];return i}},{key:"extend",value:function(e,t){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var a in n)n.hasOwnProperty(a)&&(t[a]=n[a])}return t});var n=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(a){i.isObject(t[a])&&a in e?n[a]=i.extend(e[a],t[a]):Object.assign(n,o({},a,t[a]))})),n}},{key:"extendArray",value:function(t,i){var n=[];return t.map((function(t){n.push(e.extend(i,t))})),n}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(t){if(e.is("Array",t)){for(var n=[],a=0;a<t.length;a++)n[a]=this.clone(t[a]);return n}if(e.is("Null",t))return null;if(e.is("Date",t))return t;if("object"===i(t)){var s={};for(var o in t)t.hasOwnProperty(o)&&(s[o]=this.clone(t[o]));return s}return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return null===e?e:parseFloat(e)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(1===t.length)return t[0];var i="",n=e<0?"-":"",a=t[0].replace(".",""),s=Number(t[1])+1;if(s<0){for(i=n+"0.";s++;)i+="0";return i+a.replace(/^-/,"")}for(s-=a.length;s--;)i+="0";return a+i}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),i=e.clientHeight,n=e.clientWidth;return i-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),i]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(e,t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e.length>t.length?e:t}))),e.length>t.length?e:t}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==e.substring(0,1)&&(e="#999999");var i=e.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(1===i[n].length?i[n]+i[n]:i[n],16);return void 0!==t&&i.push(t),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var i=[],n=2*Math.PI/t,a=0;a<t;a++){var s={};s.x=e*Math.sin(a*n),s.y=-e*Math.cos(a*n),i.push(s)}return i}},{key:"polarToCartesian",value:function(e,t,i,n){var a=(n-90)*Math.PI/180;return{x:e+i*Math.cos(a),y:t+i*Math.sin(a)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",i=e.toString().slice();return i.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,i){if(i>=e.length)for(var n=i-e.length+1;n--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style.key=t[i])}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var n=e.indexOf("Edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)}}]),e}(),g=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return s(e,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1};break;case"bounce":e=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};break;case"elastic":e=function(e){return e===!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,i,n){e.attr(t).animate(n).attr(i)}},{key:"animateMarker",value:function(e,t,i,n,a,s){t||(t=0),e.attr({r:t,width:t,height:t}).animate(n,a).attr({r:i,width:i.width,height:i.height}).afterAll((function(){s()}))}},{key:"animateCircle",value:function(e,t,i,n,a){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(n,a).attr({r:i.r,cx:i.cx,cy:i.cy})}},{key:"animateRect",value:function(e,t,i,n,a){e.attr(t).animate(n).attr(i).afterAll((function(){return a()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,i=e.realIndex,n=e.j,a=e.fill,s=e.pathFrom,o=e.pathTo,r=e.speed,l=e.delay,c=this.w,d=0;c.config.chart.animations.animateGradually.enabled&&(d=c.config.chart.animations.animateGradually.delay),c.config.chart.animations.dynamicAnimation.enabled&&c.globals.dataChanged&&"bar"!==c.config.chart.type&&(d=0),this.morphSVG(t,i,n,"line"!==c.config.chart.type||c.globals.comboCharts?a:"stroke",s,o,r,l*d)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){e.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,i,n,a,s,o,r){var l=this,c=this.w;a||(a=e.attr("pathFrom")),s||(s=e.attr("pathTo"));var d=function(e){return"radar"===c.config.chart.type&&(o=1),"M 0 ".concat(c.globals.gridHeight)};(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=d()),(!s||s.indexOf("undefined")>-1||s.indexOf("NaN")>-1)&&(s=d()),c.globals.shouldAnimate||(o=1),e.plot(a).animate(1,c.globals.easing,r).plot(a).animate(o,c.globals.easing,r).plot(s).afterAll((function(){f.isNumber(i)?i===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(e):"none"!==n&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&t===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(e),l.showDelayedElements()}))}}]),e}(),m=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"getDefaultFilter",value:function(e,t){var i=this.w;e.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==i.config.states.normal.filter?this.applyFilter(e,t,i.config.states.normal.filter.type,i.config.states.normal.filter.value):i.config.chart.dropShadow.enabled&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var i=this.w;i.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,i.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,i){var n=this,a=this.w,s=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var i=a.config.chart.dropShadow;(i.enabled?n.addShadow(e,t,i):e).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:s}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,i){var n=this,a=this.w,s=i.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var i=a.config.chart.dropShadow;(i.enabled?n.addShadow(e,t,i):e).componentTransfer({rgb:{type:"linear",slope:s}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(i){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:n});break;case"darken":this.addDarkenFilter(e,t,{intensity:n})}}},{key:"addShadow",value:function(e,t,i){var n=i.blur,a=i.top,s=i.left,o=i.color,r=i.opacity,l=e.flood(Array.isArray(o)?o[t]:o,r).composite(e.sourceAlpha,"in").offset(s,a).gaussianBlur(n).merge(e.source);return e.blend(e.source,l)}},{key:"dropShadow",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.top,a=t.left,s=t.blur,o=t.color,r=t.opacity,l=t.noUserSpaceOnUse,c=this.w;return e.unfilter(!0),f.isIE()&&"radialBar"===c.config.chart.type||(o=Array.isArray(o)?o[i]:o,e.filter((function(e){var t;t=f.isSafari()||f.isFirefox()||f.isIE()?e.flood(o,r).composite(e.sourceAlpha,"in").offset(a,n).gaussianBlur(s):e.flood(o,r).composite(e.sourceAlpha,"in").offset(a,n).gaussianBlur(s).merge(e.source),e.blend(e.source,t)})),l||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,i){var n=this.w;if(void 0!==n.globals.selectedDataPoints[t]&&n.globals.selectedDataPoints[t].indexOf(i)>-1){e.node.setAttribute("selected",!0);var a=n.config.states.active.filter;"none"!==a&&this.applyFilter(e,t,a.type,a.value)}}},{key:"_scaleFilterSize",value:function(e){!function(t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),e}(),v=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"drawLine",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:e,y1:t,x2:i,y2:n,stroke:a,"stroke-dasharray":s,"stroke-width":o,"stroke-linecap":r})}},{key:"drawRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,d=this.w.globals.dom.Paper.rect();return d.attr({x:e,y:t,width:i>0?i:0,height:n>0?n:0,rx:a,ry:a,opacity:o,"stroke-width":null!==r?r:0,stroke:null!==l?l:"none","stroke-dasharray":c}),d.node.setAttribute("fill",s),d}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(e).attr({fill:n,stroke:t,"stroke-width":i})}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e<0&&(e=0);var i=this.w.globals.dom.Paper.circle(2*e);return null!==t&&i.attr(t),i}},{key:"drawPath",value:function(e){var t=e.d,i=void 0===t?"":t,n=e.stroke,a=void 0===n?"#a8a8a8":n,s=e.strokeWidth,o=void 0===s?1:s,r=e.fill,l=e.fillOpacity,c=void 0===l?1:l,d=e.strokeOpacity,h=void 0===d?1:d,u=e.classes,p=e.strokeLinecap,f=void 0===p?null:p,g=e.strokeDashArray,m=void 0===g?0:g,v=this.w;return null===f&&(f=v.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(i).attr({fill:r,"fill-opacity":c,stroke:a,"stroke-opacity":h,"stroke-linecap":f,"stroke-width":o,"stroke-dasharray":m,class:u})}},{key:"group",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w.globals.dom.Paper.group();return null!==e&&t.attr(e),t}},{key:"move",value:function(e,t){return["M",e,t].join(" ")}},{key:"line",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;return null===i?n=["L",e,t].join(" "):"H"===i?n=["H",e].join(" "):"V"===i&&(n=["V",t].join(" ")),n}},{key:"curve",value:function(e,t,i,n,a,s){return["C",e,t,i,n,a,s].join(" ")}},{key:"quadraticCurve",value:function(e,t,i,n){return["Q",e,t,i,n].join(" ")}},{key:"arc",value:function(e,t,i,n,a,s,o){var r="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(r="a"),[r,e,t,i,n,a,s,o].join(" ")}},{key:"renderPaths",value:function(e){var i,n=e.j,a=e.realIndex,s=e.pathFrom,o=e.pathTo,r=e.stroke,l=e.strokeWidth,c=e.strokeLinecap,d=e.fill,h=e.animationDelay,u=e.initialSpeed,p=e.dataChangeSpeed,f=e.className,v=e.shouldClipToGrid,b=void 0===v||v,x=e.bindEventsOnPaths,y=void 0===x||x,w=e.drawShadow,k=void 0===w||w,S=this.w,C=new m(this.ctx),_=new g(this.ctx),T=this.w.config.chart.animations.enabled,A=T&&this.w.config.chart.animations.dynamicAnimation.enabled,P=!!(T&&!S.globals.resized||A&&S.globals.dataChanged&&S.globals.shouldAnimate);P?i=s:(i=o,S.globals.animationEnded=!0);var D,I=S.config.stroke.dashArray;D=Array.isArray(I)?I[a]:S.config.stroke.dashArray;var E=this.drawPath({d:i,stroke:r,strokeWidth:l,fill:d,fillOpacity:1,classes:f,strokeLinecap:c,strokeDashArray:D});if(E.attr("index",a),b&&E.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type)C.getDefaultFilter(E,a);else if(S.config.chart.dropShadow.enabled&&k&&(!S.config.chart.dropShadow.enabledOnSeries||S.config.chart.dropShadow.enabledOnSeries&&-1!==S.config.chart.dropShadow.enabledOnSeries.indexOf(a))){var L=S.config.chart.dropShadow;C.dropShadow(E,L,a)}y&&(E.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,E)),E.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,E)),E.node.addEventListener("mousedown",this.pathMouseDown.bind(this,E))),E.attr({pathTo:o,pathFrom:s});var M={el:E,j:n,realIndex:a,pathFrom:s,pathTo:o,fill:d,strokeWidth:l,delay:h};return!T||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||_.showDelayedElements():_.animatePathsGradually(t(t({},M),{},{speed:u})),S.globals.dataChanged&&A&&P&&_.animatePathsGradually(t(t({},M),{},{speed:p})),E}},{key:"drawPattern",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=this.w.globals.dom.Paper.pattern(t,i,(function(s){"horizontalLines"===e?s.line(0,0,i,0).stroke({color:n,width:a+1}):"verticalLines"===e?s.line(0,0,0,t).stroke({color:n,width:a+1}):"slantedLines"===e?s.line(0,0,t,i).stroke({color:n,width:a}):"squares"===e?s.rect(t,i).fill("none").stroke({color:n,width:a}):"circles"===e&&s.circle(t).fill("none").stroke({color:n,width:a})}));return s}},{key:"drawGradient",value:function(e,t,i,n,a){var s,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,d=this.w;t.length<9&&0===t.indexOf("#")&&(t=f.hexToRgba(t,n)),i.length<9&&0===i.indexOf("#")&&(i=f.hexToRgba(i,a));var h=0,u=1,p=1,g=null;null!==r&&(h=void 0!==r[0]?r[0]/100:0,u=void 0!==r[1]?r[1]/100:1,p=void 0!==r[2]?r[2]/100:1,g=void 0!==r[3]?r[3]/100:null);var m=!("donut"!==d.config.chart.type&&"pie"!==d.config.chart.type&&"polarArea"!==d.config.chart.type&&"bubble"!==d.config.chart.type);if(s=null===l||0===l.length?d.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){e.at(h,t,n),e.at(u,i,a),e.at(p,i,a),null!==g&&e.at(g,t,n)})):d.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){(Array.isArray(l[c])?l[c]:l).forEach((function(t){e.at(t.offset/100,t.color,t.opacity)}))})),m){var v=d.globals.gridWidth/2,b=d.globals.gridHeight/2;"bubble"!==d.config.chart.type?s.attr({gradientUnits:"userSpaceOnUse",cx:v,cy:b,r:o}):s.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===e?s.from(0,0).to(0,1):"diagonal"===e?s.from(0,0).to(1,1):"horizontal"===e?s.from(0,1).to(1,1):"diagonal2"===e&&s.from(1,0).to(0,1);return s}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,i=e.maxWidth,n=e.fontSize,a=e.fontFamily,s=this.getTextRects(t,n,a),o=s.width/t.length,r=Math.floor(i/o);return i<s.width?t.slice(0,r-3)+"...":t}},{key:"drawText",value:function(e){var i=this,n=e.x,a=e.y,s=e.text,o=e.textAnchor,r=e.fontSize,l=e.fontFamily,c=e.fontWeight,d=e.foreColor,h=e.opacity,u=e.maxWidth,p=e.cssClass,f=void 0===p?"":p,g=e.isPlainText,m=void 0===g||g,v=this.w;void 0===s&&(s="");var b=s;o||(o="start"),d&&d.length||(d=v.config.chart.foreColor),l=l||v.config.chart.fontFamily,c=c||"regular";var x,y={maxWidth:u,fontSize:r=r||"11px",fontFamily:l};return Array.isArray(s)?x=v.globals.dom.Paper.text((function(e){for(var n=0;n<s.length;n++)u&&(b=i.getTextBasedOnMaxWidth(t({text:s[n]},y))),0===n?e.tspan(b):e.tspan(b).newLine()})):(u&&(b=this.getTextBasedOnMaxWidth(t({text:s},y))),x=m?v.globals.dom.Paper.plain(s):v.globals.dom.Paper.text((function(e){return e.tspan(b)}))),x.attr({x:n,y:a,"text-anchor":o,"dominant-baseline":"auto","font-size":r,"font-family":l,"font-weight":c,fill:d,class:"apexcharts-text "+f}),x.node.style.fontFamily=l,x.node.style.opacity=h,x}},{key:"drawMarker",value:function(e,t,i){e=e||0;var n=i.pSize||0,a=null;if("square"===i.shape||"rect"===i.shape){var s=void 0===i.pRadius?n/2:i.pRadius;null!==t&&n||(n=0,s=0);var o=1.2*n+s,r=this.drawRect(o,o,o,o,s);r.attr({x:e-o/2,y:t-o/2,cx:e,cy:t,class:i.class?i.class:"",fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,stroke:i.pointStrokeColor,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}),a=r}else"circle"!==i.shape&&i.shape||(f.isNumber(t)||(n=0,t=0),a=this.drawCircle(n,{cx:e,cy:t,class:i.class?i.class:"",stroke:i.pointStrokeColor,fill:i.pointFillColor,"fill-opacity":i.pointFillOpacity?i.pointFillOpacity:1,"stroke-width":i.pointStrokeWidth?i.pointStrokeWidth:0,"stroke-opacity":i.pointStrokeOpacity?i.pointStrokeOpacity:1}));return a}},{key:"pathMouseEnter",value:function(e,t){var i=this.w,n=new m(this.ctx),a=parseInt(e.node.getAttribute("index"),10),s=parseInt(e.node.getAttribute("j"),10);if("function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:a,dataPointIndex:s,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:a,dataPointIndex:s,w:i}]),("none"===i.config.states.active.filter.type||"true"!==e.node.getAttribute("selected"))&&"none"!==i.config.states.hover.filter.type&&!i.globals.isTouchDevice){var o=i.config.states.hover.filter;n.applyFilter(e,a,o.type,o.value)}}},{key:"pathMouseLeave",value:function(e,t){var i=this.w,n=new m(this.ctx),a=parseInt(e.node.getAttribute("index"),10),s=parseInt(e.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:a,dataPointIndex:s,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:a,dataPointIndex:s,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===e.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&n.getDefaultFilter(e,a)}},{key:"pathMouseDown",value:function(e,t){var i=this.w,n=new m(this.ctx),a=parseInt(e.node.getAttribute("index"),10),s=parseInt(e.node.getAttribute("j"),10),o="false";if("true"===e.node.getAttribute("selected")){if(e.node.setAttribute("selected","false"),i.globals.selectedDataPoints[a].indexOf(s)>-1){var r=i.globals.selectedDataPoints[a].indexOf(s);i.globals.selectedDataPoints[a].splice(r,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var l=i.globals.dom.Paper.select(".apexcharts-series path").members,c=i.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,d=function(e){Array.prototype.forEach.call(e,(function(e){e.node.setAttribute("selected","false"),n.getDefaultFilter(e,a)}))};d(l),d(c)}e.node.setAttribute("selected","true"),o="true",void 0===i.globals.selectedDataPoints[a]&&(i.globals.selectedDataPoints[a]=[]),i.globals.selectedDataPoints[a].push(s)}if("true"===o){var h=i.config.states.active.filter;if("none"!==h)n.applyFilter(e,a,h.type,h.value);else if("none"!==i.config.states.hover.filter&&!i.globals.isTouchDevice){var u=i.config.states.hover.filter;n.applyFilter(e,a,u.type,u.value)}}else"none"!==i.config.states.active.filter.type&&("none"===i.config.states.hover.filter.type||i.globals.isTouchDevice?n.getDefaultFilter(e,a):(u=i.config.states.hover.filter,n.applyFilter(e,a,u.type,u.value)));"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:s,w:i}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:s,w:i}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&"function"==typeof e.getBBox&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,i,n){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:i,foreColor:"#fff",opacity:0});n&&o.attr("transform",n),s.globals.dom.Paper.add(o);var r=o.bbox();return a||(r=o.node.getBoundingClientRect()),o.remove(),{width:r.width,height:r.height}}},{key:"placeTextWithEllipsis",value:function(e,t,i){if("function"==typeof e.getComputedTextLength&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=i/1.1)){for(var n=t.length-3;n>0;n-=3)if(e.getSubStringLength(0,n)<=i/1.1)return void(e.textContent=t.substring(0,n)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])}}]),e}(),b=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"getStackedSeriesTotals",value:function(){var e=this.w,t=[];if(0===e.globals.series.length)return t;for(var i=0;i<e.globals.series[e.globals.maxValsInArrayIndex].length;i++){for(var n=0,a=0;a<e.globals.series.length;a++)void 0!==e.globals.series[a][i]&&(n+=e.globals.series[a][i]);t.push(n)}return e.globals.stackedSeriesTotals=t,t}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.w.config.series.reduce((function(e,t){return e+t}),0):this.w.globals.series[e].reduce((function(e,t){return e+t}),0)}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===e?this.w.config.series.filter((function(e){return null!==e})):this.w.config.series[e].data.filter((function(e){return null!==e}))).length}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(e,t,i){return e===i[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,i=e.slice();return t.config.xaxis.convertedCatToNumeric&&(i=e.map((function(e,i){return t.config.xaxis.labels.formatter(e-t.globals.minX+1)}))),i}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(e){return e.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(e){return e.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(e){t=Math.max(t,e)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(e){t=Math.max(t,e.size)})),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(e,t){var i=0;if(Array.isArray(e))for(var n=0;n<e.length;n++)i+=e[n];else i+=e;return i}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var i=this.w;return i.globals.series.map((function(n,a){for(var s=0,o=0;o<n.length;o++)i.globals.seriesX[a][o]>e&&i.globals.seriesX[a][o]<t&&(s+=n[o]);return s}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,i){var n=[];if(Array.isArray(t))for(var a=0;a<t.length;a++){var s=e.globals.stackedSeriesTotals[a],o=0;s&&(o=100*t[a]/s),n.push(o)}else{var r=100*t/e.globals.seriesTotals.reduce((function(e,t){return e+t}),0);n.push(r)}return n}))}},{key:"getCalculatedRatios",value:function(){var e,t,i,n,a=this.w.globals,s=[],o=0,r=[],l=.1,c=0;if(a.yRange=[],a.isMultipleYAxis)for(var d=0;d<a.minYArr.length;d++)a.yRange.push(Math.abs(a.minYArr[d]-a.maxYArr[d])),r.push(0);else a.yRange.push(Math.abs(a.minY-a.maxY));a.xRange=Math.abs(a.maxX-a.minX),a.zRange=Math.abs(a.maxZ-a.minZ);for(var h=0;h<a.yRange.length;h++)s.push(a.yRange[h]/a.gridHeight);if(t=a.xRange/a.gridWidth,i=Math.abs(a.initialMaxX-a.initialMinX)/a.gridWidth,e=a.yRange/a.gridWidth,n=a.xRange/a.gridHeight,(o=a.zRange/a.gridHeight*16)||(o=1),a.minY!==Number.MIN_VALUE&&0!==Math.abs(a.minY)&&(a.hasNegs=!0),a.isMultipleYAxis){r=[];for(var u=0;u<s.length;u++)r.push(-a.minYArr[u]/s[u])}else r.push(-a.minY/s[0]),a.minY!==Number.MIN_VALUE&&0!==Math.abs(a.minY)&&(l=-a.minY/e,c=a.minX/t);return{yRatio:s,invertedYRatio:e,zRatio:o,xRatio:t,initialXRatio:i,invertedXRatio:n,baseLineInvertedY:l,baseLineY:r,baseLineX:c}}},{key:"getLogSeries",value:function(e){var t=this,i=this.w;return i.globals.seriesLog=e.map((function(e,n){return i.config.yaxis[n]&&i.config.yaxis[n].logarithmic?e.map((function(e){return null===e?null:t.getLogVal(i.config.yaxis[n].logBase,e,n)})):e})),i.globals.invalidLogScale?e:i.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,i){if(0===t)return 0;var n=this.w,a=0===n.globals.minYArr[i]?-1:this.getBaseLog(e,n.globals.minYArr[i]),s=(0===n.globals.maxYArr[i]?0:this.getBaseLog(e,n.globals.maxYArr[i]))-a;return t<1?t/s:(this.getBaseLog(e,t)-a)/s}},{key:"getLogYRatios",value:function(e){var t=this,i=this.w,n=this.w.globals;return n.yLogRatio=e.slice(),n.logYRange=n.yRange.map((function(e,a){if(i.config.yaxis[a]&&t.w.config.yaxis[a].logarithmic){var s,o=-Number.MAX_VALUE,r=Number.MIN_VALUE;return n.seriesLog.forEach((function(e,t){e.forEach((function(e){i.config.yaxis[t]&&i.config.yaxis[t].logarithmic&&(o=Math.max(e,o),r=Math.min(e,r))}))})),s=Math.pow(n.yRange[a],Math.abs(r-o)/n.yRange[a]),n.yLogRatio[a]=s/n.gridHeight,s}})),n.invalidLogScale?e.slice():n.yLogRatio}}],[{key:"checkComboSeries",value:function(e){var t=!1,i=0,n=0;return e.length&&void 0!==e[0].type&&e.forEach((function(e){"bar"!==e.type&&"column"!==e.type&&"candlestick"!==e.type&&"boxPlot"!==e.type||i++,void 0!==e.type&&n++})),n>0&&(t=!0),{comboBarCount:i,comboCharts:t}}},{key:"extendArrayProps",value:function(e,t,i){return t.yaxis&&(t=e.extendYAxis(t,i)),t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),t.annotations.xaxis&&(t=e.extendXAxisAnnotations(t)),t.annotations.points&&(t=e.extendPointAnnotations(t))),t}}]),e}(),x=function(){function e(t){n(this,e),this.w=t.w,this.annoCtx=t}return s(e,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.w;if("vertical"===e.label.orientation){var n=null!==t?t:0,a=i.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(n,"']"));if(null!==a){var s=a.getBoundingClientRect();a.setAttribute("x",parseFloat(a.getAttribute("x"))-s.height+4),"top"===e.label.position?a.setAttribute("y",parseFloat(a.getAttribute("y"))+s.width):a.setAttribute("y",parseFloat(a.getAttribute("y"))-s.width);var o=this.annoCtx.graphics.rotateAroundCenter(a),r=o.x,l=o.y;a.setAttribute("transform","rotate(-90 ".concat(r," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var i=this.w;if(!e||void 0===t.label.text||void 0!==t.label.text&&!String(t.label.text).trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),a=e.getBoundingClientRect(),s=t.label.style.padding.left,o=t.label.style.padding.right,r=t.label.style.padding.top,l=t.label.style.padding.bottom;"vertical"===t.label.orientation&&(r=t.label.style.padding.left,l=t.label.style.padding.right,s=t.label.style.padding.top,o=t.label.style.padding.bottom);var c=a.left-n.left-s,d=a.top-n.top-r,h=this.annoCtx.graphics.drawRect(c-i.globals.barPadForNumericAxis,d,a.width+s+o,a.height+r+l,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&h.node.classList.add(t.id),h}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,i=function(i,n,a){var s=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(n,"']"));if(s){var o=s.parentNode,r=e.addBackgroundToAnno(s,i);r&&(o.insertBefore(r.node,s),i.label.mouseEnter&&r.node.addEventListener("mouseenter",i.label.mouseEnter.bind(e,i)),i.label.mouseLeave&&r.node.addEventListener("mouseleave",i.label.mouseLeave.bind(e,i)))}};t.config.annotations.xaxis.map((function(e,t){i(e,t,"xaxis")})),t.config.annotations.yaxis.map((function(e,t){i(e,t,"yaxis")})),t.config.annotations.points.map((function(e,t){i(e,t,"point")}))}},{key:"getY1Y2",value:function(e,t){var i,n="y1"===e?t.y:t.y2,a=this.w;if(this.annoCtx.invertAxis){var s=a.globals.labels.indexOf(n);a.config.xaxis.convertedCatToNumeric&&(s=a.globals.categoryLabels.indexOf(n));var o=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(s+1)+")");o&&(i=parseFloat(o.getAttribute("y")))}else{var r;r=a.config.yaxis[t.yAxisIndex].logarithmic?(n=new b(this.annoCtx.ctx).getLogVal(n,t.yAxisIndex))/a.globals.yLogRatio[t.yAxisIndex]:(n-a.globals.minYArr[t.yAxisIndex])/(a.globals.yRange[t.yAxisIndex]/a.globals.gridHeight),i=a.globals.gridHeight-r,a.config.yaxis[t.yAxisIndex]&&a.config.yaxis[t.yAxisIndex].reversed&&(i=r)}return i}},{key:"getX1X2",value:function(e,t){var i=this.w,n=this.annoCtx.invertAxis?i.globals.minY:i.globals.minX,a=this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX,s=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,o=(t.x-n)/(s/i.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(a-t.x)/(s/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(o=this.getStringX(t.x));var r=(t.x2-n)/(s/i.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(r=(a-t.x2)/(s/i.globals.gridWidth)),"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||(r=this.getStringX(t.x2)),"x1"===e?o:r}},{key:"getStringX",value:function(e){var t=this.w,i=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var n=t.globals.labels.indexOf(e),a=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(n+1)+")");return a&&(i=parseFloat(a.getAttribute("x"))),i}}]),e}(),y=function(){function e(t){n(this,e),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new x(this.annoCtx)}return s(e,[{key:"addXaxisAnnotation",value:function(e,t,i){var n,a=this.w,s=this.helpers.getX1X2("x1",e),o=e.label.text,r=e.strokeDashArray;if(f.isNumber(s)){if(null===e.x2||void 0===e.x2){var l=this.annoCtx.graphics.drawLine(s+e.offsetX,0+e.offsetY,s+e.offsetX,a.globals.gridHeight+e.offsetY,e.borderColor,r,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((n=this.helpers.getX1X2("x2",e))<s){var c=s;s=n,n=c}var d=this.annoCtx.graphics.drawRect(s+e.offsetX,0+e.offsetY,n-s,a.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,r);d.node.classList.add("apexcharts-annotation-rect"),d.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(d.node),e.id&&d.node.classList.add(e.id)}var h="top"===e.label.position?4:a.globals.gridHeight,u=this.annoCtx.graphics.getTextRects(o,parseFloat(e.label.style.fontSize)),p=this.annoCtx.graphics.drawText({x:s+e.label.offsetX,y:h+e.label.offsetY-("vertical"===e.label.orientation?"top"===e.label.position?u.width/2-12:-u.width/2:0),text:o,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});p.attr({rel:i}),t.appendChild(p.node),this.annoCtx.helpers.setOrientations(e,i)}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(t,n){e.addXaxisAnnotation(t,i.node,n)})),i}}]),e}(),w=function(){function e(t){n(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new x(this.annoCtx)}return s(e,[{key:"addYaxisAnnotation",value:function(e,t,i){var n,a=this.w,s=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),r=e.label.text;if(null===e.y2||void 0===e.y2){var l=this.annoCtx.graphics.drawLine(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),o+e.offsetY,e.borderColor,s,e.borderWidth);t.appendChild(l.node),e.id&&l.node.classList.add(e.id)}else{if((n=this.helpers.getY1Y2("y2",e))>o){var c=o;o=n,n=c}var d=this.annoCtx.graphics.drawRect(0+e.offsetX,n+e.offsetY,this._getYAxisAnnotationWidth(e),o-n,0,e.fillColor,e.opacity,1,e.borderColor,s);d.node.classList.add("apexcharts-annotation-rect"),d.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(d.node),e.id&&d.node.classList.add(e.id)}var h="right"===e.label.position?a.globals.gridWidth:0,u=this.annoCtx.graphics.drawText({x:h+e.label.offsetX,y:(null!=n?n:o)+e.label.offsetY-3,text:r,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});u.attr({rel:i}),t.appendChild(u.node)}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map((function(t,n){e.addYaxisAnnotation(t,i.node,n)})),i}}]),e}(),k=function(){function e(t){n(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new x(this.annoCtx)}return s(e,[{key:"addPointAnnotation",value:function(e,t,i){this.w;var n=this.helpers.getX1X2("x1",e),a=this.helpers.getY1Y2("y1",e);if(f.isNumber(n)){var s={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},o=this.annoCtx.graphics.drawMarker(n+e.marker.offsetX,a+e.marker.offsetY,s);t.appendChild(o.node);var r=e.label.text?e.label.text:"",l=this.annoCtx.graphics.drawText({x:n+e.label.offsetX,y:a+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:r,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(l.attr({rel:i}),t.appendChild(l.node),e.customSVG.SVG){var c=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});c.attr({transform:"translate(".concat(n+e.customSVG.offsetX,", ").concat(a+e.customSVG.offsetY,")")}),c.node.innerHTML=e.customSVG.SVG,t.appendChild(c.node)}if(e.image.path){var d=e.image.width?e.image.width:20,h=e.image.height?e.image.height:20;o=this.annoCtx.addImage({x:n+e.image.offsetX-d/2,y:a+e.image.offsetY-h/2,width:d,height:h,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&o.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&o.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e))}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(t,n){e.addPointAnnotation(t,i.node,n)})),i}}]),e}(),S={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},C=function(){function e(){n(this,e),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return s(e,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[S],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)/e.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return null!==e?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),e}(),_=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.graphics=new v(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new x(this),this.xAxisAnnotations=new y(this),this.yAxisAnnotations=new w(this),this.pointsAnnotations=new k(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return s(e,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),a=e.config.chart.animations.enabled,s=[t,i,n],o=[i.node,t.node,n.node],r=0;r<3;r++)e.globals.dom.elGraphical.add(s[r]),!a||e.globals.resized||e.globals.dataChanged||"scatter"!==e.config.chart.type&&"bubble"!==e.config.chart.type&&e.globals.dataPoints>1&&o[r].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[r],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,i){e.addImage(t,i)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,i){e.addText(t,i)}))}},{key:"addXaxisAnnotation",value:function(e,t,i){this.xAxisAnnotations.addXaxisAnnotation(e,t,i)}},{key:"addYaxisAnnotation",value:function(e,t,i){this.yAxisAnnotations.addYaxisAnnotation(e,t,i)}},{key:"addPointAnnotation",value:function(e,t,i){this.pointsAnnotations.addPointAnnotation(e,t,i)}},{key:"addText",value:function(e,t){var i=e.x,n=e.y,a=e.text,s=e.textAnchor,o=e.foreColor,r=e.fontSize,l=e.fontFamily,c=e.fontWeight,d=e.cssClass,h=e.backgroundColor,u=e.borderWidth,p=e.strokeDashArray,f=e.borderRadius,g=e.borderColor,m=e.appendTo,v=void 0===m?".apexcharts-annotations":m,b=e.paddingLeft,x=void 0===b?4:b,y=e.paddingRight,w=void 0===y?4:y,k=e.paddingBottom,S=void 0===k?2:k,C=e.paddingTop,_=void 0===C?2:C,T=this.w,A=this.graphics.drawText({x:i,y:n,text:a,textAnchor:s||"start",fontSize:r||"12px",fontWeight:c||"regular",fontFamily:l||T.config.chart.fontFamily,foreColor:o||T.config.chart.foreColor,cssClass:d}),P=T.globals.dom.baseEl.querySelector(v);P&&P.appendChild(A.node);var D=A.bbox();if(a){var I=this.graphics.drawRect(D.x-x,D.y-_,D.width+x+w,D.height+S+_,f,h||"transparent",1,u,g,p);P.insertBefore(I.node,A.node)}}},{key:"addImage",value:function(e,t){var i=this.w,n=e.path,a=e.x,s=void 0===a?0:a,o=e.y,r=void 0===o?0:o,l=e.width,c=void 0===l?20:l,d=e.height,h=void 0===d?20:d,u=e.appendTo,p=void 0===u?".apexcharts-annotations":u,f=i.globals.dom.Paper.image(n);f.size(c,h).move(s,r);var g=i.globals.dom.baseEl.querySelector(p);return g&&g.appendChild(f.node),f}},{key:"addXaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(e,t,i){return this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(e,t,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(e){var t=e.params,i=e.pushToMemory,n=e.context,a=e.type,s=e.contextMethod,o=n,r=o.w,l=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations")),c=l.childNodes.length+1,d=new C,h=Object.assign({},"xaxis"===a?d.xAxisAnnotation:"yaxis"===a?d.yAxisAnnotation:d.pointAnnotation),u=f.extend(h,t);switch(a){case"xaxis":this.addXaxisAnnotation(u,l,c);break;case"yaxis":this.addYaxisAnnotation(u,l,c);break;case"point":this.addPointAnnotation(u,l,c)}var p=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(c,"']")),g=this.helpers.addBackgroundToAnno(p,u);return g&&l.insertBefore(g.node,p),i&&r.globals.memory.methodsToExec.push({context:o,id:u.id?u.id:f.randomId(),method:s,label:"addAnnotation",params:t}),n}},{key:"clearAnnotations",value:function(e){var t=e.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((function(e,i){"addText"!==e.label&&"addAnnotation"!==e.label||t.globals.memory.methodsToExec.splice(i,1)})),i=f.listToArray(i),Array.prototype.forEach.call(i,(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var i=e.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(t));n&&(i.globals.memory.methodsToExec.map((function(e,n){e.id===t&&i.globals.memory.methodsToExec.splice(n,1)})),Array.prototype.forEach.call(n,(function(e){e.parentElement.removeChild(e)})))}}]),e}(),T=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return s(e,[{key:"clippedImgArea",value:function(e){var t=this.w,i=t.config,n=parseInt(t.globals.gridWidth,10),a=parseInt(t.globals.gridHeight,10),s=n>a?n:a,o=e.image,r=0,l=0;void 0===e.width&&void 0===e.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(r=i.fill.image.width+1,l=i.fill.image.height):(r=s+1,l=s):(r=e.width,l=e.height);var c=document.createElementNS(t.globals.SVGNS,"pattern");v.setAttrs(c,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:r+"px",height:l+"px"});var d=document.createElementNS(t.globals.SVGNS,"image");c.appendChild(d),d.setAttributeNS(window.SVG.xlink,"href",o),v.setAttrs(d,{x:0,y:0,preserveAspectRatio:"none",width:r+"px",height:l+"px"}),d.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(e){var t=this.w;return("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||"heatmap"===t.config.chart.type||"treemap"===t.config.chart.type?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var i,n,a,s=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var o=this.getFillColors()[this.seriesIndex];void 0!==t.globals.seriesColors[this.seriesIndex]&&(o=t.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var r=this.getFillType(this.seriesIndex),l=Array.isArray(s.fill.opacity)?s.fill.opacity[this.seriesIndex]:s.fill.opacity;e.color&&(o=e.color);var c=o;if(-1===o.indexOf("rgb")?o.length<9&&(c=f.hexToRgba(o,l)):o.indexOf("rgba")>-1&&(l=f.getOpacityFromRGBA(o)),e.opacity&&(l=e.opacity),"pattern"===r&&(n=this.handlePatternFill(n,o,l,c)),"gradient"===r&&(a=this.handleGradientFill(o,l,this.seriesIndex)),"image"===r){var d=s.fill.image.src,h=e.patternID?e.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(d)?e.seriesNumber<d.length?d[e.seriesNumber]:d[0]:d,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h)}),i="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(h,")")}else i="gradient"===r?a:"pattern"===r?n:c;return e.solid&&(i=c),i}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,i=this.opts,n=[];return e.globals.comboCharts?"line"===e.config.series[this.seriesIndex].type?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors):"line"===t.chart.type?Array.isArray(e.globals.stroke.colors)?n=e.globals.stroke.colors:n.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?n=e.globals.fill.colors:n.push(e.globals.fill.colors),void 0!==i.fillColors&&(n=[],Array.isArray(i.fillColors)?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(e,t,i,n){var a=this.w.config,s=this.opts,o=new v(this.ctx),r=void 0===a.fill.pattern.strokeWidth?Array.isArray(a.stroke.width)?a.stroke.width[this.seriesIndex]:a.stroke.width:Array.isArray(a.fill.pattern.strokeWidth)?a.fill.pattern.strokeWidth[this.seriesIndex]:a.fill.pattern.strokeWidth,l=t;return Array.isArray(a.fill.pattern.style)?void 0!==a.fill.pattern.style[s.seriesNumber]?o.drawPattern(a.fill.pattern.style[s.seriesNumber],a.fill.pattern.width,a.fill.pattern.height,l,r,i):n:o.drawPattern(a.fill.pattern.style,a.fill.pattern.width,a.fill.pattern.height,l,r,i)}},{key:"handleGradientFill",value:function(e,t,i){var n,a=this.w.config,s=this.opts,o=new v(this.ctx),r=new f,l=a.fill.gradient.type,c=e,d=void 0===a.fill.gradient.opacityFrom?t:Array.isArray(a.fill.gradient.opacityFrom)?a.fill.gradient.opacityFrom[i]:a.fill.gradient.opacityFrom;c.indexOf("rgba")>-1&&(d=f.getOpacityFromRGBA(c));var h=void 0===a.fill.gradient.opacityTo?t:Array.isArray(a.fill.gradient.opacityTo)?a.fill.gradient.opacityTo[i]:a.fill.gradient.opacityTo;if(void 0===a.fill.gradient.gradientToColors||0===a.fill.gradient.gradientToColors.length)n="dark"===a.fill.gradient.shade?r.shadeColor(-1*parseFloat(a.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?f.rgb2hex(e):e):r.shadeColor(parseFloat(a.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?f.rgb2hex(e):e);else if(a.fill.gradient.gradientToColors[s.seriesNumber]){var u=a.fill.gradient.gradientToColors[s.seriesNumber];n=u,u.indexOf("rgba")>-1&&(h=f.getOpacityFromRGBA(u))}else n=e;if(a.fill.gradient.inverseColors){var p=c;c=n,n=p}return c.indexOf("rgb")>-1&&(c=f.rgb2hex(c)),n.indexOf("rgb")>-1&&(n=f.rgb2hex(n)),o.drawGradient(l,c,n,d,h,s.size,a.fill.gradient.stops,a.fill.gradient.colorStops,i)}}]),e}(),A=function(){function e(t,i){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(t){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e,t,i,n){var a,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,r=t,l=e,c=null,d=new v(this.ctx),h=o.config.markers.discrete&&o.config.markers.discrete.length;if((o.globals.markers.size[t]>0||s||h)&&(c=d.group({class:s||h?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(l.x))for(var u=0;u<l.x.length;u++){var p=i;1===i&&0===u&&(p=0),1===i&&1===u&&(p=1);var g="apexcharts-marker";if("line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(g+=" no-pointer-events"),(Array.isArray(o.config.markers.size)?o.globals.markers.size[t]>0:o.config.markers.size>0)||s||h){f.isNumber(l.y[u])?g+=" w".concat(f.randomId()):g="apexcharts-nullpoint";var b=this.getMarkerConfig({cssClass:g,seriesIndex:t,dataPointIndex:p});o.config.series[r].data[p]&&(o.config.series[r].data[p].fillColor&&(b.pointFillColor=o.config.series[r].data[p].fillColor),o.config.series[r].data[p].strokeColor&&(b.pointStrokeColor=o.config.series[r].data[p].strokeColor)),n&&(b.pSize=n),(a=d.drawMarker(l.x[u],l.y[u],b)).attr("rel",p),a.attr("j",p),a.attr("index",t),a.node.setAttribute("default-marker-size",b.pSize),new m(this.ctx).setSelectionFilter(a,t,p),this.addEvents(a),c&&c.add(a)}else void 0===o.globals.pointsArray[t]&&(o.globals.pointsArray[t]=[]),o.globals.pointsArray[t].push([l.x[u],l.y[u]])}return c}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,i=e.seriesIndex,n=e.dataPointIndex,a=void 0===n?null:n,s=e.finishRadius,o=void 0===s?null:s,r=this.w,l=this.getMarkerStyle(i),c=r.globals.markers.size[i],d=r.config.markers;return null!==a&&d.discrete.length&&d.discrete.map((function(e){e.seriesIndex===i&&e.dataPointIndex===a&&(l.pointStrokeColor=e.strokeColor,l.pointFillColor=e.fillColor,c=e.size,l.pointShape=e.shape)})),{pSize:null===o?c:o,pRadius:d.radius,width:Array.isArray(d.width)?d.width[i]:d.width,height:Array.isArray(d.height)?d.height[i]:d.height,pointStrokeWidth:Array.isArray(d.strokeWidth)?d.strokeWidth[i]:d.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(d.shape)?d.shape[i]:d.shape),class:t,pointStrokeOpacity:Array.isArray(d.strokeOpacity)?d.strokeOpacity[i]:d.strokeOpacity,pointStrokeDashArray:Array.isArray(d.strokeDashArray)?d.strokeDashArray[i]:d.strokeDashArray,pointFillOpacity:Array.isArray(d.fillOpacity)?d.fillOpacity[i]:d.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(e){var t=this.w,i=new v(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,i=t.globals.markers.colors,n=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[e]:n,pointFillColor:Array.isArray(i)?i[e]:i}}}]),e}(),P=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return s(e,[{key:"draw",value:function(e,t,i){var n=this.w,a=new v(this.ctx),s=i.realIndex,o=i.pointsPos,r=i.zRatio,l=i.elParent,c=a.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(o.x))for(var d=0;d<o.x.length;d++){var h=t+1,u=!0;0===t&&0===d&&(h=0),0===t&&1===d&&(h=1);var p=0,f=n.globals.markers.size[s];if(r!==1/0){f=n.globals.seriesZ[s][h]/r;var g=n.config.plotOptions.bubble;g.minBubbleRadius&&f<g.minBubbleRadius&&(f=g.minBubbleRadius),g.maxBubbleRadius&&f>g.maxBubbleRadius&&(f=g.maxBubbleRadius)}n.config.chart.animations.enabled||(p=f);var m=o.x[d],b=o.y[d];if(p=p||0,null!==b&&void 0!==n.globals.series[s][h]||(u=!1),u){var x=this.drawPoint(m,b,p,f,s,h,t);c.add(x)}l.add(c)}}},{key:"drawPoint",value:function(e,t,i,n,a,s,o){var r=this.w,l=a,c=new g(this.ctx),d=new m(this.ctx),h=new T(this.ctx),u=new A(this.ctx),p=new v(this.ctx),f=u.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:s,finishRadius:"bubble"===r.config.chart.type||r.globals.comboCharts&&r.config.series[a]&&"bubble"===r.config.series[a].type?n:null});n=f.pSize;var b,x=h.fillPath({seriesNumber:a,dataPointIndex:s,color:f.pointFillColor,patternUnits:"objectBoundingBox",value:r.globals.series[a][o]});if("circle"===f.shape?b=p.drawCircle(i):"square"!==f.shape&&"rect"!==f.shape||(b=p.drawRect(0,0,f.width-f.pointStrokeWidth/2,f.height-f.pointStrokeWidth/2,f.pRadius)),r.config.series[l].data[s]&&r.config.series[l].data[s].fillColor&&(x=r.config.series[l].data[s].fillColor),b.attr({x:e-f.width/2-f.pointStrokeWidth/2,y:t-f.height/2-f.pointStrokeWidth/2,cx:e,cy:t,fill:x,"fill-opacity":f.pointFillOpacity,stroke:f.pointStrokeColor,r:n,"stroke-width":f.pointStrokeWidth,"stroke-dasharray":f.pointStrokeDashArray,"stroke-opacity":f.pointStrokeOpacity}),r.config.chart.dropShadow.enabled){var y=r.config.chart.dropShadow;d.dropShadow(b,y,a)}if(!this.initialAnim||r.globals.dataChanged||r.globals.resized)r.globals.animationEnded=!0;else{var w=r.config.chart.animations.speed;c.animateMarker(b,0,"circle"===f.shape?n:{width:f.width,height:f.height},w,r.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(b)}),100)}))}if(r.globals.dataChanged&&"circle"===f.shape)if(this.dynamicAnim){var k,S,C,_,P=r.config.chart.animations.dynamicAnimation.speed;null!=(_=r.globals.previousPaths[a]&&r.globals.previousPaths[a][o])&&(k=_.x,S=_.y,C=void 0!==_.r?_.r:n);for(var D=0;D<r.globals.collapsedSeries.length;D++)r.globals.collapsedSeries[D].index===a&&(P=1,n=0);0===e&&0===t&&(n=0),c.animateCircle(b,{cx:k,cy:S,r:C},{cx:e,cy:t,r:n},P,r.globals.easing)}else b.attr({r:n});return b.attr({rel:s,j:s,index:a,"default-marker-size":n}),d.setSelectionFilter(b,a,s),u.addEvents(b),b.node.classList.add("apexcharts-marker"),b}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),e}(),D=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"dataLabelsCorrection",value:function(e,t,i,n,a,s,o){var r=this.w,l=!1,c=new v(this.ctx).getTextRects(i,o),d=c.width,h=c.height;t<0&&(t=0),t>r.globals.gridHeight+h&&(t=r.globals.gridHeight+h/2),void 0===r.globals.dataLabelsRects[n]&&(r.globals.dataLabelsRects[n]=[]),r.globals.dataLabelsRects[n].push({x:e,y:t,width:d,height:h});var u=r.globals.dataLabelsRects[n].length-2,p=void 0!==r.globals.lastDrawnDataLabelsIndexes[n]?r.globals.lastDrawnDataLabelsIndexes[n][r.globals.lastDrawnDataLabelsIndexes[n].length-1]:0;if(void 0!==r.globals.dataLabelsRects[n][u]){var f=r.globals.dataLabelsRects[n][p];(e>f.x+f.width+2||t>f.y+f.height+2||e+d<f.x)&&(l=!0)}return(0===a||s)&&(l=!0),{x:e,y:t,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(e,t,i){var n=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=this.w,o=new v(this.ctx),r=s.config.dataLabels,l=0,c=0,d=i,h=null;if(!r.enabled||!Array.isArray(e.x))return h;h=o.group({class:"apexcharts-data-labels"});for(var u=0;u<e.x.length;u++)if(l=e.x[u]+r.offsetX,c=e.y[u]+r.offsetY+a,!isNaN(l)){1===i&&0===u&&(d=0),1===i&&1===u&&(d=1);var p=s.globals.series[t][d],f="",g=function(e){return s.config.dataLabels.formatter(e,{ctx:n.ctx,seriesIndex:t,dataPointIndex:d,w:s})};if("bubble"===s.config.chart.type)f=g(p=s.globals.seriesZ[t][d]),c=e.y[u],c=new P(this.ctx).centerTextInBubble(c,t,d).y;else void 0!==p&&(f=g(p));this.plotDataLabelsText({x:l,y:c,text:f,i:t,j:d,parent:h,offsetCorrection:!0,dataLabelsConfig:s.config.dataLabels})}return h}},{key:"plotDataLabelsText",value:function(e){var t=this.w,i=new v(this.ctx),n=e.x,a=e.y,s=e.i,o=e.j,r=e.text,l=e.textAnchor,c=e.fontSize,d=e.parent,h=e.dataLabelsConfig,u=e.color,p=e.alwaysDrawDataLabel,f=e.offsetCorrection;if(!(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(s)<0)){var g={x:n,y:a,drawnextLabel:!0,textRects:null};f&&(g=this.dataLabelsCorrection(n,a,r,s,o,p,parseInt(h.style.fontSize,10))),t.globals.zoomed||(n=g.x,a=g.y),g.textRects&&(n<-10-g.textRects.width||n>t.globals.gridWidth+g.textRects.width+10)&&(r="");var b=t.globals.dataLabels.style.colors[s];(("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(b=t.globals.dataLabels.style.colors[o]),"function"==typeof b&&(b=b({series:t.globals.series,seriesIndex:s,dataPointIndex:o,w:t})),u&&(b=u);var x=h.offsetX,y=h.offsetY;if("bar"!==t.config.chart.type&&"rangeBar"!==t.config.chart.type||(x=0,y=0),g.drawnextLabel){var w=i.drawText({width:100,height:parseInt(h.style.fontSize,10),x:n+x,y:a+y,foreColor:b,textAnchor:l||h.textAnchor,text:r,fontSize:c||h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight||"normal"});if(w.attr({class:"apexcharts-datalabel",cx:n,cy:a}),h.dropShadow.enabled){var k=h.dropShadow;new m(this.ctx).dropShadow(w,k)}d.add(w),void 0===t.globals.lastDrawnDataLabelsIndexes[s]&&(t.globals.lastDrawnDataLabelsIndexes[s]=[]),t.globals.lastDrawnDataLabelsIndexes[s].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(e,t){var i=this.w,n=i.config.dataLabels.background,a=n.padding,s=n.padding/2,o=t.width,r=t.height,l=new v(this.ctx).drawRect(t.x-a,t.y-s/2,o+2*a,r+s,n.borderRadius,"transparent"===i.config.chart.background?"#fff":i.config.chart.background,n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new m(this.ctx).dropShadow(l,n.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var e=this.w;if("bubble"!==e.config.chart.type)for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<t.length;i++){var n=t[i],a=n.getBBox(),s=null;if(a.width&&a.height&&(s=this.addBackgroundToDataLabel(n,a)),s){n.parentNode.insertBefore(s.node,n);var o=n.getAttribute("fill");!e.config.chart.animations.enabled||e.globals.resized||e.globals.dataChanged?s.attr({fill:o}):s.animate().attr({fill:o}),n.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<t.length;n++)i&&i.insertBefore(t[n],i.nextSibling)}}]),e}(),I=function(){function e(t){n(this,e),this.w=t.w,this.barCtx=t}return s(e,[{key:"handleBarDataLabels",value:function(e){var t=e.x,i=e.y,n=e.y1,a=e.y2,s=e.i,o=e.j,r=e.realIndex,l=e.series,c=e.barHeight,d=e.barWidth,h=e.barYPosition,u=e.visibleSeries,p=e.renderedPath,f=this.w,g=new v(this.barCtx.ctx),m=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[r]:this.barCtx.strokeWidth,b=t+parseFloat(d*u),x=i+parseFloat(c*u);f.globals.isXNumeric&&!f.globals.isBarHorizontal&&(b=t+parseFloat(d*(u+1)),x=i+parseFloat(c*(u+1))-m);var y,w=t,k=i,S=f.config.dataLabels,C=this.barCtx.barOptions.dataLabels;void 0!==h&&this.barCtx.isRangeBar&&(x=h,k=h);var _=S.offsetX,T=S.offsetY,A={width:0,height:0};if(f.config.dataLabels.enabled){var P=this.barCtx.series[s][o];A=g.getTextRects(f.globals.yLabelFormatters[0](P),parseFloat(S.style.fontSize))}var D={x:t,y:i,i:s,j:o,renderedPath:p,bcx:b,bcy:x,barHeight:c,barWidth:d,textRects:A,strokeWidth:m,dataLabelsX:w,dataLabelsY:k,barDataLabelsConfig:C,offX:_,offY:T};return y=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(D):this.calculateColumnsDataLabelsPosition(D),p.attr({cy:y.bcy,cx:y.bcx,j:o,val:l[s][o],barHeight:c,barWidth:d}),this.drawCalculatedDataLabels({x:y.dataLabelsX,y:y.dataLabelsY,val:this.barCtx.isRangeBar?[n,a]:l[s][o],i:r,j:o,barWidth:d,barHeight:c,textRects:A,dataLabelsConfig:S})}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t,i=this.w,n=e.i,a=e.j,s=e.y,o=e.bcx,r=e.barWidth,l=e.barHeight,c=e.textRects,d=e.dataLabelsY,h=e.barDataLabelsConfig,u=e.strokeWidth,p=e.offX,f=e.offY;l=Math.abs(l);var g="vertical"===i.config.plotOptions.bar.dataLabels.orientation;o-=u/2;var m=i.globals.gridWidth/i.globals.dataPoints;t=i.globals.isXNumeric?o-r/2+p:o-m+r/2+p,g&&(t=t+c.height/2-u/2-2);var v=this.barCtx.series[n][a]<0,b=s;switch(this.barCtx.isReversed&&(b=s-l+(v?2*l:0),s-=l),h.position){case"center":d=g?v?b+l/2+f:b+l/2-f:v?b-l/2+c.height/2+f:b+l/2+c.height/2-f;break;case"bottom":d=g?v?b+l+f:b+l-f:v?b-l+c.height+u+f:b+l-c.height/2+u-f;break;case"top":d=g?v?b+f:b-f:v?b-c.height/2-f:b+c.height+f}return i.config.chart.stacked||(d<0?d=0+u:d+c.height/3>i.globals.gridHeight&&(d=i.globals.gridHeight-u)),{bcx:o,bcy:s,dataLabelsX:t,dataLabelsY:d}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,i=e.x,n=e.i,a=e.j,s=e.bcy,o=e.barHeight,r=e.barWidth,l=e.textRects,c=e.dataLabelsX,d=e.strokeWidth,h=e.barDataLabelsConfig,u=e.offX,p=e.offY,f=t.globals.gridHeight/t.globals.dataPoints;r=Math.abs(r);var g=s-(this.barCtx.isRangeBar?0:f)+o/2+l.height/2+p-3,m=this.barCtx.series[n][a]<0,v=i;switch(this.barCtx.isReversed&&(v=i+r-(m?2*r:0),i=t.globals.gridWidth-r),h.position){case"center":c=m?v+r/2-u:Math.max(l.width/2,v-r/2)+u;break;case"bottom":c=m?v+r-d-Math.round(l.width/2)-u:v-r+d+Math.round(l.width/2)+u;break;case"top":c=m?v-d+Math.round(l.width/2)-u:v-d-Math.round(l.width/2)+u}return t.config.chart.stacked||(c<0?c=c+l.width+d:c+l.width/2>t.globals.gridWidth&&(c=t.globals.gridWidth-l.width-d)),{bcx:i,bcy:s,dataLabelsX:c,dataLabelsY:g}}},{key:"drawCalculatedDataLabels",value:function(e){var i=e.x,n=e.y,a=e.val,s=e.i,o=e.j,r=e.textRects,l=e.barHeight,c=e.barWidth,d=e.dataLabelsConfig,h=this.w,u="rotate(0)";"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&(u="rotate(-90, ".concat(i,", ").concat(n,")"));var p=new D(this.barCtx.ctx),f=new v(this.barCtx.ctx),g=d.formatter,m=null,b=h.globals.collapsedSeriesIndices.indexOf(s)>-1;if(d.enabled&&!b){m=f.group({class:"apexcharts-data-labels",transform:u});var x="";void 0!==a&&(x=g(a,{seriesIndex:s,dataPointIndex:o,w:h}));var y=h.globals.series[s][o]<0,w=h.config.plotOptions.bar.dataLabels.position;"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&("top"===w&&(d.textAnchor=y?"end":"start"),"center"===w&&(d.textAnchor="middle"),"bottom"===w&&(d.textAnchor=y?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<f.getTextRects(x,parseFloat(d.style.fontSize)).width&&(x=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?r.width/1.6>Math.abs(c)&&(x=""):r.height/1.6>Math.abs(l)&&(x=""));var k=t({},d);this.barCtx.isHorizontal&&a<0&&("start"===d.textAnchor?k.textAnchor="end":"end"===d.textAnchor&&(k.textAnchor="start")),p.plotDataLabelsText({x:i,y:n,text:x,i:s,j:o,parent:m,dataLabelsConfig:k,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return m}}]),e}(),E=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return s(e,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(f.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),i=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(e,t){var i=this.w;function n(i){for(var n=0;n<i.length;n++)i[n].index===t&&e.node.classList.add("apexcharts-series-collapsed")}n(i.globals.collapsedSeries),n(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w,a=f.clone(n.globals.initialSeries);n.globals.previousPaths=[],i?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):a=this.emptyCollapsedSeries(a),n.config.series=a,e&&(t&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(a,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,i=0;i<e.length;i++)t.globals.collapsedSeriesIndices.indexOf(i)>-1&&(e[i].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var i=this.w;t||(t=e.target);var n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===e.type){var a=parseInt(t.getAttribute("rel"),10)-1,s=null,o=null;i.globals.axisCharts||"radialBar"===i.config.chart.type?i.globals.axisCharts?(s=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"']")),o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(a,"']"))):s=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"']")):s=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"'] path"));for(var r=0;r<n.length;r++)n[r].classList.add(this.legendInactiveClass);null!==s&&(i.globals.axisCharts||s.parentNode.classList.remove(this.legendInactiveClass),s.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===e.type)for(var l=0;l<n.length;l++)n[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var i=this,n=this.w,a=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),s=function(e){for(var t=0;t<a.length;t++)a[t].classList[e](i.legendInactiveClass)};if("mousemove"===e.type){var o=parseInt(t.getAttribute("rel"),10)-1;s("add"),function(e){for(var t=0;t<a.length;t++){var n=parseInt(a[t].getAttribute("val"),10);n>=e.from&&n<=e.to&&a[t].classList.remove(i.legendInactiveClass)}}(n.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===e.type&&s("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",i=this.w,n=0;if(i.config.series.length>1)for(var a=i.config.series.map((function(t,n){var a=!1;return e&&(a="bar"===i.config.series[n].type||"column"===i.config.series[n].type),t.data&&t.data.length>0&&!a?n:-1})),s="asc"===t?0:a.length-1;"asc"===t?s<a.length:s>=0;"asc"===t?s++:s--)if(-1!==a[s]){n=a[s];break}return n}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(t,i,n){for(var a=t[i].childNodes,s={type:n,paths:[],realIndex:t[i].getAttribute("data:realIndex")},o=0;o<a.length;o++)if(a[o].hasAttribute("pathTo")){var r=a[o].getAttribute("pathTo");s.paths.push({d:r})}e.globals.previousPaths.push(s)}e.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach((function(i){for(var n,a=(n=i,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(n,"-series .apexcharts-series"))),s=0;s<a.length;s++)t(a,s,i)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(i.length>0)for(var n=function(t){for(var i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),n=[],a=function(e){var t=function(t){return i[e].getAttribute(t)},a={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};n.push({rect:a,color:i[e].getAttribute("color")})},s=0;s<i.length;s++)a(s);e.globals.previousPaths.push(n)},a=0;a<i.length;a++)n(a);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(i.length>0)for(var n=0;n<i.length;n++){for(var a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(n,"'] circle")),s=[],o=0;o<a.length;o++)s.push({x:a[o].getAttribute("cx"),y:a[o].getAttribute("cy"),r:a[o].getAttribute("r")});t.globals.previousPaths.push(s)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,i=new v(this.ctx),n=e.globals.svgWidth/2,a=e.globals.svgHeight/2,s="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,"left"===t.align?(n=10,s="start"):"right"===t.align&&(n=e.globals.svgWidth-10,s="end"),"top"===t.verticalAlign?a=50:"bottom"===t.verticalAlign&&(a=e.globals.svgHeight-50),n+=t.offsetX,a=a+parseInt(t.style.fontSize,10)+2+t.offsetY,void 0!==t.text&&""!==t.text){var o=i.drawText({x:n,y:a,text:t.text,textAnchor:s,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,i=0;i<e.length;i++)if(0===e[i].length)for(var n=0;n<e[t.globals.maxValsInArrayIndex].length;n++)e[i].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(e){return e.length>0?e:[]}))}}]),e}(),L=function(){function e(t){n(this,e),this.w=t.w,this.barCtx=t}return s(e,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<e.length;i++)if(e[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[i].length),t.globals.isXNumeric)for(var n=0;n<e[i].length;n++)t.globals.seriesX[i][n]>t.globals.minX&&t.globals.seriesX[i][n]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=e.length-1,t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,i,n,a,s,o,r,l=this.w,c=l.globals.dataPoints;this.barCtx.isRangeBar&&(c=l.globals.labels.length);var d=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(d=1),this.barCtx.isHorizontal)a=(i=l.globals.gridHeight/c)/d,l.globals.isXNumeric&&(a=(i=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),a=a*parseInt(this.barCtx.barOptions.barHeight,10)/100,r=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(i-a*this.barCtx.seriesLen)/2;else{if(n=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(n=l.globals.gridWidth/l.globals.dataPoints),s=n/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var h=this.barCtx.xRatio;l.config.xaxis.convertedCatToNumeric&&(h=this.barCtx.initialXRatio),l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/h>0&&(n=l.globals.minXDiff/h),(s=n/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(s=1)}o=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),e=l.globals.padHorizontal+(n-s*this.barCtx.seriesLen)/2}return{x:e,y:t,yDivision:i,xDivision:n,barHeight:a,barWidth:s,zeroH:o,zeroW:r}}},{key:"getPathFillColor",value:function(e,t,i,n){var a=this.w,s=new T(this.barCtx.ctx),o=null,r=this.barCtx.barOptions.distributed?i:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(n){e[t][i]>=n.from&&e[t][i]<=n.to&&(o=n.color)})),a.config.series[t].data[i]&&a.config.series[t].data[i].fillColor&&(o=a.config.series[t].data[i].fillColor),s.fillPath({seriesNumber:this.barCtx.barOptions.distributed?r:n,dataPointIndex:i,color:o,value:e[t][i]})}},{key:"getStrokeWidth",value:function(e,t,i){var n=0,a=this.w;return void 0===this.barCtx.series[e][t]||null===this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,a.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"barBackground",value:function(e){var t=e.j,i=e.i,n=e.x1,a=e.x2,s=e.y1,o=e.y2,r=e.elSeries,l=this.w,c=new v(this.barCtx.ctx),d=new E(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&d===i){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var h=this.barCtx.barOptions.colors.backgroundBarColors[t],u=c.drawRect(void 0!==n?n:0,void 0!==s?s:0,void 0!==a?a:l.globals.gridWidth,void 0!==o?o:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,h,this.barCtx.barOptions.colors.backgroundBarOpacity);r.add(u),u.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t=e.barWidth,i=e.barXPosition,n=e.yRatio,a=e.y1,s=e.y2,o=e.strokeWidth,r=e.series,l=e.realIndex,c=e.i,d=e.j,h=e.w,u=new v(this.barCtx.ctx);(o=Array.isArray(o)?o[l]:o)||(o=0);var p={barWidth:t,strokeWidth:o,yRatio:n,barXPosition:i,y1:a,y2:s},f=this.getRoundedBars(h,p,r,c,d),g=i,m=i+t,b=u.move(g,a),x=u.move(g,a),y=u.line(m-o,a);return h.globals.previousPaths.length>0&&(x=this.barCtx.getPreviousPath(l,d,!1)),b=b+u.line(g,f.y2)+f.pathWithRadius+u.line(m-o,f.y2)+y+y+"z",x=x+u.line(g,a)+y+y+y+y+y+u.line(g,a),h.config.chart.stacked&&(this.barCtx.yArrj.push(f.y2),this.barCtx.yArrjF.push(Math.abs(a-f.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[c][d])),{pathTo:b,pathFrom:x}}},{key:"getBarpaths",value:function(e){var t=e.barYPosition,i=e.barHeight,n=e.x1,a=e.x2,s=e.strokeWidth,o=e.series,r=e.realIndex,l=e.i,c=e.j,d=e.w,h=new v(this.barCtx.ctx);(s=Array.isArray(s)?s[r]:s)||(s=0);var u={barHeight:i,strokeWidth:s,barYPosition:t,x2:a,x1:n},p=this.getRoundedBars(d,u,o,l,c),f=h.move(n,t),g=h.move(n,t);d.globals.previousPaths.length>0&&(g=this.barCtx.getPreviousPath(r,c,!1));var m=t,b=t+i,x=h.line(n,b-s);return f=f+h.line(p.x2,m)+p.pathWithRadius+h.line(p.x2,b-s)+x+x+"z",g=g+h.line(n,m)+x+x+x+x+x+h.line(n,m),d.config.chart.stacked&&(this.barCtx.xArrj.push(p.x2),this.barCtx.xArrjF.push(Math.abs(n-p.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[l][c])),{pathTo:f,pathFrom:g}}},{key:"getRoundedBars",value:function(e,t,i,n,a){var s=new v(this.barCtx.ctx),o=0,r=e.config.plotOptions.bar.borderRadius,l=Array.isArray(r);if(o=l?r[n>r.length-1?r.length-1:n]:r,e.config.chart.stacked&&i.length>1&&n!==this.barCtx.radiusOnSeriesNumber&&!l&&(o=0),this.barCtx.isHorizontal){var c="",d=t.x2;if(Math.abs(t.x1-t.x2)<o&&(o=Math.abs(t.x1-t.x2)),void 0!==i[n][a]||null!==i[n][a]){var h=this.barCtx.isReversed?i[n][a]>0:i[n][a]<0;h&&(o*=-1),d-=o,c=s.quadraticCurve(d+o,t.barYPosition,d+o,t.barYPosition+(h?-1*o:o))+s.line(d+o,t.barYPosition+t.barHeight-t.strokeWidth-(h?-1*o:o))+s.quadraticCurve(d+o,t.barYPosition+t.barHeight-t.strokeWidth,d,t.barYPosition+t.barHeight-t.strokeWidth)}return{pathWithRadius:c,x2:d}}var u="",p=t.y2;if(Math.abs(t.y1-t.y2)<o&&(o=Math.abs(t.y1-t.y2)),void 0!==i[n][a]||null!==i[n][a]){var f=i[n][a]<0;f&&(o*=-1),p+=o,u=s.quadraticCurve(t.barXPosition,p-o,t.barXPosition+(f?-1*o:o),p-o)+s.line(t.barXPosition+t.barWidth-t.strokeWidth-(f?-1*o:o),p-o)+s.quadraticCurve(t.barXPosition+t.barWidth-t.strokeWidth,p-o,t.barXPosition+t.barWidth-t.strokeWidth,p)}return{pathWithRadius:u,y2:p}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,i=this.w,n=0;n<t.length;n++){for(var a=0,s=0;s<t[i.globals.maxValsInArrayIndex].length;s++)a+=t[n][s];0===a&&this.barCtx.zeroSerieses.push(n)}for(var o=t.length-1;o>=0;o--)this.barCtx.zeroSerieses.indexOf(o)>-1&&o===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var r=t.length-1;r>=0;r--)i.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?t:null;return null!=e&&(i=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?t:null;return null!=e&&(i=t-e/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),i}},{key:"getGoalValues",value:function(e,t,i,n,a){var s=this,r=this.w,l=[];return r.globals.seriesGoals[n]&&r.globals.seriesGoals[n][a]&&Array.isArray(r.globals.seriesGoals[n][a])&&r.globals.seriesGoals[n][a].forEach((function(n){var a;l.push((o(a={},e,"x"===e?s.getXForValue(n.value,t,!1):s.getYForValue(n.value,i,!1)),o(a,"attrs",n),a))})),l}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,i=e.barYPosition,n=e.goalX,a=e.goalY,s=e.barWidth,o=e.barHeight,r=new v(this.barCtx.ctx),l=r.group({className:"apexcharts-bar-goals-groups"}),c=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach((function(e){var t=void 0!==e.attrs.strokeHeight?e.attrs.strokeHeight:o/2,n=i+t+o/2;c=r.drawLine(e.x,n-2*t,e.x,n,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeWidth?e.attrs.strokeWidth:2,e.attrs.strokeLineCap),l.add(c)})):Array.isArray(a)&&a.forEach((function(e){var i=void 0!==e.attrs.strokeWidth?e.attrs.strokeWidth:s/2,n=t+i+s/2;c=r.drawLine(n-2*i,e.y,n,e.y,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeHeight?e.attrs.strokeHeight:2,e.attrs.strokeLineCap),l.add(c)})),l}}]),e}(),M=function(){function e(t,i){n(this,e),this.ctx=t,this.w=t.w;var a=this.w;this.barOptions=a.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=a.config.stroke.width,this.isNullValue=!1,this.isRangeBar=a.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=i,null!==this.xyRatios&&(this.xRatio=i.xRatio,this.initialXRatio=i.initialXRatio,this.yRatio=i.yRatio,this.invertedXRatio=i.invertedXRatio,this.invertedYRatio=i.invertedYRatio,this.baseLineY=i.baseLineY,this.baseLineInvertedY=i.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new L(this)}return s(e,[{key:"draw",value:function(e,i){var n=this.w,a=new v(this.ctx),s=new b(this.ctx,n);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=a.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var r=0,l=0;r<e.length;r++,l++){var c,d,h,u,p=void 0,g=void 0,m=[],x=[],y=n.globals.comboCharts?i[r]:r,w=a.group({class:"apexcharts-series",rel:r+1,seriesName:f.escapeString(n.globals.seriesNames[y]),"data:realIndex":y});this.ctx.series.addCollapsedClassToSeries(w,y),e[r].length>0&&(this.visibleI=this.visibleI+1);var k=0,S=0;this.yRatio.length>1&&(this.yaxisIndex=y),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions();g=C.y,k=C.barHeight,d=C.yDivision,u=C.zeroW,p=C.x,S=C.barWidth,c=C.xDivision,h=C.zeroH,this.horizontal||x.push(p+S/2);for(var _=a.group({class:"apexcharts-datalabels","data:realIndex":y}),T=a.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),A=0;A<n.globals.dataPoints;A++){var P=this.barHelpers.getStrokeWidth(r,A,y),D=null,I={indexes:{i:r,j:A,realIndex:y,bc:l},x:p,y:g,strokeWidth:P,elSeries:w};this.isHorizontal?(D=this.drawBarPaths(t(t({},I),{},{barHeight:k,zeroW:u,yDivision:d})),S=this.series[r][A]/this.invertedYRatio):(D=this.drawColumnPaths(t(t({},I),{},{xDivision:c,barWidth:S,zeroH:h})),k=this.series[r][A]/this.yRatio[this.yaxisIndex]);var E=this.barHelpers.drawGoalLine({barXPosition:D.barXPosition,barYPosition:D.barYPosition,goalX:D.goalX,goalY:D.goalY,barHeight:k,barWidth:S});E&&T.add(E),g=D.y,p=D.x,A>0&&x.push(p+S/2),m.push(g);var L=this.barHelpers.getPathFillColor(e,r,A,y);this.renderSeries({realIndex:y,pathFill:L,j:A,i:r,pathFrom:D.pathFrom,pathTo:D.pathTo,strokeWidth:P,elSeries:w,x:p,y:g,series:e,barHeight:k,barWidth:S,elDataLabelsWrap:_,elGoalsMarkers:T,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[y]=x,n.globals.seriesYvalues[y]=m,o.add(w)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,i=e.pathFill,n=e.lineFill,a=e.j,s=e.i,o=e.pathFrom,r=e.pathTo,l=e.strokeWidth,c=e.elSeries,d=e.x,h=e.y,u=e.y1,p=e.y2,f=e.series,g=e.barHeight,b=e.barWidth,x=e.barYPosition,y=e.elDataLabelsWrap,w=e.elGoalsMarkers,k=e.visibleSeries,S=e.type,C=this.w,_=new v(this.ctx);n||(n=this.barOptions.distributed?C.globals.stroke.colors[a]:C.globals.stroke.colors[t]),C.config.series[s].data[a]&&C.config.series[s].data[a].strokeColor&&(n=C.config.series[s].data[a].strokeColor),this.isNullValue&&(i="none");var T=a/C.config.chart.animations.animateGradually.delay*(C.config.chart.animations.speed/C.globals.dataPoints)/2.4,A=_.renderPaths({i:s,j:a,realIndex:t,pathFrom:o,pathTo:r,stroke:n,strokeWidth:l,strokeLineCap:C.config.stroke.lineCap,fill:i,animationDelay:T,initialSpeed:C.config.chart.animations.speed,dataChangeSpeed:C.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(S,"-area")});A.attr("clip-path","url(#gridRectMask".concat(C.globals.cuid,")"));var P=C.config.forecastDataPoints;P.count>0&&a>=C.globals.dataPoints-P.count&&(A.node.setAttribute("stroke-dasharray",P.dashArray),A.node.setAttribute("stroke-width",P.strokeWidth),A.node.setAttribute("fill-opacity",P.fillOpacity)),void 0!==u&&void 0!==p&&(A.attr("data-range-y1",u),A.attr("data-range-y2",p)),new m(this.ctx).setSelectionFilter(A,t,a),c.add(A);var D=new I(this).handleBarDataLabels({x:d,y:h,y1:u,y2:p,i:s,j:a,series:f,realIndex:t,barHeight:g,barWidth:b,barYPosition:x,renderedPath:A,visibleSeries:k});return null!==D&&y.add(D),c.add(y),w&&c.add(w),c}},{key:"drawBarPaths",value:function(e){var t=e.indexes,i=e.barHeight,n=e.strokeWidth,a=e.zeroW,s=e.x,o=e.y,r=e.yDivision,l=e.elSeries,c=this.w,d=t.i,h=t.j;c.globals.isXNumeric&&(o=(c.globals.seriesX[d][h]-c.globals.minX)/this.invertedXRatio-i);var u=o+i*this.visibleI;s=this.barHelpers.getXForValue(this.series[d][h],a);var p=this.barHelpers.getBarpaths({barYPosition:u,barHeight:i,x1:a,x2:s,strokeWidth:n,series:this.series,realIndex:t.realIndex,i:d,j:h,w:c});return c.globals.isXNumeric||(o+=r),this.barHelpers.barBackground({j:h,i:d,y1:u-i*this.visibleI,y2:i*this.seriesLen,elSeries:l}),{pathTo:p.pathTo,pathFrom:p.pathFrom,x:s,y:o,goalX:this.barHelpers.getGoalValues("x",a,null,d,h),barYPosition:u}}},{key:"drawColumnPaths",value:function(e){var t=e.indexes,i=e.x,n=e.y,a=e.xDivision,s=e.barWidth,o=e.zeroH,r=e.strokeWidth,l=e.elSeries,c=this.w,d=t.realIndex,h=t.i,u=t.j,p=t.bc;if(c.globals.isXNumeric){var f=d;c.globals.seriesX[d].length||(f=c.globals.maxValsInArrayIndex),i=(c.globals.seriesX[f][u]-c.globals.minX)/this.xRatio-s*this.seriesLen/2}var g=i+s*this.visibleI;n=this.barHelpers.getYForValue(this.series[h][u],o);var m=this.barHelpers.getColumnPaths({barXPosition:g,barWidth:s,y1:o,y2:n,strokeWidth:r,series:this.series,realIndex:t.realIndex,i:h,j:u,w:c});return c.globals.isXNumeric||(i+=a),this.barHelpers.barBackground({bc:p,j:u,i:h,x1:g-r/2-s*this.visibleI,x2:s*this.seriesLen+r/2,elSeries:l}),{pathTo:m.pathTo,pathFrom:m.pathFrom,x:i,y:n,goalY:this.barHelpers.getGoalValues("y",null,o,h,u),barXPosition:g}}},{key:"getPreviousPath",value:function(e,t){for(var i,n=this.w,a=0;a<n.globals.previousPaths.length;a++){var s=n.globals.previousPaths[a];s.paths&&s.paths.length>0&&parseInt(s.realIndex,10)===parseInt(e,10)&&void 0!==n.globals.previousPaths[a].paths[t]&&(i=n.globals.previousPaths[a].paths[t].d)}return i}}]),e}(),O=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return s(e,[{key:"isValidDate",value:function(e){return!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var i=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var i=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,a=["\0"].concat(h(i.months)),s=[""].concat(h(i.shortMonths)),o=[""].concat(h(i.days)),r=[""].concat(h(i.shortDays));function l(e,t){var i=e+"";for(t=t||2;i.length<t;)i="0"+i;return i}var c=n?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var d=(n?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+a[0])).replace(/(^|[^\\])MMM/g,"$1"+s[0])).replace(/(^|[^\\])MM/g,"$1"+l(d))).replace(/(^|[^\\])M/g,"$1"+d);var u=n?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+r[0])).replace(/(^|[^\\])dd/g,"$1"+l(u))).replace(/(^|[^\\])d/g,"$1"+u);var p=n?e.getUTCHours():e.getHours(),f=p>12?p-12:0===p?12:p;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+l(p))).replace(/(^|[^\\])H/g,"$1"+p)).replace(/(^|[^\\])hh+/g,"$1"+l(f))).replace(/(^|[^\\])h/g,"$1"+f);var g=n?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+l(g))).replace(/(^|[^\\])m/g,"$1"+g);var m=n?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+l(m))).replace(/(^|[^\\])s/g,"$1"+m);var v=n?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+l(v,3)),v=Math.round(v/10),t=t.replace(/(^|[^\\])ff/g,"$1"+l(v)),v=Math.round(v/10);var b=p<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+b)).replace(/(^|[^\\])T/g,"$1"+b.charAt(0));var x=b.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+x)).replace(/(^|[^\\])t/g,"$1"+x.charAt(0));var y=-e.getTimezoneOffset(),w=n||!y?"Z":y>0?"+":"-";if(!n){var k=(y=Math.abs(y))%60;w+=l(Math.floor(y/60))+":"+l(k)}t=t.replace(/(^|[^\\])K/g,"$1"+w);var S=(n?e.getUTCDay():e.getDay())+1;return(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[S])).replace(new RegExp(r[0],"g"),r[S])).replace(new RegExp(a[0],"g"),a[d])).replace(new RegExp(s[0],"g"),s[d])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,i){var n=this.w;void 0!==n.config.xaxis.min&&(e=n.config.xaxis.min),void 0!==n.config.xaxis.max&&(t=n.config.xaxis.max);var a=this.getDate(e),s=this.getDate(t),o=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" "),r=this.formatDate(s,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(r[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(r[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(r[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(r[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(r[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(r[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(r[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,i){return this.determineDaysOfMonths(e,t)-i}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,i){var n=this.daysCntOfYear[t]+i;return t>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(e,t){var i=30;switch(e=f.monthMod(e),!0){case this.months30.indexOf(e)>-1:2===e&&(i=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:i=31}return i}}]),e}(),N=function(e){r(a,e);var i=d(a);function a(){return n(this,a),i.apply(this,arguments)}return s(a,[{key:"draw",value:function(e,i){var n=this.w,a=new v(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(e);for(var s=a.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<e.length;o++){var r,l,c,d=void 0,h=void 0,u=void 0,p=n.globals.comboCharts?i[o]:o,g=a.group({class:"apexcharts-series",seriesName:f.escapeString(n.globals.seriesNames[p]),rel:o+1,"data:realIndex":p});this.ctx.series.addCollapsedClassToSeries(g,p),e[o].length>0&&(this.visibleI=this.visibleI+1);var m=0,b=0;this.yRatio.length>1&&(this.yaxisIndex=p);var x=this.barHelpers.initialPositions();h=x.y,c=x.zeroW,d=x.x,b=x.barWidth,r=x.xDivision,l=x.zeroH;for(var y=a.group({class:"apexcharts-datalabels","data:realIndex":p}),w=a.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),k=0;k<n.globals.dataPoints;k++){var S=this.barHelpers.getStrokeWidth(o,k,p),C=this.seriesRangeStart[o][k],_=this.seriesRangeEnd[o][k],T=null,A=null,P={x:d,y:h,strokeWidth:S,elSeries:g};if(u=x.yDivision,m=x.barHeight,this.isHorizontal){A=h+m*this.visibleI;var D=this.seriesLen;n.config.plotOptions.bar.rangeBarGroupRows&&(D=1);var I=(u-m*D)/2;if(void 0===n.config.series[o].data[k])break;if(n.config.series[o].data[k].x){var E=this.detectOverlappingBars({i:o,j:k,barYPosition:A,srty:I,barHeight:m,yDivision:u,initPositions:x});m=E.barHeight,A=E.barYPosition}b=(T=this.drawRangeBarPaths(t({indexes:{i:o,j:k,realIndex:p},barHeight:m,barYPosition:A,zeroW:c,yDivision:u,y1:C,y2:_},P))).barWidth}else m=(T=this.drawRangeColumnPaths(t({indexes:{i:o,j:k,realIndex:p},zeroH:l,barWidth:b,xDivision:r},P))).barHeight;var L=this.barHelpers.drawGoalLine({barXPosition:T.barXPosition,barYPosition:A,goalX:T.goalX,goalY:T.goalY,barHeight:m,barWidth:b});L&&w.add(L),h=T.y,d=T.x;var M=this.barHelpers.getPathFillColor(e,o,k,p),O=n.globals.stroke.colors[p];this.renderSeries({realIndex:p,pathFill:M,lineFill:O,j:k,i:o,x:d,y:h,y1:C,y2:_,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:S,elSeries:g,series:e,barHeight:m,barYPosition:A,barWidth:b,elDataLabelsWrap:y,elGoalsMarkers:w,visibleSeries:this.visibleI,type:"rangebar"})}s.add(g)}return s}},{key:"detectOverlappingBars",value:function(e){var t=e.i,i=e.j,n=e.barYPosition,a=e.srty,s=e.barHeight,o=e.yDivision,r=e.initPositions,l=this.w,c=[],d=l.config.series[t].data[i].rangeName,h=l.config.series[t].data[i].x,u=l.globals.labels.indexOf(h),p=l.globals.seriesRangeBar[t].findIndex((function(e){return e.x===h&&e.overlaps.length>0}));return n=l.config.plotOptions.bar.rangeBarGroupRows?a+o*u:a+s*this.visibleI+o*u,p>-1&&!l.config.plotOptions.bar.rangeBarOverlap&&(c=l.globals.seriesRangeBar[t][p].overlaps).indexOf(d)>-1&&(n=(s=r.barHeight/c.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+s*(this.visibleI+c.indexOf(d))+o*u),{barYPosition:n,barHeight:s}}},{key:"drawRangeColumnPaths",value:function(e){var t=e.indexes,i=e.x;e.strokeWidth;var n=e.xDivision,a=e.barWidth,s=e.zeroH,o=this.w,r=t.i,l=t.j,c=this.yRatio[this.yaxisIndex],d=t.realIndex,h=this.getRangeValue(d,l),u=Math.min(h.start,h.end),p=Math.max(h.start,h.end);o.globals.isXNumeric&&(i=(o.globals.seriesX[r][l]-o.globals.minX)/this.xRatio-a/2);var f=i+a*this.visibleI;void 0===this.series[r][l]||null===this.series[r][l]?u=s:(u=s-u/c,p=s-p/c);var g=Math.abs(p-u),m=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:a,y1:u,y2:p,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:t.realIndex,i:d,j:l,w:o});return o.globals.isXNumeric||(i+=n),{pathTo:m.pathTo,pathFrom:m.pathFrom,barHeight:g,x:i,y:p,goalY:this.barHelpers.getGoalValues("y",null,s,r,l),barXPosition:f}}},{key:"drawRangeBarPaths",value:function(e){var t=e.indexes,i=e.y,n=e.y1,a=e.y2,s=e.yDivision,o=e.barHeight,r=e.barYPosition,l=e.zeroW,c=this.w,d=l+n/this.invertedYRatio,h=l+a/this.invertedYRatio,u=Math.abs(h-d),p=this.barHelpers.getBarpaths({barYPosition:r,barHeight:o,x1:d,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:t.realIndex,realIndex:t.realIndex,j:t.j,w:c});return c.globals.isXNumeric||(i+=s),{pathTo:p.pathTo,pathFrom:p.pathFrom,barWidth:u,x:h,goalX:this.barHelpers.getGoalValues("x",l,null,t.realIndex,t.j),y:i}}},{key:"getRangeValue",value:function(e,t){var i=this.w;return{start:i.globals.seriesRangeStart[e][t],end:i.globals.seriesRangeEnd[e][t]}}},{key:"getTooltipValues",value:function(e){var t=e.ctx,i=e.seriesIndex,n=e.dataPointIndex,a=e.y1,s=e.y2,o=e.w,r=o.globals.seriesRangeStart[i][n],l=o.globals.seriesRangeEnd[i][n],c=o.globals.labels[n],d=o.config.series[i].name?o.config.series[i].name:"",h=o.config.tooltip.y.formatter,u=o.config.tooltip.y.title.formatter,p={w:o,seriesIndex:i,dataPointIndex:n,start:r,end:l};"function"==typeof u&&(d=u(d,p)),Number.isFinite(a)&&Number.isFinite(s)&&(r=a,l=s,o.config.series[i].data[n].x&&(c=o.config.series[i].data[n].x+":"),"function"==typeof h&&(c=h(c,p)));var f="",g="",m=o.globals.colors[i];if(void 0===o.config.tooltip.x.formatter)if("datetime"===o.config.xaxis.type){var v=new O(t);f=v.formatDate(v.getDate(r),o.config.tooltip.x.format),g=v.formatDate(v.getDate(l),o.config.tooltip.x.format)}else f=r,g=l;else f=o.config.tooltip.x.formatter(r),g=o.config.tooltip.x.formatter(l);return{start:r,end:l,startVal:f,endVal:g,ylabel:c,color:m,seriesName:d}}},{key:"buildCustomTooltipHTML",value:function(e){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e.color+'">'+(e.seriesName||"")+'</span></div><div> <span class="category">'+e.ylabel+' </span> <span class="value start-value">'+e.start+'</span> <span class="separator">-</span> <span class="value end-value">'+e.end+"</span></div></div>"}}]),a}(M),R=function(){function e(t){n(this,e),this.opts=t}return s(e,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,f.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,i,n,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var i=t.seriesIndex,n=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,i,n,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var i=t.seriesIndex,n=t.dataPointIndex,a=t.w,s=a.globals.seriesRangeStart[i][n];return a.globals.seriesRangeEnd[i][n]-s},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(e){var t=new N(e.ctx,null),i=t.getTooltipValues(e),n=i.color,a=i.seriesName,s=i.ylabel,o=i.startVal,r=i.endVal;return t.buildCustomTooltipHTML({color:n,seriesName:a,ylabel:s,start:o,end:r})}(e):function(e){var t=new N(e.ctx,null),i=t.getTooltipValues(e),n=i.color,a=i.seriesName,s=i.ylabel,o=i.start,r=i.end;return t.buildCustomTooltipHTML({color:n,seriesName:a,ylabel:s,start:o,end:r})}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(e){return f.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100})),"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,i){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return f.isNumber(e)?Math.floor(e):e};var n=e.xaxis.labels.formatter,a=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return i&&i.length&&(a=i.map((function(e){return Array.isArray(e)?e:String(e)}))),a&&a.length&&(e.xaxis.labels.formatter=function(e){return f.isNumber(e)?n(a[Math.floor(e)-1]):n(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,i,n,a){var s=e.globals.seriesCandleO[t][i],o=e.globals.seriesCandleH[t][i],r=e.globals.seriesCandleM[t][i],l=e.globals.seriesCandleL[t][i],c=e.globals.seriesCandleC[t][i];return e.config.series[t].type&&e.config.series[t].type!==a?'<div class="apexcharts-custom-tooltip">\n          '.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+s+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+o+"</span></div>"+(r?"<div>".concat(n[2],': <span class="value">')+r+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+c+"</span></div></div>"}}]),e}(),H=function(){function e(t){n(this,e),this.opts=t}return s(e,[{key:"init",value:function(e){var t=e.responsiveOverride,n=this.opts,a=new C,s=new R(n);this.chartType=n.chart.type,"histogram"===this.chartType&&(n.chart.type="bar",n=f.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},n)),n=this.extendYAxis(n),n=this.extendAnnotations(n);var o=a.init(),r={};if(n&&"object"===i(n)){var l={};l=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)?s[n.chart.type]():s.line(),n.chart.brush&&n.chart.brush.enabled&&(l=s.brush(l)),n.chart.stacked&&"100%"===n.chart.stackType&&(n=s.stacked100(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},t||(n.xaxis.convertedCatToNumeric=!1),((n=this.checkForCatToNumericXAxis(this.chartType,l,n)).chart.sparkline&&n.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(l=s.sparkline(l)),r=f.extend(o,l)}var c=f.extend(r,window.Apex);return o=f.extend(c,n),this.handleUserInputErrors(o)}},{key:"checkForCatToNumericXAxis",value:function(e,t,i){var n=new R(i),a=("bar"===e||"boxPlot"===e)&&i.plotOptions&&i.plotOptions.bar&&i.plotOptions.bar.horizontal,s="pie"===e||"polarArea"===e||"donut"===e||"radar"===e||"radialBar"===e||"heatmap"===e,o="datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type,r=i.xaxis.tickPlacement?i.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return a||s||!o||"between"===r||(i=n.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(e,t){var i=new C;(void 0===e.yaxis||!e.yaxis||Array.isArray(e.yaxis)&&0===e.yaxis.length)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=f.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[f.extend(i.yAxis,e.yaxis)]:e.yaxis=f.extendArray(e.yaxis,i.yAxis);var n=!1;e.yaxis.forEach((function(e){e.logarithmic&&(n=!0)}));var a=e.series;return t&&!a&&(a=t.config.series),n&&a.length!==e.yaxis.length&&a.length&&(e.yaxis=a.map((function(t,n){if(t.name||(a[n].name="series-".concat(n+1)),e.yaxis[n])return e.yaxis[n].seriesName=a[n].name,e.yaxis[n];var s=f.extend(i.yAxis,e.yaxis[0]);return s.show=!1,s}))),n&&a.length>1&&a.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),e}},{key:"extendAnnotations",value:function(e){return void 0===e.annotations&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new C;return e.annotations.yaxis=f.extendArray(void 0!==e.annotations.yaxis?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new C;return e.annotations.xaxis=f.extendArray(void 0!==e.annotations.xaxis?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new C;return e.annotations.points=f.extendArray(void 0!==e.annotations.points?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&"dark"===e.theme.mode&&(e.tooltip||(e.tooltip={}),"light"!==e.tooltip.theme&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),e}(),F=function(){function e(){n(this,e)}return s(e,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRangeBar=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasGroups=!1,e.groups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.xaxisLabelsCount=0,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:"pan"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.pan,selectionEnabled:"selection"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=f.extend({},e),t.initialSeries=f.clone(e.series),t.lastXAxis=f.clone(t.initialConfig.xaxis),t.lastYAxis=f.clone(t.initialConfig.yaxis),t}}]),e}(),j=function(){function e(t){n(this,e),this.opts=t}return s(e,[{key:"init",value:function(){var e=new H(this.opts).init({responsiveOverride:!1});return{config:e,globals:(new F).init(e)}}}]),e}(),B=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new b(this.ctx)}return s(e,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new E(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&null!==e[this.activeSeriesIndex].data[0]&&void 0!==e[this.activeSeriesIndex].data[0].x&&null!==e[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new E(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&void 0!==e[this.activeSeriesIndex].data[0]&&null!==e[this.activeSeriesIndex].data[0]&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var i=this.w.config,n=this.w.globals,a="boxPlot"===i.chart.type||"boxPlot"===i.series[t].type,s=0;s<e[t].data.length;s++)if(void 0!==e[t].data[s][1]&&(Array.isArray(e[t].data[s][1])&&4===e[t].data[s][1].length&&!a?this.twoDSeries.push(f.parseNumber(e[t].data[s][1][3])):e[t].data[s].length>=5?this.twoDSeries.push(f.parseNumber(e[t].data[s][4])):this.twoDSeries.push(f.parseNumber(e[t].data[s][1])),n.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var o=new Date(e[t].data[s][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[s][0]);for(var r=0;r<e[t].data.length;r++)void 0!==e[t].data[r][2]&&(this.threeDSeries.push(e[t].data[r][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var i=this.w.config,n=this.w.globals,a=new O(this.ctx),s=t;n.collapsedSeriesIndices.indexOf(t)>-1&&(s=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)void 0!==e[t].data[o].y&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(f.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(f.parseNumber(e[t].data[o].y))),void 0!==e[t].data[o].goals&&Array.isArray(e[t].data[o].goals)?(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var r=0;r<e[s].data.length;r++){var l="string"==typeof e[s].data[r].x,c=Array.isArray(e[s].data[r].x),d=!c&&!!a.isValidDate(e[s].data[r].x.toString());if(l||d)if(l||i.xaxis.convertedCatToNumeric){var h=n.isBarHorizontal&&n.isRangeData;"datetime"!==i.xaxis.type||h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[s].data[r].x)):this.twoDSeriesX.push(a.parseDate(e[s].data[r].x))}else"datetime"===i.xaxis.type?this.twoDSeriesX.push(a.parseDate(e[s].data[r].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[s].data[r].x)));else c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[s].data[r].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[s].data[r].x))}if(e[t].data[0]&&void 0!==e[t].data[0].z){for(var u=0;u<e[t].data.length;u++)this.threeDSeries.push(e[t].data[u].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",e,t)),i.seriesRangeStart.push(n.start),i.seriesRangeEnd.push(n.end),i.seriesRangeBar.push(n.rangeUniques),i.seriesRangeBar.forEach((function(e,t){e&&e.forEach((function(e,t){e.y.forEach((function(t,i){for(var n=0;n<e.y.length;n++)if(i!==n){var a=t.y1,s=t.y2,o=e.y[n].y1;a<=e.y[n].y2&&o<=s&&(e.overlaps.indexOf(t.rangeName)<0&&e.overlaps.push(t.rangeName),e.overlaps.indexOf(e.y[n].rangeName)<0&&e.overlaps.push(e.y[n].rangeName))}}))}))})),n}},{key:"handleCandleStickBoxData",value:function(e,t){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",e,t)),i.seriesCandleO[t]=n.o,i.seriesCandleH[t]=n.h,i.seriesCandleM[t]=n.m,i.seriesCandleL[t]=n.l,i.seriesCandleC[t]=n.c,n}},{key:"handleRangeDataFormat",value:function(e,t,i){var n=[],a=[],s=t[i].data.filter((function(e,t,i){return t===i.findIndex((function(t){return t.x===e.x}))})).map((function(e,t){return{x:e.x,overlaps:[],y:[]}})),o="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",r=new E(this.ctx).getActiveConfigSeriesIndex();if("array"===e){if(2!==t[r].data[0][1].length)throw new Error(o);for(var l=0;l<t[i].data.length;l++)n.push(t[i].data[l][1][0]),a.push(t[i].data[l][1][1])}else if("xy"===e){if(2!==t[r].data[0].y.length)throw new Error(o);for(var c=function(e){var o=f.randomId(),r=t[i].data[e].x,l={y1:t[i].data[e].y[0],y2:t[i].data[e].y[1],rangeName:o};t[i].data[e].rangeName=o;var c=s.findIndex((function(e){return e.x===r}));s[c].y.push(l),n.push(l.y1),a.push(l.y2)},d=0;d<t[i].data.length;d++)c(d)}return{start:n,end:a,rangeUniques:s}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,i){var n=this.w,a="boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[i].type,s=[],o=[],r=[],l=[],c=[];if("array"===e)if(a&&6===t[i].data[0].length||!a&&5===t[i].data[0].length)for(var d=0;d<t[i].data.length;d++)s.push(t[i].data[d][1]),o.push(t[i].data[d][2]),a?(r.push(t[i].data[d][3]),l.push(t[i].data[d][4]),c.push(t[i].data[d][5])):(l.push(t[i].data[d][3]),c.push(t[i].data[d][4]));else for(var h=0;h<t[i].data.length;h++)Array.isArray(t[i].data[h][1])&&(s.push(t[i].data[h][1][0]),o.push(t[i].data[h][1][1]),a?(r.push(t[i].data[h][1][2]),l.push(t[i].data[h][1][3]),c.push(t[i].data[h][1][4])):(l.push(t[i].data[h][1][2]),c.push(t[i].data[h][1][3])));else if("xy"===e)for(var u=0;u<t[i].data.length;u++)Array.isArray(t[i].data[u].y)&&(s.push(t[i].data[u].y[0]),o.push(t[i].data[u].y[1]),a?(r.push(t[i].data[u].y[2]),l.push(t[i].data[u].y[3]),c.push(t[i].data[u].y[4])):(l.push(t[i].data[u].y[2]),c.push(t[i].data[u].y[3])));return{o:s,h:o,m:r,l:l,c:c}}},{key:"parseDataAxisCharts",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,n=this.w.config,a=this.w.globals,s=new O(i),o=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();a.isRangeBar="rangeBar"===n.chart.type&&a.isBarHorizontal,a.hasGroups="category"===n.xaxis.type&&n.xaxis.group.groups.length>0,a.hasGroups&&(a.groups=n.xaxis.group.groups);for(var r=function(){for(var e=0;e<o.length;e++)if("string"==typeof o[e]){if(!s.isValidDate(o[e]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(s.parseDate(o[e]))}else t.twoDSeriesX.push(o[e])},l=0;l<e.length;l++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===e[l].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==n.chart.type&&"rangeArea"!==n.chart.type&&"rangeBar"!==e[l].type&&"rangeArea"!==e[l].type||(a.isRangeData=!0,this.handleRangeData(e,l)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,l):this.isFormatXY()&&this.handleFormatXY(e,l),"candlestick"!==n.chart.type&&"candlestick"!==e[l].type&&"boxPlot"!==n.chart.type&&"boxPlot"!==e[l].type||this.handleCandleStickBoxData(e,l),a.series.push(this.twoDSeries),a.labels.push(this.twoDSeriesX),a.seriesX.push(this.twoDSeriesX),a.seriesGoals=this.seriesGoals,l!==this.activeSeriesIndex||this.fallbackToCategory||(a.isXNumeric=!0);else{"datetime"===n.xaxis.type?(a.isXNumeric=!0,r(),a.seriesX.push(this.twoDSeriesX)):"numeric"===n.xaxis.type&&(a.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,a.seriesX.push(this.twoDSeriesX))),a.labels.push(this.twoDSeriesX);var c=e[l].data.map((function(e){return f.parseNumber(e)}));a.series.push(c)}a.seriesZ.push(this.threeDSeries),void 0!==e[l].name?a.seriesNames.push(e[l].name):a.seriesNames.push("series-"+parseInt(l+1,10)),void 0!==e[l].color?a.seriesColors.push(e[l].color):a.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,i=this.w.config;t.series=e.slice(),t.seriesNames=i.labels.slice();for(var n=0;n<t.series.length;n++)void 0===t.seriesNames[n]&&t.seriesNames.push("series-"+(n+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,i=this.w.globals;t.xaxis.categories.length>0?i.labels=t.xaxis.categories:t.labels.length>0?i.labels=t.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRangeBar.length&&(i.seriesRangeBar.map((function(e){e.forEach((function(e){i.labels.indexOf(e.x)<0&&e.x&&i.labels.push(e.x)}))})),i.labels=i.labels.filter((function(e,t,i){return i.indexOf(e)===t}))),t.xaxis.convertedCatToNumeric&&(new R(t).convertCatToNumericXaxis(t,this.ctx,i.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,i=this.w.config,n=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var a=i.series.map((function(e,t){return e.data.filter((function(e,t,i){return i.findIndex((function(t){return t.x===e.x}))===t}))})),s=a.reduce((function(e,t,i,n){return n[e].length>t.length?e:i}),0),o=0;o<a[s].length;o++)n.push(o+1);else for(var r=0;r<t.series[t.maxValsInArrayIndex].length;r++)n.push(r+1);t.seriesX=[];for(var l=0;l<e.length;l++)t.seriesX.push(n);t.isXNumeric=!0}if(0===n.length){n=t.axisCharts?[]:t.series.map((function(e,t){return t+1}));for(var c=0;c<e.length;c++)t.seriesX.push(n)}t.labels=n,i.xaxis.convertedCatToNumeric&&(t.categoryLabels=n.map((function(e){return i.xaxis.labels.formatter(e)}))),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,i=t.config,n=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?this.parseDataAxisCharts(e):this.parseDataNonAxisCharts(e),this.coreUtils.getLargestSeries(),"bar"===i.chart.type&&i.chart.stacked){var a=new E(this.ctx);n.series=a.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(e);for(var s=this.coreUtils.getCategoryLabels(n.labels),o=0;o<s.length;o++)if(Array.isArray(s[o])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this,t=this.w;t.globals.ignoreYAxisIndexes=t.globals.collapsedSeries.map((function(i,n){if(e.w.globals.isMultipleYAxis&&!t.config.chart.stacked)return i.index}))}}]),e}(),z=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return s(e,[{key:"xLabelFormat",value:function(e,t,i,n){var a=this.w;if("datetime"===a.config.xaxis.type&&void 0===a.config.xaxis.labels.formatter&&void 0===a.config.tooltip.x.formatter){var s=new O(this.ctx);return s.formatDate(s.getDate(t),a.config.tooltip.x.format)}return e(t,i,n)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(e){return e})):e}},{key:"defaultYFormatter",value:function(e,t,i){var n=this.w;return f.isNumber(e)&&(e=0!==n.globals.yValueDecimal?e.toFixed(void 0!==t.decimalsInFloat?t.decimalsInFloat:n.globals.yValueDecimal):n.globals.maxYArr[i]-n.globals.minYArr[i]<5?e.toFixed(1):e.toFixed(0)),e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttKeyFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttZFormatter=function(e){return e},t.globals.legendFormatter=function(t){return e.defaultGeneralFormatter(t)},void 0!==t.config.xaxis.labels.formatter?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(e){if(f.isNumber(e)){if(!t.config.xaxis.convertedCatToNumeric&&"numeric"===t.config.xaxis.type){if(f.isNumber(t.config.xaxis.decimalsInFloat))return e.toFixed(t.config.xaxis.decimalsInFloat);var i=t.globals.maxX-t.globals.minX;return i>0&&i<100?e.toFixed(1):e.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?e.toFixed(1):e.toFixed(0)}return e},"function"==typeof t.config.tooltip.x.formatter?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,"function"==typeof t.config.xaxis.tooltip.formatter&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||void 0!==t.config.tooltip.y.formatter)&&(t.globals.ttVal=t.config.tooltip.y),void 0!==t.config.tooltip.z.formatter&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),void 0!==t.config.legend.formatter&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(i,n){void 0!==i.labels.formatter?t.globals.yLabelFormatters[n]=i.labels.formatter:t.globals.yLabelFormatters[n]=function(a){return t.globals.xyCharts?Array.isArray(a)?a.map((function(t){return e.defaultYFormatter(t,i,n)})):e.defaultYFormatter(a,i,n):a}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if("heatmap"===e.config.chart.type){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(e,t){return e.length>t.length?e:t}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),e}(),W=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"getLabel",value:function(e,t,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],r=this.w,l=void 0===e[n]?"":e[n],c=l,d=r.globals.xLabelFormatter,h=r.config.xaxis.labels.formatter,u=!1,p=new z(this.ctx),f=l;o&&(c=p.xLabelFormat(d,l,f,{i:n,dateFormatter:new O(this.ctx).formatDate,w:r}),void 0!==h&&(c=h(l,e[n],{i:n,dateFormatter:new O(this.ctx).formatDate,w:r})));t.length>0?(u=function(e){var i=null;return t.forEach((function(e){"month"===e.unit?i="year":"day"===e.unit?i="month":"hour"===e.unit?i="day":"minute"===e.unit&&(i="hour")})),i===e}(t[n].unit),i=t[n].position,c=t[n].value):"datetime"===r.config.xaxis.type&&void 0===h&&(c=""),void 0===c&&(c=""),c=Array.isArray(c)?c:c.toString();var g,m=new v(this.ctx);g=r.globals.rotateXLabels&&o?m.getTextRects(c,parseInt(s,10),null,"rotate(".concat(r.config.xaxis.labels.rotate," 0 0)"),!1):m.getTextRects(c,parseInt(s,10));var b=!r.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(c)&&(0===c.indexOf("NaN")||0===c.toLowerCase().indexOf("invalid")||c.toLowerCase().indexOf("infinity")>=0||a.indexOf(c)>=0&&b)&&(c=""),{x:i,text:c,textRect:g,isBold:u}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,i){var n=this.w,a=n.config.xaxis.tickAmount;return"dataPoints"===a&&(a=Math.round(n.globals.gridWidth/120)),a>i||e%Math.round(i/(a+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,i,n,a){var s=this.w;if(0===e&&s.globals.skipFirstTimelinelabel&&(t.text=""),e===i-1&&s.globals.skipLastTimelinelabel&&(t.text=""),s.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var o=a[a.length-1];t.x<o.textRect.width/(s.globals.rotateXLabels?Math.abs(s.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var i=this.w;return i.config.yaxis[e]&&i.config.yaxis[e].reversed&&t.reverse(),t}},{key:"isYAxisHidden",value:function(e){var t=this.w,i=new b(this.ctx);return!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&i.isSeriesNull(e)&&-1===t.globals.collapsedSeriesIndices.indexOf(e)}},{key:"getYAxisForeColor",value:function(e,t){var i=this.w;return Array.isArray(e)&&i.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,i.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,i,n,a,s,o){var r=this.w,l=new v(this.ctx),c=r.globals.translateY;if(n.show&&t>0){!0===r.config.yaxis[a].opposite&&(e+=n.width);for(var d=t;d>=0;d--){var h=c+t/10+r.config.yaxis[a].labels.offsetY-1;r.globals.isBarHorizontal&&(h=s*d),"heatmap"===r.config.chart.type&&(h+=s/2);var u=l.drawLine(e+i.offsetX-n.width+n.offsetX,h+n.offsetY,e+i.offsetX+n.offsetX,h+n.offsetY,n.color);o.add(u),c+=s}}}}]),e}(),Y=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"scaleSvgNode",value:function(e,t){var i=parseFloat(e.getAttributeNS(null,"width")),n=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",i*t),e.setAttributeNS(null,"height",n*t),e.setAttributeNS(null,"viewBox","0 0 "+i+" "+n)}},{key:"fixSvgStringForIe11",value:function(e){if(!f.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,i=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(e){return 2==++t?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':e}));return(i=i.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){var t=this.w.globals.dom.Paper.svg();if(1!==e){var i=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(i,e),t=(new XMLSerializer).serializeToString(i)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),i=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(n,(function(e){e.setAttribute("width",0)})),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),i&&i[0]&&(i[0].setAttribute("y",-100),i[0].setAttribute("y1",-100),i[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(i){var n=t.w,a=e?e.scale||e.width/n.globals.svgWidth:1;t.cleanup();var s=document.createElement("canvas");s.width=n.globals.svgWidth*a,s.height=parseInt(n.globals.dom.elWrap.style.height,10)*a;var o="transparent"===n.config.chart.background?"#fff":n.config.chart.background,r=s.getContext("2d");r.fillStyle=o,r.fillRect(0,0,s.width*a,s.height*a);var l=t.getSvgString(a);if(window.canvg&&f.isIE11()){var c=window.canvg.Canvg.fromString(r,l,{ignoreClear:!0,ignoreDimensions:!0});c.start();var d=s.msToBlob();c.stop(),i({blob:d})}else{var h="data:image/svg+xml,"+encodeURIComponent(l),u=new Image;u.crossOrigin="anonymous",u.onload=function(){if(r.drawImage(u,0,0),s.msToBlob){var e=s.msToBlob();i({blob:e})}else{var t=s.toDataURL("image/png");i({imgURI:t})}},u.src=h}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then((function(t){var i=t.imgURI,n=t.blob;n?navigator.msSaveOrOpenBlob(n,e.w.globals.chartID+".png"):e.triggerDownload(i,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,i=e.series,n=e.columnDelimiter,a=e.lineDelimiter,s=void 0===a?"\n":a,o=this.w,r=[],l=[],c="",d=new B(this.ctx),h=new W(this.ctx),u=function(e){var i="";if(o.globals.axisCharts){if("category"===o.config.xaxis.type||o.config.xaxis.convertedCatToNumeric)if(o.globals.isBarHorizontal){var a=o.globals.yLabelFormatters[0],s=new E(t.ctx).getActiveConfigSeriesIndex();i=a(o.globals.labels[e],{seriesIndex:s,dataPointIndex:e,w:o})}else i=h.getLabel(o.globals.labels,o.globals.timescaleLabels,0,e).text;"datetime"===o.config.xaxis.type&&(o.config.xaxis.categories.length?i=o.config.xaxis.categories[e]:o.config.labels.length&&(i=o.config.labels[e]))}else i=o.config.labels[e];return Array.isArray(i)&&(i=i.join(" ")),f.isNumber(i)?i:i.split(n).join("")};r.push(o.config.chart.toolbar.export.csv.headerCategory),i.map((function(e,t){var i=e.name?e.name:"series-".concat(t);o.globals.axisCharts&&r.push(i.split(n).join("")?i.split(n).join(""):"series-".concat(t))})),o.globals.axisCharts||(r.push(o.config.chart.toolbar.export.csv.headerValue),l.push(r.join(n))),i.map((function(e,t){o.globals.axisCharts?function(e,t){if(r.length&&0===t&&l.push(r.join(n)),e.data&&e.data.length)for(var a=0;a<e.data.length;a++){r=[];var s=u(a);if(s||(d.isFormatXY()?s=i[t].data[a].x:d.isFormat2DArray()&&(s=i[t].data[a]?i[t].data[a][0]:"")),0===t){r.push((h=s,"datetime"===o.config.xaxis.type&&String(h).length>=10?o.config.chart.toolbar.export.csv.dateFormatter(s):f.isNumber(s)?s:s.split(n).join("")));for(var c=0;c<o.globals.series.length;c++)r.push(o.globals.series[c][a])}("candlestick"===o.config.chart.type||e.type&&"candlestick"===e.type)&&(r.pop(),r.push(o.globals.seriesCandleO[t][a]),r.push(o.globals.seriesCandleH[t][a]),r.push(o.globals.seriesCandleL[t][a]),r.push(o.globals.seriesCandleC[t][a])),("boxPlot"===o.config.chart.type||e.type&&"boxPlot"===e.type)&&(r.pop(),r.push(o.globals.seriesCandleO[t][a]),r.push(o.globals.seriesCandleH[t][a]),r.push(o.globals.seriesCandleM[t][a]),r.push(o.globals.seriesCandleL[t][a]),r.push(o.globals.seriesCandleC[t][a])),"rangeBar"===o.config.chart.type&&(r.pop(),r.push(o.globals.seriesRangeStart[t][a]),r.push(o.globals.seriesRangeEnd[t][a])),r.length&&l.push(r.join(n))}var h}(e,t):((r=[]).push(o.globals.labels[t].split(n).join("")),r.push(o.globals.series[t]),l.push(r.join(n)))})),c+=l.join(s),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+c),o.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,i){var n=document.createElement("a");n.href=e,n.download=(t||this.w.globals.chartID)+i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),e}(),X=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.axesUtils=new W(t),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===i.config.xaxis.position?this.offY=0:this.offY=i.globals.gridHeight+1,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return s(e,[{key:"drawXaxis",value:function(){var e=this.w,t=new v(this.ctx),i=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),n=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(n);for(var a=[],s=0;s<this.xaxisLabels.length;s++)a.push(this.xaxisLabels[s]);if(this.drawXAxisLabelAndGroup(!0,t,n,a,e.globals.isXNumeric,(function(e,t){return t})),e.globals.hasGroups){var o=e.globals.groups;a=[];for(var r=0;r<o.length;r++)a.push(o[r].title);var l={};e.config.xaxis.group.style&&(l.xaxisFontSize=e.config.xaxis.group.style.fontSize,l.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,l.xaxisForeColors=e.config.xaxis.group.style.colors,l.fontWeight=e.config.xaxis.group.style.fontWeight,l.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,n,a,!1,(function(e,t){return o[e].cols*t}),l)}if(void 0!==e.config.xaxis.title.text){var c=t.group({class:"apexcharts-xaxis-title"}),d=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+e.globals.xAxisLabelsHeight+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});c.add(d),i.add(c)}if(e.config.xaxis.axisBorder.show){var h=e.globals.barPadForNumericAxis,u=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-h,this.offY,this.xaxisBorderWidth+h,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);i.add(u)}return i}},{key:"drawXAxisLabelAndGroup",value:function(e,t,i,n,a,s){var o,r=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],d=[],h=this.w,u=l.xaxisFontSize||this.xaxisFontSize,p=l.xaxisFontFamily||this.xaxisFontFamily,f=l.xaxisForeColors||this.xaxisForeColors,g=l.fontWeight||h.config.xaxis.labels.style.fontWeight,m=l.cssClass||h.config.xaxis.labels.style.cssClass,v=h.globals.padHorizontal,b=n.length,x="category"===h.config.xaxis.type?h.globals.dataPoints:b;if(a){var y=x>1?x-1:x;o=h.globals.gridWidth/y,v=v+s(0,o)/2+h.config.xaxis.labels.offsetX}else o=h.globals.gridWidth/x,v=v+s(0,o)+h.config.xaxis.labels.offsetX;for(var w=function(a){var l=v-s(a,o)/2+h.config.xaxis.labels.offsetX;0===a&&1===b&&o/2===v&&1===x&&(l=h.globals.gridWidth/2);var y=r.axesUtils.getLabel(n,h.globals.timescaleLabels,l,a,c,u,e),w=28;if(h.globals.rotateXLabels&&e&&(w=22),e||(w=w+parseFloat(u)+(h.globals.xAxisLabelsHeight-h.globals.xAxisGroupLabelsHeight)+(h.globals.rotateXLabels?10:0)),y=void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"datetime"!==h.config.xaxis.type?r.axesUtils.checkLabelBasedOnTickamount(a,y,b):r.axesUtils.checkForOverflowingLabels(a,y,b,c,d),e&&y.text&&h.globals.xaxisLabelsCount++,h.config.xaxis.labels.show){var k=t.drawText({x:y.x,y:r.offY+h.config.xaxis.labels.offsetY+w-("top"===h.config.xaxis.position?h.globals.xAxisHeight+h.config.xaxis.axisTicks.height-2:0),text:y.text,textAnchor:"middle",fontWeight:y.isBold?600:g,fontSize:u,fontFamily:p,foreColor:Array.isArray(f)?e&&h.config.xaxis.convertedCatToNumeric?f[h.globals.minX+a-1]:f[a]:f,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+m});if(i.add(k),e){var S=document.createElementNS(h.globals.SVGNS,"title");S.textContent=Array.isArray(y.text)?y.text.join(" "):y.text,k.node.appendChild(S),""!==y.text&&(c.push(y.text),d.push(y))}}a<b-1&&(v+=s(a+1,o))},k=0;k<=b-1;k++)w(k)}},{key:"drawXaxisInversed",value:function(e){var t,i,n=this,a=this.w,s=new v(this.ctx),o=a.config.yaxis[0].opposite?a.globals.translateYAxisX[e]:0,r=s.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),l=s.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});r.add(l);var c=[];if(a.config.yaxis[e].show)for(var d=0;d<this.xaxisLabels.length;d++)c.push(this.xaxisLabels[d]);t=a.globals.gridHeight/c.length,i=-t/2.2;var h=a.globals.yLabelFormatters[0],u=a.config.yaxis[0].labels;if(u.show)for(var p=function(o){var r=void 0===c[o]?"":c[o];r=h(r,{seriesIndex:e,dataPointIndex:o,w:a});var d=n.axesUtils.getYAxisForeColor(u.style.colors,e),p=0;Array.isArray(r)&&(p=r.length/2*parseInt(u.style.fontSize,10));var f=s.drawText({x:u.offsetX-15,y:i+t+u.offsetY-p,text:r,textAnchor:n.yaxis.opposite?"start":"end",foreColor:Array.isArray(d)?d[o]:d,fontSize:u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+u.style.cssClass});l.add(f);var g=document.createElementNS(a.globals.SVGNS,"title");if(g.textContent=Array.isArray(r)?r.join(" "):r,f.node.appendChild(g),0!==a.config.yaxis[e].labels.rotate){var m=s.rotateAroundCenter(f.node);f.node.setAttribute("transform","rotate(".concat(a.config.yaxis[e].labels.rotate," 0 ").concat(m.y,")"))}i+=t},f=0;f<=c.length-1;f++)p(f);if(void 0!==a.config.yaxis[0].title.text){var g=s.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),m=s.drawText({x:0,y:a.globals.gridHeight/2,text:a.config.yaxis[0].title.text,textAnchor:"middle",foreColor:a.config.yaxis[0].title.style.color,fontSize:a.config.yaxis[0].title.style.fontSize,fontWeight:a.config.yaxis[0].title.style.fontWeight,fontFamily:a.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+a.config.yaxis[0].title.style.cssClass});g.add(m),r.add(g)}var b=0;this.isCategoryBarHorizontal&&a.config.yaxis[0].opposite&&(b=a.globals.gridWidth);var x=a.config.xaxis.axisBorder;if(x.show){var y=s.drawLine(a.globals.padHorizontal+x.offsetX+b,1+x.offsetY,a.globals.padHorizontal+x.offsetX+b,a.globals.gridHeight+x.offsetY,x.color,0);r.add(y)}return a.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(b,c.length,a.config.yaxis[0].axisBorder,a.config.yaxis[0].axisTicks,0,t,r),r}},{key:"drawXaxisTicks",value:function(e,t,i){var n=this.w,a=e;if(!(e<0||e-2>n.globals.gridWidth)){var s=this.offY+n.config.xaxis.axisTicks.offsetY;if(t=t+s+n.config.xaxis.axisTicks.height,"top"===n.config.xaxis.position&&(t=s-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var o=new v(this.ctx).drawLine(e+n.config.xaxis.axisTicks.offsetX,s+n.config.xaxis.offsetY,a+n.config.xaxis.axisTicks.offsetX,t+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);i.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],i=this.xaxisLabels.length,n=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var a=0;a<i;a++)n=this.xaxisLabels[a].position,t.push(n);else for(var s=i,o=0;o<s;o++){var r=s;e.globals.isXNumeric&&"bar"!==e.config.chart.type&&(r-=1),n+=e.globals.gridWidth/r,t.push(n)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new v(this.ctx),i=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<n.length;o++){var r=t.rotateAroundCenter(n[o]);r.y=r.y-1,r.x=r.x+1,n[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(r.x," ").concat(r.y,")")),n[o].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")"));var l=n[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(i){t.placeTextWithEllipsis(i,i.textContent,e.globals.xAxisLabelsHeight-("bottom"===e.config.legend.position?20:10))}))}else!function(){for(var i=e.globals.gridWidth/(e.globals.labels.length+1),a=0;a<n.length;a++){var s=n[a].childNodes;e.config.xaxis.labels.trim&&"datetime"!==e.config.xaxis.type&&Array.prototype.forEach.call(s,(function(e){t.placeTextWithEllipsis(e,e.textContent,i)}))}}();if(a.length>0){var c=a[a.length-1].getBBox(),d=a[0].getBBox();c.x<-20&&a[a.length-1].parentNode.removeChild(a[a.length-1]),d.x+d.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&a[0].parentNode.removeChild(a[0]);for(var h=0;h<s.length;h++)t.placeTextWithEllipsis(s[h],s[h].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),e}(),$=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.xaxisLabels=i.globals.labels.slice(),this.axesUtils=new W(t),this.isRangeBar=i.globals.seriesRangeBar.length,i.globals.timescaleLabels.length>0&&(this.xaxisLabels=i.globals.timescaleLabels.slice())}return s(e,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,i=new v(this.ctx);null===e&&(e=i.group({class:"apexcharts-grid"}));var n=i.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),a=i.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(a),e.add(n),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,i=new v(this.ctx),n=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var a=0;e.config.stroke.width.forEach((function(e){a=Math.max(a,e)})),n=a}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var s=e.config.chart.type,o=0,r=0;("bar"===s||"rangeBar"===s||"candlestick"===s||"boxPlot"===s||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=e.config.grid.padding.left,r=e.config.grid.padding.right,t.barPadForNumericAxis>o&&(o=t.barPadForNumericAxis,r=t.barPadForNumericAxis)),t.dom.elGridRect=i.drawRect(-n/2-o-2,-n/2,t.gridWidth+n+r+o+4,t.gridHeight+n,0,"#fff");var l=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=i.drawRect(2*-l,2*-l,t.gridWidth+4*l,t.gridHeight+4*l,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var c=t.dom.baseEl.querySelector("defs");c.appendChild(t.dom.elGridRectMask),c.appendChild(t.dom.elForecastMask),c.appendChild(t.dom.elNonForecastMask),c.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,i=e.x1,n=e.y1,a=e.x2,s=e.y2,o=e.xCount,r=e.parent,l=this.w;if(!(0===t&&l.globals.skipFirstTimelinelabel||t===o-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({x1:i,y1:n,x2:a,y2:s,parent:r});var c=0;if(l.globals.hasGroups&&"between"===l.config.xaxis.tickPlacement){var d=l.globals.groups;if(d){for(var h=0,u=0;h<t&&u<d.length;u++)h+=d[u].cols;h===t&&(c=.6*l.globals.xAxisLabelsHeight)}}new X(this.ctx).drawXaxisTicks(i,c,this.elg)}}},{key:"_drawGridLine",value:function(e){var t=e.x1,i=e.y1,n=e.x2,a=e.y2,s=e.parent,o=this.w,r=s.node.classList.contains("apexcharts-gridlines-horizontal"),l=o.config.grid.strokeDashArray,c=o.globals.barPadForNumericAxis,d=new v(this).drawLine(t-(r?c:0),i,n+(r?c:0),a,o.config.grid.borderColor,l);d.node.classList.add("apexcharts-gridline"),s.add(d)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,i=e.x1,n=e.y1,a=e.x2,s=e.y2,o=e.type,r=this.w,l=new v(this.ctx),c=r.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==r.config.xaxis.type){var d=r.config.grid[o].colors[t],h=l.drawRect(i-("row"===o?c:0),n,a+("row"===o?2*c:0),s,0,d,r.config.grid[o].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(e){var t=this,i=e.xCount,n=e.tickAmount,a=this.w;if(a.config.grid.xaxis.lines.show||a.config.xaxis.axisTicks.show){var s,o=a.globals.padHorizontal,r=a.globals.gridHeight;a.globals.timescaleLabels.length?function(e){for(var n=e.xC,a=e.x1,s=e.y1,o=e.x2,r=e.y2,l=0;l<n;l++)a=t.xaxisLabels[l].position,o=t.xaxisLabels[l].position,t._drawGridLines({i:l,x1:a,y1:s,x2:o,y2:r,xCount:i,parent:t.elgridLinesV})}({xC:i,x1:o,y1:0,x2:s,y2:r}):(a.globals.isXNumeric&&(i=a.globals.xAxisScale.result.length),a.config.xaxis.convertedCatToNumeric&&(i=a.globals.xaxisLabelsCount),function(e){var n=e.xC,s=e.x1,o=e.y1,r=e.x2,l=e.y2;if(void 0!==a.config.xaxis.tickAmount&&"dataPoints"!==a.config.xaxis.tickAmount&&"on"===a.config.xaxis.tickPlacement)a.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(e,n){var a=e.getBBox();t._drawGridLines({i:n,x1:a.x+a.width/2,y1:o,x2:a.x+a.width/2,y2:l,xCount:i,parent:t.elgridLinesV})}));else for(var c=0;c<n+(a.globals.isXNumeric?0:1);c++)0===c&&1===n&&1===a.globals.dataPoints&&(r=s=a.globals.gridWidth/2),t._drawGridLines({i:c,x1:s,y1:o,x2:r,y2:l,xCount:i,parent:t.elgridLinesV}),r=s+=a.globals.gridWidth/(a.globals.isXNumeric?n-1:n)}({xC:i,x1:o,y1:0,x2:s,y2:r}))}if(a.config.grid.yaxis.lines.show){var l=0,c=0,d=a.globals.gridWidth,h=n+1;this.isRangeBar&&(h=a.globals.labels.length);for(var u=0;u<h+(this.isRangeBar?1:0);u++)this._drawGridLine({x1:0,y1:l,x2:d,y2:c,parent:this.elgridLinesH}),c=l+=a.globals.gridHeight/(this.isRangeBar?h:n)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,a=i.globals.padHorizontal,s=i.globals.gridHeight,o=0;o<t+1;o++)i.config.grid.xaxis.lines.show&&this._drawGridLine({x1:a,y1:0,x2:n,y2:s,parent:this.elgridLinesV}),new X(this.ctx).drawXaxisTicks(a,0,this.elg),n=a=a+i.globals.gridWidth/t+.3;if(i.config.grid.yaxis.lines.show)for(var r=0,l=0,c=i.globals.gridWidth,d=0;d<i.globals.dataPoints+1;d++)this._drawGridLine({x1:0,y1:r,x2:c,y2:l,parent:this.elgridLinesH}),l=r+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=new v(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var i,n=e.globals.yAxisScale.length?e.globals.yAxisScale[0].result.length-1:5,a=0;a<e.globals.series.length&&(void 0!==e.globals.yAxisScale[a]&&(n=e.globals.yAxisScale[a].result.length-1),!(n>2));a++);return!e.globals.isBarHorizontal||this.isRangeBar?(i=this.xaxisLabels.length,this.isRangeBar&&(n=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(i=e.config.xaxis.tickAmount)),this._drawXYLines({xCount:i,tickAmount:n})):(i=n,n=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:n})),this.drawGridBands(i,n),{el:this.elg,xAxisTickWidth:e.globals.gridWidth/i}}},{key:"drawGridBands",value:function(e,t){var i=this.w;if(void 0!==i.config.grid.row.colors&&i.config.grid.row.colors.length>0)for(var n=0,a=i.globals.gridHeight/t,s=i.globals.gridWidth,o=0,r=0;o<t;o++,r++)r>=i.config.grid.row.colors.length&&(r=0),this._drawGridBandRect({c:r,x1:0,y1:n,x2:s,y2:a,type:"row"}),n+=i.globals.gridHeight/t;if(void 0!==i.config.grid.column.colors&&i.config.grid.column.colors.length>0)for(var l=i.globals.isBarHorizontal||"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric?e:e-1,c=i.globals.padHorizontal,d=i.globals.padHorizontal+i.globals.gridWidth/l,h=i.globals.gridHeight,u=0,p=0;u<e;u++,p++)p>=i.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:c,y1:0,x2:d,y2:h,type:"column"}),c+=i.globals.gridWidth/l}}]),e}(),V=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"niceScale",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,s=this.w,o=Math.abs(t-e);if("dataPoints"===(i=this._adjustTicksForSmallRange(i,n,o))&&(i=s.globals.dataPoints-1),e===Number.MIN_VALUE&&0===t||!f.isNumber(e)&&!f.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE)return e=0,t=i,this.linearScale(e,t,i);e>t?(console.warn("axis.min cannot be greater than axis.max"),t=e+.1):e===t&&(e=0===e?0:e-.5,t=0===t?2:t+.5);var r=[];o<1&&a&&("candlestick"===s.config.chart.type||"candlestick"===s.config.series[n].type||"boxPlot"===s.config.chart.type||"boxPlot"===s.config.series[n].type||s.globals.isRangeData)&&(t*=1.01);var l=i+1;l<2?l=2:l>2&&(l-=2);var c=o/l,d=Math.floor(f.log10(c)),h=Math.pow(10,d),u=Math.round(c/h);u<1&&(u=1);var p=u*h,g=p*Math.floor(e/p),m=p*Math.ceil(t/p),v=g;if(a&&o>2){for(;r.push(v),!((v+=p)>m););return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}var b=e;(r=[]).push(b);for(var x=Math.abs(t-e)/i,y=0;y<=i;y++)b+=x,r.push(b);return r[r.length-2]>=t&&r.pop(),{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"linearScale",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3?arguments[3]:void 0,a=Math.abs(t-e);"dataPoints"===(i=this._adjustTicksForSmallRange(i,n,a))&&(i=this.w.globals.dataPoints-1);var s=a/i;i===Number.MAX_VALUE&&(i=10,s=1);for(var o=[],r=e;i>=0;)o.push(r),r+=s,i-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],a=Math.ceil(Math.log(t)/Math.log(i)+1),s=Math.floor(Math.log(e)/Math.log(i));s<a;s++)n.push(Math.pow(i,s));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(e,t,i){t<=0&&(t=Math.max(e,i)),e<=0&&(e=Math.min(t,i));for(var n=[],a=Math.log(t)/Math.log(i),s=Math.log(e)/Math.log(i),o=a-s,r=Math.round(o),l=o/r,c=0,d=s;c<r;c++,d+=l)n.push(Math.pow(i,d));return n.push(Math.pow(i,a)),{result:n,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,i){var n=e;if(void 0!==t&&this.w.config.yaxis[t].labels.formatter&&void 0===this.w.config.yaxis[t].tickAmount){var a=this.w.config.yaxis[t].labels.formatter(1);f.isNumber(Number(a))&&!f.isFloat(a)&&(n=Math.ceil(i))}return n<e?n:e}},{key:"setYScaleForIndex",value:function(e,t,i){var n=this.w.globals,a=this.w.config,s=n.isBarHorizontal?a.xaxis:a.yaxis[e];void 0===n.yAxisScale[e]&&(n.yAxisScale[e]=[]);var o=Math.abs(i-t);if(s.logarithmic&&o<=5&&(n.invalidLogScale=!0),s.logarithmic&&o>5)n.allSeriesCollapsed=!1,n.yAxisScale[e]=this.logarithmicScale(t,i,s.logBase),n.yAxisScale[e]=s.forceNiceScale?this.logarithmicScaleNice(t,i,s.logBase):this.logarithmicScale(t,i,s.logBase);else if(i!==-Number.MAX_VALUE&&f.isNumber(i))if(n.allSeriesCollapsed=!1,void 0===s.min&&void 0===s.max||s.forceNiceScale){var r=void 0===a.yaxis[e].max&&void 0===a.yaxis[e].min||a.yaxis[e].forceNiceScale;n.yAxisScale[e]=this.niceScale(t,i,s.tickAmount?s.tickAmount:o<5&&o>1?o+1:5,e,r)}else n.yAxisScale[e]=this.linearScale(t,i,s.tickAmount,e);else n.yAxisScale[e]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(e,t){var i=this.w,n=i.globals,a=i.config.xaxis,s=Math.abs(t-e);return t!==-Number.MAX_VALUE&&f.isNumber(t)?n.xAxisScale=this.linearScale(e,t,a.tickAmount?a.tickAmount:s<5&&s>1?s+1:5,0):n.xAxisScale=this.linearScale(0,5,5),n.xAxisScale}},{key:"setMultipleYScales",value:function(){var e=this,t=this.w.globals,i=this.w.config,n=t.minYArr.concat([]),a=t.maxYArr.concat([]),s=[];i.yaxis.forEach((function(t,o){var r=o;i.series.forEach((function(e,i){e.name===t.seriesName&&(r=i,o!==i?s.push({index:i,similarIndex:o,alreadyExists:!0}):s.push({index:i}))}));var l=n[r],c=a[r];e.setYScaleForIndex(o,l,c)})),this.sameScaleInMultipleAxes(n,a,s)}},{key:"sameScaleInMultipleAxes",value:function(e,t,i){var n=this,a=this.w.config,s=this.w.globals,o=[];i.forEach((function(e){e.alreadyExists&&(void 0===o[e.index]&&(o[e.index]=[]),o[e.index].push(e.index),o[e.index].push(e.similarIndex))})),s.yAxisSameScaleIndices=o,o.forEach((function(e,t){o.forEach((function(i,n){var a,s;t!==n&&(a=e,s=i,a.filter((function(e){return-1!==s.indexOf(e)}))).length>0&&(o[t]=o[t].concat(o[n]))}))}));var r=o.map((function(e){return e.filter((function(t,i){return e.indexOf(t)===i}))})).map((function(e){return e.sort()}));o=o.filter((function(e){return!!e}));var l=r.slice(),c=l.map((function(e){return JSON.stringify(e)}));l=l.filter((function(e,t){return c.indexOf(JSON.stringify(e))===t}));var d=[],h=[];e.forEach((function(e,i){l.forEach((function(n,a){n.indexOf(i)>-1&&(void 0===d[a]&&(d[a]=[],h[a]=[]),d[a].push({key:i,value:e}),h[a].push({key:i,value:t[i]}))}))}));var u=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),p=Array.apply(null,Array(l.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);d.forEach((function(e,t){e.forEach((function(e,i){u[t]=Math.min(e.value,u[t])}))})),h.forEach((function(e,t){e.forEach((function(e,i){p[t]=Math.max(e.value,p[t])}))})),e.forEach((function(e,t){h.forEach((function(e,i){var o=u[i],r=p[i];a.chart.stacked&&(r=0,e.forEach((function(e,t){e.value!==-Number.MAX_VALUE&&(r+=e.value),o!==Number.MIN_VALUE&&(o+=d[i][t].value)}))),e.forEach((function(i,l){e[l].key===t&&(void 0!==a.yaxis[t].min&&(o="function"==typeof a.yaxis[t].min?a.yaxis[t].min(s.minY):a.yaxis[t].min),void 0!==a.yaxis[t].max&&(r="function"==typeof a.yaxis[t].max?a.yaxis[t].max(s.maxY):a.yaxis[t].max),n.setYScaleForIndex(t,o,r))}))}))}))}},{key:"autoScaleY",value:function(e,t,i){e||(e=this);var n=e.w;if(n.globals.isMultipleYAxis||n.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),t;var a=n.globals.seriesX[0],s=n.config.chart.stacked;return t.forEach((function(e,o){for(var r=0,l=0;l<a.length;l++)if(a[l]>=i.xaxis.min){r=l;break}var c,d,h=n.globals.minYArr[o],u=n.globals.maxYArr[o],p=n.globals.stackedSeriesTotals;n.globals.series.forEach((function(o,l){var f=o[r];s?(f=p[r],c=d=f,p.forEach((function(e,t){a[t]<=i.xaxis.max&&a[t]>=i.xaxis.min&&(e>d&&null!==e&&(d=e),o[t]<c&&null!==o[t]&&(c=o[t]))}))):(c=d=f,o.forEach((function(e,t){if(a[t]<=i.xaxis.max&&a[t]>=i.xaxis.min){var s=e,o=e;n.globals.series.forEach((function(i,n){null!==e&&(s=Math.min(i[t],s),o=Math.max(i[t],o))})),o>d&&null!==o&&(d=o),s<c&&null!==s&&(c=s)}}))),void 0===c&&void 0===d&&(c=h,d=u),(d*=d<0?.9:1.1)<0&&d<u&&(d=u),(c*=c<0?1.1:.9)<0&&c>h&&(c=h),t.length>1?(t[l].min=void 0===e.min?c:e.min,t[l].max=void 0===e.max?d:e.max):(t[0].min=void 0===e.min?c:e.min,t[0].max=void 0===e.max?d:e.max)}))})),t}}]),e}(),U=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.scales=new V(t)}return s(e,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.w.config,s=this.w.globals,o=-Number.MAX_VALUE,r=Number.MIN_VALUE;null===n&&(n=e+1);var l=s.series,c=l,d=l;"candlestick"===a.chart.type?(c=s.seriesCandleL,d=s.seriesCandleH):"boxPlot"===a.chart.type?(c=s.seriesCandleO,d=s.seriesCandleC):s.isRangeData&&(c=s.seriesRangeStart,d=s.seriesRangeEnd);for(var h=e;h<n;h++){s.dataPoints=Math.max(s.dataPoints,l[h].length),s.categoryLabels.length&&(s.dataPoints=s.categoryLabels.filter((function(e){return void 0!==e})).length);for(var u=0;u<s.series[h].length;u++){var p=l[h][u];null!==p&&f.isNumber(p)?(void 0!==d[h][u]&&(o=Math.max(o,d[h][u]),t=Math.min(t,d[h][u])),void 0!==c[h][u]&&(t=Math.min(t,c[h][u]),i=Math.max(i,c[h][u])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==s.seriesCandleC[h][u]&&(o=Math.max(o,s.seriesCandleO[h][u]),o=Math.max(o,s.seriesCandleH[h][u]),o=Math.max(o,s.seriesCandleL[h][u]),o=Math.max(o,s.seriesCandleC[h][u]),"boxPlot"===this.w.config.chart.type&&(o=Math.max(o,s.seriesCandleM[h][u]))),!a.series[h].type||"candlestick"===a.series[h].type&&"boxPlot"===a.series[h].type||(o=Math.max(o,s.series[h][u]),t=Math.min(t,s.series[h][u])),i=o),s.seriesGoals[h]&&s.seriesGoals[h][u]&&Array.isArray(s.seriesGoals[h][u])&&s.seriesGoals[h][u].forEach((function(e){r!==Number.MIN_VALUE&&(r=Math.min(r,e.value),t=r),o=Math.max(o,e.value),i=o})),f.isFloat(p)&&(p=f.noExponents(p),s.yValueDecimal=Math.max(s.yValueDecimal,p.toString().split(".")[1].length)),r>c[h][u]&&c[h][u]<0&&(r=c[h][u])):s.hasNullValues=!0}}return"rangeBar"===a.chart.type&&s.seriesRangeStart.length&&s.isBarHorizontal&&(r=t),"bar"===a.chart.type&&(r<0&&o<0&&(o=0),r===Number.MIN_VALUE&&(r=0)),{minY:r,maxY:o,lowestY:t,highestY:i}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var i=Number.MAX_VALUE;if(e.isMultipleYAxis)for(var n=0;n<e.series.length;n++){var a=this.getMinYMaxY(n,i,null,n+1);e.minYArr.push(a.minY),e.maxYArr.push(a.maxY),i=a.lowestY}var s=this.getMinYMaxY(0,i,null,e.series.length);if(e.minY=s.minY,e.maxY=s.maxY,i=s.lowestY,t.chart.stacked&&this._setStackedMinMax(),("line"===t.chart.type||"area"===t.chart.type||"candlestick"===t.chart.type||"boxPlot"===t.chart.type||"rangeBar"===t.chart.type&&!e.isBarHorizontal)&&e.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==e.maxY){var o=e.maxY-i;(i>=0&&i<=10||void 0!==t.yaxis[0].min||void 0!==t.yaxis[0].max)&&(o=0),e.minY=i-5*o/100,i>0&&e.minY<0&&(e.minY=0),e.maxY=e.maxY+5*o/100}return t.yaxis.forEach((function(t,i){void 0!==t.max&&("number"==typeof t.max?e.maxYArr[i]=t.max:"function"==typeof t.max&&(e.maxYArr[i]=t.max(e.isMultipleYAxis?e.maxYArr[i]:e.maxY)),e.maxY=e.maxYArr[i]),void 0!==t.min&&("number"==typeof t.min?e.minYArr[i]=t.min:"function"==typeof t.min&&(e.minYArr[i]=t.min(e.isMultipleYAxis?e.minYArr[i]===Number.MIN_VALUE?0:e.minYArr[i]:e.minY)),e.minY=e.minYArr[i])})),e.isBarHorizontal&&["min","max"].forEach((function(i){void 0!==t.xaxis[i]&&"number"==typeof t.xaxis[i]&&("min"===i?e.minY=t.xaxis[i]:e.maxY=t.xaxis[i])})),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=i,e.yAxisScale.forEach((function(t,i){e.minYArr[i]=t.niceMin,e.maxYArr[i]=t.niceMax}))):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,i="numeric"===t.xaxis.type||"datetime"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var t=0;t<e.series.length;t++)if(e.labels[t])for(var i=0;i<e.labels[t].length;i++)null!==e.labels[t][i]&&f.isNumber(e.labels[t][i])&&(e.maxX=Math.max(e.maxX,e.labels[t][i]),e.initialMaxX=Math.max(e.maxX,e.labels[t][i]),e.minX=Math.min(e.minX,e.labels[t][i]),e.initialMinX=Math.min(e.minX,e.labels[t][i]))}(),e.noLabelsProvided&&0===t.xaxis.categories.length&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var n;if(void 0===t.xaxis.tickAmount?(n=Math.round(e.svgWidth/150),"numeric"===t.xaxis.type&&e.dataPoints<30&&(n=e.dataPoints-1),n>e.dataPoints&&0!==e.dataPoints&&(n=e.dataPoints-1)):"dataPoints"===t.xaxis.tickAmount?(e.series.length>1&&(n=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(n=e.maxX-e.minX-1)):n=t.xaxis.tickAmount,e.xTickAmount=n,void 0!==t.xaxis.max&&"number"==typeof t.xaxis.max&&(e.maxX=t.xaxis.max),void 0!==t.xaxis.min&&"number"==typeof t.xaxis.min&&(e.minX=t.xaxis.min),void 0!==t.xaxis.range&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var a=[],s=e.minX-1;s<e.maxX;s++)a.push(s+1);e.xAxisScale={result:a,niceMin:a[0],niceMax:a[a.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(1,n,n),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,n-1),e.seriesX=e.labels.slice());i&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ)for(var t=0;t<e.series.length;t++)if(void 0!==e.seriesZ[t])for(var i=0;i<e.seriesZ[t].length;i++)null!==e.seriesZ[t][i]&&f.isNumber(e.seriesZ[t][i])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][i]),e.minZ=Math.min(e.minZ,e.seriesZ[t][i]))}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var i=new O(this.ctx);if("datetime"===t.xaxis.type){var n=i.getDate(e.minX);t.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),e.minX=new Date(n).getTime();var a=i.getDate(e.maxX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()+2):a.setDate(a.getDate()+2),e.maxX=new Date(a).getTime()}else("numeric"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,i){1===t.length&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var n=t.slice();n.sort((function(e,t){return e-t})),n.forEach((function(t,i){if(i>0){var a=t-n[i-1];a>0&&(e.minXDiff=Math.min(a,e.minXDiff))}})),1!==e.dataPoints&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var e=this.w.globals,t=[],i=[];if(e.series.length)for(var n=0;n<e.series[e.maxValsInArrayIndex].length;n++)for(var a=0,s=0,o=0;o<e.series.length;o++)null!==e.series[o][n]&&f.isNumber(e.series[o][n])&&(e.series[o][n]>0?a=a+parseFloat(e.series[o][n])+1e-4:s+=parseFloat(e.series[o][n])),o===e.series.length-1&&(t.push(a),i.push(s));for(var r=0;r<t.length;r++)e.maxY=Math.max(e.maxY,t[r]),e.minY=Math.min(e.minY,i[r])}}]),e}(),q=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===i.config.xaxis.position&&(this.xAxisoffX=i.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new W(t)}return s(e,[{key:"drawYaxis",value:function(e){var t=this,i=this.w,n=new v(this.ctx),a=i.config.yaxis[e].labels.style,s=a.fontSize,o=a.fontFamily,r=a.fontWeight,l=n.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+i.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return l;var c=n.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var d=i.globals.yAxisScale[e].result.length-1,h=i.globals.gridHeight/d,u=i.globals.translateY,p=i.globals.yLabelFormatters[e],f=i.globals.yAxisScale[e].result.slice();f=this.axesUtils.checkForReversedLabels(e,f);var g="";if(i.config.yaxis[e].labels.show)for(var m=function(l){var m=f[l];m=p(m,l,i);var v=i.config.yaxis[e].labels.padding;i.config.yaxis[e].opposite&&0!==i.config.yaxis.length&&(v*=-1);var b=t.axesUtils.getYAxisForeColor(a.colors,e),x=n.drawText({x:v,y:u+d/10+i.config.yaxis[e].labels.offsetY+1,text:m,textAnchor:i.config.yaxis[e].opposite?"start":"end",fontSize:s,fontFamily:o,fontWeight:r,maxWidth:i.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(b)?b[l]:b,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+a.cssClass});l===d&&(g=x),c.add(x);var y=document.createElementNS(i.globals.SVGNS,"title");if(y.textContent=Array.isArray(m)?m.join(" "):m,x.node.appendChild(y),0!==i.config.yaxis[e].labels.rotate){var w=n.rotateAroundCenter(g.node),k=n.rotateAroundCenter(x.node);x.node.setAttribute("transform","rotate(".concat(i.config.yaxis[e].labels.rotate," ").concat(w.x," ").concat(k.y,")"))}u+=h},b=d;b>=0;b--)m(b);if(void 0!==i.config.yaxis[e].title.text){var x=n.group({class:"apexcharts-yaxis-title"}),y=0;i.config.yaxis[e].opposite&&(y=i.globals.translateYAxisX[e]);var w=n.drawText({x:y,y:i.globals.gridHeight/2+i.globals.translateY+i.config.yaxis[e].title.offsetY,text:i.config.yaxis[e].title.text,textAnchor:"end",foreColor:i.config.yaxis[e].title.style.color,fontSize:i.config.yaxis[e].title.style.fontSize,fontWeight:i.config.yaxis[e].title.style.fontWeight,fontFamily:i.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+i.config.yaxis[e].title.style.cssClass});x.add(w),l.add(x)}var k=i.config.yaxis[e].axisBorder,S=31+k.offsetX;if(i.config.yaxis[e].opposite&&(S=-31-k.offsetX),k.show){var C=n.drawLine(S,i.globals.translateY+k.offsetY-2,S,i.globals.gridHeight+i.globals.translateY+k.offsetY+2,k.color,0,k.width);l.add(C)}return i.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(S,d,k,i.config.yaxis[e].axisTicks,e,h,l),l}},{key:"drawYaxisInversed",value:function(e){var t=this.w,i=new v(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),a=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(a);var s=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/s+.1,r=o+t.config.xaxis.labels.offsetX,l=t.globals.xLabelFormatter,c=t.globals.yAxisScale[e].result.slice(),d=t.globals.timescaleLabels;d.length>0&&(this.xaxisLabels=d.slice(),s=(c=d.slice()).length),c=this.axesUtils.checkForReversedLabels(e,c);var h=d.length;if(t.config.xaxis.labels.show)for(var u=h?0:s;h?u<h:u>=0;h?u++:u--){var p=c[u];p=l(p,u,t);var f=t.globals.gridWidth+t.globals.padHorizontal-(r-o+t.config.xaxis.labels.offsetX);if(d.length){var g=this.axesUtils.getLabel(c,d,f,u,this.drawnLabels,this.xaxisFontSize);f=g.x,p=g.text,this.drawnLabels.push(g.text),0===u&&t.globals.skipFirstTimelinelabel&&(p=""),u===c.length-1&&t.globals.skipLastTimelinelabel&&(p="")}var m=i.drawText({x:f,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-("top"===t.config.xaxis.position?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});a.add(m),m.tspan(p);var b=document.createElementNS(t.globals.SVGNS,"title");b.textContent=p,m.node.appendChild(b),r+=o}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,i=new v(this.ctx),n=t.config.xaxis.axisBorder;if(n.show){var a=0;"bar"===t.config.chart.type&&t.globals.isXNumeric&&(a-=15);var s=i.drawLine(t.globals.padHorizontal+a+n.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);e.add(s)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,i=new v(this.ctx);if(void 0!==t.config.xaxis.title.text){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),a=i.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});n.add(a),e.add(n)}}},{key:"yAxisTitleRotate",value:function(e,t){var i=this.w,n=new v(this.ctx),a={width:0,height:0},s={width:0,height:0},o=i.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));null!==o&&(a=o.getBoundingClientRect());var r=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(null!==r&&(s=r.getBoundingClientRect()),null!==r){var l=this.xPaddingForYAxisTitle(e,a,s,t);r.setAttribute("x",l.xPos-(t?10:0))}if(null!==r){var c=n.rotateAroundCenter(r);r.setAttribute("transform","rotate(".concat(t?-1*i.config.yaxis[e].title.rotate:i.config.yaxis[e].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,i,n){var a=this.w,s=0,o=0,r=10;return void 0===a.config.yaxis[e].title.text||e<0?{xPos:o,padd:0}:(n?(o=t.width+a.config.yaxis[e].title.offsetX+i.width/2+r/2,0===(s+=1)&&(o-=r/2)):(o=-1*t.width+a.config.yaxis[e].title.offsetX+r/2+i.width/2,a.globals.isBarHorizontal&&(r=25,o=-1*t.width-a.config.yaxis[e].title.offsetX-r)),{xPos:o,padd:r})}},{key:"setYAxisXPosition",value:function(e,t){var i=this.w,n=0,a=0,s=18,o=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.map((function(r,l){var c=i.globals.ignoreYAxisIndexes.indexOf(l)>-1||!r.show||r.floating||0===e[l].width,d=e[l].width+t[l].width;r.opposite?i.globals.isBarHorizontal?(a=i.globals.gridWidth+i.globals.translateX-1,i.globals.translateYAxisX[l]=a-r.labels.offsetX):(a=i.globals.gridWidth+i.globals.translateX+o,c||(o=o+d+20),i.globals.translateYAxisX[l]=a-r.labels.offsetX+20):(n=i.globals.translateX-s,c||(s=s+d+20),i.globals.translateYAxisX[l]=n+r.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=f.listToArray(t)).forEach((function(t,i){var n=e.config.yaxis[i];if(n&&void 0!==n.labels.align){var a=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"));s=f.listToArray(s);var o=a.getBoundingClientRect();"left"===n.labels.align?(s.forEach((function(e,t){e.setAttribute("text-anchor","start")})),n.opposite||a.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===n.labels.align?(s.forEach((function(e,t){e.setAttribute("text-anchor","middle")})),a.setAttribute("transform","translate(".concat(o.width/2*(n.opposite?1:-1),", 0)"))):"right"===n.labels.align&&(s.forEach((function(e,t){e.setAttribute("text-anchor","end")})),n.opposite&&a.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),e}(),G=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.documentEvent=f.bind(this.documentEvent,this)}return s(e,[{key:"addEventListener",value:function(e,t){var i=this.w;i.globals.events.hasOwnProperty(e)?i.globals.events[e].push(t):i.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){var n=i.globals.events[e].indexOf(t);-1!==n&&i.globals.events[e].splice(n,1)}}},{key:"fireEvent",value:function(e,t){var i=this.w;if(i.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var n=i.globals.events[e],a=n.length,s=0;s<a;s++)n[s].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,i=this.ctx,n=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(e){n.addEventListener(e,(function(e){var n=Object.assign({},t,{seriesIndex:t.globals.capturedSeriesIndex,dataPointIndex:t.globals.capturedDataPointIndex});"mousemove"===e.type||"touchmove"===e.type?"function"==typeof t.config.chart.events.mouseMove&&t.config.chart.events.mouseMove(e,i,n):"mouseleave"===e.type||"touchleave"===e.type?"function"==typeof t.config.chart.events.mouseLeave&&t.config.chart.events.mouseLeave(e,i,n):("mouseup"===e.type&&1===e.which||"touchend"===e.type)&&("function"==typeof t.config.chart.events.click&&t.config.chart.events.click(e,i,n),i.ctx.events.fireEvent("click",[e,i,n]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(i){t.globals.dom.baseEl.addEventListener(i,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,i=e.target.className;if("click"===e.type){var n=t.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&n.classList.remove("apexcharts-menu-open")}t.globals.clientX="touchmove"===e.type?e.touches[0].clientX:e.clientX,t.globals.clientY="touchmove"===e.type?e.touches[0].clientY:e.clientY}}]),e}(),Z=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=t.filter((function(t){return t.name===e}))[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=f.extend(S,i);this.w.globals.locale=n.options}}]),e}(),K=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"drawAxis",value:function(e,t){var i,n,a=this.w.globals,s=this.w.config,o=new X(this.ctx),r=new q(this.ctx);a.axisCharts&&"radar"!==e&&(a.isBarHorizontal?(n=r.drawYaxisInversed(0),i=o.drawXaxisInversed(0),a.dom.elGraphical.add(i),a.dom.elGraphical.add(n)):(i=o.drawXaxis(),a.dom.elGraphical.add(i),s.yaxis.map((function(e,t){-1===a.ignoreYAxisIndexes.indexOf(t)&&(n=r.drawYaxis(t),a.dom.Paper.add(n))}))))}}]),e}(),J=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new v(this.ctx),i=new m(this.ctx),n=e.config.xaxis.crosshairs.fill.gradient,a=e.config.xaxis.crosshairs.dropShadow,s=e.config.xaxis.crosshairs.fill.type,o=n.colorFrom,r=n.colorTo,l=n.opacityFrom,c=n.opacityTo,d=n.stops,h=a.enabled,u=a.left,p=a.top,g=a.blur,b=a.color,x=a.opacity,y=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){"gradient"===s&&(y=t.drawGradient("vertical",o,r,l,c,null,d,null));var w=t.drawRect();1===e.config.xaxis.crosshairs.width&&(w=t.drawLine());var k=e.globals.gridHeight;(!f.isNumber(k)||k<0)&&(k=0);var S=e.config.xaxis.crosshairs.width;(!f.isNumber(S)||S<0)&&(S=0),w.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:k,width:S,height:k,fill:y,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),h&&(w=i.dropShadow(w,{left:u,top:p,blur:g,color:b,opacity:x})),e.globals.dom.elGraphical.add(w)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new v(this.ctx),i=e.config.yaxis[0].crosshairs,n=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var a=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);a.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(a)}var s=t.drawLine(-n,0,e.globals.gridWidth+n,0,i.stroke.color,0,0);s.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(s)}}]),e}(),Q=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"checkResponsiveConfig",value:function(e){var t=this,i=this.w,n=i.config;if(0!==n.responsive.length){var a=n.responsive.slice();a.sort((function(e,t){return e.breakpoint>t.breakpoint?1:t.breakpoint>e.breakpoint?-1:0})).reverse();var s=new H({}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>n){var r=b.extendArrayProps(s,i.globals.initialConfig,i);e=f.extend(r,e),e=f.extend(i.config,e),t.overrideResponsiveOptions(e)}else for(var l=0;l<a.length;l++)o<a[l].breakpoint&&(e=b.extendArrayProps(s,a[l].options,i),e=f.extend(i.config,e),t.overrideResponsiveOptions(e))};if(e){var r=b.extendArrayProps(s,e,i);r=f.extend(i.config,r),o(r=f.extend(r,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new H(e).init({responsiveOverride:!0});this.w.config=t}}]),e}(),ee=function(){function e(t){n(this,e),this.ctx=t,this.colors=[],this.w=t.w;var i=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===i.config.chart.type&&i.config.plotOptions.treemap.distributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.distributed,this.isBarDistributed=i.config.plotOptions.bar.distributed&&("bar"===i.config.chart.type||"rangeBar"===i.config.chart.type)}return s(e,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this,t=this.w,i=new f;if(t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode)),void 0===t.config.colors?t.globals.colors=this.predefined():(t.globals.colors=t.config.colors,Array.isArray(t.config.colors)&&t.config.colors.length>0&&"function"==typeof t.config.colors[0]&&(t.globals.colors=t.config.series.map((function(i,n){var a=t.config.colors[n];return a||(a=t.config.colors[0]),"function"==typeof a?(e.isColorFn=!0,a({value:t.globals.axisCharts?t.globals.series[n][0]?t.globals.series[n][0]:0:t.globals.series[n],seriesIndex:n,dataPointIndex:n,w:t})):a})))),t.globals.seriesColors.map((function(e,i){e&&(t.globals.colors[i]=e)})),t.config.theme.monochrome.enabled){var n=[],a=t.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(a=t.globals.series[0].length*t.globals.series.length);for(var s=t.config.theme.monochrome.color,o=1/(a/t.config.theme.monochrome.shadeIntensity),r=t.config.theme.monochrome.shadeTo,l=0,c=0;c<a;c++){var d=void 0;"dark"===r?(d=i.shadeColor(-1*l,s),l+=o):(d=i.shadeColor(l,s),l+=o),n.push(d)}t.globals.colors=n.slice()}var h=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),["fill","stroke"].forEach((function(i){void 0===t.config[i].colors?t.globals[i].colors=e.isColorFn?t.config.colors:h:t.globals[i].colors=t.config[i].colors.slice(),e.pushExtraColors(t.globals[i].colors)})),void 0===t.config.dataLabels.style.colors?t.globals.dataLabels.style.colors=h:t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50),void 0===t.config.plotOptions.radar.polygons.fill.colors?t.globals.radarPolygons.fill.colors=["dark"===t.config.theme.mode?"#424242":"none"]:t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20),void 0===t.config.markers.colors?t.globals.markers.colors=h:t.globals.markers.colors=t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,a=t||n.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.colorScale.inverse),i&&n.globals.series.length&&(a=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),e.length<a)for(var s=a-e.length,o=0;o<s;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode||"light",i=e.theme.palette?e.theme.palette:"dark"===t?"palette4":"palette1",n=e.chart.foreColor?e.chart.foreColor:"dark"===t?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=n,e.theme.palette=i,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),e}(),te=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,i="title"===e?t.config.title:t.config.subtitle,n=t.globals.svgWidth/2,a=i.offsetY,s="middle";if("left"===i.align?(n=10,s="start"):"right"===i.align&&(n=t.globals.svgWidth-10,s="end"),n+=i.offsetX,a=a+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var o=new v(this.ctx).drawText({x:n,y:a,text:i.text,textAnchor:s,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),e}(),ie=function(){function e(t){n(this,e),this.w=t.w,this.dCtx=t}return s(e,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,i=0,n=0,a="title"===e?t.config.title.floating:t.config.subtitle.floating,s=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(null!==s&&!a){var o=s.getBoundingClientRect();i=o.width,n=t.globals.axisCharts?o.height+5:o.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.baseEl.querySelector(".apexcharts-legend");e.config.legend.height||"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||(t.style.maxHeight=e.globals.svgHeight/2+"px");var i=Object.assign({},f.getBoundingClientRect(t));return null!==t&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==e.config.legend.position&&"right"!==e.config.legend.position||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(e,t){var i=e;if(this.w.globals.isMultiLineX){var n=t.map((function(e,t){return Array.isArray(e)?e.length:1})),a=Math.max.apply(Math,h(n));i=t[n.indexOf(a)]}return i}}]),e}(),ne=function(){function e(t){n(this,e),this.w=t.w,this.dCtx=t}return s(e,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,i=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();e={width:n.width,height:n.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==t.config.legend.position&&"right"!==t.config.legend.position||t.config.legend.floating?0:this.dCtx.lgRect.width;var a=t.globals.xLabelFormatter,s=f.getLargestStringFromArr(i),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(s,i);t.globals.isBarHorizontal&&(o=s=t.globals.yAxisScale[0].result.reduce((function(e,t){return e.length>t.length?e:t}),0));var r=new z(this.dCtx.ctx),l=s;s=r.xLabelFormat(a,s,l,{i:void 0,dateFormatter:new O(this.dCtx.ctx).formatDate,w:t}),o=r.xLabelFormat(a,o,l,{i:void 0,dateFormatter:new O(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&void 0===s||""===String(s).trim())&&(o=s="1");var c=new v(this.dCtx.ctx),d=c.getTextRects(s,t.config.xaxis.labels.style.fontSize),h=d;if(s!==o&&(h=c.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:d.width>=h.width?d.width:h.width,height:d.height>=h.height?d.height:h.height}).width*i.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==t.config.xaxis.labels.rotate||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var u=function(e){return c.getTextRects(e,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};d=u(s),s!==o&&(h=u(o)),e.height=(d.height>h.height?d.height:h.height)/1.5,e.width=d.width>h.width?d.width:h.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasGroups)return{width:0,height:0};var i,n=(null===(e=t.config.xaxis.group.style)||void 0===e?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,a=t.globals.groups.map((function(e){return e.title})),s=f.getLargestStringFromArr(a),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(s,a),r=new v(this.dCtx.ctx),l=r.getTextRects(s,n),c=l;return s!==o&&(c=r.getTextRects(o,n)),i={width:l.width>=c.width?l.width:c.width,height:l.height>=c.height?l.height:c.height},t.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,i=0;if(void 0!==e.config.xaxis.title.text){var n=new v(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=n.width,i=n.height}return{width:t,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map((function(e){return e.value})),n=i.reduce((function(e,t){return void 0===e?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):e.length>t.length?e:t}),0);return 1.05*(e=new v(this.dCtx.ctx).getTextRects(n,t.config.xaxis.labels.style.fontSize)).width*i.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,i=this.w,n=i.globals,a=i.config,s=a.xaxis.type,o=e.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var r=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal,l=function(e,r){(function(e){return-1!==n.collapsedSeriesIndices.indexOf(e)})(r)||function(e){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var r=t.dCtx.timescaleLabels[0],l=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,c=r.position-o/1.75+t.dCtx.yAxisWidthLeft,d="right"===i.config.legend.position&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;l>n.svgWidth-n.translateX-d&&(n.skipLastTimelinelabel=!0),c<-(e.show&&!e.floating||"bar"!==a.chart.type&&"candlestick"!==a.chart.type&&"rangeBar"!==a.chart.type&&"boxPlot"!==a.chart.type?10:o/1.75)&&(n.skipFirstTimelinelabel=!0)}else"datetime"===s?t.dCtx.gridPad.right<o&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):"datetime"!==s&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!i.config.xaxis.labels.trim&&("between"!==i.config.xaxis.tickPlacement||i.globals.isBarHorizontal)&&(t.dCtx.xPadRight=o/2+1)}(e)};a.yaxis.forEach((function(e,i){r?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):l(e,i)}))}}]),e}(),ae=function(){function e(t){n(this,e),this.w=t.w,this.dCtx=t}return s(e,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,i=[],n=10,a=new W(this.dCtx.ctx);return t.config.yaxis.map((function(s,o){var r=t.globals.yAxisScale[o],l=0;if(!a.isYAxisHidden(o)&&s.labels.show&&void 0!==s.labels.minWidth&&(l=s.labels.minWidth),!a.isYAxisHidden(o)&&s.labels.show&&r.result.length){var c=t.globals.yLabelFormatters[o],d=r.niceMin===Number.MIN_VALUE?0:r.niceMin,h=String(d).length>String(r.niceMax).length?d:r.niceMax,u=c(h,{seriesIndex:o,dataPointIndex:-1,w:t}),p=u;if(void 0!==u&&0!==u.length||(u=h),t.globals.isBarHorizontal){n=0;var g=t.globals.labels.slice();u=c(u=f.getLargestStringFromArr(g),{seriesIndex:o,dataPointIndex:-1,w:t}),p=e.dCtx.dimHelpers.getLargestStringFromMultiArr(u,g)}var m=new v(e.dCtx.ctx),b="rotate(".concat(s.labels.rotate," 0 0)"),x=m.getTextRects(u,s.labels.style.fontSize,s.labels.style.fontFamily,b,!1),y=x;u!==p&&(y=m.getTextRects(p,s.labels.style.fontSize,s.labels.style.fontFamily,b,!1)),i.push({width:(l>y.width||l>x.width?l:y.width>x.width?y.width:x.width)+n,height:y.height>x.height?y.height:x.height})}else i.push({width:0,height:0})})),i}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,i=[];return t.config.yaxis.map((function(t,n){if(t.show&&void 0!==t.title.text){var a=new v(e.dCtx.ctx),s="rotate(".concat(t.title.rotate," 0 0)"),o=a.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,s,!1);i.push({width:o.width,height:o.height})}else i.push({width:0,height:0})})),i}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,i=0,n=0,a=e.globals.yAxisScale.length>1?10:0,s=new W(this.dCtx.ctx),o=function(o,r){var l=e.config.yaxis[r].floating,c=0;o.width>0&&!l?(c=o.width+a,function(t){return e.globals.ignoreYAxisIndexes.indexOf(t)>-1}(r)&&(c=c-o.width-a)):c=l||s.isYAxisHidden(r)?0:5,e.config.yaxis[r].opposite?n+=c:i+=c,t+=c};return e.globals.yLabelsCoords.map((function(e,t){o(e,t)})),e.globals.yTitleCoords.map((function(e,t){o(e,t)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,t}}]),e}(),se=function(){function e(t){n(this,e),this.w=t.w,this.dCtx=t}return s(e,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;var i=function(e){return"bar"===e||"rangeBar"===e||"candlestick"===e||"boxPlot"===e},n=t.config.chart.type,a=0,s=i(n)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(s=t.globals.comboBarCount),t.globals.collapsedSeries.forEach((function(e){i(e.type)&&(s-=1)})),t.config.chart.stacked&&(s=1),(i(n)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&s>0){var o,r,l=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);l<=3&&(l=t.globals.dataPoints),o=l/e,t.globals.minXDiff&&t.globals.minXDiff/o>0&&(r=t.globals.minXDiff/o),r>e/2&&(r/=2),(a=r/s*parseInt(t.config.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),a=a/(s>1?1:1.5)+5,t.globals.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,i=t.globals,n=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach((function(i){void 0!==t.config[i].text?n+=t.config[i].margin:n+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5})),!t.config.legend.show||"bottom"!==t.config.legend.position||t.config.legend.floating||t.globals.axisCharts||(n+=10);var a=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),s=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight=i.gridHeight-a.height-s.height-n,i.translateY=i.translateY+a.height+s.height+n}},{key:"setGridXPosForDualYAxis",value:function(e,t){var i=this.w,n=new W(this.dCtx.ctx);i.config.yaxis.map((function(a,s){-1!==i.globals.ignoreYAxisIndexes.indexOf(s)||a.floating||n.isYAxisHidden(s)||(a.opposite&&(i.globals.translateX=i.globals.translateX-(t[s].width+e[s].width)-parseInt(i.config.yaxis[s].labels.style.fontSize,10)/1.2-12),i.globals.translateX<2&&(i.globals.translateX=2))}))}}]),e}(),oe=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new ie(this),this.dimYAxis=new ae(this),this.dimXAxis=new ne(this),this.dimGrid=new se(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return s(e,[{key:"plotCoords",value:function(){var e=this,t=this.w,i=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(t){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,s=[],o=!0,r=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(s.push(n.value),!t||s.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return s}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=i[0],a=i[1];e.gridPad[n]=Math.max(a,e.w.globals.markers.largestSize/1.5)})),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var n=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*n,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(n>0?n+4:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,i=t.globals,n=this.dimYAxis.getyAxisLabelsCoords(),a=this.dimYAxis.getyAxisTitleCoords();t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(e,i){t.globals.yLabelsCoords.push({width:n[i].width,index:i}),t.globals.yTitleCoords.push({width:a[i].width,index:i})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var s=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),r=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(s,r,o),i.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+t.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+t.config.xaxis.labels.offsetX;var l=this.yAxisWidth,c=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-r.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-s.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var d=10;("radar"===t.config.chart.type||this.isSparkline)&&(l=0,c=i.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===t.config.chart.type)&&(l=0,c=0,d=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(s);var h=function(){i.translateX=l,i.gridHeight=i.svgHeight-e.lgRect.height-c-(e.isSparkline||"treemap"===t.config.chart.type?0:t.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-l};switch("top"===t.config.xaxis.position&&(d=i.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":i.translateY=d,h();break;case"top":i.translateY=this.lgRect.height+d,h();break;case"left":i.translateY=d,i.translateX=this.lgRect.width+l,i.gridHeight=i.svgHeight-c-12,i.gridWidth=i.svgWidth-this.lgRect.width-l;break;case"right":i.translateY=d,i.translateX=l,i.gridHeight=i.svgHeight-c-12,i.gridWidth=i.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(a,n),new q(this.ctx).setYAxisXPosition(n,a)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=e.config,n=0;e.config.legend.show&&!e.config.legend.floating&&(n=20);var a="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",s=i.plotOptions[a].offsetY,o=i.plotOptions[a].offsetX;if(!i.legend.show||i.legend.floating)return t.gridHeight=t.svgHeight-i.grid.padding.left+i.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=s,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2);switch(i.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=s-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+s+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-n,t.gridHeight="auto"!==i.chart.height?t.svgHeight:t.gridWidth,t.translateY=s,t.translateX=o+this.lgRect.width+n;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-n-5,t.gridHeight="auto"!==i.chart.height?t.svgHeight:t.gridWidth,t.translateY=s,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,i){var n=this.w,a=n.globals.hasGroups?2:1,s=i.height+e.height+t.height,o=n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO,r=n.globals.rotateXLabels?22:10,l=n.globals.rotateXLabels&&"bottom"===n.config.legend.position?10:0;this.xAxisHeight=s*o+a*r+l,this.xAxisWidth=e.width,this.xAxisHeight-t.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var c=0,d=0;n.config.yaxis.forEach((function(e){c+=e.labels.minWidth,d+=e.labels.maxWidth})),this.yAxisWidth<c&&(this.yAxisWidth=c),this.yAxisWidth>d&&(this.yAxisWidth=d)}}]),e}(),re=function(){function e(t){n(this,e),this.w=t.w,this.lgCtx=t}return s(e,[{key:"getLegendStyles",value:function(){var e=document.createElement("style");e.setAttribute("type","text/css");var t=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return e.appendChild(t),e}},{key:"getLegendBBox",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject");var t=e.dom.elLegendForeign;t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",e.svgWidth),t.setAttribute("height",e.svgHeight),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e.dom.elLegendWrap),t.appendChild(this.getLegendStyles()),e.dom.Paper.node.insertBefore(t,e.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(e,t){var i=this,n=this.w;if(n.globals.axisCharts||"radialBar"===n.config.chart.type){n.globals.resized=!0;var a=null,s=null;n.globals.risingSeries=[],n.globals.axisCharts?(a=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),s=parseInt(a.getAttribute("data:realIndex"),10)):(a=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),s=parseInt(a.getAttribute("rel"),10)-1),t?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach((function(e){i.riseCollapsedSeries(e.cs,e.csi,s)})):this.hideSeries({seriesEl:a,realIndex:s})}else{var o=n.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),r=n.config.chart.type;if("pie"===r||"polarArea"===r||"donut"===r){var l=n.config.plotOptions.pie.donut.labels;new v(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,l)}o.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,i=e.realIndex,n=this.w,a=f.clone(n.config.series);if(n.globals.axisCharts){var s=!1;if(n.config.yaxis[i]&&n.config.yaxis[i].show&&n.config.yaxis[i].showAlways&&(s=!0,n.globals.ancillaryCollapsedSeriesIndices.indexOf(i)<0&&(n.globals.ancillaryCollapsedSeries.push({index:i,data:a[i].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),n.globals.ancillaryCollapsedSeriesIndices.push(i))),!s){n.globals.collapsedSeries.push({index:i,data:a[i].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),n.globals.collapsedSeriesIndices.push(i);var o=n.globals.risingSeries.indexOf(i);n.globals.risingSeries.splice(o,1)}}else n.globals.collapsedSeries.push({index:i,data:a[i]}),n.globals.collapsedSeriesIndices.push(i);for(var r=t.childNodes,l=0;l<r.length;l++)r[l].classList.contains("apexcharts-series-markers-wrap")&&(r[l].classList.contains("apexcharts-hide")?r[l].classList.remove("apexcharts-hide"):r[l].classList.add("apexcharts-hide"));n.globals.allSeriesCollapsed=n.globals.collapsedSeries.length===n.config.series.length,a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,i){var n=this.w,a=f.clone(n.config.series);if(e.length>0){for(var s=0;s<e.length;s++)e[s].index===i&&(n.globals.axisCharts?(a[i].data=e[s].data.slice(),e.splice(s,1),t.splice(s,1),n.globals.risingSeries.push(i)):(a[i]=e[s].data,e.splice(s,1),t.splice(s,1),n.globals.risingSeries.push(i)));a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w;return t.globals.axisCharts?e.forEach((function(i,n){t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[])})):e.forEach((function(i,n){t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n]=0)})),e}}]),e}(),le=function(){function e(t,i){n(this,e),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new re(this)}return s(e,[{key:"init",value:function(){var e=this.w,t=e.globals,i=e.config;if((i.legend.showForSingleSeries&&1===t.series.length||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&i.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),f.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var e=this,t=this.w,i=t.config.legend.fontFamily,n=t.globals.seriesNames,a=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var s=t.config.plotOptions.heatmap.colorScale.ranges;n=s.map((function(e){return e.name?e.name:e.from+" - "+e.to})),a=s.map((function(e){return e.color}))}else this.isBarsDistributed&&(n=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(n=t.config.legend.customLegendItems);for(var o=t.globals.legendFormatter,r=t.config.legend.inverseOrder,l=r?n.length-1:0;r?l>=0:l<=n.length-1;r?l--:l++){var c=o(n[l],{seriesIndex:l,w:t}),d=!1,h=!1;if(t.globals.collapsedSeries.length>0)for(var u=0;u<t.globals.collapsedSeries.length;u++)t.globals.collapsedSeries[u].index===l&&(d=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var p=0;p<t.globals.ancillaryCollapsedSeriesIndices.length;p++)t.globals.ancillaryCollapsedSeriesIndices[p]===l&&(h=!0);var g=document.createElement("span");g.classList.add("apexcharts-legend-marker");var m=t.config.legend.markers.offsetX,x=t.config.legend.markers.offsetY,y=t.config.legend.markers.height,w=t.config.legend.markers.width,k=t.config.legend.markers.strokeWidth,S=t.config.legend.markers.strokeColor,C=t.config.legend.markers.radius,_=g.style;_.background=a[l],_.color=a[l],_.setProperty("background",a[l],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[l]&&(_.background=t.config.legend.markers.fillColors[l]),void 0!==t.globals.seriesColors[l]&&(_.background=t.globals.seriesColors[l],_.color=t.globals.seriesColors[l]),_.height=Array.isArray(y)?parseFloat(y[l])+"px":parseFloat(y)+"px",_.width=Array.isArray(w)?parseFloat(w[l])+"px":parseFloat(w)+"px",_.left=(Array.isArray(m)?parseFloat(m[l]):parseFloat(m))+"px",_.top=(Array.isArray(x)?parseFloat(x[l]):parseFloat(x))+"px",_.borderWidth=Array.isArray(k)?k[l]:k,_.borderColor=Array.isArray(S)?S[l]:S,_.borderRadius=Array.isArray(C)?parseFloat(C[l])+"px":parseFloat(C)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[l]&&(g.innerHTML=t.config.legend.markers.customHTML[l]()):g.innerHTML=t.config.legend.markers.customHTML()),v.setAttrs(g,{rel:l+1,"data:collapsed":d||h}),(d||h)&&g.classList.add("apexcharts-inactive-legend");var T=document.createElement("div"),A=document.createElement("span");A.classList.add("apexcharts-legend-text"),A.innerHTML=Array.isArray(c)?c.join(" "):c;var P=t.config.legend.labels.useSeriesColors?t.globals.colors[l]:t.config.legend.labels.colors;P||(P=t.config.chart.foreColor),A.style.color=P,A.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",A.style.fontWeight=t.config.legend.fontWeight,A.style.fontFamily=i||t.config.chart.fontFamily,v.setAttrs(A,{rel:l+1,i:l,"data:default-text":encodeURIComponent(c),"data:collapsed":d||h}),T.appendChild(g),T.appendChild(A);var D=new b(this.ctx);t.config.legend.showForZeroSeries||0===D.getSeriesTotalByIndex(l)&&D.seriesHaveSameValues(l)&&!D.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&T.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||D.isSeriesNull(l)&&-1===t.globals.collapsedSeriesIndices.indexOf(l)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&T.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(T),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),T.classList.add("apexcharts-legend-series"),T.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",v.setAttrs(T,{rel:l+1,seriesName:f.escapeString(n[l]),"data:collapsed":d||h}),(d||h)&&T.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||T.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&0===t.config.legend.customLegendItems.length&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var i=this.w,n=i.globals.dom.baseEl.querySelector(".apexcharts-legend"),a=n.getBoundingClientRect(),s=0,o=0;if("bottom"===i.config.legend.position)o+=i.globals.svgHeight-a.height/2;else if("top"===i.config.legend.position){var r=new oe(this.ctx),l=r.dimHelpers.getTitleSubtitleCoords("title").height,c=r.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(l>0?l-10:0)+(c>0?c-10:0)}n.style.position="absolute",s=s+e+i.config.legend.offsetX,o=o+t+i.config.legend.offsetY,n.style.left=s+"px",n.style.top=o+"px","bottom"===i.config.legend.position?(n.style.top="auto",n.style.bottom=5-i.config.legend.offsetY+"px"):"right"===i.config.legend.position&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach((function(e){n.style[e]&&(n.style[e]=parseInt(i.config.legend[e],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var t=this.legendHelpers.getLegendBBox(),i=new oe(this.ctx),n=i.dimHelpers.getTitleSubtitleCoords("title"),a=i.dimHelpers.getTitleSubtitleCoords("subtitle"),s=0;"bottom"===e.config.legend.position?s=-t.clwh/1.8:"top"===e.config.legend.position&&(s=n.height+a.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,s)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendBBox(),i=0;"left"===e.config.legend.position&&(i=20),"right"===e.config.legend.position&&(i=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,i=e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if("heatmap"===t.config.chart.type||this.isBarsDistributed){if(i){var n=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new E(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&i&&new E(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(e.target.getAttribute("rel"),10)-1,n="true"===e.target.getAttribute("data:collapsed"),a=this.w.config.chart.events.legendClick;"function"==typeof a&&a(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var s=this.w.config.legend.markers.onClick;"function"==typeof s&&e.target.classList.contains("apexcharts-legend-marker")&&(s(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==t.config.chart.type&&"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,n)}}}]),e}(),ce=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=i.globals.minX,this.maxX=i.globals.maxX}return s(e,[{key:"createToolbar",value:function(){var e=this,t=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=t.config.chart.toolbar.offsetY+"px",n.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons.push(i());var s=[],o=function(i,n,a){var o=i.toLowerCase();e.t[o]&&t.config.chart.zoom.enabled&&s.push({el:n,icon:"string"==typeof e.t[o]?e.t[o]:a,title:e.localeValues[i],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var r=function(i){e.t[i]&&t.config.chart[i].enabled&&s.push({el:"zoom"===i?e.elZoom:e.elSelection,icon:"string"==typeof e.t[i]?e.t[i]:"zoom"===i?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:e.localeValues["zoom"===i?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(i,"-icon")})};r("zoom"),r("selection"),this.t.pan&&t.config.chart.zoom.enabled&&s.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&s.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)s.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});s.forEach((function(e,t){e.index&&f.moveIndexInArray(s,t,e.index)}));for(var c=0;c<s.length;c++)v.setAttrs(s[c].el,{class:s[c].class,title:s[c].title}),s[c].el.innerHTML=s[c].icon,n.appendChild(s[c].el);this._createHamburgerMenu(n),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),v.setAttrs(this.elMenu,{class:"apexcharts-menu"});var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||t.splice(2,1);for(var i=0;i<t.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=t[i].title,v.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(t[i].name),title:t[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var i="selection"===e?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,n="selection"===e?"selectionEnabled":"zoomEnabled";t.w.globals[n]=!t.w.globals[n],i.classList.contains(t.ctx.toolbar.selectedClass)?i.classList.remove(t.ctx.toolbar.selectedClass):i.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),"pan"===e?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t="pan"===e?this.elPan:this.elZoom,i="pan"===e?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(t){t&&t.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,i=(this.minX+t)/2,n=(this.maxX+t)/2,a=this._getNewMinXMaxX(i,n);e.globals.disableZoomIn||this.zoomUpdateOptions(a.minX,a.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!("datetime"===e.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,i=this.minX-(t-this.minX),n=this.maxX-(t-this.maxX),a=this._getNewMinXMaxX(i,n);e.globals.disableZoomOut||this.zoomUpdateOptions(a.minX,a.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(e):e,maxX:i?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var i=this.w;if(void 0!==e||void 0!==t){if(!(i.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=i.globals.dataPoints),t-e<2))){var n={min:e,max:t},a=this.getBeforeZoomRange(n);a&&(n=a.xaxis);var s={xaxis:n},o=f.clone(i.globals.initialConfig.yaxis);i.config.chart.zoom.autoScaleYaxis&&(o=new V(this.ctx).autoScaleY(this.ctx,o,{xaxis:n})),i.config.chart.group||(s.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(s,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),i}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,i=new Y(this.ctx);switch(e){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(e){var t=e.w;if(t.globals.lastXAxis.min=void 0,t.globals.lastXAxis.max=void 0,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof t.config.chart.events.beforeResetZoom){var i=t.config.chart.events.beforeResetZoom(e,t);i&&e.updateHelpers.revertDefaultAxisMinMax(i)}"function"==typeof t.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:t.config.xaxis.min,max:t.config.xaxis.max}),t.globals.zoomed=!1;var n=e.ctx.series.emptyCollapsedSeries(f.clone(t.globals.initialSeries));e.updateHelpers._updateSeries(n,t.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),e}(),de=function(e){r(i,e);var t=d(i);function i(e){var a;return n(this,i),(a=t.call(this,e)).ctx=e,a.w=e.w,a.dragged=!1,a.graphics=new v(a.ctx),a.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],a.clientX=0,a.clientY=0,a.startX=0,a.endX=0,a.dragX=0,a.startY=0,a.endY=0,a.dragY=0,a.moveDirection="none",a}return s(i,[{key:"init",value:function(e){var t=this,i=e.xyRatios,n=this.w,a=this;this.xyRatios=i,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=n.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),n.globals.dom.elGraphical.add(this.zoomRect),n.globals.dom.elGraphical.add(this.selectionRect),"x"===n.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:n.globals.gridWidth,maxY:n.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===n.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:n.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=n.globals.dom.baseEl.querySelector("".concat(n.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(e){t.hoverArea.addEventListener(e,a.svgMouseEvents.bind(a,i),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(e,t){var i=this.w,n=this,a=this.ctx.toolbar,s=i.globals.zoomEnabled?i.config.chart.zoom.type:i.config.chart.selection.type,o=i.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,a.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(a.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1),t.target){var r,l=t.target.classList;if(t.target.parentNode&&null!==t.target.parentNode&&(r=t.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||r&&r.contains("apexcharts-toolbar"))){if(n.clientX="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientX:"touchend"===t.type?t.changedTouches[0].clientX:t.clientX,n.clientY="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientY:"touchend"===t.type?t.changedTouches[0].clientY:t.clientY,"mousedown"===t.type&&1===t.which){var c=n.gridRect.getBoundingClientRect();n.startX=n.clientX-c.left,n.startY=n.clientY-c.top,n.dragged=!1,n.w.globals.mousedown=!0}if(("mousemove"===t.type&&1===t.which||"touchmove"===t.type)&&(n.dragged=!0,i.globals.panEnabled?(i.globals.selection=null,n.w.globals.mousedown&&n.panDragging({context:n,zoomtype:s,xyRatios:e})):(n.w.globals.mousedown&&i.globals.zoomEnabled||n.w.globals.mousedown&&i.globals.selectionEnabled)&&(n.selection=n.selectionDrawing({context:n,zoomtype:s}))),"mouseup"===t.type||"touchend"===t.type||"mouseleave"===t.type){var d=n.gridRect.getBoundingClientRect();n.w.globals.mousedown&&(n.endX=n.clientX-d.left,n.endY=n.clientY-d.top,n.dragX=Math.abs(n.endX-n.startX),n.dragY=Math.abs(n.endY-n.startY),(i.globals.zoomEnabled||i.globals.selectionEnabled)&&n.selectionDrawn({context:n,zoomtype:s}),i.globals.panEnabled&&i.config.xaxis.convertedCatToNumeric&&n.delayedPanScrolled()),i.globals.zoomEnabled&&n.hideSelectionRect(this.selectionRect),n.dragged=!1,n.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var e=this.w;if(this.selectionRect){var t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled)if(void 0!==e.globals.selection&&null!==e.globals.selection)this.drawSelectionRect(e.globals.selection);else if(void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max){var i=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,n={x:i,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-i,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(n),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(e){var t=e.x,i=e.y,n=e.width,a=e.height,s=e.translateX,o=void 0===s?0:s,r=e.translateY,l=void 0===r?0:r,c=this.w,d=this.zoomRect,h=this.selectionRect;if(this.dragged||null!==c.globals.selection){var u={transform:"translate("+o+", "+l+")"};c.globals.zoomEnabled&&this.dragged&&(n<0&&(n=1),d.attr({x:t,y:i,width:n,height:a,fill:c.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":c.config.chart.zoom.zoomedArea.fill.opacity,stroke:c.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":c.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":c.config.chart.zoom.zoomedArea.stroke.opacity}),v.setAttrs(d.node,u)),c.globals.selectionEnabled&&(h.attr({x:t,y:i,width:n>0?n:0,height:a>0?a:0,fill:c.config.chart.selection.fill.color,"fill-opacity":c.config.chart.selection.fill.opacity,stroke:c.config.chart.selection.stroke.color,"stroke-width":c.config.chart.selection.stroke.width,"stroke-dasharray":c.config.chart.selection.stroke.dashArray,"stroke-opacity":c.config.chart.selection.stroke.opacity}),v.setAttrs(h.node,u))}}},{key:"hideSelectionRect",value:function(e){e&&e.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(e){var t,i=e.context,n=e.zoomtype,a=this.w,s=i,o=this.gridRect.getBoundingClientRect(),r=s.startX-1,l=s.startY,c=!1,d=!1,h=s.clientX-o.left-r,u=s.clientY-o.top-l;return Math.abs(h+r)>a.globals.gridWidth?h=a.globals.gridWidth-r:s.clientX-o.left<0&&(h=r),r>s.clientX-o.left&&(c=!0,h=Math.abs(h)),l>s.clientY-o.top&&(d=!0,u=Math.abs(u)),t="x"===n?{x:c?r-h:r,y:0,width:h,height:a.globals.gridHeight}:"y"===n?{x:0,y:d?l-u:l,width:a.globals.gridWidth,height:u}:{x:c?r-h:r,y:d?l-u:l,width:h,height:u},s.drawSelectionRect(t),s.selectionDragging("resizing"),t}},{key:"selectionDragging",value:function(e,t){var i=this,n=this.w,a=this.xyRatios,s=this.selectionRect,o=0;"resizing"===e&&(o=30);var r=function(e){return parseFloat(s.node.getAttribute(e))},l={x:r("x"),y:r("y"),width:r("width"),height:r("height")};n.globals.selection=l,"function"==typeof n.config.chart.events.selection&&n.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var e=i.gridRect.getBoundingClientRect(),t=s.node.getBoundingClientRect(),o={xaxis:{min:n.globals.xAxisScale.niceMin+(t.left-e.left)*a.xRatio,max:n.globals.xAxisScale.niceMin+(t.right-e.left)*a.xRatio},yaxis:{min:n.globals.yAxisScale[0].niceMin+(e.bottom-t.bottom)*a.yRatio[0],max:n.globals.yAxisScale[0].niceMax-(t.top-e.top)*a.yRatio[0]}};n.config.chart.events.selection(i.ctx,o),n.config.chart.brush.enabled&&void 0!==n.config.chart.events.brushScrolled&&n.config.chart.events.brushScrolled(i.ctx,o)}),o))}},{key:"selectionDrawn",value:function(e){var t=e.context,i=e.zoomtype,n=this.w,a=t,s=this.xyRatios,o=this.ctx.toolbar;if(a.startX>a.endX){var r=a.startX;a.startX=a.endX,a.endX=r}if(a.startY>a.endY){var l=a.startY;a.startY=a.endY,a.endY=l}var c=void 0,d=void 0;n.globals.isRangeBar?(c=n.globals.yAxisScale[0].niceMin+a.startX*s.invertedYRatio,d=n.globals.yAxisScale[0].niceMin+a.endX*s.invertedYRatio):(c=n.globals.xAxisScale.niceMin+a.startX*s.xRatio,d=n.globals.xAxisScale.niceMin+a.endX*s.xRatio);var h=[],u=[];if(n.config.yaxis.forEach((function(e,t){h.push(n.globals.yAxisScale[t].niceMax-s.yRatio[t]*a.startY),u.push(n.globals.yAxisScale[t].niceMax-s.yRatio[t]*a.endY)})),a.dragged&&(a.dragX>10||a.dragY>10)&&c!==d)if(n.globals.zoomEnabled){var p=f.clone(n.globals.initialConfig.yaxis),g=f.clone(n.globals.initialConfig.xaxis);if(n.globals.zoomed=!0,n.config.xaxis.convertedCatToNumeric&&(c=Math.floor(c),d=Math.floor(d),c<1&&(c=1,d=n.globals.dataPoints),d-c<2&&(d=c+1)),"xy"!==i&&"x"!==i||(g={min:c,max:d}),"xy"!==i&&"y"!==i||p.forEach((function(e,t){p[t].min=u[t],p[t].max=h[t]})),n.config.chart.zoom.autoScaleYaxis){var m=new V(a.ctx);p=m.autoScaleY(a.ctx,p,{xaxis:g})}if(o){var v=o.getBeforeZoomRange(g,p);v&&(g=v.xaxis?v.xaxis:g,p=v.yaxis?v.yaxis:p)}var b={xaxis:g};n.config.chart.group||(b.yaxis=p),a.ctx.updateHelpers._updateOptions(b,!1,a.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof n.config.chart.events.zoomed&&o.zoomCallback(g,p)}else if(n.globals.selectionEnabled){var x,y=null;x={min:c,max:d},"xy"!==i&&"y"!==i||(y=f.clone(n.config.yaxis)).forEach((function(e,t){y[t].min=u[t],y[t].max=h[t]})),n.globals.selection=a.selection,"function"==typeof n.config.chart.events.selection&&n.config.chart.events.selection(a.ctx,{xaxis:x,yaxis:y})}}},{key:"panDragging",value:function(e){var t=e.context,i=this.w,n=t;if(void 0!==i.globals.lastClientPosition.x){var a=i.globals.lastClientPosition.x-n.clientX,s=i.globals.lastClientPosition.y-n.clientY;Math.abs(a)>Math.abs(s)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(s)&&a<0?this.moveDirection="right":Math.abs(s)>Math.abs(a)&&s>0?this.moveDirection="up":Math.abs(s)>Math.abs(a)&&s<0&&(this.moveDirection="down")}i.globals.lastClientPosition={x:n.clientX,y:n.clientY};var o=i.globals.isRangeBar?i.globals.minY:i.globals.minX,r=i.globals.isRangeBar?i.globals.maxY:i.globals.maxX;i.config.xaxis.convertedCatToNumeric||n.panScrolled(o,r)}},{key:"delayedPanScrolled",value:function(){var e=this.w,t=e.globals.minX,i=e.globals.maxX,n=(e.globals.maxX-e.globals.minX)/2;"left"===this.moveDirection?(t=e.globals.minX+n,i=e.globals.maxX+n):"right"===this.moveDirection&&(t=e.globals.minX-n,i=e.globals.maxX-n),t=Math.floor(t),i=Math.floor(i),this.updateScrolledChart({xaxis:{min:t,max:i}},t,i)}},{key:"panScrolled",value:function(e,t){var i=this.w,n=this.xyRatios,a=f.clone(i.globals.initialConfig.yaxis),s=n.xRatio,o=i.globals.minX,r=i.globals.maxX;i.globals.isRangeBar&&(s=n.invertedYRatio,o=i.globals.minY,r=i.globals.maxY),"left"===this.moveDirection?(e=o+i.globals.gridWidth/15*s,t=r+i.globals.gridWidth/15*s):"right"===this.moveDirection&&(e=o-i.globals.gridWidth/15*s,t=r-i.globals.gridWidth/15*s),i.globals.isRangeBar||(e<i.globals.initialMinX||t>i.globals.initialMaxX)&&(e=o,t=r);var l={min:e,max:t};i.config.chart.zoom.autoScaleYaxis&&(a=new V(this.ctx).autoScaleY(this.ctx,a,{xaxis:l}));var c={xaxis:{min:e,max:t}};i.config.chart.group||(c.yaxis=a),this.updateScrolledChart(c,e,t)}},{key:"updateScrolledChart",value:function(e,t,i){var n=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),"function"==typeof n.config.chart.events.scrolled&&n.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:i}})}}]),i}(ce),he=function(){function e(t){n(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return s(e,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,i=e.elGrid,n=e.clientX,a=e.clientY,s=this.w,o=i.getBoundingClientRect(),r=o.width,l=o.height,c=r/(s.globals.dataPoints-1),d=l/s.globals.dataPoints,h=this.hasBars();!s.globals.comboCharts&&!h||s.config.xaxis.convertedCatToNumeric||(c=r/s.globals.dataPoints);var u=n-o.left-s.globals.barPadForNumericAxis,p=a-o.top;u<0||p<0||u>r||p>l?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):s.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):s.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var g=Math.round(u/c),m=Math.floor(p/d);h&&!s.config.xaxis.convertedCatToNumeric&&(g=Math.ceil(u/c),g-=1);var v=null,b=null,x=[],y=[];if(s.globals.seriesXvalues.forEach((function(e){x.push([e[0]+1e-6].concat(e))})),s.globals.seriesYvalues.forEach((function(e){y.push([e[0]+1e-6].concat(e))})),x=x.map((function(e){return e.filter((function(e){return f.isNumber(e)}))})),y=y.map((function(e){return e.filter((function(e){return f.isNumber(e)}))})),s.globals.isXNumeric){var w=this.ttCtx.getElGrid().getBoundingClientRect(),k=u*(w.width/r),S=p*(w.height/l);v=(b=this.closestInMultiArray(k,S,x,y)).index,g=b.j,null!==v&&(x=s.globals.seriesXvalues[v],g=(b=this.closestInArray(k,x)).index)}return s.globals.capturedSeriesIndex=null===v?-1:v,(!g||g<1)&&(g=0),s.globals.isBarHorizontal?s.globals.capturedDataPointIndex=m:s.globals.capturedDataPointIndex=g,{capturedSeries:v,j:s.globals.isBarHorizontal?m:g,hoverX:u,hoverY:p}}},{key:"closestInMultiArray",value:function(e,t,i,n){var a=this.w,s=0,o=null,r=-1;a.globals.series.length>1?s=this.getFirstActiveXArray(i):o=0;var l=i[s][0],c=Math.abs(e-l);if(i.forEach((function(t){t.forEach((function(t,i){var n=Math.abs(e-t);n<c&&(c=n,r=i)}))})),-1!==r){var d=n[s][r],h=Math.abs(t-d);o=s,n.forEach((function(e,i){var n=Math.abs(t-e[r]);n<h&&(h=n,o=i)}))}return{index:o,j:r}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,i=0,n=e.map((function(e,t){return e.length>0?t:-1})),a=0;a<n.length;a++)if(-1!==n[a]&&-1===t.globals.collapsedSeriesIndices.indexOf(a)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(a)){i=n[a];break}return i}},{key:"closestInArray",value:function(e,t){for(var i=t[0],n=null,a=Math.abs(e-i),s=0;s<t.length;s++){var o=Math.abs(e-t[s]);o<a&&(a=o,n=s)}return{index:n}}},{key:"isXoverlap",value:function(e){var t=[],i=this.w.globals.seriesX.filter((function(e){return void 0!==e[0]}));if(i.length>0)for(var n=0;n<i.length-1;n++)void 0!==i[n][e]&&void 0!==i[n+1][e]&&i[n][e]!==i[n+1][e]&&t.push("unEqual");return 0===t.length}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,i=0;i<t.length-1;i++)if(t[i].data.length!==t[i+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return h(e).reduce((function(e,t){return e+t.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=h(e)).sort((function(e,t){var i=Number(e.getAttribute("data:realIndex")),n=Number(t.getAttribute("data:realIndex"));return n<i?1:n>i?-1:0}));var t=[];return e.forEach((function(e){t.push(e.querySelector(".apexcharts-marker"))})),t}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,i=t.config.markers.hover.size;return void 0===i&&(i=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,a=0;a<n.length;a++)"enable"===e?(n[a].classList.add("apexcharts-active"),n[a].style.display=t.config.tooltip.items.display):(n[a].classList.remove("apexcharts-active"),n[a].style.display="none")}}]),e}(),ue=function(){function e(t){n(this,e),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new he(t)}return s(e,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,i=void 0===t||t,n=e.ttItems,a=e.i,s=void 0===a?0:a,o=e.j,r=void 0===o?null:o,l=e.y1,c=e.y2,d=e.e,h=this.w;void 0!==h.config.tooltip.custom?this.handleCustomTooltip({i:s,j:r,y1:l,y2:c,w:h}):this.toggleActiveInactiveSeries(i);var u=this.getValuesToPrint({i:s,j:r});this.printLabels({i:s,j:r,values:u,ttItems:n,shared:i,e:d});var p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var i,n=this,a=e.i,s=e.j,o=e.values,r=e.ttItems,l=e.shared,c=e.e,d=this.w,h=[],u=function(e){return d.globals.seriesGoals[e]&&d.globals.seriesGoals[e][s]&&Array.isArray(d.globals.seriesGoals[e][s])},p=o.xVal,f=o.zVal,g=o.xAxisTTVal,m="",v=d.globals.colors[a];null!==s&&d.config.plotOptions.bar.distributed&&(v=d.globals.colors[s]);for(var b=function(e,o){var b=n.getFormatters(a);m=n.getSeriesName({fn:b.yLbTitleFormatter,index:a,seriesIndex:a,j:s}),"treemap"===d.config.chart.type&&(m=b.yLbTitleFormatter(String(d.config.series[a].data[s].x),{series:d.globals.series,seriesIndex:a,dataPointIndex:s,w:d}));var x=d.config.tooltip.inverseOrder?o:e;if(d.globals.axisCharts){var y=function(e){return b.yLbFormatter(d.globals.series[e][s],{series:d.globals.series,seriesIndex:e,dataPointIndex:s,w:d})};if(l)b=n.getFormatters(x),m=n.getSeriesName({fn:b.yLbTitleFormatter,index:x,seriesIndex:a,j:s}),v=d.globals.colors[x],i=y(x),u(x)&&(h=d.globals.seriesGoals[x][s].map((function(e){return{attrs:e,val:b.yLbFormatter(e.value,{seriesIndex:x,dataPointIndex:s,w:d})}})));else{var w,k=null==c||null===(w=c.target)||void 0===w?void 0:w.getAttribute("fill");k&&(v=-1!==k.indexOf("url")?document.querySelector(k.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):k),i=y(a),u(a)&&Array.isArray(d.globals.seriesGoals[a][s])&&(h=d.globals.seriesGoals[a][s].map((function(e){return{attrs:e,val:b.yLbFormatter(e.value,{seriesIndex:a,dataPointIndex:s,w:d})}})))}}null===s&&(i=b.yLbFormatter(d.globals.series[a],t(t({},d),{},{seriesIndex:a,dataPointIndex:a}))),n.DOMHandling({i:a,t:x,j:s,ttItems:r,values:{val:i,goalVals:h,xVal:p,xAxisTTVal:g,zVal:f},seriesName:m,shared:l,pColor:v})},x=0,y=d.globals.series.length-1;x<d.globals.series.length;x++,y--)b(x,y)}},{key:"getFormatters",value:function(e){var t,i=this.w,n=i.globals.yLabelFormatters[e];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[e]&&i.globals.ttVal[e].formatter,t=i.globals.ttVal[e]&&i.globals.ttVal[e].title&&i.globals.ttVal[e].title.formatter):(n=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(t=i.globals.ttVal.title.formatter)):t=i.config.tooltip.y.title.formatter,"function"!=typeof n&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(e){return e}),"function"!=typeof t&&(t=function(e){return e}),{yLbFormatter:n,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,i=e.index,n=e.seriesIndex,a=e.j,s=this.w;return t(String(s.globals.seriesNames[i]),{series:s.globals.series,seriesIndex:n,dataPointIndex:a,w:s})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,i=e.j,n=e.ttItems,a=e.values,s=e.seriesName,o=e.shared,r=e.pColor,l=this.w,c=this.ttCtx,d=a.val,h=a.goalVals,u=a.xVal,p=a.xAxisTTVal,f=a.zVal,g=null;g=n[t].children,l.config.tooltip.fillSeriesColor&&(n[t].style.backgroundColor=r,g[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=u),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==p?p:u);var m=n[t].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=s||"");var v=n[t].querySelector(".apexcharts-tooltip-text-y-value");v&&(v.innerHTML=void 0!==d?d:""),g[0]&&g[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(r=l.config.tooltip.marker.fillColors[t]),g[0].style.backgroundColor=r),l.config.tooltip.marker.show||(g[0].style.display="none");var b=n[t].querySelector(".apexcharts-tooltip-text-goals-label"),x=n[t].querySelector(".apexcharts-tooltip-text-goals-value");if(h.length&&l.globals.seriesGoals[t]){var y=function(){var e="<div >",t="<div>";h.forEach((function(i,n){e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(i.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(i.attrs.name,"</div>"),t+="<div>".concat(i.val,"</div>")})),b.innerHTML=e+"</div>",x.innerHTML=t+"</div>"};o?l.globals.seriesGoals[t][i]&&Array.isArray(l.globals.seriesGoals[t][i])?y():(b.innerHTML="",x.innerHTML=""):y()}else b.innerHTML="",x.innerHTML="";null!==f&&(n[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,n[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==f?f:""),o&&g[0]&&(null==d||l.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||l.globals.collapsedSeriesIndices.indexOf(t)>-1?g[0].parentNode.style.display="none":g[0].parentNode.style.display=l.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(e){var t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var i=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");i&&(i.classList.add("apexcharts-active"),i.style.display=t.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,i=e.j,n=this.w,a=this.ctx.series.filteredSeriesX(),s="",o="",r=null,l=null,c={series:n.globals.series,seriesIndex:t,dataPointIndex:i,w:n},d=n.globals.ttZFormatter;null===i?l=n.globals.series[t]:n.globals.isXNumeric&&"treemap"!==n.config.chart.type?(s=a[t][i],0===a[t].length&&(s=a[this.tooltipUtil.getFirstActiveXArray(a)][i])):s=void 0!==n.globals.labels[i]?n.globals.labels[i]:"";var h=s;return s=n.globals.isXNumeric&&"datetime"===n.config.xaxis.type?new z(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new O(this.ctx).formatDate,w:this.w}):n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](h,c):n.globals.xLabelFormatter(h,c),void 0!==n.config.tooltip.x.formatter&&(s=n.globals.ttKeyFormatter(h,c)),n.globals.seriesZ.length>0&&n.globals.seriesZ[t].length>0&&(r=d(n.globals.seriesZ[t][i],n)),o="function"==typeof n.config.xaxis.tooltip.formatter?n.globals.xaxisTooltipFormatter(h,c):s,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(s)?s.join(" "):s,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:r}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,i=e.j,n=e.y1,a=e.y2,s=e.w,o=this.ttCtx.getElTooltip(),r=s.config.tooltip.custom;Array.isArray(r)&&r[t]&&(r=r[t]),o.innerHTML=r({ctx:this.ctx,series:s.globals.series,seriesIndex:t,dataPointIndex:i,y1:n,y2:a,w:s})}}]),e}(),pe=function(){function e(t){n(this,e),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return s(e,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,n=this.w,a=i.getElXCrosshairs(),s=e-i.xcrosshairsWidth/2,o=n.globals.labels.slice().length;if(null!==t&&(s=n.globals.gridWidth/o*t),null===a||n.globals.isBarHorizontal||(a.setAttribute("x",s),a.setAttribute("x1",s),a.setAttribute("x2",s),a.setAttribute("y2",n.globals.gridHeight),a.classList.add("apexcharts-active")),s<0&&(s=0),s>n.globals.gridWidth&&(s=n.globals.gridWidth),i.isXAxisTooltipEnabled){var r=s;"tickWidth"!==n.config.xaxis.crosshairs.width&&"barWidth"!==n.config.xaxis.crosshairs.width||(r=s+i.xcrosshairsWidth/2),this.moveXAxisTooltip(r)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;null!==t.ycrosshairs&&v.setAttrs(t.ycrosshairs,{y1:e,y2:e}),null!==t.ycrosshairsHidden&&v.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var n,a=i.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=i.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e))e+=t.globals.translateX,n=new v(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=n.width+"px",i.xaxisTooltip.style.left=e+"px",i.xaxisTooltip.style.top=a+"px"}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),a=t.globals.translateY+n,s=i.yaxisTTEls[e].getBoundingClientRect().height,o=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(o-=26),a-=s/2,-1===t.globals.ignoreYAxisIndexes.indexOf(e)?(i.yaxisTTEls[e].classList.add("apexcharts-active"),i.yaxisTTEls[e].style.top=a+"px",i.yaxisTTEls[e].style.left=o+t.config.yaxis[e].tooltip.offsetX+"px"):i.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,a=this.ttCtx,s=a.getElTooltip(),o=a.tooltipRect,r=null!==i?parseFloat(i):1,l=parseFloat(e)+r+5,c=parseFloat(t)+r/2;if(l>n.globals.gridWidth/2&&(l=l-o.ttWidth-r-10),l>n.globals.gridWidth-o.ttWidth-10&&(l=n.globals.gridWidth-o.ttWidth),l<-20&&(l=-20),n.config.tooltip.followCursor){var d=a.getElGrid().getBoundingClientRect();c=a.e.clientY+n.globals.translateY-d.top-o.ttHeight/2}else n.globals.isBarHorizontal||(o.ttHeight/2+c>n.globals.gridHeight&&(c=n.globals.gridHeight-o.ttHeight+n.globals.translateY),c<0&&(c=0));isNaN(l)||(l+=n.globals.translateX,s.style.left=l+"px",s.style.top=c+"px")}},{key:"moveMarkers",value:function(e,t){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[e]>0)for(var a=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),s=0;s<a.length;s++)parseInt(a[s].getAttribute("rel"),10)===t&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(t,a[s]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var i,n,a=this.w,s=this.ttCtx,o=a.globals.pointsArray,r=s.tooltipUtil.getHoverMarkerSize(t),l=a.config.series[t].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){i=o[t][e][0],n=o[t][e][1]?o[t][e][1]:0;var c=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers circle"));c&&n<a.globals.gridHeight&&n>0&&(c.setAttribute("r",r),c.setAttribute("cx",i),c.setAttribute("cy",n)),this.moveXCrosshairs(i),s.fixedTooltip||this.moveTooltip(i,n,r)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,i=this.ttCtx,n=i.w,a=0,s=0,o=n.globals.pointsArray;t=new E(this.ctx).getActiveConfigSeriesIndex(!0);var r=i.tooltipUtil.getHoverMarkerSize(t);o[t]&&(a=o[t][e][0],s=o[t][e][1]);var l=i.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<n.globals.series.length;c++){var d=o[c];if(n.globals.comboCharts&&void 0===d&&l.splice(c,0,null),d&&d.length){var h=o[c][e][1];l[c].setAttribute("cx",a),null!==h&&!isNaN(h)&&h<n.globals.gridHeight+r&&h+r>0?(l[c]&&l[c].setAttribute("r",r),l[c]&&l[c].setAttribute("cy",h)):l[c]&&l[c].setAttribute("r",0)}}if(this.moveXCrosshairs(a),!i.fixedTooltip){var u=s||n.globals.gridHeight;this.moveTooltip(a,u,r)}}},{key:"moveStickyTooltipOverBars",value:function(e){var t=this.w,i=this.ttCtx,n=t.globals.columnSeries?t.globals.columnSeries.length:t.globals.series.length,a=n>=2&&n%2==0?Math.floor(n/2):Math.floor(n/2)+1;t.globals.isBarHorizontal&&(a=new E(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var s=t.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(a,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"']")),o=s?parseFloat(s.getAttribute("cx")):0,r=s?parseFloat(s.getAttribute("cy")):0,l=s?parseFloat(s.getAttribute("barWidth")):0,c=s?parseFloat(s.getAttribute("barHeight")):0,d=i.getElGrid().getBoundingClientRect(),h=s.classList.contains("apexcharts-candlestick-area")||s.classList.contains("apexcharts-boxPlot-area");if(t.globals.isXNumeric?(s&&!h&&(o-=n%2!=0?l/2:0),s&&h&&t.globals.comboCharts&&(o-=l/2)):t.globals.isBarHorizontal||(o=i.xAxisTicksPositions[e-1]+i.dataPointsDividedWidth/2,isNaN(o)&&(o=i.xAxisTicksPositions[e]-i.dataPointsDividedWidth/2)),t.globals.isBarHorizontal?(r>t.globals.gridHeight/2&&(r-=i.tooltipRect.ttHeight),(r=r+t.config.grid.padding.top+c/3)+c>t.globals.gridHeight&&(r=t.globals.gridHeight-c)):t.config.tooltip.followCursor?r=i.e.clientY-d.top-i.tooltipRect.ttHeight/2:r+i.tooltipRect.ttHeight+15>t.globals.gridHeight&&(r=t.globals.gridHeight),r<-10&&(r=-10),t.globals.isBarHorizontal||this.moveXCrosshairs(o),!i.fixedTooltip){var u=r||t.globals.gridHeight;this.moveTooltip(o,u)}}}]),e}(),fe=function(){function e(t){n(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new pe(t)}return s(e,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new v(this.ctx),i=new A(this.ctx),n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=h(n),e.config.chart.stacked&&n.sort((function(e,t){return parseFloat(e.getAttribute("data:realIndex"))-parseFloat(t.getAttribute("data:realIndex"))}));for(var a=0;a<n.length;a++){var s=n[a].querySelector(".apexcharts-series-markers-wrap");if(null!==s){var o=void 0,r="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==e.config.chart.type&&"area"!==e.config.chart.type||e.globals.comboCharts||e.config.tooltip.intersect||(r+=" no-pointer-events");var l=i.getMarkerConfig({cssClass:r,seriesIndex:Number(s.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(e.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(o.node),s.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.w;"bubble"!==a.config.chart.type&&this.newPointSize(e,t);var s=t.getAttribute("cx"),o=t.getAttribute("cy");if(null!==i&&null!==n&&(s=i,o=n),this.tooltipPosition.moveXCrosshairs(s),!this.fixedTooltip){if("radar"===a.config.chart.type){var r=this.ttCtx.getElGrid().getBoundingClientRect();s=this.ttCtx.e.clientX-r.left}this.tooltipPosition.moveTooltip(s,o,a.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,i=this,n=this.ttCtx,a=e,s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,r=0;r<s.length;r++){var l=s[r].getAttribute("rel"),c=s[r].getAttribute("index");if(void 0===o&&(o=t.globals.markers.size[c]+t.config.markers.hover.sizeOffset),a===parseInt(l,10)){i.newPointSize(a,s[r]);var d=s[r].getAttribute("cx"),h=s[r].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(d),n.fixedTooltip||i.tooltipPosition.moveTooltip(d,h,o)}else i.oldPointSize(s[r])}}},{key:"newPointSize",value:function(e,t){var i=this.w,n=i.config.markers.hover.size,a=0===e?t.parentNode.firstChild:t.parentNode.lastChild;if("0"!==a.getAttribute("default-marker-size")){var s=parseInt(a.getAttribute("index"),10);void 0===n&&(n=i.globals.markers.size[s]+i.config.markers.hover.sizeOffset),n<0&&(n=0),a.setAttribute("r",n)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var i=parseFloat(e[t].getAttribute("default-marker-size"));f.isNumber(i)&&i>=0?e[t].setAttribute("r",i):e[t].setAttribute("r",0)}}}]),e}(),ge=function(){function e(t){n(this,e),this.w=t.w,this.ttCtx=t}return s(e,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,i=e.opt,n=e.x,a=e.y,s=e.type,o=this.ttCtx,r=this.w;if(t.target.classList.contains("apexcharts-".concat(s,"-rect"))){var l=this.getAttr(t,"i"),c=this.getAttr(t,"j"),d=this.getAttr(t,"cx"),h=this.getAttr(t,"cy"),u=this.getAttr(t,"width"),p=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:l,j:c,shared:!1,e:t}),r.globals.capturedSeriesIndex=l,r.globals.capturedDataPointIndex=c,n=d+o.tooltipRect.ttWidth/2+u,a=h+o.tooltipRect.ttHeight/2-p/2,o.tooltipPosition.moveXCrosshairs(d+u/2),n>r.globals.gridWidth/2&&(n=d-o.tooltipRect.ttWidth/2+u),o.w.config.tooltip.followCursor){var f=r.globals.dom.elWrap.getBoundingClientRect();n=r.globals.clientX-f.left-(n>r.globals.gridWidth/2?o.tooltipRect.ttWidth:0),a=r.globals.clientY-f.top-(a>r.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:n,y:a}}},{key:"handleMarkerTooltip",value:function(e){var t,i,n=e.e,a=e.opt,s=e.x,o=e.y,r=this.w,l=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var c=parseInt(a.paths.getAttribute("cx"),10),d=parseInt(a.paths.getAttribute("cy"),10),h=parseFloat(a.paths.getAttribute("val"));if(i=parseInt(a.paths.getAttribute("rel"),10),t=parseInt(a.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var u=f.findAncestor(a.paths,"apexcharts-series");u&&(t=parseInt(u.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:t,j:i,shared:!l.showOnIntersect&&r.config.tooltip.shared,e:n}),"mouseup"===n.type&&l.markerClick(n,t,i),r.globals.capturedSeriesIndex=t,r.globals.capturedDataPointIndex=i,s=c,o=d+r.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var p=l.getElGrid().getBoundingClientRect();o=l.e.clientY+r.globals.translateY-p.top}h<0&&(o=d),l.marker.enlargeCurrentPoint(i,a.paths,s,o)}return{x:s,y:o}}},{key:"handleBarTooltip",value:function(e){var t,i,n=e.e,a=e.opt,s=this.w,o=this.ttCtx,r=o.getElTooltip(),l=0,c=0,d=0,h=this.getBarTooltipXY({e:n,opt:a});t=h.i;var u=h.barHeight,p=h.j;s.globals.capturedSeriesIndex=t,s.globals.capturedDataPointIndex=p,s.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!s.config.tooltip.shared?(c=h.x,d=h.y,i=Array.isArray(s.config.stroke.width)?s.config.stroke.width[t]:s.config.stroke.width,l=c):s.globals.comboCharts||s.config.tooltip.shared||(l/=2),isNaN(d)?d=s.globals.svgHeight-o.tooltipRect.ttHeight:d<0&&(d=0);var f=parseInt(a.paths.parentNode.getAttribute("data:realIndex"),10),g=s.globals.isMultipleYAxis?s.config.yaxis[f]&&s.config.yaxis[f].reversed:s.config.yaxis[0].reversed;if(c+o.tooltipRect.ttWidth>s.globals.gridWidth&&!g?c-=o.tooltipRect.ttWidth:c<0&&(c=0),o.w.config.tooltip.followCursor){var m=o.getElGrid().getBoundingClientRect();d=o.e.clientY-m.top}null===o.tooltip&&(o.tooltip=s.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),s.config.tooltip.shared||(s.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(l+i/2):o.tooltipPosition.moveXCrosshairs(l)),!o.fixedTooltip&&(!s.config.tooltip.shared||s.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(g&&(c-=o.tooltipRect.ttWidth)<0&&(c=0),!g||s.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(d=d+u-2*(s.globals.series[t][p]<0?u:0)),o.tooltipRect.ttHeight+d>s.globals.gridHeight?d=s.globals.gridHeight-o.tooltipRect.ttHeight+s.globals.translateY:(d=d+s.globals.translateY-o.tooltipRect.ttHeight/2)<0&&(d=0),r.style.left=c+s.globals.translateX+"px",r.style.top=d+"px")}},{key:"getBarTooltipXY",value:function(e){var t=e.e,i=e.opt,n=this.w,a=null,s=this.ttCtx,o=0,r=0,l=0,c=0,d=0,h=t.target.classList;if(h.contains("apexcharts-bar-area")||h.contains("apexcharts-candlestick-area")||h.contains("apexcharts-boxPlot-area")||h.contains("apexcharts-rangebar-area")){var u=t.target,p=u.getBoundingClientRect(),f=i.elGrid.getBoundingClientRect(),g=p.height;d=p.height;var m=p.width,v=parseInt(u.getAttribute("cx"),10),b=parseInt(u.getAttribute("cy"),10);c=parseFloat(u.getAttribute("barWidth"));var x="touchmove"===t.type?t.touches[0].clientX:t.clientX;a=parseInt(u.getAttribute("j"),10),o=parseInt(u.parentNode.getAttribute("rel"),10)-1;var y=u.getAttribute("data-range-y1"),w=u.getAttribute("data-range-y2");n.globals.comboCharts&&(o=parseInt(u.parentNode.getAttribute("data:realIndex"),10)),s.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:o,j:a,y1:y?parseInt(y,10):null,y2:w?parseInt(w,10):null,shared:!s.showOnIntersect&&n.config.tooltip.shared,e:t}),n.config.tooltip.followCursor?n.globals.isBarHorizontal?(r=x-f.left+15,l=b-s.dataPointsDividedHeight+g/2-s.tooltipRect.ttHeight/2):(r=n.globals.isXNumeric?v-m/2:v-s.dataPointsDividedWidth+m/2,l=t.clientY-f.top-s.tooltipRect.ttHeight/2-15):n.globals.isBarHorizontal?((r=v)<s.xyRatios.baseLineInvertedY&&(r=v-s.tooltipRect.ttWidth),l=b-s.dataPointsDividedHeight+g/2-s.tooltipRect.ttHeight/2):(r=n.globals.isXNumeric?v-m/2:v-s.dataPointsDividedWidth+m/2,l=b)}return{x:r,y:l,barHeight:d,barWidth:c,i:o,j:a}}}]),e}(),me=function(){function e(t){n(this,e),this.w=t.w,this.ttCtx=t}return s(e,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,i="bottom"===e.config.xaxis.position;t.xaxisOffY=i?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",a=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&null===e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,i=function(i){var n=e.config.yaxis[i].opposite||e.config.yaxis[i].crosshairs.opposite;t.yaxisOffX=n?e.globals.gridWidth+1:1;var a="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");e.globals.yAxisSameScaleIndices.map((function(t,n){t.map((function(t,n){n===i&&(a+=e.config.yaxis[n].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var s=e.globals.dom.elWrap;null===e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),s.appendChild(t.yaxisTooltip),0===i&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[i]=document.createElement("div"),t.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[i]))},n=0;n<e.config.yaxis.length;n++)i(n)}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,i=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var n=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==n&&"barWidth"===e.config.xaxis.crosshairs.width){var a=parseFloat(n.getAttribute("barWidth"));t.xcrosshairsWidth=a}else if("tickWidth"===e.config.xaxis.crosshairs.width){var s=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/s}}else if("tickWidth"===e.config.xaxis.crosshairs.width){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if("barWidth"===e.config.xaxis.crosshairs.width){var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==r){var l=parseFloat(r.getAttribute("barWidth"));t.xcrosshairsWidth=l}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),null!==i&&t.xcrosshairsWidth>0&&i.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,i){var n=this.ttCtx,a=this.w,s=a.globals.yLabelFormatters[e];if(n.yaxisTooltips[e]){var o=n.getElGrid().getBoundingClientRect(),r=(t-o.top)*i.yRatio[e],l=a.globals.maxYArr[e]-a.globals.minYArr[e],c=a.globals.minYArr[e]+(l-r);n.tooltipPosition.moveYCrosshairs(t-o.top),n.yaxisTooltipText[e].innerHTML=s(c),n.tooltipPosition.moveYAxisTooltip(e)}}}]),e}(),ve=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.tConfig=i.config.tooltip,this.tooltipUtil=new he(this),this.tooltipLabels=new ue(this),this.tooltipPosition=new pe(this),this.marker=new fe(this),this.intersect=new ge(this),this.axesTooltip=new me(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!i.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return s(e,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(e,i){return!!(e.show&&e.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&i.classList.add(t.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(i),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new X(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==t.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==t.config.markers.size&&0!==t.globals.markers.largestSize||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var a=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(a=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(a),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,i=this.w,n=[],a=this.getElTooltip(),s=function(s){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),o.style.order=i.config.tooltip.inverseOrder?e-s:s+1,t.tConfig.shared&&t.tConfig.enabledOnSeries&&Array.isArray(t.tConfig.enabledOnSeries)&&t.tConfig.enabledOnSeries.indexOf(s)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var r=document.createElement("span");r.classList.add("apexcharts-tooltip-marker"),r.style.backgroundColor=i.globals.colors[s],o.appendChild(r);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=t.tConfig.style.fontFamily||i.config.chart.fontFamily,l.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(e){var t=document.createElement("div");t.classList.add("apexcharts-tooltip-".concat(e,"-group"));var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(e,"-label")),t.appendChild(i);var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(e,"-value")),t.appendChild(n),l.appendChild(t)})),o.appendChild(l),a.appendChild(o),n.push(o)},o=0;o<e;o++)s(o);return n}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,i=this.getElTooltip(),n=!("bar"!==t&&"candlestick"!==t&&"boxPlot"!==t&&"rangeBar"!==t),a="area"===t||"line"===t||"scatter"===t||"bubble"===t||"radar"===t,s=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var r,l=[],c=[],d={hoverArea:s,elGrid:o,tooltipEl:i,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(e.globals.axisCharts&&(a?r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==t&&"treemap"!==t||(r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),r&&r.length))for(var h=0;h<r.length;h++)l.push(r[h].getAttribute("cy")),c.push(r[h].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([s],d);else if(n&&!e.globals.comboCharts||a&&this.showOnIntersect)this.addDatapointEventsListeners(d);else if(!e.globals.axisCharts||"heatmap"===t||"treemap"===t){var u=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(u,d)}if(this.showOnIntersect){var p=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,d),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(d)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),i=t.getBoundingClientRect(),n=i.width+10,a=i.height+10,s=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,r=this.tConfig.fixed.position.toLowerCase();return r.indexOf("right")>-1&&(s=s+e.globals.svgWidth-n+10),r.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-a-10),t.style.left=s+"px",t.style.top=o+"px",{x:s,y:o,ttWidth:n,ttHeight:a}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var i=this,n=function(n){var a={paths:e[n],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(t){return e[n].addEventListener(t,i.onSeriesHover.bind(i,a),{capture:!1,passive:!0})}))},a=0;a<e.length;a++)n(a)}},{key:"onSeriesHover",value:function(e,t){var i=this,n=Date.now()-this.lastHoverTime;n>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){i.seriesHover(e,t)}),100-n))}},{key:"seriesHover",value:function(e,t){var i=this;this.lastHoverTime=Date.now();var n=[],a=this.w;a.config.chart.group&&(n=this.ctx.getGroupedCharts()),a.globals.axisCharts&&(a.globals.minX===-1/0&&a.globals.maxX===1/0||0===a.globals.dataPoints)||(n.length?n.forEach((function(n){var a=i.getElTooltip(n),s={paths:e.paths,tooltipEl:a,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:n.w.globals.tooltip.ttItems};n.w.globals.minX===i.w.globals.minX&&n.w.globals.maxX===i.w.globals.maxX&&n.w.globals.tooltip.seriesHoverByContext({chartCtx:n,ttCtx:n.w.globals.tooltip,opt:s,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,i=e.ttCtx,n=e.opt,a=e.e,s=t.w,o=this.getElTooltip();o&&(i.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},i.e=a,!i.tooltipUtil.hasBars()||s.globals.comboCharts||i.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new E(t).toggleSeriesOnHover(a,a.target.parentNode),i.fixedTooltip&&i.drawFixedTooltipRect(),s.globals.axisCharts?i.axisChartsTooltips({e:a,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:a,opt:n,tooltipRect:i.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,i,n=e.e,a=e.opt,s=this.w,o=a.elGrid.getBoundingClientRect(),r="touchmove"===n.type?n.touches[0].clientX:n.clientX,l="touchmove"===n.type?n.touches[0].clientY:n.clientY;if(this.clientY=l,this.clientX=r,s.globals.capturedSeriesIndex=-1,s.globals.capturedDataPointIndex=-1,l<o.top||l>o.top+o.height)this.handleMouseOut(a);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!s.config.tooltip.shared){var c=parseInt(a.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(a)}var d=this.getElTooltip(),h=this.getElXCrosshairs(),u=s.globals.xyCharts||"bar"===s.config.chart.type&&!s.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||s.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===n.type||"touchmove"===n.type||"mouseup"===n.type){if(s.globals.collapsedSeries.length+s.globals.ancillaryCollapsedSeries.length===s.globals.series.length)return;null!==h&&h.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter((function(e){return!0===e}));if(null!==this.ycrosshairs&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),u&&!this.showOnIntersect)this.handleStickyTooltip(n,r,l,a);else if("heatmap"===s.config.chart.type||"treemap"===s.config.chart.type){var f=this.intersect.handleHeatTreeTooltip({e:n,opt:a,x:t,y:i,type:s.config.chart.type});t=f.x,i=f.y,d.style.left=t+"px",d.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:a}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:a,x:t,y:i});if(this.yaxisTooltips.length)for(var g=0;g<s.config.yaxis.length;g++)this.axesTooltip.drawYaxisTooltipText(g,l,this.xyRatios);a.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==n.type&&"touchend"!==n.type||this.handleMouseOut(a)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,i=e.opt,n=e.tooltipRect,a=this.w,s=i.paths.getAttribute("rel"),o=this.getElTooltip(),r=a.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===t.type||"touchmove"===t.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(s,10)-1,shared:!1});var l=a.globals.clientX-r.left-n.ttWidth/2,c=a.globals.clientY-r.top-n.ttHeight-10;if(o.style.left=l+"px",o.style.top=c+"px",a.config.legend.tooltipHoverFormatter){var d=s-1,h=(0,a.config.legend.tooltipHoverFormatter)(this.legendLabels[d].getAttribute("data:default-text"),{seriesIndex:d,dataPointIndex:d,w:a});this.legendLabels[d].innerHTML=h}}else"mouseout"!==t.type&&"touchend"!==t.type||(o.classList.remove("apexcharts-active"),a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)})))}},{key:"handleStickyTooltip",value:function(e,t,i,n){var a=this.w,s=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:t,clientY:i}),o=s.j,r=s.capturedSeries,l=n.elGrid.getBoundingClientRect();s.hoverX<0||s.hoverX>l.width?this.handleMouseOut(n):null!==r?this.handleStickyCapturedSeries(e,r,n,o):(this.tooltipUtil.isXoverlap(o)||a.globals.isBarHorizontal)&&this.create(e,this,0,o,n.ttItems)}},{key:"handleStickyCapturedSeries",value:function(e,t,i,n){var a=this.w;this.tConfig.shared||null!==a.globals.series[t][n]?void 0!==a.globals.series[t][n]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,n,i.ttItems):this.create(e,this,t,n,i.ttItems,!1):this.tooltipUtil.isXoverlap(n)&&this.create(e,this,0,n,i.ttItems):this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new v(this.ctx),i=e.globals.dom.Paper.select(".apexcharts-bar-area"),n=0;n<i.length;n++)t.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(e){var t=this.w,i=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==t.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}))}},{key:"markerClick",value:function(e,t,i){var n=this.w;"function"==typeof n.config.chart.events.markerClick&&n.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:i,w:n}])}},{key:"create",value:function(e,t,i,n,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,r=t;"mouseup"===e.type&&this.markerClick(e,i,n),null===s&&(s=this.tConfig.shared);var l=this.tooltipUtil.hasMarkers(),c=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var d=o.config.legend.tooltipHoverFormatter,h=Array.from(this.legendLabels);h.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}));for(var u=0;u<h.length;u++){var p=h[u],f=parseInt(p.getAttribute("i"),10),g=decodeURIComponent(p.getAttribute("data:default-text")),m=d(g,{seriesIndex:s?f:i,dataPointIndex:n,w:o});if(s)p.innerHTML=o.globals.collapsedSeriesIndices.indexOf(f)<0?m:g;else if(p.innerHTML=f===i?m:g,i===f)break}}if(s){if(r.tooltipLabels.drawSeriesTexts({ttItems:a,i:i,j:n,shared:!this.showOnIntersect&&this.tConfig.shared}),l&&(o.globals.markers.largestSize>0?r.marker.enlargePoints(n):r.tooltipPosition.moveDynamicPointsOnHover(n)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(c),this.barSeriesHeight>0)){var b=new v(this.ctx),x=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(n);for(var y=0;y<x.length;y++)b.pathMouseEnter(x[y])}}else r.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:a,i:i,j:n}),this.tooltipUtil.hasBars()&&r.tooltipPosition.moveStickyTooltipOverBars(n),l&&r.tooltipPosition.moveMarkers(i,n)}}]),e}(),be=function(e){r(a,e);var i=d(a);function a(){return n(this,a),i.apply(this,arguments)}return s(a,[{key:"draw",value:function(e,i){var n=this,a=this.w;this.graphics=new v(this.ctx),this.bar=new M(this.ctx,this.xyRatios);var s=new b(this.ctx,a);e=s.getLogSeries(e),this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),"100%"===a.config.chart.stackType&&(e=a.globals.seriesPercent.slice()),this.series=e,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<e.length;o++)e[o].length>0&&(this.totalItems+=e[o].length);for(var r=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),l=0,c=0,d=function(s,o){var d=void 0,h=void 0,u=void 0,p=void 0,g=[],m=[],v=a.globals.comboCharts?i[s]:s;n.yRatio.length>1&&(n.yaxisIndex=v),n.isReversed=a.config.yaxis[n.yaxisIndex]&&a.config.yaxis[n.yaxisIndex].reversed;var b=n.graphics.group({class:"apexcharts-series",seriesName:f.escapeString(a.globals.seriesNames[v]),rel:s+1,"data:realIndex":v});n.ctx.series.addCollapsedClassToSeries(b,v);var x=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":v}),y=0,w=0,k=n.initialPositions(l,c,d,h,u,p);c=k.y,y=k.barHeight,h=k.yDivision,p=k.zeroW,l=k.x,w=k.barWidth,d=k.xDivision,u=k.zeroH,n.yArrj=[],n.yArrjF=[],n.yArrjVal=[],n.xArrj=[],n.xArrjF=[],n.xArrjVal=[],1===n.prevY.length&&n.prevY[0].every((function(e){return isNaN(e)}))&&(n.prevY[0]=n.prevY[0].map((function(e){return u})),n.prevYF[0]=n.prevYF[0].map((function(e){return 0})));for(var S=0;S<a.globals.dataPoints;S++){var C=n.barHelpers.getStrokeWidth(s,S,v),_={indexes:{i:s,j:S,realIndex:v,bc:o},strokeWidth:C,x:l,y:c,elSeries:b},T=null;n.isHorizontal?(T=n.drawStackedBarPaths(t(t({},_),{},{zeroW:p,barHeight:y,yDivision:h})),w=n.series[s][S]/n.invertedYRatio):(T=n.drawStackedColumnPaths(t(t({},_),{},{xDivision:d,barWidth:w,zeroH:u})),y=n.series[s][S]/n.yRatio[n.yaxisIndex]),c=T.y,l=T.x,g.push(l),m.push(c);var A=n.barHelpers.getPathFillColor(e,s,S,v);b=n.renderSeries({realIndex:v,pathFill:A,j:S,i:s,pathFrom:T.pathFrom,pathTo:T.pathTo,strokeWidth:C,elSeries:b,x:l,y:c,series:e,barHeight:y,barWidth:w,elDataLabelsWrap:x,type:"bar",visibleSeries:0})}a.globals.seriesXvalues[v]=g,a.globals.seriesYvalues[v]=m,n.prevY.push(n.yArrj),n.prevYF.push(n.yArrjF),n.prevYVal.push(n.yArrjVal),n.prevX.push(n.xArrj),n.prevXF.push(n.xArrjF),n.prevXVal.push(n.xArrjVal),r.add(b)},h=0,u=0;h<e.length;h++,u++)d(h,u);return r}},{key:"initialPositions",value:function(e,t,i,n,a,s){var o,r,l=this.w;return this.isHorizontal?(o=(o=n=l.globals.gridHeight/l.globals.dataPoints)*parseInt(l.config.plotOptions.bar.barHeight,10)/100,s=this.baseLineInvertedY+l.globals.padHorizontal+(this.isReversed?l.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),t=(n-o)/2):(r=i=l.globals.gridWidth/l.globals.dataPoints,r=l.globals.isXNumeric&&l.globals.dataPoints>1?(i=l.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:r*parseInt(l.config.plotOptions.bar.columnWidth,10)/100,a=this.baseLineY[this.yaxisIndex]+(this.isReversed?l.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),e=l.globals.padHorizontal+(i-r)/2),{x:e,y:t,yDivision:n,xDivision:i,barHeight:o,barWidth:r,zeroH:a,zeroW:s}}},{key:"drawStackedBarPaths",value:function(e){for(var t,i=e.indexes,n=e.barHeight,a=e.strokeWidth,s=e.zeroW,o=e.x,r=e.y,l=e.yDivision,c=e.elSeries,d=this.w,h=r,u=i.i,p=i.j,f=0,g=0;g<this.prevXF.length;g++)f+=this.prevXF[g][p];if(u>0){var m=s;this.prevXVal[u-1][p]<0?m=this.series[u][p]>=0?this.prevX[u-1][p]+f-2*(this.isReversed?f:0):this.prevX[u-1][p]:this.prevXVal[u-1][p]>=0&&(m=this.series[u][p]>=0?this.prevX[u-1][p]:this.prevX[u-1][p]-f+2*(this.isReversed?f:0)),t=m}else t=s;o=null===this.series[u][p]?t:t+this.series[u][p]/this.invertedYRatio-2*(this.isReversed?this.series[u][p]/this.invertedYRatio:0);var v=this.barHelpers.getBarpaths({barYPosition:h,barHeight:n,x1:t,x2:o,strokeWidth:a,series:this.series,realIndex:i.realIndex,i:u,j:p,w:d});return this.barHelpers.barBackground({j:p,i:u,y1:h,y2:n,elSeries:c}),r+=l,{pathTo:v.pathTo,pathFrom:v.pathFrom,x:o,y:r}}},{key:"drawStackedColumnPaths",value:function(e){var t=e.indexes,i=e.x,n=e.y,a=e.xDivision,s=e.barWidth,o=e.zeroH;e.strokeWidth;var r=e.elSeries,l=this.w,c=t.i,d=t.j,h=t.bc;if(l.globals.isXNumeric){var u=l.globals.seriesX[c][d];u||(u=0),i=(u-l.globals.minX)/this.xRatio-s/2}for(var p,f=i,g=0,m=0;m<this.prevYF.length;m++)g+=isNaN(this.prevYF[m][d])?0:this.prevYF[m][d];if(c>0&&!l.globals.isXNumeric||c>0&&l.globals.isXNumeric&&l.globals.seriesX[c-1][d]===l.globals.seriesX[c][d]){var v,b,x=Math.min(this.yRatio.length+1,c+1);if(void 0!==this.prevY[c-1])for(var y=1;y<x;y++)if(!isNaN(this.prevY[c-y][d])){b=this.prevY[c-y][d];break}for(var w=1;w<x;w++){if(this.prevYVal[c-w][d]<0){v=this.series[c][d]>=0?b-g+2*(this.isReversed?g:0):b;break}if(this.prevYVal[c-w][d]>=0){v=this.series[c][d]>=0?b:b+g-2*(this.isReversed?g:0);break}}void 0===v&&(v=l.globals.gridHeight),p=this.prevYF[0].every((function(e){return 0===e}))&&this.prevYF.slice(1,c).every((function(e){return e.every((function(e){return isNaN(e)}))}))?l.globals.gridHeight-o:v}else p=l.globals.gridHeight-o;n=p-this.series[c][d]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[c][d]/this.yRatio[this.yaxisIndex]:0);var k=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:s,y1:p,y2:n,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:t.realIndex,i:c,j:d,w:l});return this.barHelpers.barBackground({bc:h,j:d,i:c,x1:f,x2:s,elSeries:r}),i+=a,{pathTo:k.pathTo,pathFrom:k.pathFrom,x:l.globals.isXNumeric?i-a:i,y:n}}}]),a}(M),xe=function(e){r(a,e);var i=d(a);function a(){return n(this,a),i.apply(this,arguments)}return s(a,[{key:"draw",value:function(e,i){var n=this,a=this.w,s=new v(this.ctx),o=new T(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal;var r=new b(this.ctx,a);e=r.getLogSeries(e),this.series=e,this.yRatio=r.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);for(var l=s.group({class:"apexcharts-".concat(a.config.chart.type,"-series apexcharts-plot-series")}),c=function(r){n.isBoxPlot="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[r].type;var c,d,h,u,p,g,m=void 0,v=void 0,b=[],x=[],y=a.globals.comboCharts?i[r]:r,w=s.group({class:"apexcharts-series",seriesName:f.escapeString(a.globals.seriesNames[y]),rel:r+1,"data:realIndex":y});n.ctx.series.addCollapsedClassToSeries(w,y),e[r].length>0&&(n.visibleI=n.visibleI+1),n.yRatio.length>1&&(n.yaxisIndex=y);var k=n.barHelpers.initialPositions();v=k.y,p=k.barHeight,d=k.yDivision,u=k.zeroW,m=k.x,g=k.barWidth,c=k.xDivision,h=k.zeroH,x.push(m+g/2);for(var S=s.group({class:"apexcharts-datalabels","data:realIndex":y}),C=function(i){var s=n.barHelpers.getStrokeWidth(r,i,y),l=null,f={indexes:{i:r,j:i,realIndex:y},x:m,y:v,strokeWidth:s,elSeries:w};l=n.isHorizontal?n.drawHorizontalBoxPaths(t(t({},f),{},{yDivision:d,barHeight:p,zeroW:u})):n.drawVerticalBoxPaths(t(t({},f),{},{xDivision:c,barWidth:g,zeroH:h})),v=l.y,m=l.x,i>0&&x.push(m+g/2),b.push(v),l.pathTo.forEach((function(t,c){var d=!n.isBoxPlot&&n.candlestickOptions.wick.useFillColor?l.color[c]:a.globals.stroke.colors[r],h=o.fillPath({seriesNumber:y,dataPointIndex:i,color:l.color[c],value:e[r][i]});n.renderSeries({realIndex:y,pathFill:h,lineFill:d,j:i,i:r,pathFrom:l.pathFrom,pathTo:t,strokeWidth:s,elSeries:w,x:m,y:v,series:e,barHeight:p,barWidth:g,elDataLabelsWrap:S,visibleSeries:n.visibleI,type:a.config.chart.type})}))},_=0;_<a.globals.dataPoints;_++)C(_);a.globals.seriesXvalues[y]=x,a.globals.seriesYvalues[y]=b,l.add(w)},d=0;d<e.length;d++)c(d);return l}},{key:"drawVerticalBoxPaths",value:function(e){var t=e.indexes,i=e.x;e.y;var n=e.xDivision,a=e.barWidth,s=e.zeroH,o=e.strokeWidth,r=this.w,l=new v(this.ctx),c=t.i,d=t.j,h=!0,u=r.config.plotOptions.candlestick.colors.upward,p=r.config.plotOptions.candlestick.colors.downward,f="";this.isBoxPlot&&(f=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var g=this.yRatio[this.yaxisIndex],m=t.realIndex,b=this.getOHLCValue(m,d),x=s,y=s;b.o>b.c&&(h=!1);var w=Math.min(b.o,b.c),k=Math.max(b.o,b.c),S=b.m;r.globals.isXNumeric&&(i=(r.globals.seriesX[m][d]-r.globals.minX)/this.xRatio-a/2);var C=i+a*this.visibleI;void 0===this.series[c][d]||null===this.series[c][d]?(w=s,k=s):(w=s-w/g,k=s-k/g,x=s-b.h/g,y=s-b.l/g,S=s-b.m/g);var _=l.move(C,s),T=l.move(C+a/2,w);return r.globals.previousPaths.length>0&&(T=this.getPreviousPath(m,d,!0)),_=this.isBoxPlot?[l.move(C,w)+l.line(C+a/2,w)+l.line(C+a/2,x)+l.line(C+a/4,x)+l.line(C+a-a/4,x)+l.line(C+a/2,x)+l.line(C+a/2,w)+l.line(C+a,w)+l.line(C+a,S)+l.line(C,S)+l.line(C,w+o/2),l.move(C,S)+l.line(C+a,S)+l.line(C+a,k)+l.line(C+a/2,k)+l.line(C+a/2,y)+l.line(C+a-a/4,y)+l.line(C+a/4,y)+l.line(C+a/2,y)+l.line(C+a/2,k)+l.line(C,k)+l.line(C,S)+"z"]:[l.move(C,k)+l.line(C+a/2,k)+l.line(C+a/2,x)+l.line(C+a/2,k)+l.line(C+a,k)+l.line(C+a,w)+l.line(C+a/2,w)+l.line(C+a/2,y)+l.line(C+a/2,w)+l.line(C,w)+l.line(C,k-o/2)],T+=l.move(C,w),r.globals.isXNumeric||(i+=n),{pathTo:_,pathFrom:T,x:i,y:k,barXPosition:C,color:this.isBoxPlot?f:h?[u]:[p]}}},{key:"drawHorizontalBoxPaths",value:function(e){var t=e.indexes;e.x;var i=e.y,n=e.yDivision,a=e.barHeight,s=e.zeroW,o=e.strokeWidth,r=this.w,l=new v(this.ctx),c=t.i,d=t.j,h=this.boxOptions.colors.lower;this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var u=this.invertedYRatio,p=t.realIndex,f=this.getOHLCValue(p,d),g=s,m=s,b=Math.min(f.o,f.c),x=Math.max(f.o,f.c),y=f.m;r.globals.isXNumeric&&(i=(r.globals.seriesX[p][d]-r.globals.minX)/this.invertedXRatio-a/2);var w=i+a*this.visibleI;void 0===this.series[c][d]||null===this.series[c][d]?(b=s,x=s):(b=s+b/u,x=s+x/u,g=s+f.h/u,m=s+f.l/u,y=s+f.m/u);var k=l.move(s,w),S=l.move(b,w+a/2);return r.globals.previousPaths.length>0&&(S=this.getPreviousPath(p,d,!0)),k=[l.move(b,w)+l.line(b,w+a/2)+l.line(g,w+a/2)+l.line(g,w+a/2-a/4)+l.line(g,w+a/2+a/4)+l.line(g,w+a/2)+l.line(b,w+a/2)+l.line(b,w+a)+l.line(y,w+a)+l.line(y,w)+l.line(b+o/2,w),l.move(y,w)+l.line(y,w+a)+l.line(x,w+a)+l.line(x,w+a/2)+l.line(m,w+a/2)+l.line(m,w+a-a/4)+l.line(m,w+a/4)+l.line(m,w+a/2)+l.line(x,w+a/2)+l.line(x,w)+l.line(y,w)+"z"],S+=l.move(b,w),r.globals.isXNumeric||(i+=n),{pathTo:k,pathFrom:S,x:x,y:i,barYPosition:w,color:h}}},{key:"getOHLCValue",value:function(e,t){var i=this.w;return{o:this.isBoxPlot?i.globals.seriesCandleH[e][t]:i.globals.seriesCandleO[e][t],h:this.isBoxPlot?i.globals.seriesCandleO[e][t]:i.globals.seriesCandleH[e][t],m:i.globals.seriesCandleM[e][t],l:this.isBoxPlot?i.globals.seriesCandleC[e][t]:i.globals.seriesCandleL[e][t],c:this.isBoxPlot?i.globals.seriesCandleL[e][t]:i.globals.seriesCandleC[e][t]}}}]),a}(M),ye=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,i=e.config.plotOptions[e.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(e,i){e.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,i,n){var a=this.w,s=1,o=a.config.plotOptions[e].shadeIntensity,r=this.determineColor(e,t,i);a.globals.hasNegs||n?s=a.config.plotOptions[e].reverseNegativeShade?r.percent<0?r.percent/100*(1.25*o):(1-r.percent/100)*(1.25*o):r.percent<=0?1-(1+r.percent/100)*o:(1-r.percent/100)*o:(s=1-r.percent/100,"treemap"===e&&(s=(1-r.percent/100)*(1.25*o)));var l=r.color,c=new f;return a.config.plotOptions[e].enableShades&&(l="dark"===this.w.config.theme.mode?f.hexToRgba(c.shadeColor(-1*s,r.color),a.config.fill.opacity):f.hexToRgba(c.shadeColor(s,r.color),a.config.fill.opacity)),{color:l,colorProps:r}}},{key:"determineColor",value:function(e,t,i){var n=this.w,a=n.globals.series[t][i],s=n.config.plotOptions[e],o=s.colorScale.inverse?i:t;s.distributed&&"treemap"===n.config.chart.type&&(o=i);var r=n.globals.colors[o],l=null,c=Math.min.apply(Math,h(n.globals.series[t])),d=Math.max.apply(Math,h(n.globals.series[t]));s.distributed||"heatmap"!==e||(c=n.globals.minY,d=n.globals.maxY),void 0!==s.colorScale.min&&(c=s.colorScale.min<n.globals.minY?s.colorScale.min:n.globals.minY,d=s.colorScale.max>n.globals.maxY?s.colorScale.max:n.globals.maxY);var u=Math.abs(d)+Math.abs(c),p=100*a/(0===u?u-1e-6:u);return s.colorScale.ranges.length>0&&s.colorScale.ranges.map((function(e,t){if(a>=e.from&&a<=e.to){r=e.color,l=e.foreColor?e.foreColor:null,c=e.from,d=e.to;var i=Math.abs(d)+Math.abs(c);p=100*a/(0===i?i-1e-6:i)}})),{color:r,foreColor:l,percent:p}}},{key:"calculateDataLabels",value:function(e){var t=e.text,i=e.x,n=e.y,a=e.i,s=e.j,o=e.colorProps,r=e.fontSize,l=this.w.config.dataLabels,c=new v(this.ctx),d=new D(this.ctx),h=null;if(l.enabled){h=c.group({class:"apexcharts-data-labels"});var u=l.offsetX,p=l.offsetY,f=i+u,g=n+parseFloat(l.style.fontSize)/3+p;d.plotDataLabelsText({x:f,y:g,text:t,i:a,j:s,color:o.foreColor,parent:h,fontSize:r,dataLabelsConfig:l})}return h}},{key:"addListeners",value:function(e){var t=new v(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),e}(),we=function(){function e(t,i){n(this,e),this.ctx=t,this.w=t.w,this.xRatio=i.xRatio,this.yRatio=i.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new ye(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return s(e,[{key:"draw",value:function(e){var t=this.w,i=new v(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var a=t.globals.gridWidth/t.globals.dataPoints,s=t.globals.gridHeight/t.globals.series.length,o=0,r=!1;this.negRange=this.helpers.checkColorRange();var l=e.slice();t.config.yaxis[0].reversed&&(r=!0,l.reverse());for(var c=r?0:l.length-1;r?c<l.length:c>=0;r?c++:c--){var d=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:f.escapeString(t.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(d,c),t.config.chart.dropShadow.enabled){var h=t.config.chart.dropShadow;new m(this.ctx).dropShadow(d,h,c)}for(var u=0,p=t.config.plotOptions.heatmap.shadeIntensity,g=0;g<l[c].length;g++){var b=this.helpers.getShadeColor(t.config.chart.type,c,g,this.negRange),x=b.color,y=b.colorProps;"image"===t.config.fill.type&&(x=new T(this.ctx).fillPath({seriesNumber:c,dataPointIndex:g,opacity:t.globals.hasNegs?y.percent<0?1-(1+y.percent/100):p+y.percent/100:y.percent/100,patternID:f.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:a,height:t.config.fill.image.height?t.config.fill.image.height:s}));var w=this.rectRadius,k=i.drawRect(u,o,a,s,w);if(k.attr({cx:u,cy:o}),k.node.classList.add("apexcharts-heatmap-rect"),d.add(k),k.attr({fill:x,i:c,index:c,j:g,val:l[c][g],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?x:t.globals.stroke.colors[0],color:x}),this.helpers.addListeners(k),t.config.chart.animations.enabled&&!t.globals.dataChanged){var S=1;t.globals.resized||(S=t.config.chart.animations.speed),this.animateHeatMap(k,u,o,a,s,S)}if(t.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){C=this.dynamicAnim.speed;var _=t.globals.previousPaths[c]&&t.globals.previousPaths[c][g]&&t.globals.previousPaths[c][g].color;_||(_="rgba(255, 255, 255, 0)"),this.animateHeatColor(k,f.isColorHex(_)?_:f.rgb2hex(_),f.isColorHex(x)?x:f.rgb2hex(x),C)}}var A=(0,t.config.dataLabels.formatter)(t.globals.series[c][g],{value:t.globals.series[c][g],seriesIndex:c,dataPointIndex:g,w:t}),P=this.helpers.calculateDataLabels({text:A,x:u+a/2,y:o+s/2,i:c,j:g,colorProps:y,series:l});null!==P&&d.add(P),u+=a}o+=s,n.add(d)}var D=t.globals.yAxisScale[0].result.slice();t.config.yaxis[0].reversed?D.unshift(""):D.push(""),t.globals.yAxisScale[0].result=D;var I=t.globals.gridHeight/t.globals.series.length;return t.config.yaxis[0].labels.offsetY=-I/2,n}},{key:"animateHeatMap",value:function(e,t,i,n,a,s){var o=new g(this.ctx);o.animateRect(e,{x:t+n/2,y:i+a/2,width:0,height:0},{x:t,y:i,width:n,height:a},s,(function(){o.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,i,n){e.attr({fill:t}).animate(n).attr({fill:i})}}]),e}(),ke=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"drawYAxisTexts",value:function(e,t,i,n){var a=this.w,s=a.config.yaxis[0],o=a.globals.yLabelFormatters[0];return new v(this.ctx).drawText({x:e+s.labels.offsetX,y:t+s.labels.offsetY,text:o(n,i),textAnchor:"middle",fontSize:s.labels.style.fontSize,fontFamily:s.labels.style.fontFamily,foreColor:Array.isArray(s.labels.style.colors)?s.labels.style.colors[i]:s.labels.style.colors})}}]),e}(),Se=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w;var i=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=Math.min(i.globals.gridWidth,i.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=i.globals.gridWidth/2,"radialBar"===i.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(i.config.plotOptions.pie.endAngle-i.config.plotOptions.pie.startAngle),this.initialAngle=i.config.plotOptions.pie.startAngle%this.fullAngle,i.globals.radialSize=this.defaultSize/2.05-i.config.stroke.width-(i.config.chart.sparkline.enabled?0:i.config.chart.dropShadow.blur),this.donutSize=i.globals.radialSize*parseInt(i.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return s(e,[{key:"draw",value:function(e){var t=this,i=this.w,n=new v(this.ctx);if(this.ret=n.group({class:"apexcharts-pie"}),i.globals.noData)return this.ret;for(var a=0,s=0;s<e.length;s++)a+=f.negToZero(e[s]);var o=[],r=n.group();0===a&&(a=1e-5),e.forEach((function(e){t.maxY=Math.max(t.maxY,e)})),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<e.length;l++){var c=this.fullAngle*f.negToZero(e[l])/a;o.push(c),"polarArea"===this.chartType?(o[l]=this.fullAngle/e.length,this.sliceSizes.push(i.globals.radialSize*e[l]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var d,h=0,u=0;u<i.globals.previousPaths.length;u++)h+=f.negToZero(i.globals.previousPaths[u]);for(var p=0;p<i.globals.previousPaths.length;p++)d=this.fullAngle*f.negToZero(i.globals.previousPaths[p])/h,this.prevSectorAngleArr.push(d)}this.donutSize<0&&(this.donutSize=0);var g=i.config.plotOptions.pie.customScale,m=i.globals.gridWidth/2,b=i.globals.gridHeight/2,x=m-i.globals.gridWidth/2*g,y=b-i.globals.gridHeight/2*g;if("donut"===this.chartType){var w=n.drawCircle(this.donutSize);w.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),r.add(w)}var k=this.drawArcs(o,e);if(this.sliceLabels.forEach((function(e){k.add(e)})),r.attr({transform:"translate(".concat(x,", ").concat(y,") scale(").concat(g,")")}),r.add(k),this.ret.add(r),this.donutDataLabels.show){var S=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:x,translateY:y});this.ret.add(S)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(e,t){var i=this.w,n=new m(this.ctx),a=new v(this.ctx),s=new T(this.ctx),o=a.group({class:"apexcharts-slices"}),r=this.initialAngle,l=this.initialAngle,c=this.initialAngle,d=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var h=0;h<e.length;h++){var u=a.group({class:"apexcharts-series apexcharts-pie-series",seriesName:f.escapeString(i.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});o.add(u),l=d,c=(r=c)+e[h],d=l+this.prevSectorAngleArr[h];var p=c<r?this.fullAngle+c-r:c-r,g=s.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:t[h]}),b=this.getChangedPath(l,d),x=a.drawPath({d:b,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:g,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});if(x.attr({index:0,j:h}),n.setSelectionFilter(x,0,h),i.config.chart.dropShadow.enabled){var y=i.config.chart.dropShadow;n.dropShadow(x,y,h)}this.addListeners(x,this.donutDataLabels),v.setAttrs(x.node,{"data:angle":p,"data:startAngle":r,"data:strokeWidth":this.strokeWidth,"data:value":t[h]});var w={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?w=f.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(r+p/2)%this.fullAngle):"donut"===this.chartType&&(w=f.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(r+p/2)%this.fullAngle)),u.add(x);var k=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(k=p/this.fullAngle*i.config.chart.animations.speed)&&(k=1),this.animDur=k+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&i.globals.dataChanged?this.animatePaths(x,{size:this.sliceSizes[h],endAngle:c,startAngle:r,prevStartAngle:l,prevEndAngle:d,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(x,{size:this.sliceSizes[h],endAngle:c,startAngle:r,i:h,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:k}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&x.click(this.pieClicked.bind(this,h)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(h)>-1&&this.pieClicked(h),i.config.dataLabels.enabled){var S=w.x,C=w.y,_=100*p/this.fullAngle+"%";if(0!==p&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[h]){var A=i.config.dataLabels.formatter;void 0!==A&&(_=A(i.globals.seriesPercent[h][0],{seriesIndex:h,w:i}));var P=i.globals.dataLabels.style.colors[h],D=a.group({class:"apexcharts-datalabels"}),I=a.drawText({x:S,y:C,text:_,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:P});if(D.add(I),i.config.dataLabels.dropShadow.enabled){var E=i.config.dataLabels.dropShadow;n.dropShadow(I,E)}I.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(I.node.classList.add("apexcharts-pie-label-delay"),I.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(D)}}}return o}},{key:"addListeners",value:function(e,t){var i=new v(this.ctx);e.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",i.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var i=this.w,n=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,a=n,s=t.startAngle,o=t.startAngle;void 0!==t.prevStartAngle&&void 0!==t.prevEndAngle&&(s=t.prevEndAngle,a=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===i.config.series.length-1&&(n+o>this.fullAngle?t.endAngle=t.endAngle-(n+o):n+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(n+o)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(e,s,o,n,a,t)}},{key:"animateArc",value:function(e,t,i,n,a,s){var o,r=this,l=this.w,c=new g(this.ctx),d=s.size;(isNaN(t)||isNaN(a))&&(t=i,a=n,s.dur=0);var h=n,u=i,p=t<i?this.fullAngle+t-i:t-i;l.globals.dataChanged&&s.shouldSetPrevPaths&&s.prevEndAngle&&(o=r.getPiePath({me:r,startAngle:s.prevStartAngle,angle:s.prevEndAngle<s.prevStartAngle?this.fullAngle+s.prevEndAngle-s.prevStartAngle:s.prevEndAngle-s.prevStartAngle,size:d}),e.attr({d:o})),0!==s.dur?e.animate(s.dur,l.globals.easing,s.animBeginArr[s.i]).afterAll((function(){"pie"!==r.chartType&&"donut"!==r.chartType&&"polarArea"!==r.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":r.strokeWidth}),s.i===l.config.series.length-1&&c.animationCompleted(e)})).during((function(l){h=p+(n-p)*l,s.animateStartingPos&&(h=a+(n-a)*l,u=t-a+(i-(t-a))*l),o=r.getPiePath({me:r,startAngle:u,angle:h,size:d}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})})):(o=r.getPiePath({me:r,startAngle:u,angle:n,size:d}),s.isTrack||(l.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":r.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,i=this.w,n=this,a=n.sliceSizes[e]+(i.config.plotOptions.pie.expandOnClick?4:0),s=i.globals.dom.Paper.select(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if("true"!==s.attr("data:pieClicked")){var o=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,(function(e){e.setAttribute("data:pieClicked","false");var t=e.getAttribute("data:pathOrig");e.setAttribute("d",t)})),s.attr("data:pieClicked","true");var r=parseInt(s.attr("data:startAngle"),10),l=parseInt(s.attr("data:angle"),10);t=n.getPiePath({me:n,startAngle:r,angle:l,size:a}),360!==l&&s.plot(t)}else{s.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(s.node,this.donutDataLabels);var c=s.attr("data:pathOrig");s.attr({d:c})}}},{key:"getChangedPath",value:function(e,t){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),i}},{key:"getPiePath",value:function(e){var t=e.me,i=e.startAngle,n=e.angle,a=e.size,s=i,o=Math.PI*(s-90)/180,r=n+i;Math.ceil(r)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(r=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(r)>this.fullAngle&&(r-=this.fullAngle);var l=Math.PI*(r-90)/180,c=t.centerX+a*Math.cos(o),d=t.centerY+a*Math.sin(o),h=t.centerX+a*Math.cos(l),u=t.centerY+a*Math.sin(l),p=f.polarToCartesian(t.centerX,t.centerY,t.donutSize,r),g=f.polarToCartesian(t.centerX,t.centerY,t.donutSize,s),m=n>180?1:0,v=["M",c,d,"A",a,a,0,m,1,h,u];return"donut"===t.chartType?[].concat(v,["L",p.x,p.y,"A",t.donutSize,t.donutSize,0,m,0,g.x,g.y,"L",c,d,"z"]).join(" "):"pie"===t.chartType||"polarArea"===t.chartType?[].concat(v,["L",t.centerX,t.centerY,"L",c,d]).join(" "):[].concat(v).join(" ")}},{key:"drawPolarElements",value:function(e){var t=this.w,i=new V(this.ctx),n=new v(this.ctx),a=new ke(this.ctx),s=n.group(),o=n.group(),r=i.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,!0),l=r.result.reverse(),c=r.result.length;this.maxY=r.niceMax;for(var d=t.globals.radialSize,h=d/(c-1),u=0;u<c-1;u++){var p=n.drawCircle(d);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var f=a.drawYAxisTexts(this.centerX,this.centerY-d+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,u,l[u]);o.add(f)}s.add(p),d-=h}this.drawSpokes(e),e.add(s),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t){var i=this.w,n=new v(this.ctx),a=n.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(t.translateX?t.translateX:0,", ").concat(t.translateY?t.translateY:0,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),s=e.total.show;a.node.style.opacity=t.opacity;var o,r,l=t.centerX,c=t.centerY;o=void 0===e.name.color?i.globals.colors[0]:e.name.color;var d=e.name.fontSize,h=e.name.fontFamily,u=e.name.fontWeight;r=void 0===e.value.color?i.config.chart.foreColor:e.value.color;var p=e.value.formatter,f="",g="";if(s?(o=e.total.color,d=e.total.fontSize,h=e.total.fontFamily,u=e.total.fontWeight,g=e.total.label,f=e.total.formatter(i)):1===i.globals.series.length&&(f=p(i.globals.series[0],i),g=i.globals.seriesNames[0]),g&&(g=e.name.formatter(g,e.total.show,i)),e.name.show){var m=n.drawText({x:l,y:c+parseFloat(e.name.offsetY),text:g,textAnchor:"middle",foreColor:o,fontSize:d,fontWeight:u,fontFamily:h});m.node.classList.add("apexcharts-datalabel-label"),a.add(m)}if(e.value.show){var b=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,x=n.drawText({x:l,y:c+b,text:f,textAnchor:"middle",foreColor:r,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});x.node.classList.add("apexcharts-datalabel-value"),a.add(x)}return a}},{key:"printInnerLabels",value:function(e,t,i,n){var a,s=this.w;n?a=void 0===e.name.color?s.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:e.name.color:s.globals.series.length>1&&e.total.show&&(a=e.total.color);var o=s.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),r=s.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,e.value.formatter)(i,s),n||"function"!=typeof e.total.formatter||(i=e.total.formatter(s));var l=t===e.total.label;t=e.name.formatter(t,l,s),null!==o&&(o.textContent=t),null!==r&&(r.textContent=i),null!==o&&(o.style.fill=a)}},{key:"printDataLabelsInner",value:function(e,t){var i=this.w,n=e.getAttribute("data:value"),a=i.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(t,a,n,e);var s=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==s&&(s.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,i=this.w,n=new v(this.ctx),a=i.config.plotOptions.polarArea.spokes;if(0!==a.strokeWidth){for(var s=[],o=360/i.globals.series.length,r=0;r<i.globals.series.length;r++)s.push(f.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+o*r));s.forEach((function(i,s){var o=n.drawLine(i.x,i.y,t.centerX,t.centerY,Array.isArray(a.connectorColors)?a.connectorColors[s]:a.connectorColors);e.add(o)}))}}},{key:"revertDataLabelsInner",value:function(e,t,i){var n=this,a=this.w,s=a.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,r=a.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(e){var i=e.makeSliceOut,a=e.printLabel;Array.prototype.forEach.call(r,(function(e){"true"===e.getAttribute("data:pieClicked")&&(i&&(o=!0),a&&n.printDataLabelsInner(e,t))}))};if(l({makeSliceOut:!0,printLabel:!1}),t.total.show&&a.globals.series.length>1)o&&!t.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(a));else if(l({makeSliceOut:!1,printLabel:!0}),!o)if(a.globals.selectedDataPoints.length&&a.globals.series.length>1)if(a.globals.selectedDataPoints[0].length>0){var c=a.globals.selectedDataPoints[0],d=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(d,t)}else s&&a.globals.selectedDataPoints.length&&0===a.globals.selectedDataPoints[0].length&&(s.style.opacity=0);else s&&a.globals.series.length>1&&(s.style.opacity=0)}}]),e}(),Ce=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var i=this.w;this.graphics=new v(this.ctx),this.lineColorArr=void 0!==i.globals.stroke.colors?i.globals.stroke.colors:i.globals.colors,this.defaultSize=i.globals.svgHeight<i.globals.svgWidth?i.globals.gridHeight+1.5*i.globals.goldenPadding:i.globals.gridWidth,this.isLog=i.config.yaxis[0].logarithmic,this.coreUtils=new b(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(i.globals.maxY,0):i.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):i.globals.minY,this.polygons=i.config.plotOptions.radar.polygons,this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-i.config.chart.dropShadow.blur,i.config.xaxis.labels.show&&(this.size=this.size-i.globals.xAxisLabelsWidth/1.75),void 0!==i.config.plotOptions.radar.size&&(this.size=i.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return s(e,[{key:"draw",value:function(e){var i=this,n=this.w,a=new T(this.ctx),s=[],o=new D(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var r=n.globals.gridWidth/2,l=n.globals.gridHeight/2,c=r+n.config.plotOptions.radar.offsetX,d=l+n.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(d||0,")")}),u=[],p=null,g=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(e,r){var l=e.length===n.globals.dataPoints,c=i.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:f.escapeString(n.globals.seriesNames[r]),rel:r+1,"data:realIndex":r});i.dataRadiusOfPercent[r]=[],i.dataRadius[r]=[],i.angleArr[r]=[],e.forEach((function(e,t){var n=Math.abs(i.maxValue-i.minValue);e+=Math.abs(i.minValue),i.isLog&&(e=i.coreUtils.getLogVal(e,0)),i.dataRadiusOfPercent[r][t]=e/n,i.dataRadius[r][t]=i.dataRadiusOfPercent[r][t]*i.size,i.angleArr[r][t]=t*i.disAngle})),u=i.getDataPointsPos(i.dataRadius[r],i.angleArr[r]);var d=i.createPaths(u,{x:0,y:0});p=i.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),g=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":r}),n.globals.delayedElements.push({el:p.node,index:r});var h={i:r,realIndex:r,animationDelay:r,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[r],strokeLineCap:n.config.stroke.lineCap},v=null;n.globals.previousPaths.length>0&&(v=i.getPreviousPath(r));for(var b=0;b<d.linePathsTo.length;b++){var x=i.graphics.renderPaths(t(t({},h),{},{pathFrom:null===v?d.linePathsFrom[b]:v,pathTo:d.linePathsTo[b],strokeWidth:Array.isArray(i.strokeWidth)?i.strokeWidth[r]:i.strokeWidth,fill:"none",drawShadow:!1}));c.add(x);var y=a.fillPath({seriesNumber:r}),w=i.graphics.renderPaths(t(t({},h),{},{pathFrom:null===v?d.areaPathsFrom[b]:v,pathTo:d.areaPathsTo[b],strokeWidth:0,fill:y,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var k=new m(i.ctx),S=n.config.chart.dropShadow;k.dropShadow(w,Object.assign({},S,{noUserSpaceOnUse:!0}),r)}c.add(w)}e.forEach((function(e,a){var s=new A(i.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:r,dataPointIndex:a}),l=i.graphics.drawMarker(u[a].x,u[a].y,s);l.attr("rel",a),l.attr("j",a),l.attr("index",r),l.node.setAttribute("default-marker-size",s.pSize);var d=i.graphics.group({class:"apexcharts-series-markers"});d&&d.add(l),p.add(d),c.add(p);var h=n.config.dataLabels;if(h.enabled){var f=h.formatter(n.globals.series[r][a],{seriesIndex:r,dataPointIndex:a,w:n});o.plotDataLabelsText({x:u[a].x,y:u[a].y,text:f,textAnchor:"middle",i:r,j:r,parent:g,offsetCorrection:!1,dataLabelsConfig:t({},h)})}c.add(g)})),s.push(c)})),this.drawPolygons({parent:h}),n.config.xaxis.labels.show){var v=this.drawXAxisTexts();h.add(v)}return s.forEach((function(e){h.add(e)})),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(e){for(var t=this,i=this.w,n=e.parent,a=new ke(this.ctx),s=i.globals.yAxisScale[0].result.reverse(),o=s.length,r=[],l=this.size/(o-1),c=0;c<o;c++)r[c]=l*c;r.reverse();var d=[],h=[];r.forEach((function(e,i){var n=f.getPolygonPos(e,t.dataPointsLen),a="";n.forEach((function(e,n){if(0===i){var s=t.graphics.drawLine(e.x,e.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[n]:t.polygons.connectorColors);h.push(s)}0===n&&t.yaxisLabelsTextsPos.push({x:e.x,y:e.y}),a+=e.x+","+e.y+" "})),d.push(a)})),d.forEach((function(e,a){var s=t.polygons.strokeColors,o=t.polygons.strokeWidth,r=t.graphics.drawPolygon(e,Array.isArray(s)?s[a]:s,Array.isArray(o)?o[a]:o,i.globals.radarPolygons.fill.colors[a]);n.add(r)})),h.forEach((function(e){n.add(e)})),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(e,i){var n=a.drawYAxisTexts(e.x,e.y,i,s[i]);t.yaxisLabels.add(n)}))}},{key:"drawXAxisTexts",value:function(){var e=this,i=this.w,n=i.config.xaxis.labels,a=this.graphics.group({class:"apexcharts-xaxis"}),s=f.getPolygonPos(this.size,this.dataPointsLen);return i.globals.labels.forEach((function(o,r){var l=i.config.xaxis.labels.formatter,c=new D(e.ctx);if(s[r]){var d=e.getTextPos(s[r],e.size),h=l(o,{seriesIndex:-1,dataPointIndex:r,w:i});c.plotDataLabelsText({x:d.newX,y:d.newY,text:h,textAnchor:d.textAnchor,i:r,j:r,parent:a,color:Array.isArray(n.style.colors)&&n.style.colors[r]?n.style.colors[r]:"#a8a8a8",dataLabelsConfig:t({textAnchor:d.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1})}})),a}},{key:"createPaths",value:function(e,t){var i=this,n=[],a=[],s=[],o=[];if(e.length){a=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var r=this.graphics.move(e[0].x,e[0].y),l=this.graphics.move(e[0].x,e[0].y);e.forEach((function(t,n){r+=i.graphics.line(t.x,t.y),l+=i.graphics.line(t.x,t.y),n===e.length-1&&(r+="Z",l+="Z")})),n.push(r),s.push(l)}return{linePathsFrom:a,linePathsTo:n,areaPathsFrom:o,areaPathsTo:s}}},{key:"getTextPos",value:function(e,t){var i="middle",n=e.x,a=e.y;return Math.abs(e.x)>=10?e.x>0?(i="start",n+=10):e.x<0&&(i="end",n-=10):i="middle",Math.abs(e.y)>=t-10&&(e.y<0?a-=10:e.y>0&&(a+=10)),{textAnchor:i,newX:n,newY:a}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,i=null,n=0;n<t.globals.previousPaths.length;n++){var a=t.globals.previousPaths[n];a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&void 0!==t.globals.previousPaths[n].paths[0]&&(i=t.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var n=[],a=0;a<i;a++){var s={};s.x=e[a]*Math.sin(t[a]),s.y=-e[a]*Math.cos(t[a]),n.push(s)}return n}}]),e}(),_e=function(e){r(i,e);var t=d(i);function i(e){var a;n(this,i),(a=t.call(this,e)).ctx=e,a.w=e.w,a.animBeginArr=[0],a.animDur=0;var s=a.w;return a.startAngle=s.config.plotOptions.radialBar.startAngle,a.endAngle=s.config.plotOptions.radialBar.endAngle,a.totalAngle=Math.abs(s.config.plotOptions.radialBar.endAngle-s.config.plotOptions.radialBar.startAngle),a.trackStartAngle=s.config.plotOptions.radialBar.track.startAngle,a.trackEndAngle=s.config.plotOptions.radialBar.track.endAngle,a.donutDataLabels=a.w.config.plotOptions.radialBar.dataLabels,a.radialDataLabels=a.donutDataLabels,a.trackStartAngle||(a.trackStartAngle=a.startAngle),a.trackEndAngle||(a.trackEndAngle=a.endAngle),360===a.endAngle&&(a.endAngle=359.99),a.margin=parseInt(s.config.plotOptions.radialBar.track.margin,10),a}return s(i,[{key:"draw",value:function(e){var t=this.w,i=new v(this.ctx),n=i.group({class:"apexcharts-radialbar"});if(t.globals.noData)return n;var a=i.group(),s=this.defaultSize/2,o=t.globals.gridWidth/2,r=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(r=r-t.config.stroke.width-t.config.chart.dropShadow.blur);var l=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:r,centerX:o,centerY:s,colorArr:l,series:e});a.add(c)}var d=this.drawArcs({size:r,centerX:o,centerY:s,colorArr:l,series:e}),h=360;t.config.plotOptions.radialBar.startAngle<0&&(h=this.totalAngle);var u=(360-h)/360;if(t.globals.radialSize=r-r*u,this.radialDataLabels.value.show){var p=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=p*u}return a.add(d.g),"front"===t.config.plotOptions.radialBar.hollow.position&&(d.g.add(d.elHollow),d.dataLabels&&d.g.add(d.dataLabels)),n.add(a),n}},{key:"drawTracks",value:function(e){var t=this.w,i=new v(this.ctx),n=i.group({class:"apexcharts-tracks"}),a=new m(this.ctx),s=new T(this.ctx),o=this.getStrokeWidth(e);e.size=e.size-o/2;for(var r=0;r<e.series.length;r++){var l=i.group({class:"apexcharts-radialbar-track apexcharts-track"});n.add(l),l.attr({rel:r+1}),e.size=e.size-o-this.margin;var c=t.config.plotOptions.radialBar.track,d=s.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(c.background)?c.background[r]:c.background,solid:!0}),h=this.trackStartAngle,u=this.trackEndAngle;Math.abs(u)+Math.abs(h)>=360&&(u=360-Math.abs(this.startAngle)-.1);var p=i.drawPath({d:"",stroke:d,strokeWidth:o*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});if(c.dropShadow.enabled){var f=c.dropShadow;a.dropShadow(p,f)}l.add(p),p.attr("id","apexcharts-radialbarTrack-"+r),this.animatePaths(p,{centerX:e.centerX,centerY:e.centerY,endAngle:u,startAngle:h,size:e.size,i:r,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return n}},{key:"drawArcs",value:function(e){var t=this.w,i=new v(this.ctx),n=new T(this.ctx),a=new m(this.ctx),s=i.group(),o=this.getStrokeWidth(e);e.size=e.size-o/2;var r=t.config.plotOptions.radialBar.hollow.background,l=e.size-o*e.series.length-this.margin*e.series.length-o*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-t.config.plotOptions.radialBar.hollow.margin;void 0!==t.config.plotOptions.radialBar.hollow.image&&(r=this.drawHollowImage(e,s,l,r));var d=this.drawHollow({size:c,centerX:e.centerX,centerY:e.centerY,fill:r||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){var h=t.config.plotOptions.radialBar.hollow.dropShadow;a.dropShadow(d,h)}var u=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(u=0);var p=null;this.radialDataLabels.show&&(p=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:e.centerX,centerY:e.centerY,opacity:u})),"back"===t.config.plotOptions.radialBar.hollow.position&&(s.add(d),p&&s.add(p));var g=!1;t.config.plotOptions.radialBar.inverseOrder&&(g=!0);for(var b=g?e.series.length-1:0;g?b>=0:b<e.series.length;g?b--:b++){var x=i.group({class:"apexcharts-series apexcharts-radial-series",seriesName:f.escapeString(t.globals.seriesNames[b])});s.add(x),x.attr({rel:b+1,"data:realIndex":b}),this.ctx.series.addCollapsedClassToSeries(x,b),e.size=e.size-o-this.margin;var y=n.fillPath({seriesNumber:b,size:e.size,value:e.series[b]}),w=this.startAngle,k=void 0,S=f.negToZero(e.series[b]>100?100:e.series[b])/100,C=Math.round(this.totalAngle*S)+this.startAngle,_=void 0;t.globals.dataChanged&&(k=this.startAngle,_=Math.round(this.totalAngle*f.negToZero(t.globals.previousPaths[b])/100)+k),Math.abs(C)+Math.abs(w)>=360&&(C-=.01),Math.abs(_)+Math.abs(k)>=360&&(_-=.01);var A=C-w,P=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[b]:t.config.stroke.dashArray,D=i.drawPath({d:"",stroke:y,strokeWidth:o,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+b,strokeDashArray:P});if(v.setAttrs(D.node,{"data:angle":A,"data:value":e.series[b]}),t.config.chart.dropShadow.enabled){var I=t.config.chart.dropShadow;a.dropShadow(D,I,b)}a.setSelectionFilter(D,0,b),this.addListeners(D,this.radialDataLabels),x.add(D),D.attr({index:0,j:b});var E=0;!this.initialAnim||t.globals.resized||t.globals.dataChanged||(E=t.config.chart.animations.speed),t.globals.dataChanged&&(E=t.config.chart.animations.dynamicAnimation.speed),this.animDur=E/(1.2*e.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(D,{centerX:e.centerX,centerY:e.centerY,endAngle:C,startAngle:w,prevEndAngle:_,prevStartAngle:k,size:e.size,i:b,totalItems:2,animBeginArr:this.animBeginArr,dur:E,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:s,elHollow:d,dataLabels:p}}},{key:"drawHollow",value:function(e){var t=new v(this.ctx).drawCircle(2*e.size);return t.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),t}},{key:"drawHollowImage",value:function(e,t,i,n){var a=this.w,s=new T(this.ctx),o=f.randomId(),r=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)s.clippedImgArea({width:i,height:i,image:r,patternID:"pattern".concat(a.globals.cuid).concat(o)}),n="url(#pattern".concat(a.globals.cuid).concat(o,")");else{var l=a.config.plotOptions.radialBar.hollow.imageWidth,c=a.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var d=a.globals.dom.Paper.image(r).loaded((function(t){this.move(e.centerX-t.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)}));t.add(d)}else{var h=a.globals.dom.Paper.image(r).loaded((function(t){this.move(e.centerX-l/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-c/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)}));t.add(h)}}return n}},{key:"getStrokeWidth",value:function(e){var t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}}]),i}(Se),Te=function(){function e(t){n(this,e),this.w=t.w,this.lineCtx=t}return s(e,[{key:"sameValueSeriesFix",value:function(e,t){var i=this.w;if("line"===i.config.chart.type&&("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[e])&&new b(this.lineCtx.ctx,i).seriesHaveSameValues(e)){var n=t[e].slice();n[n.length-1]=n[n.length-1]+1e-6,t[e]=n}return t}},{key:"calculatePoints",value:function(e){var t=e.series,i=e.realIndex,n=e.x,a=e.y,s=e.i,o=e.j,r=e.prevY,l=this.w,c=[],d=[];if(0===o){var h=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(h=(l.globals.seriesX[i][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),c.push(h),d.push(f.isNumber(t[s][0])?r+l.config.markers.offsetY:null),c.push(n+l.config.markers.offsetX),d.push(f.isNumber(t[s][o+1])?a+l.config.markers.offsetY:null)}else c.push(n+l.config.markers.offsetX),d.push(f.isNumber(t[s][o+1])?a+l.config.markers.offsetY:null);return{x:c,y:d}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,i=e.pathFromArea,n=e.realIndex,a=this.w,s=0;s<a.globals.previousPaths.length;s++){var o=a.globals.previousPaths[s];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(n,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,t=a.globals.previousPaths[s].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,i=a.globals.previousPaths[s].paths[0].d,a.config.stroke.show&&a.globals.previousPaths[s].paths[1]&&(t=a.globals.previousPaths[s].paths[1].d)))}return{pathFromLine:t,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(e){var t=e.i,i=e.series,n=e.prevY,a=e.lineYPosition,s=this.w;if(void 0!==i[t][0])n=(a=s.config.chart.stacked&&t>0?this.lineCtx.prevSeriesY[t-1][0]:this.lineCtx.zeroY)-i[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?i[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(s.config.chart.stacked&&t>0&&void 0===i[t][0])for(var o=t-1;o>=0;o--)if(null!==i[o][0]&&void 0!==i[o][0]){n=a=this.lineCtx.prevSeriesY[o][0];break}return{prevY:n,lineYPosition:a}}}]),e}(),Ae=function(){function e(t,i,a){n(this,e),this.ctx=t,this.w=t.w,this.xyRatios=i,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||a,this.scatter=new P(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Te(this),this.markers=new A(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return s(e,[{key:"draw",value:function(e,t,i){var n=this.w,a=new v(this.ctx),s=n.globals.comboCharts?t:n.config.chart.type,o=a.group({class:"apexcharts-".concat(s,"-series apexcharts-plot-series")}),r=new b(this.ctx,n);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=r.getLogSeries(e),this.yRatio=r.getLogYRatios(this.yRatio);for(var l=[],c=0;c<e.length;c++){e=this.lineHelpers.sameValueSeriesFix(c,e);var d=n.globals.comboCharts?i[c]:c;this._initSerieVariables(e,c,d);var h=[],u=[],p=n.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,d),n.globals.isXNumeric&&n.globals.seriesX.length>0&&(p=(n.globals.seriesX[d][0]-n.globals.minX)/this.xRatio),u.push(p);var f,g=p,m=g,x=this.zeroY;x=this.lineHelpers.determineFirstPrevY({i:c,series:e,prevY:x,lineYPosition:0}).prevY,h.push(x),f=x;var y=this._calculatePathsFrom({series:e,i:c,realIndex:d,prevX:m,prevY:x}),w=this._iterateOverDataPoints({series:e,realIndex:d,i:c,x:p,y:1,pX:g,pY:f,pathsFrom:y,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:u,yArrj:h});this._handlePaths({type:s,realIndex:d,i:c,paths:w}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),l.push(this.elSeries)}if(n.config.chart.stacked)for(var k=l.length;k>0;k--)o.add(l[k-1]);else for(var S=0;S<l.length;S++)o.add(l[S]);return o}},{key:"_initSerieVariables",value:function(e,t,i){var n=this.w,a=new v(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-("on"===n.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||"end"===n.config.plotOptions.area.fillTo)&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=a.group({class:"apexcharts-series",seriesName:f.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=a.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),this.elDataLabelsWrap=a.group({class:"apexcharts-datalabels","data:realIndex":i});var s=e[t].length===n.globals.dataPoints;this.elSeries.attr({"data:longestSeries":s,rel:t+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,i,n,a,s=e.series,o=e.i,r=e.realIndex,l=e.prevX,c=e.prevY,d=this.w,h=new v(this.ctx);if(null===s[o][0]){for(var u=0;u<s[o].length;u++)if(null!==s[o][u]){l=this.xDivision*u,c=this.zeroY-s[o][u]/this.yRatio[this.yaxisIndex],t=h.move(l,c),i=h.move(l,this.areaBottomY);break}}else t=h.move(l,c),i=h.move(l,this.areaBottomY)+h.line(l,c);if(n=h.move(-1,this.zeroY)+h.line(-1,this.zeroY),a=h.move(-1,this.zeroY)+h.line(-1,this.zeroY),d.globals.previousPaths.length>0){var p=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:a,realIndex:r});n=p.pathFromLine,a=p.pathFromArea}return{prevX:l,prevY:c,linePath:t,areaPath:i,pathFromLine:n,pathFromArea:a}}},{key:"_handlePaths",value:function(e){var i=e.type,n=e.realIndex,a=e.i,s=e.paths,o=this.w,r=new v(this.ctx),l=new T(this.ctx);this.prevSeriesY.push(s.yArrj),o.globals.seriesXvalues[n]=s.xArrj,o.globals.seriesYvalues[n]=s.yArrj;var c=o.config.forecastDataPoints;if(c.count>0){var d=o.globals.seriesXvalues[n][o.globals.seriesXvalues[n].length-c.count-1],h=r.drawRect(d,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(h.node);var u=r.drawRect(0,0,d,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(u.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var p={i:a,realIndex:n,animationDelay:a,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(i)};if("area"===i)for(var f=l.fillPath({seriesNumber:n}),g=0;g<s.areaPaths.length;g++){var m=r.renderPaths(t(t({},p),{},{pathFrom:s.pathFromArea,pathTo:s.areaPaths[g],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:f}));this.elSeries.add(m)}if(o.config.stroke.show&&!this.pointsChart){var b=null;if("line"===i)b=l.fillPath({seriesNumber:n,i:a});else if(o.config.stroke.fill){var x=o.config.fill;o.config.fill=o.config.stroke.fill,b=l.fillPath({seriesNumber:n,i:a}),o.config.fill=x}else b=o.globals.stroke.colors[n];for(var y=0;y<s.linePaths.length;y++){var w=t(t({},p),{},{pathFrom:s.pathFromLine,pathTo:s.linePaths[y],stroke:b,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"none"}),k=r.renderPaths(w);if(this.elSeries.add(k),c.count>0){var S=r.renderPaths(w);S.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&S.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(S),S.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){for(var t=e.series,i=e.realIndex,n=e.i,a=e.x,s=e.y,o=e.pX,r=e.pY,l=e.pathsFrom,c=e.linePaths,d=e.areaPaths,h=e.seriesIndex,u=e.lineYPosition,p=e.xArrj,g=e.yArrj,m=this.w,b=new v(this.ctx),x=this.yRatio,y=l.prevY,w=l.linePath,k=l.areaPath,S=l.pathFromLine,C=l.pathFromArea,_=f.isNumber(m.globals.minYArr[i])?m.globals.minYArr[i]:m.globals.minY,T=m.globals.dataPoints>1?m.globals.dataPoints-1:m.globals.dataPoints,A=0;A<T;A++){var P=void 0===t[n][A+1]||null===t[n][A+1];if(m.globals.isXNumeric){var D=m.globals.seriesX[i][A+1];void 0===m.globals.seriesX[i][A+1]&&(D=m.globals.seriesX[i][T-1]),a=(D-m.globals.minX)/this.xRatio}else a+=this.xDivision;u=m.config.chart.stacked&&n>0&&m.globals.collapsedSeries.length<m.config.series.length-1?this.prevSeriesY[function(e){for(var t=e,i=0;i<m.globals.series.length;i++)if(m.globals.collapsedSeriesIndices.indexOf(e)>-1){t--;break}return t>=0?t:0}(n-1)][A+1]:this.zeroY,s=P?u-_/x[this.yaxisIndex]+2*(this.isReversed?_/x[this.yaxisIndex]:0):u-t[n][A+1]/x[this.yaxisIndex]+2*(this.isReversed?t[n][A+1]/x[this.yaxisIndex]:0),p.push(a),g.push(s);var I=this.lineHelpers.calculatePoints({series:t,x:a,y:s,realIndex:i,i:n,j:A,prevY:y}),E=this._createPaths({series:t,i:n,realIndex:i,j:A,x:a,y:s,pX:o,pY:r,linePath:w,areaPath:k,linePaths:c,areaPaths:d,seriesIndex:h});d=E.areaPaths,c=E.linePaths,o=E.pX,r=E.pY,k=E.areaPath,w=E.linePath,this.appendPathFrom&&(S+=b.line(a,this.zeroY),C+=b.line(a,this.zeroY)),this.handleNullDataPoints(t,I,n,A,i),this._handleMarkersAndLabels({pointsPos:I,series:t,x:a,y:s,prevY:y,i:n,j:A,realIndex:i})}return{yArrj:g,xArrj:p,pathFromArea:C,areaPaths:d,pathFromLine:S,linePaths:c}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.pointsPos;e.series,e.x,e.y,e.prevY;var i=e.i,n=e.j,a=e.realIndex,s=this.w,o=new D(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,n,{realIndex:a,pointsPos:t,zRatio:this.zRatio,elParent:this.elPointsMain});else{s.globals.series[i].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var r=this.markers.plotChartMarkers(t,a,n+1);null!==r&&this.elPointsMain.add(r)}var l=o.drawDataLabel(t,a,n+1,null);null!==l&&this.elDataLabelsWrap.add(l)}},{key:"_createPaths",value:function(e){var t=e.series,i=e.i,n=e.realIndex,a=e.j,s=e.x,o=e.y,r=e.pX,l=e.pY,c=e.linePath,d=e.areaPath,h=e.linePaths,u=e.areaPaths,p=e.seriesIndex,f=this.w,g=new v(this.ctx),m=f.config.stroke.curve,b=this.areaBottomY;if(Array.isArray(f.config.stroke.curve)&&(m=Array.isArray(p)?f.config.stroke.curve[p[i]]:f.config.stroke.curve[i]),"smooth"===m){var x=.35*(s-r);f.globals.hasNullValues?(null!==t[i][a]&&(null!==t[i][a+1]?(c=g.move(r,l)+g.curve(r+x,l,s-x,o,s+1,o),d=g.move(r+1,l)+g.curve(r+x,l,s-x,o,s+1,o)+g.line(s,b)+g.line(r,b)+"z"):(c=g.move(r,l),d=g.move(r,l)+"z")),h.push(c),u.push(d)):(c+=g.curve(r+x,l,s-x,o,s,o),d+=g.curve(r+x,l,s-x,o,s,o)),r=s,l=o,a===t[i].length-2&&(d=d+g.curve(r,l,s,o,s,b)+g.move(s,o)+"z",f.globals.hasNullValues||(h.push(c),u.push(d)))}else{if(null===t[i][a+1]){c+=g.move(s,o);var y=f.globals.isXNumeric?(f.globals.seriesX[n][a]-f.globals.minX)/this.xRatio:s-this.xDivision;d=d+g.line(y,b)+g.move(s,o)+"z"}null===t[i][a]&&(c+=g.move(s,o),d+=g.move(s,b)),"stepline"===m?(c=c+g.line(s,null,"H")+g.line(null,o,"V"),d=d+g.line(s,null,"H")+g.line(null,o,"V")):"straight"===m&&(c+=g.line(s,o),d+=g.line(s,o)),a===t[i].length-2&&(d=d+g.line(s,b)+g.move(s,o)+"z",h.push(c),u.push(d))}return{linePaths:h,areaPaths:u,pX:r,pY:l,linePath:c,areaPath:d}}},{key:"handleNullDataPoints",value:function(e,t,i,n,a){var s=this.w;if(null===e[i][n]&&s.config.markers.showNullDataPoints||1===e[i].length){var o=this.markers.plotChartMarkers(t,a,n+1,this.strokeWidth-s.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),e}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function e(t,i,n,a){this.xoffset=t,this.yoffset=i,this.height=a,this.width=n,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(e){var t,i=[],n=this.xoffset,a=this.yoffset,o=s(e)/this.height,r=s(e)/this.width;if(this.width>=this.height)for(t=0;t<e.length;t++)i.push([n,a,n+o,a+e[t]/o]),a+=e[t]/o;else for(t=0;t<e.length;t++)i.push([n,a,n+e[t]/r,a+r]),n+=e[t]/r;return i},this.cutArea=function(t){var i;if(this.width>=this.height){var n=t/this.height,a=this.width-n;i=new e(this.xoffset+n,this.yoffset,a,this.height)}else{var s=t/this.width,o=this.height-s;i=new e(this.xoffset,this.yoffset+s,this.width,o)}return i}}function t(t,n,a,o,r){return o=void 0===o?0:o,r=void 0===r?0:r,function(e){var t,i,n=[];for(t=0;t<e.length;t++)for(i=0;i<e[t].length;i++)n.push(e[t][i]);return n}(i(function(e,t){var i,n=[],a=t/s(e);for(i=0;i<e.length;i++)n[i]=e[i]*a;return n}(t,n*a),[],new e(o,r,n,a),[]))}function i(e,t,a,o){var r,l,c;if(0!==e.length)return r=a.shortestEdge(),function(e,t,i){var a;return 0===e.length||((a=e.slice()).push(t),n(e,i)>=n(a,i))}(t,l=e[0],r)?(t.push(l),i(e.slice(1),t,a,o)):(c=a.cutArea(s(t),o),o.push(a.getCoordinates(t)),i(e,[],c,o)),o;o.push(a.getCoordinates(t))}function n(e,t){var i=Math.min.apply(Math,e),n=Math.max.apply(Math,e),a=s(e);return Math.max(Math.pow(t,2)*n/Math.pow(a,2),Math.pow(a,2)/(Math.pow(t,2)*i))}function a(e){return e&&e.constructor===Array}function s(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t];return i}function o(e){var t,i=0;if(a(e[0]))for(t=0;t<e.length;t++)i+=o(e[t]);else i=s(e);return i}return function e(i,n,s,r,l){r=void 0===r?0:r,l=void 0===l?0:l;var c,d,h=[],u=[];if(a(i[0])){for(d=0;d<i.length;d++)h[d]=o(i[d]);for(c=t(h,n,s,r,l),d=0;d<i.length;d++)u.push(e(i[d],c[d][2]-c[d][0],c[d][3]-c[d][1],c[d][0],c[d][1]))}else u=t(i,n,s,r,l);return u}}();var Pe,De,Ie=function(){function e(t,i){n(this,e),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new ye(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return s(e,[{key:"draw",value:function(e){var t=this,i=this.w,n=new v(this.ctx),a=new T(this.ctx),s=n.group({class:"apexcharts-treemap"});if(i.globals.noData)return s;var o=[];return e.forEach((function(e){var t=e.map((function(e){return Math.abs(e)}));o.push(t)})),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach((function(e,i){e.data.forEach((function(e){Array.isArray(t.labels[i])||(t.labels[i]=[]),t.labels[i].push(e.x)}))})),window.TreemapSquared.generate(o,i.globals.gridWidth,i.globals.gridHeight).forEach((function(o,r){var l=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:f.escapeString(i.globals.seriesNames[r]),rel:r+1,"data:realIndex":r});if(i.config.chart.dropShadow.enabled){var c=i.config.chart.dropShadow;new m(t.ctx).dropShadow(s,c,r)}var d=n.group({class:"apexcharts-data-labels"});o.forEach((function(s,o){var c=s[0],d=s[1],h=s[2],u=s[3],p=n.drawRect(c,d,h-c,u-d,0,"#fff",1,t.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?g:i.globals.stroke.colors[r]);p.attr({cx:c,cy:d,index:r,i:r,j:o,width:h-c,height:u-d});var f=t.helpers.getShadeColor(i.config.chart.type,r,o,t.negRange),g=f.color;void 0!==i.config.series[r].data[o]&&i.config.series[r].data[o].fillColor&&(g=i.config.series[r].data[o].fillColor);var m=a.fillPath({color:g,seriesNumber:r,dataPointIndex:o});p.node.classList.add("apexcharts-treemap-rect"),p.attr({fill:m}),t.helpers.addListeners(p);var v={x:c+(h-c)/2,y:d+(u-d)/2,width:0,height:0},b={x:c,y:d,width:h-c,height:u-d};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var x=1;i.globals.resized||(x=i.config.chart.animations.speed),t.animateTreemap(p,v,b,x)}if(i.globals.dataChanged){var y=1;t.dynamicAnim.enabled&&i.globals.shouldAnimate&&(y=t.dynamicAnim.speed,i.globals.previousPaths[r]&&i.globals.previousPaths[r][o]&&i.globals.previousPaths[r][o].rect&&(v=i.globals.previousPaths[r][o].rect),t.animateTreemap(p,v,b,y))}var w=t.getFontSize(s),k=i.config.dataLabels.formatter(t.labels[r][o],{value:i.globals.series[r][o],seriesIndex:r,dataPointIndex:o,w:i}),S=t.helpers.calculateDataLabels({text:k,x:(c+h)/2,y:(d+u)/2+t.strokeWidth/2+w/3,i:r,j:o,colorProps:f,fontSize:w,series:e});i.config.dataLabels.enabled&&S&&t.rotateToFitLabel(S,k,c,d,h,u),l.add(p),null!==S&&l.add(S)})),l.add(d),s.add(l)})),s}},{key:"getFontSize",value:function(e){var t,i,n=this.w,a=function e(t){var i,n=0;if(Array.isArray(t[0]))for(i=0;i<t.length;i++)n+=e(t[i]);else for(i=0;i<t.length;i++)n+=t[i].length;return n}(this.labels)/function e(t){var i,n=0;if(Array.isArray(t[0]))for(i=0;i<t.length;i++)n+=e(t[i]);else for(i=0;i<t.length;i++)n+=1;return n}(this.labels);return t=(e[2]-e[0])*(e[3]-e[1]),i=Math.pow(t,.5),Math.min(i/a,parseInt(n.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,i,n,a,s){var o=new v(this.ctx),r=o.getTextRects(t);if(r.width+5>a-i&&r.width<=s-n){var l=o.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(l.x," ").concat(l.y,")"))}}},{key:"animateTreemap",value:function(e,t,i,n){var a=new g(this.ctx);a.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:i.x,y:i.y,width:i.width,height:i.height},n,(function(){a.animationCompleted(e)}))}}]),e}(),Ee=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return s(e,[{key:"calculateTimeScaleTicks",value:function(e,i){var n=this,a=this.w;if(a.globals.allSeriesCollapsed)return a.globals.labels=[],a.globals.timescaleLabels=[],[];var s=new O(this.ctx),o=(i-e)/864e5;this.determineInterval(o),a.globals.disableZoomIn=!1,a.globals.disableZoomOut=!1,o<.00011574074074074075?a.globals.disableZoomIn=!0:o>5e4&&(a.globals.disableZoomOut=!0);var r=s.getTimeUnitsfromTimestamp(e,i,this.utc),l=a.globals.gridWidth/o,c=l/24,d=c/60,h=d/60,u=Math.floor(24*o),p=Math.floor(1440*o),f=Math.floor(86400*o),g=Math.floor(o),m=Math.floor(o/30),v=Math.floor(o/365),b={minMillisecond:r.minMillisecond,minSecond:r.minSecond,minMinute:r.minMinute,minHour:r.minHour,minDate:r.minDate,minMonth:r.minMonth,minYear:r.minYear},x={firstVal:b,currentMillisecond:b.minMillisecond,currentSecond:b.minSecond,currentMinute:b.minMinute,currentHour:b.minHour,currentMonthDate:b.minDate,currentDate:b.minDate,currentMonth:b.minMonth,currentYear:b.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:d,secondsWidthOnXAxis:h,numberOfSeconds:f,numberOfMinutes:p,numberOfHours:u,numberOfDays:g,numberOfMonths:m,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(x);break;case"months":case"half_year":this.generateMonthScale(x);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(x);break;case"hours":this.generateHourScale(x);break;case"minutes_fives":case"minutes":this.generateMinuteScale(x);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(x)}var y=this.timeScaleArray.map((function(e){var i={position:e.position,unit:e.unit,year:e.year,day:e.day?e.day:1,hour:e.hour?e.hour:0,month:e.month+1};return"month"===e.unit?t(t({},i),{},{day:1,value:e.value+1}):"day"===e.unit||"hour"===e.unit?t(t({},i),{},{value:e.value}):"minute"===e.unit?t(t({},i),{},{value:e.value,minute:e.value}):"second"===e.unit?t(t({},i),{},{value:e.value,minute:e.minute,second:e.second}):e}));return y.filter((function(e){var t=1,i=Math.ceil(a.globals.gridWidth/120),s=e.value;void 0!==a.config.xaxis.tickAmount&&(i=a.config.xaxis.tickAmount),y.length>i&&(t=Math.floor(y.length/i));var o=!1,r=!1;switch(n.tickInterval){case"years":"year"===e.unit&&(o=!0);break;case"half_year":t=7,"year"===e.unit&&(o=!0);break;case"months":t=1,"year"===e.unit&&(o=!0);break;case"months_fortnight":t=15,"year"!==e.unit&&"month"!==e.unit||(o=!0),30===s&&(r=!0);break;case"months_days":t=10,"month"===e.unit&&(o=!0),30===s&&(r=!0);break;case"week_days":t=8,"month"===e.unit&&(o=!0);break;case"days":t=1,"month"===e.unit&&(o=!0);break;case"hours":"day"===e.unit&&(o=!0);break;case"minutes_fives":case"seconds_fives":s%5!=0&&(r=!0);break;case"seconds_tens":s%10!=0&&(r=!0)}if("hours"===n.tickInterval||"minutes_fives"===n.tickInterval||"seconds_tens"===n.tickInterval||"seconds_fives"===n.tickInterval){if(!r)return!0}else if((s%t==0||o)&&!r)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var i=this.w,n=this.formatDates(e),a=this.removeOverlappingTS(n);i.globals.timescaleLabels=a.slice(),new oe(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,i=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,a=e.daysWidthOnXAxis,s=e.numberOfYears,o=t.minYear,r=0,l=new O(this.ctx),c="year";if(t.minDate>1||t.minMonth>0){var d=l.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);r=(l.determineDaysOfYear(t.minYear)-d+1)*a,o=t.minYear+1,this.timeScaleArray.push({position:r,value:o,unit:c,year:o,month:f.monthMod(i+1)})}else 1===t.minDate&&0===t.minMonth&&this.timeScaleArray.push({position:r,value:o,unit:c,year:n,month:f.monthMod(i+1)});for(var h=o,u=r,p=0;p<s;p++)h++,u=l.determineDaysOfYear(h-1)*a+u,this.timeScaleArray.push({position:u,value:h,unit:c,year:h,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,i=e.currentMonthDate,n=e.currentMonth,a=e.currentYear,s=e.daysWidthOnXAxis,o=e.numberOfMonths,r=n,l=0,c=new O(this.ctx),d="month",h=0;if(t.minDate>1){l=(c.determineDaysOfMonths(n+1,t.minYear)-i+1)*s,r=f.monthMod(n+1);var u=a+h,p=f.monthMod(r),g=r;0===r&&(d="year",g=u,p=1,u+=h+=1),this.timeScaleArray.push({position:l,value:g,unit:d,year:u,month:p})}else this.timeScaleArray.push({position:l,value:r,unit:d,year:a,month:f.monthMod(n)});for(var m=r+1,v=l,b=0,x=1;b<o;b++,x++){0===(m=f.monthMod(m))?(d="year",h+=1):d="month";var y=this._getYear(a,m,h);v=c.determineDaysOfMonths(m,y)*s+v;var w=0===m?y:m;this.timeScaleArray.push({position:v,value:w,unit:d,year:y,month:0===m?1:m}),m++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,i=e.currentMonth,n=e.currentYear,a=e.hoursWidthOnXAxis,s=e.numberOfDays,o=new O(this.ctx),r="day",l=t.minDate+1,c=l,d=function(e,t,i){return e>o.determineDaysOfMonths(t+1,i)?(c=1,r="month",u=t+=1,t):t},h=(24-t.minHour)*a,u=l,p=d(c,i,n);0===t.minHour&&1===t.minDate?(h=0,u=f.monthMod(t.minMonth),r="month",c=t.minDate,s++):1!==t.minDate&&0===t.minHour&&0===t.minMinute&&(h=0,l=t.minDate,u=l,p=d(c=l,i,n)),this.timeScaleArray.push({position:h,value:u,unit:r,year:this._getYear(n,p,0),month:f.monthMod(p),day:c});for(var g=h,m=0;m<s;m++){r="day",p=d(c+=1,p,this._getYear(n,p,0));var v=this._getYear(n,p,0);g=24*a+g;var b=1===c?f.monthMod(p):c;this.timeScaleArray.push({position:g,value:b,unit:r,year:v,month:f.monthMod(p),day:b})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,i=e.currentDate,n=e.currentMonth,a=e.currentYear,s=e.minutesWidthOnXAxis,o=e.numberOfHours,r=new O(this.ctx),l="hour",c=function(e,t){return e>r.determineDaysOfMonths(t+1,a)&&(m=1,t+=1),{month:t,date:m}},d=function(e,t){return e>r.determineDaysOfMonths(t+1,a)?t+=1:t},h=60-(t.minMinute+t.minSecond/60),u=h*s,p=t.minHour+1,g=p+1;60===h&&(u=0,g=(p=t.minHour)+1);var m=i,v=d(m,n);this.timeScaleArray.push({position:u,value:p,unit:l,day:m,hour:g,year:a,month:f.monthMod(v)});for(var b=u,x=0;x<o;x++){l="hour",g>=24&&(g=0,l="day",v=c(m+=1,v).month,v=d(m,v));var y=this._getYear(a,v,0);b=0===g&&0===x?h*s:60*s+b;var w=0===g?m:g;this.timeScaleArray.push({position:b,value:w,unit:l,hour:g,day:m,year:y,month:f.monthMod(v)}),g++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,a=e.currentHour,s=e.currentDate,o=e.currentMonth,r=e.currentYear,l=e.minutesWidthOnXAxis,c=e.secondsWidthOnXAxis,d=e.numberOfMinutes,h=n+1,u=s,p=o,g=r,m=a,v=(60-i-t/1e3)*c,b=0;b<d;b++)h>=60&&(h=0,24===(m+=1)&&(m=0)),this.timeScaleArray.push({position:v,value:h,unit:"minute",hour:m,minute:h,day:u,year:this._getYear(g,p,0),month:f.monthMod(p)}),v+=l,h++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,i=e.currentSecond,n=e.currentMinute,a=e.currentHour,s=e.currentDate,o=e.currentMonth,r=e.currentYear,l=e.secondsWidthOnXAxis,c=e.numberOfSeconds,d=i+1,h=n,u=s,p=o,g=r,m=a,v=(1e3-t)/1e3*l,b=0;b<c;b++)d>=60&&(d=0,++h>=60&&(h=0,24==++m&&(m=0))),this.timeScaleArray.push({position:v,value:d,unit:"second",hour:m,minute:h,second:d,day:u,year:this._getYear(g,p,0),month:f.monthMod(p)}),v+=l,d++}},{key:"createRawDateString",value:function(e,t){var i=e.year;return 0===e.month&&(e.month=1),i+="-"+("0"+e.month.toString()).slice(-2),"day"===e.unit?i+="day"===e.unit?"-"+("0"+t).slice(-2):"-01":i+="-"+("0"+(e.day?e.day:"1")).slice(-2),"hour"===e.unit?i+="hour"===e.unit?"T"+("0"+t).slice(-2):"T00":i+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),"minute"===e.unit?i+=":"+("0"+t).slice(-2):i+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),"second"===e.unit?i+=":"+("0"+t).slice(-2):i+=":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(e){var t=this,i=this.w;return e.map((function(e){var n=e.value.toString(),a=new O(t.ctx),s=t.createRawDateString(e,n),o=a.getDate(a.parseDate(s));if(t.utc||(o=a.getDate(a.parseDateWithTimezone(s))),void 0===i.config.xaxis.labels.format){var r="dd MMM",l=i.config.xaxis.labels.datetimeFormatter;"year"===e.unit&&(r=l.year),"month"===e.unit&&(r=l.month),"day"===e.unit&&(r=l.day),"hour"===e.unit&&(r=l.hour),"minute"===e.unit&&(r=l.minute),"second"===e.unit&&(r=l.second),n=a.formatDate(o,r)}else n=a.formatDate(o,i.config.xaxis.labels.format);return{dateString:s,position:e.position,value:n,unit:e.unit,year:e.year,month:e.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,i=this,n=new v(this.ctx),a=!1;e.length>0&&e[0].value&&e.every((function(t){return t.value.length===e[0].value.length}))&&(a=!0,t=n.getTextRects(e[0].value).width);var s=0,o=e.map((function(o,r){if(r>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var l=a?t:n.getTextRects(e[s].value).width,c=e[s].position;return o.position>c+l+10?(s=r,o):null}return o}));return o.filter((function(e){return null!==e}))}},{key:"_getYear",value:function(e,t,i){return e+Math.floor(t/12)+i}}]),e}(),Le=function(){function e(t,i){n(this,e),this.ctx=i,this.w=i.w,this.el=t}return s(e,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,i=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(i)>-1,e.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(i)>-1,e.isBarHorizontal=("bar"===t.chart.type||"rangeBar"===t.chart.type||"boxPlot"===t.chart.type)&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),v.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.chart.background,this.setSVGDimensions(),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elAnnotations=e.dom.Paper.group().attr({class:"apexcharts-annotations"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var i=this.w,n=i.config,a=i.globals,s={series:[],i:[]},o={series:[],i:[]},r={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]},h={series:[],i:[]};a.series.map((function(t,u){var p=0;void 0!==e[u].type?("column"===e[u].type||"bar"===e[u].type?(a.series.length>1&&n.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(t),c.i.push(u),p++,i.globals.columnSeries=c.series):"area"===e[u].type?(o.series.push(t),o.i.push(u),p++):"line"===e[u].type?(s.series.push(t),s.i.push(u),p++):"scatter"===e[u].type?(r.series.push(t),r.i.push(u)):"bubble"===e[u].type?(l.series.push(t),l.i.push(u),p++):"candlestick"===e[u].type?(d.series.push(t),d.i.push(u),p++):"boxPlot"===e[u].type?(h.series.push(t),h.i.push(u),p++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),p>1&&(a.comboCharts=!0)):(s.series.push(t),s.i.push(u))}));var u=new Ae(this.ctx,t),p=new xe(this.ctx,t);this.ctx.pie=new Se(this.ctx);var f=new _e(this.ctx);this.ctx.rangeBar=new N(this.ctx,t);var g=new Ce(this.ctx),m=[];if(a.comboCharts){if(o.series.length>0&&m.push(u.draw(o.series,"area",o.i)),c.series.length>0)if(i.config.chart.stacked){var v=new be(this.ctx,t);m.push(v.draw(c.series,c.i))}else this.ctx.bar=new M(this.ctx,t),m.push(this.ctx.bar.draw(c.series,c.i));if(s.series.length>0&&m.push(u.draw(s.series,"line",s.i)),d.series.length>0&&m.push(p.draw(d.series,d.i)),h.series.length>0&&m.push(p.draw(h.series,h.i)),r.series.length>0){var b=new Ae(this.ctx,t,!0);m.push(b.draw(r.series,"scatter",r.i))}if(l.series.length>0){var x=new Ae(this.ctx,t,!0);m.push(x.draw(l.series,"bubble",l.i))}}else switch(n.chart.type){case"line":m=u.draw(a.series,"line");break;case"area":m=u.draw(a.series,"area");break;case"bar":n.chart.stacked?m=new be(this.ctx,t).draw(a.series):(this.ctx.bar=new M(this.ctx,t),m=this.ctx.bar.draw(a.series));break;case"candlestick":case"boxPlot":m=new xe(this.ctx,t).draw(a.series);break;case"rangeBar":m=this.ctx.rangeBar.draw(a.series);break;case"heatmap":m=new we(this.ctx,t).draw(a.series);break;case"treemap":m=new Ie(this.ctx,t).draw(a.series);break;case"pie":case"donut":case"polarArea":m=this.ctx.pie.draw(a.series);break;case"radialBar":m=f.draw(a.series);break;case"radar":m=g.draw(a.series);break;default:m=u.draw(a.series)}return m}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var i=f.getDimensions(this.el),n=t.chart.width.toString().split(/[0-9]+/g).pop();"%"===n?f.isNumber(i[0])&&(0===i[0].width&&(i=f.getDimensions(this.el.parentNode)),e.svgWidth=i[0]*parseInt(t.chart.width,10)/100):"px"!==n&&""!==n||(e.svgWidth=parseInt(t.chart.width,10));var a=t.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===a){var s=f.getDimensions(this.el.parentNode);e.svgHeight=s[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),v.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==a){var o=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+o+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,i={transform:"translate("+e.translateX+", "+t+")"};v.setAttrs(e.dom.elGraphical.node,i)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,i=0,n=e.config.chart.sparkline.enabled?1:15;n+=e.config.grid.padding.bottom,"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||!e.config.legend.show||e.config.legend.floating||(i=new le(this.ctx).legendHelpers.getLegendBBox().clwh+10);var a=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),s=2.05*e.globals.radialSize;if(a&&!e.config.chart.sparkline.enabled&&0!==e.config.plotOptions.radialBar.startAngle){var o=f.getBoundingClientRect(a);s=o.bottom;var r=o.bottom-o.top;s=Math.max(2.05*e.globals.radialSize,r)}var l=s+t.translateY+i+n;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",l),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=l+"px",v.setAttrs(t.dom.Paper.node,{height:l}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}},{key:"coreCalculations",value:function(){new U(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(e){return[]}))},i=new F,n=this.w.globals;i.initGlobalVars(n),n.seriesXvalues=t(),n.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new J(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new J(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new Ee(this.ctx);var i=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}e=new b(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,i=this.w;if(i.config.chart.brush.enabled&&"function"!=typeof i.config.chart.events.selection){var n=i.config.chart.brush.targets||[i.config.chart.brush.target];n.forEach((function(t){var i=ApexCharts.getChartByID(t);i.w.globals.brushSource=e.ctx,"function"!=typeof i.w.config.chart.events.zoomed&&(i.w.config.chart.events.zoomed=function(){e.updateSourceChart(i)}),"function"!=typeof i.w.config.chart.events.scrolled&&(i.w.config.chart.events.scrolled=function(){e.updateSourceChart(i)})})),i.config.chart.events.selection=function(e,a){n.forEach((function(e){var n=ApexCharts.getChartByID(e),s=f.clone(i.config.yaxis);if(i.config.chart.brush.autoScaleYaxis&&1===n.w.globals.series.length){var o=new V(n);s=o.autoScaleY(n,s,a)}var r=n.w.config.yaxis.reduce((function(e,i,a){return[].concat(h(e),[t(t({},n.w.config.yaxis[a]),{},{min:s[0].min,max:s[0].max})])}),[]);n.ctx.updateHelpers._updateOptions({xaxis:{min:a.xaxis.min,max:a.xaxis.max},yaxis:r},!1,!1,!1,!1)}))}}}}]),e}(),Me=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"_updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(r){var l=[t.ctx];s&&(l=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(l=[t.ctx],t.ctx.w.globals.isExecCalled=!1),l.forEach((function(s,c){var d=s.w;if(d.globals.shouldAnimate=a,n||(d.globals.resized=!0,d.globals.dataChanged=!0,a&&s.series.getPreviousPaths()),e&&"object"===i(e)&&(s.config=new H(e),e=b.extendArrayProps(s.config,e,d),s.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,d.config=f.extend(d.config,e),o&&(d.globals.lastXAxis=e.xaxis?f.clone(e.xaxis):[],d.globals.lastYAxis=e.yaxis?f.clone(e.yaxis):[],d.globals.initialConfig=f.extend({},d.config),d.globals.initialSeries=f.clone(d.config.series),e.series))){for(var h=0;h<d.globals.collapsedSeriesIndices.length;h++){var u=d.config.series[d.globals.collapsedSeriesIndices[h]];d.globals.collapsedSeries[h].data=d.globals.axisCharts?u.data.slice():u}for(var p=0;p<d.globals.ancillaryCollapsedSeriesIndices.length;p++){var g=d.config.series[d.globals.ancillaryCollapsedSeriesIndices[p]];d.globals.ancillaryCollapsedSeries[p].data=d.globals.axisCharts?g.data.slice():g}s.series.emptyCollapsedSeries(d.config.series)}return s.update(e).then((function(){c===l.length-1&&r(s)}))}))}))}},{key:"_updateSeries",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(a){var s,o=i.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&i.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(s=e.map((function(e,t){return i._extendSeries(e,t)}))).length&&(s=[{data:[]}]),o.config.series=s):o.config.series=e.slice(),n&&(o.globals.initialSeries=f.clone(o.config.series)),i.ctx.update().then((function(){a(i.ctx)}))}))}},{key:"_extendSeries",value:function(e,i){var n=this.w,a=n.config.series[i];return t(t({},n.config.series[i]),{},{name:e.name?e.name:a&&a.name,color:e.color?e.color:a&&a.color,type:e.type?e.type:a&&a.type,data:e.data?e.data:a&&a.data})}},{key:"toggleDataPointSelection",value:function(e,t){var i=this.w,n=null,a=".apexcharts-series[data\\:realIndex='".concat(e,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.select("".concat(a," path[j='").concat(t,"'], ").concat(a," circle[j='").concat(t,"'], ").concat(a," rect[j='").concat(t,"']")).members[0]:void 0===t&&(n=i.globals.dom.Paper.select("".concat(a," path[j='").concat(e,"']")).members[0],"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(e)),n?(new v(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(i){void 0!==e.xaxis[i]&&(t.config.xaxis[i]=e.xaxis[i],t.globals.lastXAxis[i]=e.xaxis[i])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var i=new R(e);e=i.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){var t=this.w;return t.config.chart.stacked&&"100%"===t.config.chart.stackType&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,i){e.yaxis[i].min=0,e.yaxis[i].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,i=this.w,n=i.globals.lastXAxis,a=i.globals.lastYAxis;e&&e.xaxis&&(n=e.xaxis),e&&e.yaxis&&(a=e.yaxis),i.config.xaxis.min=n.min,i.config.xaxis.max=n.max;i.config.yaxis.map((function(e,n){i.globals.zoomed||void 0!==a[n]?function(e){void 0!==a[e]&&(i.config.yaxis[e].min=a[e].min,i.config.yaxis[e].max=a[e].max)}(n):void 0!==t.ctx.opts.yaxis[n]&&(e.min=t.ctx.opts.yaxis[n].min,e.max=t.ctx.opts.yaxis[n].max)}))}}]),e}();Pe="undefined"!=typeof window?window:void 0,De=function(e,t){var n=(void 0!==this?this:e).SVG=function(e){if(n.supported)return e=new n.Doc(e),n.parser.draw||n.prepare(),e};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.dev",n.supported=!0,!n.supported)return!1;n.did=1e3,n.eid=function(e){return"Svgjs"+h(e)+n.did++},n.create=function(e){var i=t.createElementNS(this.ns,e);return i.setAttribute("id",this.eid(e)),i},n.extend=function(){var e,t;t=(e=[].slice.call(arguments)).pop();for(var i=e.length-1;i>=0;i--)if(e[i])for(var a in t)e[i].prototype[a]=t[a];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,n.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&n.extend(t,e.extend),e.construct&&n.extend(e.parent||n.Container,e.construct),t},n.adopt=function(t){return t?t.instance?t.instance:((i="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new n.Nested:new n.Doc:"linearGradient"==t.nodeName?new n.Gradient("linear"):"radialGradient"==t.nodeName?new n.Gradient("radial"):n[h(t.nodeName)]?new(n[h(t.nodeName)]):new n.Element(t)).type=t.nodeName,i.node=t,t.instance=i,i instanceof n.Doc&&i.namespace().defs(),i.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),i):null;var i},n.prepare=function(){var e=t.getElementsByTagName("body")[0],i=(e?new n.Doc(e):n.adopt(t.documentElement).nested()).size(2,0);n.parser={body:e||t.documentElement,draw:i.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:i.polyline().node,path:i.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},t.addEventListener("DOMContentLoaded",(function(){n.parser.draw||n.prepare()}),!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(e,t){for(var i=e.length,n=[],a=0;a<i;a++)n.push(t(e[a]));return n},filter:function(e,t){for(var i=e.length,n=[],a=0;a<i;a++)t(e[a])&&n.push(e[a]);return n},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(e){var t,a;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?n.regex.isRgb.test(e)?(t=n.regex.rgb.exec(e.replace(n.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):n.regex.isHex.test(e)&&(t=n.regex.hex.exec(4==(a=e).length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"===i(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+u(this.r)+u(this.g)+u(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new n.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new n.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),n.Color.test=function(e){return e+="",n.regex.isHex.test(e)||n.regex.isRgb.test(e)},n.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},n.Color.isColor=function(e){return n.Color.isRgb(e)||n.Color.test(e)},n.Array=function(e,t){0==(e=(e||[]).valueOf()).length&&t&&(e=t.valueOf()),this.value=this.parse(e)},n.extend(n.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)}}),n.PointArray=function(e,t){n.Array.call(this,e,t||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray;for(var a={M:function(e,t,i){return t.x=i.x=e[0],t.y=i.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},Z:function(e,t,i){return t.x=i.x,t.y=i.y,["Z"]}},s="mlhvqtcsaz".split(""),o=0,r=s.length;o<r;++o)a[s[o]]=function(e){return function(t,i,n){if("H"==e)t[0]=t[0]+i.x;else if("V"==e)t[0]=t[0]+i.y;else if("A"==e)t[5]=t[5]+i.x,t[6]=t[6]+i.y;else for(var s=0,o=t.length;s<o;++s)t[s]=t[s]+(s%2?i.y:i.x);if(a&&"function"==typeof a[e])return a[e](t,i,n)}}(s[o].toUpperCase());n.PathArray=function(e,t){n.Array.call(this,e,t||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t][0],null!=e[t][1]&&(n+=e[t][1],null!=e[t][2]&&(n+=" ",n+=e[t][2],null!=e[t][3]&&(n+=" ",n+=e[t][3],n+=" ",n+=e[t][4],null!=e[t][5]&&(n+=" ",n+=e[t][5],n+=" ",n+=e[t][6],null!=e[t][7]&&(n+=" ",n+=e[t][7])))));return n+" "}(this.value)},move:function(e,t){var i=this.bbox();return i.x,i.y,this},at:function(e){if(!this.destination)return this;for(var t=this.value,i=this.destination.value,a=[],s=new n.PathArray,o=0,r=t.length;o<r;o++){a[o]=[t[o][0]];for(var l=1,c=t[o].length;l<c;l++)a[o][l]=t[o][l]+(i[o][l]-t[o][l])*e;"A"===a[o][0]&&(a[o][4]=+(0!=a[o][4]),a[o][5]=+(0!=a[o][5]))}return s.value=a,s},parse:function(e){if(e instanceof n.PathArray)return e.valueOf();var t,i={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(n.regex.numbersWithDots,c).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):e.reduce((function(e,t){return[].concat.call(e,t)}),[]);var s=[],o=new n.Point,r=new n.Point,l=0,d=e.length;do{n.regex.isPathLetter.test(e[l])?(t=e[l],++l):"M"==t?t="L":"m"==t&&(t="l"),s.push(a[t].call(null,e.slice(l,l+=i[t.toUpperCase()]).map(parseFloat),o,r))}while(d>l);return s},bbox:function(){return n.parser.draw||n.prepare(),n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(n.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof n.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new n.Number(e),new n.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new n.Number(e),new n.Number(this-e,this.unit||e.unit)},times:function(e){return e=new n.Number(e),new n.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new n.Number(e),new n.Number(this/e,this.unit||e.unit)},to:function(e){var t=new n.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new n.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new n.Number(this.destination).minus(this).times(e).plus(this):this}}}),n.Element=n.invent({create:function(e){this._stroke=n.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var i=p(this,e,t);return this.width(new n.Number(i.width)).height(new n.Number(i.height))},clone:function(e){this.writeDataToDom();var t=m(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(n.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter((function(t){return t!=e})).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return n.get(this.attr(e))},parent:function(t){var i=this;if(!i.node.parentNode)return null;if(i=n.adopt(i.node.parentNode),!t)return i;for(;i&&i.node instanceof e.SVGElement;){if("string"==typeof t?i.matches(t):i instanceof t)return i;if(!i.node.parentNode||"#document"==i.node.parentNode.nodeName)return null;i=n.adopt(i.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(e){var t=[],i=this;do{if(!(i=i.parent(e))||!i.node)break;t.push(i)}while(i.parent);return t},matches:function(e){return function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node,e)},native:function(){return this.node},svg:function(e){var i=t.createElement("svg");if(!(e&&this instanceof n.Parent))return i.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),i.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");i.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var a=0,s=i.firstChild.childNodes.length;a<s;a++)this.node.appendChild(i.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return function(e,t){return e instanceof t}(this,e)}}}),n.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},n.morph=function(e){return function(t,i){return new n.MorphObj(t,i).at(e)}},n.Situation=n.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(e.duration).valueOf(),this.delay=new n.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,a){"object"===i(e)&&(t=e.ease,a=e.delay,e=e.duration);var s=new n.Situation({duration:e||1e3,delay:a||0,ease:n.easing[t||"-"]||t});return this.queue(s),this},target:function(e){return e&&e instanceof n.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof n.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t=this.situation;if(t.init)return this;for(var i in t.animations){e=this.target()[i](),Array.isArray(e)||(e=[e]),Array.isArray(t.animations[i])||(t.animations[i]=[t.animations[i]]);for(var a=e.length;a--;)t.animations[i][a]instanceof n.Number&&(e[a]=new n.Number(e[a])),t.animations[i][a]=e[a].morph(t.animations[i][a])}for(var i in t.attrs)t.attrs[i]=new n.MorphObj(this.target().attr(i),t.attrs[i]);for(var i in t.styles)t.styles[i]=new n.MorphObj(this.target().style(i),t.styles[i]);return t.initialTransformation=this.target().matrixify(),t.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var i=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!i&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(e){var t=this.last();return this.target().on("finished.fx",(function i(n){n.detail.situation==t&&(e.call(this,t),this.off("finished.fx",i))})),this._callStart()},during:function(e){var t=this.last(),i=function(i){i.detail.situation==t&&e.call(this,i.detail.pos,n.morph(i.detail.pos),i.detail.eased,t)};return this.target().off("during.fx",i).on("during.fx",i),this.after((function(){this.off("during.fx",i)})),this._callStart()},afterAll:function(e){var t=function t(i){e.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,i){return this.last()[i||"animations"][e]=t,this._callStart()},step:function(e){var t,i,n;e||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(t=Math.max(this.absPos,0),i=Math.floor(t),!0===this.situation.loops||i<this.situation.loops?(this.pos=t-i,n=this.situation.loop,this.situation.loop=i):(this.absPos=this.situation.loops,this.pos=1,n=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-n)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var a=this.situation.ease(this.pos);for(var s in this.situation.once)s>this.lastPos&&s<=a&&(this.situation.once[s].call(this.target(),this.pos,a),delete this.situation.once[s]);return this.active&&this.target().fire("during",{pos:this.pos,eased:a,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=a,this):this},eachAt:function(){var e,t=this,i=this.target(),a=this.situation;for(var s in a.animations)e=[].concat(a.animations[s]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),i[s].apply(i,e);for(var s in a.attrs)e=[s].concat(a.attrs[s]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),i.attr.apply(i,e);for(var s in a.styles)e=[s].concat(a.styles[s]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),i.style.apply(i,e);if(a.transforms.length){e=a.initialTransformation,s=0;for(var o=a.transforms.length;s<o;s++){var r=a.transforms[s];r instanceof n.Matrix?e=r.relative?e.multiply((new n.Matrix).morph(r).at(a.ease(this.pos))):e.morph(r).at(a.ease(this.pos)):(r.relative||r.undo(e.extract()),e=e.multiply(r.at(a.ease(this.pos))))}i.matrix(e)}return this},once:function(e,t,i){var n=this.last();return i||(e=n.ease(e)),n.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(e,t,i){return(this.fx||(this.fx=new n.FX(this))).animate(e,t,i)},delay:function(e){return(this.fx||(this.fx=new n.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),n.MorphObj=n.invent({create:function(e,t){return n.Color.isColor(t)?new n.Color(e).morph(t):n.regex.delimiter.test(e)?n.regex.pathLetters.test(e)?new n.PathArray(e).morph(t):new n.Array(e).morph(t):n.regex.numberAndUnit.test(t)?new n.Number(e).morph(t):(this.value=e,void(this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(e,t,n){if("object"===i(e))for(var a in e)this.attr(a,e[a]);else this.add(e,t,"attrs");return this},plot:function(e,t,i,n){return 4==arguments.length?this.plot([e,t,i,n]):this.add("plot",new(this.target().morphArray)(e))}}),n.Box=n.invent({create:function(e,t,a,s){if(!("object"!==i(e)||e instanceof n.Element))return n.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=a,this.height=s),function(e){null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2}(this)}}),n.BBox=n.invent({create:function(e){if(n.Box.apply(this,[].slice.call(arguments)),e instanceof n.Element){var i;try{if(!t.documentElement.contains){for(var a=e.node;a.parentNode;)a=a.parentNode;if(a!=t)throw new Error("Element not in the dom")}i=e.node.getBBox()}catch(t){if(e instanceof n.Shape){n.parser.draw||n.prepare();var s=e.clone(n.parser.draw.instance).show();s&&s.node&&"function"==typeof s.node.getBBox&&(i=s.node.getBBox()),s&&"function"==typeof s.remove&&s.remove()}else i={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}n.Box.call(this,i)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.Matrix=n.invent({create:function(e){var t=g([1,0,0,1,0,0]);e=null===e?t:e instanceof n.Element?e.matrixify():"string"==typeof e?g(e.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?g([].slice.call(arguments)):Array.isArray(e)?g(e):e&&"object"===i(e)?e:t;for(var a=b.length-1;a>=0;--a)this[b[a]]=null!=e[b[a]]?e[b[a]]:t[b[a]]},extend:{extract:function(){var e=f(this,0,1);f(this,1,0);var t=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(e){return this.destination=new n.Matrix(e),this},multiply:function(e){return new n.Matrix(this.native().multiply(function(e){return e instanceof n.Matrix||(e=new n.Matrix(e)),e}(e).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(e,t){return new n.Matrix(this.native().translate(e||0,t||0))},native:function(){for(var e=n.parser.native.createSVGMatrix(),t=b.length-1;t>=0;t--)e[b[t]]=this[b[t]];return e},toString:function(){return"matrix("+v(this.a)+","+v(this.b)+","+v(this.c)+","+v(this.d)+","+v(this.e)+","+v(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new n.Matrix(t)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(e,t){var n;n=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===i(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(e,t){return this.destination=new n.Point(e,t),this}}}),n.extend(n.Element,{point:function(e,t){return new n.Point(e,t).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(e,t,a){if(null==e){for(e={},a=(t=this.node.attributes).length-1;a>=0;a--)e[t[a].nodeName]=n.regex.isNumber.test(t[a].nodeValue)?parseFloat(t[a].nodeValue):t[a].nodeValue;return e}if("object"===i(e))for(var s in e)this.attr(s,e[s]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?n.defaults.attrs[e]:n.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(n.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof n.Image&&(t=this.doc().defs().pattern(0,0,(function(){this.add(t)})))),"number"==typeof t?t=new n.Number(t):n.Color.isColor(t)?t=new n.Color(t):Array.isArray(t)&&(t=new n.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof a?this.node.setAttributeNS(a,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),n.extend(n.Element,{transform:function(e,t){var a;return"object"!==i(e)?(a=new n.Matrix(this).extract(),"string"==typeof e?a[e]:a):(a=new n.Matrix(this),t=!!t||!!e.relative,null!=e.a&&(a=t?a.multiply(new n.Matrix(e)):new n.Matrix(e)),this.attr("transform",a))}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map((function(e){var t=e.trim().split("(");return[t[0],t[1].split(n.regex.delimiter).map((function(e){return parseFloat(e)}))]})).reduce((function(e,t){return"matrix"==t[0]?e.multiply(g(t[1])):e[t[0]].apply(e,t[1])}),new n.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),i=e.screenCTM().inverse();return this.addTo(e).untransform().transform(i.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var n=0,a=this.arguments.length;n<a;++n)this[this.arguments[n]]=e[n];else if(e&&"object"===i(e))for(n=0,a=this.arguments.length;n<a;++n)this[this.arguments[n]]=e[this.arguments[n]];this.inversed=!1,!0===t&&(this.inversed=!0)}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.extend(n.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===i(e))for(var a in e)this.style(a,e[a]);else{if(!n.regex.isCss.test(e))return this.node.style[d(e)];for(e=e.split(/\s*;\s*/).filter((function(e){return!!e})).map((function(e){return e.split(/\s*:\s*/)}));t=e.pop();)this.style(t[0],t[1])}else this.node.style[d(e)]=null===t||n.regex.isBlank.test(t)?"":t;return this}}),n.Parent=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),(function(e){return n.adopt(e)}))},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return n.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){for(var i=this.children(),a=0,s=i.length;a<s;a++)i[a]instanceof n.Element&&e.apply(i[a],[a,i]),t&&i[a]instanceof n.Container&&i[a].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(e,t){return 0===t||this instanceof n.Defs||this.node==n.parser.draw||(e=e||(this instanceof n.Doc?this:this.parent(n.Parent)),t=t||1/0,this.each((function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(e,t-1):this.toParent(e)})),this.node.firstChild||this.remove()),this},flatten:function(e,t){return this.ungroup(e,t)}}),n.Container=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Parent}),n.ViewBox=n.invent({parent:n.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(e){n.Element.prototype[e]=function(t){return n.on(this.node,e,t),this}})),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(e,t,i,a,s){var o=i.bind(a||e.instance||e),r=(n.handlerMap.indexOf(e)+1||n.handlerMap.push(e))-1,l=t.split(".")[0],c=t.split(".")[1]||"*";n.listeners[r]=n.listeners[r]||{},n.listeners[r][l]=n.listeners[r][l]||{},n.listeners[r][l][c]=n.listeners[r][l][c]||{},i._svgjsListenerId||(i._svgjsListenerId=++n.listenerId),n.listeners[r][l][c][i._svgjsListenerId]=o,e.addEventListener(l,o,s||{passive:!0})},n.off=function(e,t,i){var a=n.handlerMap.indexOf(e),s=t&&t.split(".")[0],o=t&&t.split(".")[1],r="";if(-1!=a)if(i){if("function"==typeof i&&(i=i._svgjsListenerId),!i)return;n.listeners[a][s]&&n.listeners[a][s][o||"*"]&&(e.removeEventListener(s,n.listeners[a][s][o||"*"][i],!1),delete n.listeners[a][s][o||"*"][i])}else if(o&&s){if(n.listeners[a][s]&&n.listeners[a][s][o]){for(var l in n.listeners[a][s][o])n.off(e,[s,o].join("."),l);delete n.listeners[a][s][o]}}else if(o)for(var c in n.listeners[a])for(var r in n.listeners[a][c])o===r&&n.off(e,[c,o].join("."));else if(s){if(n.listeners[a][s]){for(var r in n.listeners[a][s])n.off(e,[s,r].join("."));delete n.listeners[a][s]}}else{for(var c in n.listeners[a])n.off(e,c);delete n.listeners[a],delete n.handlerMap[a]}},n.extend(n.Element,{on:function(e,t,i,a){return n.on(this.node,e,t,i,a),this},off:function(e,t){return n.off(this.node,e,t),this},fire:function(t,i){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new n.CustomEvent(t,{detail:i,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(e){e&&("svg"==(e="string"==typeof e?t.getElementById(e):e).nodeName?this.constructor.call(this,e):(this.constructor.call(this,n.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var e;return this._defs||((e=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(e):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw&&!n.parser.draw.parentNode&&this.node.appendChild(n.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,i=m(t.cloneNode(!0));return e?(e.node||e).appendChild(i.node):t.parentNode.insertBefore(i.node,t.nextSibling),i}}}),n.extend(n.Element,{}),n.Gradient=n.invent({create:function(e){this.constructor.call(this,n.create(e+"Gradient")),this.type=e},inherit:n.Container,extend:{at:function(e,t,i){return this.put(new n.Stop).update(e,t,i)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,i){return"transform"==e&&(e="gradientTransform"),n.Container.prototype.attr.call(this,e,t,i)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),n.extend(n.Gradient,n.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(e),fy:new n.Number(t)}):this.attr({x1:new n.Number(e),y1:new n.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(e),cy:new n.Number(t)}):this.attr({x2:new n.Number(e),y2:new n.Number(t)})}}),n.extend(n.Defs,{gradient:function(e,t){return this.put(new n.Gradient(e)).update(t)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(e){return("number"==typeof e||e instanceof n.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new n.Number(e.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,i){return"transform"==e&&(e="patternTransform"),n.Container.prototype.attr.call(this,e,t,i)}},construct:{pattern:function(e,t,i){return this.defs().pattern(e,t,i)}}}),n.extend(n.Defs,{pattern:function(e,t,i){return this.put(new n.Pattern).update(i).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,n.xlink)}},construct:{use:function(e,t){return this.put(new n.Use).element(e,t)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(e,t){return this.put(new n.Rect).size(e,t)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(e){return this.put(new n.Circle).rx(new n.Number(e).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(e,t){return this.put(new n.Ellipse).size(e,t).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),n.extend(n.Circle,n.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new n.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new n.Number(e).divide(2))},size:function(e,t){var i=p(this,e,t);return this.rx(new n.Number(i.width).divide(2)).ry(new n.Number(i.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,i,a){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:i,y2:a}:new n.PointArray(e).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var i=p(this,e,t);return this.attr(this.array().size(i.width,i.height).toLine())}},construct:{line:function(e,t,i,a){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=e?[e,t,i,a]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(e){return this.put(new n.Polyline).plot(e||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(e){return this.put(new n.Polygon).plot(e||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new n.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var i=p(this,e,t);return this.attr("points",this.array().size(i.width,i.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new n.PathArray(e))},clear:function(){return delete this._array,this}},construct:{path:function(e){return this.put(new n.Path).plot(e||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(t){if(!t)return this;var i=this,a=new e.Image;return n.on(a,"load",(function(){n.off(a);var e=i.parent(n.Pattern);null!==e&&(0==i.width()&&0==i.height()&&i.size(a.width,a.height),e&&0==e.width()&&0==e.height()&&e.size(i.width(),i.height()),"function"==typeof i._loaded&&i._loaded.call(i,{width:a.width,height:a.height,ratio:a.width/a.height,url:t}))})),n.on(a,"error",(function(e){n.off(a),"function"==typeof i._error&&i._error.call(i,e)})),this.attr("href",a.src=this.src=t,n.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,i){return this.put(new n.Image).load(e).size(t||0,i||t||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},text:function(e){if(void 0===e){e="";for(var t=this.node.childNodes,i=0,a=t.length;i<a;++i)0!=i&&3!=t[i].nodeType&&1==n.adopt(t[i]).dom.newLined&&(e+="\n"),e+=t[i].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{i=0;for(var s=(e=e.split("\n")).length;i<s;i++)this.tspan(e[i]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new n.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=n.utils.map(n.utils.filterSVGElements(e.childNodes),(function(e){return n.adopt(e)}));return new n.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,i=0,a=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?i+=a:(this.attr("dy",a+i),i=0))})),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new n.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new n.Text).text(e)},plain:function(e){return this.put(new n.Text).plain(e)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(n.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,i=new n.Tspan;return!1===this._build&&this.clear(),t.appendChild(i.node),i.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),i=null;return t&&(i=t.plot(e)),null==e?i:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};function c(e,t,i,a){return i+a.replace(n.regex.dots," .")}function d(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function h(e){return e.charAt(0).toUpperCase()+e.slice(1)}function u(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function p(e,t,i){if(null==t||null==i){var n=e.bbox();null==t?t=n.width/n.height*i:null==i&&(i=n.height/n.width*t)}return{width:t,height:i}}function f(e,t,i){return{x:t*e.a+i*e.c+0,y:t*e.b+i*e.d+0}}function g(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function m(t){for(var i=t.childNodes.length-1;i>=0;i--)t.childNodes[i]instanceof e.SVGElement&&m(t.childNodes[i]);return n.adopt(t).id(n.eid(t.nodeName))}function v(e){return Math.abs(e)>1e-37?e:0}["fill","stroke"].forEach((function(e){var t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||n.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(var i=l[e].length-1;i>=0;i--)null!=t[l[e][i]]&&this.attr(l.prefix(e,l[e][i]),t[l[e][i]]);return this},n.extend(n.Element,n.FX,t)})),n.extend(n.Element,n.FX,{translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new n.Number(e).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(e){return this.y(new n.Number(e).plus(this instanceof n.FX?0:this.y()),!0)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),n.Set=n.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){for(var e=[].slice.call(arguments),t=0,i=e.length;t<i;t++)this.members.push(e[t]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,i=this.members.length;t<i;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(e){return new n.Set(e)}}}),n.FX.Set=n.invent({create:function(e){this.set=e}}),n.Set.inherit=function(){var e=[];for(var t in n.Shape.prototype)"function"==typeof n.Shape.prototype[t]&&"function"!=typeof n.Set.prototype[t]&&e.push(t);for(var t in e.forEach((function(e){n.Set.prototype[e]=function(){for(var t=0,i=this.members.length;t<i;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new n.FX.Set(this)):this}})),e=[],n.FX.prototype)"function"==typeof n.FX.prototype[t]&&"function"!=typeof n.FX.Set.prototype[t]&&e.push(t);e.forEach((function(e){n.FX.Set.prototype[e]=function(){for(var t=0,i=this.set.members.length;t<i;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}}))},n.extend(n.Element,{}),n.extend(n.Element,{remember:function(e,t){if("object"===i(arguments[0]))for(var n in e)this.remember(n,e[n]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(e){var i=t.getElementById(function(e){var t=(e||"").toString().match(n.regex.reference);if(t)return t[1]}(e)||e);return n.adopt(i)},n.select=function(e,i){return new n.Set(n.utils.map((i||t).querySelectorAll(e),(function(e){return n.adopt(e)})))},n.extend(n.Parent,{select:function(e){return n.select(e,this.node)}});var b="abcdef".split("");if("function"!=typeof e.CustomEvent){var x=function(e,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var n=t.createEvent("CustomEvent");return n.initCustomEvent(e,i.bubbles,i.cancelable,i.detail),n};x.prototype=e.Event.prototype,n.CustomEvent=x}else n.CustomEvent=e.CustomEvent;return n},"function"==typeof define&&define.amd?define((function(){return De(Pe,Pe.document)})):"object"===("undefined"==typeof exports?"undefined":i(exports))&&"undefined"!=typeof module?module.exports=Pe.document?De(Pe,Pe.document):function(e){return De(e,e.document)}:Pe.SVG=De(Pe,Pe.document),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(e,t){return this.add(e,t),!e.attr("in")&&this.autoSetIn&&e.attr("in",this.source),e.attr("result")||e.attr("result",e),e},blend:function(e,t,i){return this.put(new SVG.BlendEffect(e,t,i))},colorMatrix:function(e,t){return this.put(new SVG.ColorMatrixEffect(e,t))},convolveMatrix:function(e){return this.put(new SVG.ConvolveMatrixEffect(e))},componentTransfer:function(e){return this.put(new SVG.ComponentTransferEffect(e))},composite:function(e,t,i){return this.put(new SVG.CompositeEffect(e,t,i))},flood:function(e,t){return this.put(new SVG.FloodEffect(e,t))},offset:function(e,t){return this.put(new SVG.OffsetEffect(e,t))},image:function(e){return this.put(new SVG.ImageEffect(e))},merge:function(){var e=[void 0];for(var t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(e,t){return this.put(new SVG.GaussianBlurEffect(e,t))},morphology:function(e,t){return this.put(new SVG.MorphologyEffect(e,t))},diffuseLighting:function(e,t,i){return this.put(new SVG.DiffuseLightingEffect(e,t,i))},displacementMap:function(e,t,i,n,a){return this.put(new SVG.DisplacementMapEffect(e,t,i,n,a))},specularLighting:function(e,t,i,n){return this.put(new SVG.SpecularLightingEffect(e,t,i,n))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(e,t,i,n,a){return this.put(new SVG.TurbulenceEffect(e,t,i,n,a))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(e){var t=this.put(new SVG.Filter);return"function"==typeof e&&e.call(t,t),t}}),SVG.extend(SVG.Container,{filter:function(e){return this.defs().filter(e)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(e){return this.filterer=e instanceof SVG.Element?e:this.doc().filter(e),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(e){return this.filterer&&!0===e&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}});var e={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},diffuseLighting:function(e,t,i){return this.parent()&&this.parent().diffuseLighting(e,t,i).in(this)},displacementMap:function(e,t,i,n){return this.parent()&&this.parent().displacementMap(this,e,t,i,n)},specularLighting:function(e,t,i,n){return this.parent()&&this.parent().specularLighting(e,t,i,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,i,n,a){return this.parent()&&this.parent().turbulence(e,t,i,n,a).in(this)}};SVG.extend(SVG.Effect,e),SVG.extend(SVG.ParentEffect,e),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){this.attr("in",e)}}});var t={blend:function(e,t,i){this.attr({in:e,in2:t,mode:i||"normal"})},colorMatrix:function(e,t){"matrix"==e&&(t=a(t)),this.attr({type:e,values:void 0===t?null:t})},convolveMatrix:function(e){e=a(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(e,t,i){this.attr({in:e,in2:t,operator:i})},flood:function(e,t){this.attr("flood-color",e),null!=t&&this.attr("flood-opacity",t)},offset:function(e,t){this.attr({dx:e,dy:t})},image:function(e){this.attr("href",e,SVG.xlink)},displacementMap:function(e,t,i,n,a){this.attr({in:e,in2:t,scale:i,xChannelSelector:n,yChannelSelector:a})},gaussianBlur:function(e,t){null!=e||null!=t?this.attr("stdDeviation",function(e){if(!Array.isArray(e))return e;for(var t=0,i=e.length,n=[];t<i;t++)n.push(e[t]);return n.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(e,t){this.attr({operator:e,radius:t})},tile:function(){},turbulence:function(e,t,i,n,a){this.attr({numOctaves:t,seed:i,stitchTiles:n,baseFrequency:e,type:a})}},i={merge:function(){var e;if(arguments[0]instanceof SVG.Set){var t=this;arguments[0].each((function(e){this instanceof SVG.MergeNode?t.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&t.put(new SVG.MergeNode(this))}))}else{e=Array.isArray(arguments[0])?arguments[0]:arguments;for(var i=0;i<e.length;i++)e[i]instanceof SVG.MergeNode?this.put(e[i]):this.put(new SVG.MergeNode(e[i]))}},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(e){this[e]=new(SVG["Func"+e.toUpperCase()])("identity"),this.rgb.add(this[e]),this.node.appendChild(this[e].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(e,t,i){this.attr({surfaceScale:e,diffuseConstant:t,kernelUnitLength:i})},specularLighting:function(e,t,i,n){this.attr({surfaceScale:e,diffuseConstant:t,specularExponent:i,kernelUnitLength:n})}},n={distantLight:function(e,t){this.attr({azimuth:e,elevation:t})},pointLight:function(e,t,i){this.attr({x:e,y:t,z:i})},spotLight:function(e,t,i,n,a,s){this.attr({x:e,y:t,z:i,pointsAtX:n,pointsAtY:a,pointsAtZ:s})},mergeNode:function(e){this.attr("in",e)}};function a(e){return Array.isArray(e)&&(e=new SVG.Array(e)),e.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function s(){var e=function(){};for(var t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var i in arguments[t])e(arguments[t][i],i,arguments[t])}["r","g","b","a"].forEach((function(e){n["Func"+e.toUpperCase()]=function(e){switch(this.attr("type",e),e){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),s(t,(function(e,t){var i=t.charAt(0).toUpperCase()+t.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),s(i,(function(e,t){var i=t.charAt(0).toUpperCase()+t.slice(1);SVG[i+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),s(n,(function(e,t){var i=t.charAt(0).toUpperCase()+t.slice(1);SVG[i]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+i)),e.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(e){return e instanceof SVG.MergeNode?this.add(e,0):this.add(new SVG.MergeNode(e),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",e)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function e(e,a,s,o,r,l,c){for(var d=e.slice(a,s||c),h=o.slice(r,l||c),u=0,p={pos:[0,0],start:[0,0]},f={pos:[0,0],start:[0,0]};d[u]=t.call(p,d[u]),h[u]=t.call(f,h[u]),d[u][0]!=h[u][0]||"M"==d[u][0]||"A"==d[u][0]&&(d[u][4]!=h[u][4]||d[u][5]!=h[u][5])?(Array.prototype.splice.apply(d,[u,1].concat(n.call(p,d[u]))),Array.prototype.splice.apply(h,[u,1].concat(n.call(f,h[u])))):(d[u]=i.call(p,d[u]),h[u]=i.call(f,h[u])),++u!=d.length||u!=h.length;)u==d.length&&d.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),u==h.length&&h.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]);return{start:d,dest:h}}function t(e){switch(e[0]){case"z":case"Z":e[0]="L",e[1]=this.start[0],e[2]=this.start[1];break;case"H":e[0]="L",e[2]=this.pos[1];break;case"V":e[0]="L",e[2]=e[1],e[1]=this.pos[0];break;case"T":e[0]="Q",e[3]=e[1],e[4]=e[2],e[1]=this.reflection[1],e[2]=this.reflection[0];break;case"S":e[0]="C",e[6]=e[4],e[5]=e[3],e[4]=e[2],e[3]=e[1],e[2]=this.reflection[1],e[1]=this.reflection[0]}return e}function i(e){var t=e.length;return this.pos=[e[t-2],e[t-1]],-1!="SCQT".indexOf(e[0])&&(this.reflection=[2*this.pos[0]-e[t-4],2*this.pos[1]-e[t-3]]),e}function n(e){var t=[e];switch(e[0]){case"M":return this.pos=this.start=[e[1],e[2]],t;case"L":e[5]=e[3]=e[1],e[6]=e[4]=e[2],e[1]=this.pos[0],e[2]=this.pos[1];break;case"Q":e[6]=e[4],e[5]=e[3],e[4]=1*e[4]/3+2*e[2]/3,e[3]=1*e[3]/3+2*e[1]/3,e[2]=1*this.pos[1]/3+2*e[2]/3,e[1]=1*this.pos[0]/3+2*e[1]/3;break;case"A":e=(t=function(e,t){var i,n,a,s,o,r,l,c,d,h,u,p,f,g,m,v,b,x,y,w,k,S,C,_,T,A,P=Math.abs(t[1]),D=Math.abs(t[2]),I=t[3]%360,E=t[4],L=t[5],M=t[6],O=t[7],N=new SVG.Point(e),R=new SVG.Point(M,O),H=[];if(0===P||0===D||N.x===R.x&&N.y===R.y)return[["C",N.x,N.y,R.x,R.y,R.x,R.y]];for((n=(i=new SVG.Point((N.x-R.x)/2,(N.y-R.y)/2).transform((new SVG.Matrix).rotate(I))).x*i.x/(P*P)+i.y*i.y/(D*D))>1&&(P*=n=Math.sqrt(n),D*=n),a=(new SVG.Matrix).rotate(I).scale(1/P,1/D).rotate(-I),N=N.transform(a),r=(s=[(R=R.transform(a)).x-N.x,R.y-N.y])[0]*s[0]+s[1]*s[1],o=Math.sqrt(r),s[0]/=o,s[1]/=o,l=r<4?Math.sqrt(1-r/4):0,E===L&&(l*=-1),c=new SVG.Point((R.x+N.x)/2+l*-s[1],(R.y+N.y)/2+l*s[0]),d=new SVG.Point(N.x-c.x,N.y-c.y),h=new SVG.Point(R.x-c.x,R.y-c.y),u=Math.acos(d.x/Math.sqrt(d.x*d.x+d.y*d.y)),d.y<0&&(u*=-1),p=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(p*=-1),L&&u>p&&(p+=2*Math.PI),!L&&u<p&&(p-=2*Math.PI),v=[],b=u,f=(p-u)/(g=Math.ceil(2*Math.abs(u-p)/Math.PI)),m=4*Math.tan(f/4)/3,k=0;k<=g;k++)y=Math.cos(b),x=Math.sin(b),w=new SVG.Point(c.x+y,c.y+x),v[k]=[new SVG.Point(w.x+m*x,w.y-m*y),w,new SVG.Point(w.x-m*x,w.y+m*y)],b+=f;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),a=(new SVG.Matrix).rotate(I).scale(P,D).rotate(-I),k=0,S=v.length;k<S;k++)v[k][0]=v[k][0].transform(a),v[k][1]=v[k][1].transform(a),v[k][2]=v[k][2].transform(a);for(k=1,S=v.length;k<S;k++)C=(w=v[k-1][2]).x,_=w.y,T=(w=v[k][0]).x,A=w.y,M=(w=v[k][1]).x,O=w.y,H.push(["C",C,_,T,A,M,O]);return H}(this.pos,e))[0]}return e[0]="C",this.pos=[e[5],e[6]],this.reflection=[2*e[5]-e[3],2*e[6]-e[4]],t}function a(e,t){if(!1===t)return!1;for(var i=t,n=e.length;i<n;++i)if("M"==e[i][0])return i;return!1}SVG.extend(SVG.PathArray,{morph:function(t){for(var i=this.value,n=this.parse(t),s=0,o=0,r=!1,l=!1;!1!==s||!1!==o;){var c;r=a(i,!1!==s&&s+1),l=a(n,!1!==o&&o+1),!1===s&&(s=0==(c=new SVG.PathArray(d.start).bbox()).height||0==c.width?i.push(i[0])-1:i.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===o&&(o=0==(c=new SVG.PathArray(d.dest).bbox()).height||0==c.width?n.push(n[0])-1:n.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var d=e(i,s,r,n,o,l);i=i.slice(0,s).concat(d.start,!1===r?[]:i.slice(r)),n=n.slice(0,o).concat(d.dest,!1===l?[]:n.slice(l)),s=!1!==r&&s+d.start.length,o=!1!==l&&o+d.dest.length}return this.value=i,this.destination=new SVG.PathArray,this.destination.value=n,this}})}(),function(){function e(e){e.remember("_draggable",this),this.el=e}e.prototype.init=function(e,t){var i=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",(function(e){i.start(e)})),this.el.on("touchstart.drag",(function(e){i.start(e)}))},e.prototype.transformPoint=function(e,t){var i=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=i.clientX-(t||0),this.p.y=i.clientY,this.p.matrixTransform(this.m)},e.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},e.prototype.start=function(e){if("click"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type||1==(e.which||e.buttons)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var i,n=this.getBBox();if(this.el instanceof SVG.Text)switch(i=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":i/=2;break;case"start":i=0}this.startPoints={point:this.transformPoint(e,i),box:n,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(e){t.drag(e)})),SVG.on(window,"touchmove.drag",(function(e){t.drag(e)})),SVG.on(window,"mouseup.drag",(function(e){t.end(e)})),SVG.on(window,"touchend.drag",(function(e){t.end(e)})),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},e.prototype.drag=function(e){var t=this.getBBox(),i=this.transformPoint(e),n=this.startPoints.box.x+i.x-this.startPoints.point.x,a=this.startPoints.box.y+i.y-this.startPoints.point.y,s=this.constraint,o=i.x-this.startPoints.point.x,r=i.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:i,m:this.m,handler:this}),this.el.event().defaultPrevented)return i;if("function"==typeof s){var l=s.call(this.el,n,a,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(n):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(a):!1!==l.y&&this.el.y(l.y)}else"object"==typeof s&&(null!=s.minX&&n<s.minX?o=(n=s.minX)-this.startPoints.box.x:null!=s.maxX&&n>s.maxX-t.width&&(o=(n=s.maxX-t.width)-this.startPoints.box.x),null!=s.minY&&a<s.minY?r=(a=s.minY)-this.startPoints.box.y:null!=s.maxY&&a>s.maxY-t.height&&(r=(a=s.maxY-t.height)-this.startPoints.box.y),null!=s.snapToGrid&&(n-=n%s.snapToGrid,a-=a%s.snapToGrid,o-=o%s.snapToGrid,r-=r%s.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:r},!0):this.el.move(n,a));return i},e.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,i){"function"!=typeof t&&"object"!=typeof t||(i=t,t=!0);var n=this.remember("_draggable")||new e(this);return(t=void 0===t||t)?n.init(i||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function e(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(e,t,i){var n="string"!=typeof e?e:t[e];return i?n/2:n},this.pointCoords=function(e,t){var i=this.pointsList[e];return{x:this.pointCoord(i[0],t,"t"===e||"b"===e),y:this.pointCoord(i[1],t,"r"===e||"l"===e)}}}e.prototype.init=function(e,t){var i=this.el.bbox();this.options={};var n=this.el.selectize.defaults.points;for(var a in this.el.selectize.defaults)this.options[a]=this.el.selectize.defaults[a],void 0!==t[a]&&(this.options[a]=t[a]);var s=["points","pointsExclude"];for(var a in s){var o=this.options[s[a]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===s[a]&&(o=o?n:[]),this.options[s[a]]=o}this.options.points=[n,this.options.points].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(i.x,i.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},e.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},e.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map((function(t){return[t[0]-e.x,t[1]-e.y]}))},e.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),i=0,n=t.length;i<n;++i){var a=function(t){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var n=i.pageX||i.touches[0].pageX,a=i.pageY||i.touches[0].pageY;e.el.fire("point",{x:n,y:a,i:t,event:i})}}(i),s=this.drawPoint(t[i][0],t[i][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",a).on("mousedown",a);this.pointSelection.set.add(s)}},e.prototype.drawPoint=function(e,t){var i=this.options.pointType;switch(i){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if("function"==typeof i)return i.call(this,e,t);throw new Error("Unknown "+i+" point type!")}},e.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},e.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},e.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each((function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])}))},e.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map((function(i,n){var a=e.pointCoords(i,t);e.rectSelection.set.get(n+1).center(a.x,a.y)})),this.options.rotationPoint){var i=this.rectSelection.set.length();this.rectSelection.set.get(i-1).center(t.width/2,20)}},e.prototype.selectRect=function(e){var t=this,i=this.el.bbox();function n(e){return function(i){(i=i||window.event).preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation();var n=i.pageX||i.touches[0].pageX,a=i.pageY||i.touches[0].pageY;t.el.fire(e,{x:n,y:a,event:i})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(i.width,i.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(e,a){var s=t.pointCoords(e,i),o=t.drawPoint(s.x,s.y).attr("class",t.options.classPoints+"_"+e).on("mousedown",n(e)).on("touchstart",n(e));t.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(t.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var a=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var i=e.pageX||e.touches[0].pageX,n=e.pageY||e.touches[0].pageY;t.el.fire("rot",{x:i,y:n,event:e})},s=this.drawPoint(i.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",a).on("mousedown",a);this.rectSelection.set.add(s)}},e.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},e.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){e.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(e){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){e.handler()}))},e.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,i){return"object"==typeof t&&(i=t,t=!0),(this.remember("_selectHandler")||new e(this)).init(void 0===t||t,i||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function e(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}e.prototype.transformPoint=function(e,t,i){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(i||this.m)},e.prototype._extractPosition=function(e){return{x:null!=e.clientX?e.clientX:e.touches[0].clientX,y:null!=e.clientY?e.clientY:e.touches[0].clientY}},e.prototype.init=function(e){var t=this;if(this.stop(),"stop"!==e){for(var i in this.options={},this.el.resize.defaults)this.options[i]=this.el.resize.defaults[i],void 0!==e[i]&&(this.options[i]=e[i]);this.el.on("lt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rb.resize",(function(e){t.resize(e||window.event)})),this.el.on("lb.resize",(function(e){t.resize(e||window.event)})),this.el.on("t.resize",(function(e){t.resize(e||window.event)})),this.el.on("r.resize",(function(e){t.resize(e||window.event)})),this.el.on("b.resize",(function(e){t.resize(e||window.event)})),this.el.on("l.resize",(function(e){t.resize(e||window.event)})),this.el.on("rot.resize",(function(e){t.resize(e||window.event)})),this.el.on("point.resize",(function(e){t.resize(e||window.event)})),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var i=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(i.x,i.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==e.detail.i){var n=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[n[e.detail.i][0],n[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(e,t){var i=this.snapToGrid(e,t);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y+i[1]).size(this.parameters.box.width-i[0],this.parameters.box.height-i[1])}};break;case"rt":this.calc=function(e,t){var i=this.snapToGrid(e,t,2);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).size(this.parameters.box.width+i[0],this.parameters.box.height-i[1])}};break;case"rb":this.calc=function(e,t){var i=this.snapToGrid(e,t,0);if(this.parameters.box.width+i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+i[0]);i=this.checkAspectRatio(i),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+i[0],this.parameters.box.height+i[1])}};break;case"lb":this.calc=function(e,t){var i=this.snapToGrid(e,t,1);if(this.parameters.box.width-i[0]>0&&this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+i[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-i[0]);i=this.checkAspectRatio(i,!0),this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).size(this.parameters.box.width-i[0],this.parameters.box.height+i[1])}};break;case"t":this.calc=function(e,t){var i=this.snapToGrid(e,t,2);if(this.parameters.box.height-i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+i[1]).height(this.parameters.box.height-i[1])}};break;case"r":this.calc=function(e,t){var i=this.snapToGrid(e,t,0);if(this.parameters.box.width+i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+i[0])}};break;case"b":this.calc=function(e,t){var i=this.snapToGrid(e,t,0);if(this.parameters.box.height+i[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+i[1])}};break;case"l":this.calc=function(e,t){var i=this.snapToGrid(e,t,1);if(this.parameters.box.width-i[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+i[0],this.parameters.box.y).width(this.parameters.box.width-i[0])}};break;case"rot":this.calc=function(e,t){var i=e+this.parameters.p.x,n=t+this.parameters.p.y,a=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),s=Math.atan2(n-this.parameters.box.y-this.parameters.box.height/2,i-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(s-a)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(e,t){var i=this.snapToGrid(e,t,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),n=this.el.array().valueOf();n[this.parameters.i][0]=this.parameters.pointCoords[0]+i[0],n[this.parameters.i][1]=this.parameters.pointCoords[1]+i[1],this.el.plot(n)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"touchend.resize",(function(){t.done()})),SVG.on(window,"mousemove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"mouseup.resize",(function(){t.done()}))},e.prototype.update=function(e){if(e){var t=this._extractPosition(e),i=this.transformPoint(t.x,t.y),n=i.x-this.parameters.p.x,a=i.y-this.parameters.p.y;this.lastUpdateCall=[n,a],this.calc(n,a),this.el.fire("resizing",{dx:n,dy:a,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(e,t,i,n){var a;return void 0!==n?a=[(i+e)%this.options.snapToGrid,(n+t)%this.options.snapToGrid]:(i=null==i?3:i,a=[(this.parameters.box.x+e+(1&i?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&i?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(a[0]-=this.options.snapToGrid),t<0&&(a[1]-=this.options.snapToGrid),e-=Math.abs(a[0])<this.options.snapToGrid/2?a[0]:a[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(a[1])<this.options.snapToGrid/2?a[1]:a[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,i,n)},e.prototype.constraintToBox=function(e,t,i,n){var a,s,o=this.options.constraint||{};return void 0!==n?(a=i,s=n):(a=this.parameters.box.x+(1&i?0:this.parameters.box.width),s=this.parameters.box.y+(2&i?0:this.parameters.box.height)),void 0!==o.minX&&a+e<o.minX&&(e=o.minX-a),void 0!==o.maxX&&a+e>o.maxX&&(e=o.maxX-a),void 0!==o.minY&&s+t<o.minY&&(t=o.minY-s),void 0!==o.maxY&&s+t>o.maxY&&(t=o.maxY-s),[e,t]},e.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var i=e.slice(),n=this.parameters.box.width/this.parameters.box.height,a=this.parameters.box.width+e[0],s=this.parameters.box.height-e[1],o=a/s;return o<n?(i[1]=a/n-this.parameters.box.height,t&&(i[1]=-i[1])):o>n&&(i[0]=this.parameters.box.width-s*n,t&&(i[0]=-i[0])),i},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Oe=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new g(this.ctx),this.ctx.axes=new K(this.ctx),this.ctx.core=new Le(this.ctx.el,this.ctx),this.ctx.config=new H({}),this.ctx.data=new B(this.ctx),this.ctx.grid=new $(this.ctx),this.ctx.graphics=new v(this.ctx),this.ctx.coreUtils=new b(this.ctx),this.ctx.crosshairs=new J(this.ctx),this.ctx.events=new G(this.ctx),this.ctx.exports=new Y(this.ctx),this.ctx.localization=new Z(this.ctx),this.ctx.options=new C,this.ctx.responsive=new Q(this.ctx),this.ctx.series=new E(this.ctx),this.ctx.theme=new ee(this.ctx),this.ctx.formatters=new z(this.ctx),this.ctx.titleSubtitle=new te(this.ctx),this.ctx.legend=new le(this.ctx),this.ctx.toolbar=new ce(this.ctx),this.ctx.dimensions=new oe(this.ctx),this.ctx.updateHelpers=new Me(this.ctx),this.ctx.zoomPanSelection=new de(this.ctx),this.ctx.w.globals.tooltip=new ve(this.ctx)}}]),e}(),Ne=function(){function e(t){n(this,e),this.ctx=t,this.w=t.w}return s(e,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(e,t){this.removeClass("*"),this.off(),this.stop()}),!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,i=e.isUpdating,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!i&&(n.parentNode.parentNode.style.minHeight="unset");var a=this.w.globals.dom.baseEl;a&&this.ctx.eventList.forEach((function(e){a.removeEventListener(e,t.ctx.events.documentEvent)}));var s=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(s.Paper),s.Paper.remove(),s.elWrap=null,s.elGraphical=null,s.elAnnotations=null,s.elLegendWrap=null,s.baseEl=null,s.elGridRect=null,s.elGridRectMask=null,s.elGridRectMarkerMask=null,s.elForecastMask=null,s.elNonForecastMask=null,s.elDefs=null}}]),e}(),Re=new WeakMap;return function(){function e(t,i){n(this,e),this.opts=i,this.ctx=this,this.w=new j(i).init(),this.el=t,this.w.globals.cuid=f.randomId(),this.w.globals.chartID=this.w.config.chart.id?f.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Oe(this).initModules(),this.create=f.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return s(e,[{key:"render",value:function(){var e=this;return new Promise((function(t,i){if(null!==e.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var n=e.w.config.chart.events.beforeMount;if("function"==typeof n&&n(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(e,t){var i=!1,n=e.getBoundingClientRect();"none"!==e.style.display&&0!==n.width||(i=!0);var a=new ResizeObserver((function(n){i&&t.call(e,n),i=!0}));e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(e.children).forEach((function(e){return a.observe(e)})):a.observe(e),Re.set(t,a)}(e.el.parentNode,e.parentResizeHandler),!e.css){var a=e.el.getRootNode&&e.el.getRootNode(),s=f.is("ShadowRoot",a),o=e.el.ownerDocument,r=o.getElementById("apexcharts-css");!s&&r||(e.css=document.createElement("style"),e.css.id="apexcharts-css",e.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',s?a.prepend(e.css):o.head.appendChild(e.css))}var l=e.create(e.w.config.series,{});if(!l)return t(e);e.mount(l).then((function(){"function"==typeof e.w.config.chart.events.mounted&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(l)})).catch((function(e){i(e)}))}else i(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var i=this.w;new Oe(this).initModules();var n=this.w.globals;if(n.noData=!1,n.animationEnded=!1,this.responsive.checkResponsiveConfig(t),i.config.xaxis.convertedCatToNumeric&&new R(i.config).convertCatToNumericXaxis(i.config,this.ctx),null===this.el)return n.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===i.config.chart.type&&(i.config.grid.show=!1,i.config.yaxis[0].show=!1),0===n.svgWidth)return n.animationEnded=!0,null;var a=b.checkComboSeries(e);n.comboCharts=a.comboCharts,n.comboBarCount=a.comboBarCount;var s=e.every((function(e){return e.data&&0===e.data.length}));(0===e.length||s)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new A(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),n.noData&&n.collapsedSeries.length!==n.series.length&&!i.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),n.axisCharts&&(this.core.coreCalculations(),"category"!==i.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=i.globals.minX,this.ctx.toolbar.maxX=i.globals.maxX),this.formatters.heatmapLabelFormatters(),new b(this).getLargestMarkerSize(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var r=this.core.plotChartType(e,o),l=new D(this);l.bringForward(),i.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition();var c={plot:{left:i.globals.translateX,top:i.globals.translateY,width:i.globals.gridWidth,height:i.globals.gridHeight}};return{elGraph:r,xyRatios:o,elInner:i.globals.dom.elGraphical,dimensions:c}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,n=i.w;return new Promise((function(a,s){if(null===i.el)return s(new Error("Not enough data to display or target element not found"));(null===t||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),"treemap"!==n.config.chart.type&&i.axes.drawAxis(n.config.chart.type,t.xyRatios),i.grid=new $(i);var o=i.grid.drawGrid();i.annotations=new _(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===n.config.grid.position&&o&&n.globals.dom.elGraphical.add(o.el);var r=new X(e.ctx),l=new q(e.ctx);if(null!==o&&(r.xAxisLabelCorrections(o.xAxisTickWidth),l.setYAxisTextAlignments(),n.config.yaxis.map((function(e,t){-1===n.globals.ignoreYAxisIndexes.indexOf(t)&&l.yAxisTitleRotate(t,e.opposite)}))),"back"===n.config.annotations.position&&(n.globals.dom.Paper.add(n.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),Array.isArray(t.elGraph))for(var c=0;c<t.elGraph.length;c++)n.globals.dom.elGraphical.add(t.elGraph[c]);else n.globals.dom.elGraphical.add(t.elGraph);if("front"===n.config.grid.position&&o&&n.globals.dom.elGraphical.add(o.el),"front"===n.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===n.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"front"===n.config.annotations.position&&(n.globals.dom.Paper.add(n.globals.dom.elAnnotations),i.annotations.drawAxesAnnotations()),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(t.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:t.xyRatios});else{var d=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(e){d[e]=!1}))}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach((function(e){e.method(e.params,!1,e.context)})),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),a(i)}))}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=Re.get(e))&&(t.disconnect(),Re.delete(e));var i=this.w.config.chart.id;i&&Apex._chartInstances.forEach((function(e,t){e.id===f.escapeString(i)&&Apex._chartInstances.splice(t,1)})),new Ne(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(e,i){return t.updateHelpers._extendSeries(e,i)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,i,n,a,s)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,i)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w.config.series.slice();return n.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,t,i)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var n=i.w.config.series.slice(),a=0;a<n.length;a++)if(null!==e[a]&&void 0!==e[a])for(var s=0;s<e[a].data.length;s++)n[a].data.push(e[a].data[s]);return i.w.config.series=n,t&&(i.w.globals.initialSeries=f.clone(i.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(i,n){new Ne(t.ctx).clear({isUpdating:!0});var a=t.create(t.w.config.series,e);if(!a)return i(t);t.mount(a).then((function(){"function"==typeof t.w.config.chart.events.updated&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,i(t)})).catch((function(e){n(e)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(e){t.push(e)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(e){if(e.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addXaxisAnnotationExternal(e,t,n)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addYaxisAnnotationExternal(e,t,n)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addPointAnnotationExternal(e,t,n)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;t&&(i=t),i.annotations.removeAnnotation(i,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new U(this.ctx).getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new U(this.ctx).getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new Y(this.ctx).dataURI(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;"function"==typeof e&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=f.escapeString(e),i=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return i&&i.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),i=0;i<t.length;i++)new e(t[i],JSON.parse(t[i].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var i=this.getChartByID(e);if(i){i.w.globals.isExecCalled=!0;var n=null;if(-1!==i.publicMethods.indexOf(t)){for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];n=i[t].apply(i,s)}return n}}},{key:"merge",value:function(e,t){return f.extend(e,t)}}]),e}()}));