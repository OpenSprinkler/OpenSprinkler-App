/*
 * jquery.ajax-retry
 * https://github.com/johnkpaul/jquery-ajax-retry
 *
 * Copyright (c) 2012 John Paul
 * Licensed under the MIT license.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(b,c){var d=c.times,e=b.timeout;return function(f){function g(){a.ajax(h).retry({times:d-1,timeout:c.timeout}).pipe(i.resolve,i.reject)}var h=this,i=new a.Deferred,j=b.getResponseHeader("Retry-After");return d>1&&(!b.statusCodes||a.inArray(f.status,b.statusCodes)>-1)?(j&&(e=isNaN(j)?new Date(j).getTime()-a.now():1e3*parseInt(j,10),(isNaN(e)||0>e)&&(e=b.timeout)),void 0!==e?setTimeout(g,e):g()):i.rejectWith(this,arguments),i}}a.ajaxPrefilter(function(a,c,d){d.retry=function(a){return a.timeout&&(this.timeout=a.timeout),a.statusCodes&&(this.statusCodes=a.statusCodes),this.pipe(null,b(this,a))}})});
/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 1.0.2
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
(function(){function c(n,j){var o;j=j||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=j.touchBoundary||10;this.layer=n;this.tapDelay=j.tapDelay||200;if(c.notNeeded(n)){return}function p(l,i){return function(){return l.apply(i,arguments)}}var h=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var m=this;for(var k=0,g=h.length;k<g;k++){m[h[k]]=p(m[h[k]],m)}if(b){n.addEventListener("mouseover",this.onMouse,true);n.addEventListener("mousedown",this.onMouse,true);n.addEventListener("mouseup",this.onMouse,true)}n.addEventListener("click",this.onClick,true);n.addEventListener("touchstart",this.onTouchStart,false);n.addEventListener("touchmove",this.onTouchMove,false);n.addEventListener("touchend",this.onTouchEnd,false);n.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){n.removeEventListener=function(l,r,i){var q=Node.prototype.removeEventListener;if(l==="click"){q.call(n,l,r.hijacked||r,i)}else{q.call(n,l,r,i)}};n.addEventListener=function(q,r,l){var i=Node.prototype.addEventListener;if(q==="click"){i.call(n,q,r.hijacked||(r.hijacked=function(s){if(!s.propagationStopped){r(s)}}),l)}else{i.call(n,q,r,l)}}}if(typeof n.onclick==="function"){o=n.onclick;n.addEventListener("click",function(i){o(i)},false);n.onclick=null}}var b=navigator.userAgent.indexOf("Android")>0;var f=/iP(ad|hone|od)/.test(navigator.userAgent);var d=f&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var e=f&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);var a=navigator.userAgent.indexOf("BB10")>0;c.prototype.needsClick=function(g){switch(g.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(g.disabled){return true}break;case"input":if((f&&g.type==="file")||g.disabled){return true}break;case"label":case"video":return true}return(/\bneedsclick\b/).test(g.className)};c.prototype.needsFocus=function(g){switch(g.nodeName.toLowerCase()){case"textarea":return true;case"select":return !b;case"input":switch(g.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !g.disabled&&!g.readOnly;default:return(/\bneedsfocus\b/).test(g.className)}};c.prototype.sendClick=function(h,i){var g,j;if(document.activeElement&&document.activeElement!==h){document.activeElement.blur()}j=i.changedTouches[0];g=document.createEvent("MouseEvents");g.initMouseEvent(this.determineEventType(h),true,true,window,1,j.screenX,j.screenY,j.clientX,j.clientY,false,false,false,false,0,null);g.forwardedTouchEvent=true;h.dispatchEvent(g)};c.prototype.determineEventType=function(g){if(b&&g.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};c.prototype.focus=function(g){var h;if(f&&g.setSelectionRange&&g.type.indexOf("date")!==0&&g.type!=="time"&&g.type!=="month"){h=g.value.length;g.setSelectionRange(h,h)}else{g.focus()}};c.prototype.updateScrollParent=function(h){var i,g;i=h.fastClickScrollParent;if(!i||!i.contains(h)){g=h;do{if(g.scrollHeight>g.offsetHeight){i=g;h.fastClickScrollParent=g;break}g=g.parentElement}while(g)}if(i){i.fastClickLastScrollTop=i.scrollTop}};c.prototype.getTargetElementFromEventTarget=function(g){if(g.nodeType===Node.TEXT_NODE){return g.parentNode}return g};c.prototype.onTouchStart=function(i){var g,j,h;if(i.targetTouches.length>1){return true}g=this.getTargetElementFromEventTarget(i.target);j=i.targetTouches[0];if(f){h=window.getSelection();if(h.rangeCount&&!h.isCollapsed){return true}if(!d){if(j.identifier&&j.identifier===this.lastTouchIdentifier){i.preventDefault();return false}this.lastTouchIdentifier=j.identifier;this.updateScrollParent(g)}}this.trackingClick=true;this.trackingClickStart=i.timeStamp;this.targetElement=g;this.touchStartX=j.pageX;this.touchStartY=j.pageY;if((i.timeStamp-this.lastClickTime)<this.tapDelay){i.preventDefault()}return true};c.prototype.touchHasMoved=function(g){var i=g.changedTouches[0],h=this.touchBoundary;if(Math.abs(i.pageX-this.touchStartX)>h||Math.abs(i.pageY-this.touchStartY)>h){return true}return false};c.prototype.onTouchMove=function(g){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(g.target)||this.touchHasMoved(g)){this.trackingClick=false;this.targetElement=null}return true};c.prototype.findControl=function(g){if(g.control!==undefined){return g.control}if(g.htmlFor){return document.getElementById(g.htmlFor)}return g.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};c.prototype.onTouchEnd=function(i){var k,j,h,m,l,g=this.targetElement;if(!this.trackingClick){return true}if((i.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}this.cancelNextClick=false;this.lastClickTime=i.timeStamp;j=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(e){l=i.changedTouches[0];g=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||g;g.fastClickScrollParent=this.targetElement.fastClickScrollParent}h=g.tagName.toLowerCase();if(h==="label"){k=this.findControl(g);if(k){this.focus(g);if(b){return false}g=k}}else{if(this.needsFocus(g)){if((i.timeStamp-j)>100||(f&&window.top!==window&&h==="input")){this.targetElement=null;return false}this.focus(g);this.sendClick(g,i);if(!f||h!=="select"){this.targetElement=null;i.preventDefault()}return false}}if(f&&!d){m=g.fastClickScrollParent;if(m&&m.fastClickLastScrollTop!==m.scrollTop){return true}}if(!this.needsClick(g)){i.preventDefault();this.sendClick(g,i)}return false};c.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};c.prototype.onMouse=function(g){if(!this.targetElement){return true}if(g.forwardedTouchEvent){return true}if(!g.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(g.stopImmediatePropagation){g.stopImmediatePropagation()}else{g.propagationStopped=true}g.stopPropagation();g.preventDefault();return false}return true};c.prototype.onClick=function(g){var h;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(g.target.type==="submit"&&g.detail===0){return true}h=this.onMouse(g);if(!h){this.targetElement=null}return h};c.prototype.destroy=function(){var g=this.layer;if(b){g.removeEventListener("mouseover",this.onMouse,true);g.removeEventListener("mousedown",this.onMouse,true);g.removeEventListener("mouseup",this.onMouse,true)}g.removeEventListener("click",this.onClick,true);g.removeEventListener("touchstart",this.onTouchStart,false);g.removeEventListener("touchmove",this.onTouchMove,false);g.removeEventListener("touchend",this.onTouchEnd,false);g.removeEventListener("touchcancel",this.onTouchCancel,false)};c.notNeeded=function(h){var g;var j;var i;if(typeof window.ontouchstart==="undefined"){return true}j=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(j){if(b){g=document.querySelector("meta[name=viewport]");if(g){if(g.content.indexOf("user-scalable=no")!==-1){return true}if(j>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(a){i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(i[1]>=10&&i[2]>=3){g=document.querySelector("meta[name=viewport]");if(g){if(g.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(h.style.msTouchAction==="none"){return true}return false};c.attach=function(h,g){return new c(h,g)};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return c})}else{if(typeof module!=="undefined"&&module.exports){module.exports=c.attach;module.exports.FastClick=c}else{window.FastClick=c}}}());
/*

 Licensed under the Apache License, Version 2.0 (the "License"); you may not
 use this file except in compliance with the License. You may obtain a copy
 of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 License for the specific language governing permissions and limitations under
 the License.

 Copyright (c) 2011-2014 Almende B.V.

 @author  Jos de Jong, <jos@almende.org>
 @date    2014-05-16
 @version 2.8.0
*/
"undefined"==typeof links&&(links={}),"undefined"==typeof google&&(google=void 0),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=0,n=this.length;n>i;++i)e.call(t||this,this[i],i,this)}),links.Timeline=function(e,t){if(e){this.dom={},this.conversion={},this.eventParams={},this.groups=[],this.groupIndexes={},this.items=[],this.renderQueue={show:[],hide:[],update:[]},this.renderedItems=[],this.clusterGenerator=new links.Timeline.ClusterGenerator(this),this.currentClusters=[],this.selection=void 0,this.listeners={},this.size={actualHeight:0,axis:{characterMajorHeight:0,characterMajorWidth:0,characterMinorHeight:0,characterMinorWidth:0,height:0,labelMajorTop:0,labelMinorTop:0,line:0,lineMajorWidth:0,lineMinorHeight:0,lineMinorTop:0,lineMinorWidth:0,top:0},contentHeight:0,contentLeft:0,contentWidth:0,frameHeight:0,frameWidth:0,groupsLeft:0,groupsWidth:0,items:{top:0}},this.dom.container=e,this.options={width:"100%",height:"auto",minHeight:0,groupMinHeight:0,autoHeight:!0,eventMargin:10,eventMarginAxis:20,dragAreaWidth:10,min:void 0,max:void 0,zoomMin:10,zoomMax:31536e10,moveable:!0,zoomable:!0,selectable:!0,unselectable:!0,editable:!1,snapEvents:!0,groupChangeable:!0,timeChangeable:!0,showCurrentTime:!0,showCustomTime:!1,showMajorLabels:!0,showMinorLabels:!0,showNavigation:!1,showButtonNew:!1,groupsOnRight:!1,groupsOrder:!0,axisOnTop:!1,stackEvents:!0,animate:!0,animateZoom:!0,cluster:!1,clusterMaxItems:5,style:"box",customStackOrder:!1,locale:"en",MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],DAYS_SHORT:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ZOOM_IN:"Zoom in",ZOOM_OUT:"Zoom out",MOVE_LEFT:"Move left",MOVE_RIGHT:"Move right",NEW:"New",CREATE_NEW_EVENT:"Create new event"},this.setOptions(t),this.clientTimeOffset=0;for(var i=this.dom;i.container.hasChildNodes();)i.container.removeChild(i.container.firstChild);this.step=new links.Timeline.StepDate,this.itemTypes={box:links.Timeline.ItemBox,range:links.Timeline.ItemRange,floatingRange:links.Timeline.ItemFloatingRange,dot:links.Timeline.ItemDot},this.data=[],this.firstDraw=!0,this.setVisibleChartRange(void 0,void 0,!1),this.render();var n=this;setTimeout(function(){n.trigger("ready")},0)}},links.Timeline.prototype.draw=function(e,t){t&&console.log("WARNING: Passing options in draw() is deprecated. Pass options to the constructur or use setOptions() instead!"),this.setOptions(t),this.options.selectable&&links.Timeline.addClassName(this.dom.frame,"timeline-selectable"),this.setData(e),t&&(t.start||t.end)?this.setVisibleChartRange(t.start,t.end):this.firstDraw&&this.setVisibleChartRangeAuto(),this.firstDraw=!1},links.Timeline.prototype.setOptions=function(e){if(e){for(var t in e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if("undefined"!=typeof links.locales&&"en"!==this.options.locale){var i=links.locales[this.options.locale];if(i)for(var n in i)i.hasOwnProperty(n)&&(this.options[n]=i[n])}void 0!=e.showButtonAdd&&(this.options.showButtonNew=e.showButtonAdd,console.log("WARNING: Option showButtonAdd is deprecated. Use showButtonNew instead")),void 0!=e.intervalMin&&(this.options.zoomMin=e.intervalMin,console.log("WARNING: Option intervalMin is deprecated. Use zoomMin instead")),void 0!=e.intervalMax&&(this.options.zoomMax=e.intervalMax,console.log("WARNING: Option intervalMax is deprecated. Use zoomMax instead")),e.scale&&e.step&&this.step.setScale(e.scale,e.step)}this.options.autoHeight="auto"===this.options.height},links.Timeline.prototype.getOptions=function(){return this.options},links.Timeline.prototype.addItemType=function(e,t){this.itemTypes[e]=t},links.Timeline.mapColumnIds=function(e){for(var t={},i=e.getNumberOfColumns(),n=!0,s=0;i>s;s++){var o=e.getColumnId(s)||e.getColumnLabel(s);t[o]=s,("start"==o||"end"==o||"content"==o||"group"==o||"className"==o||"editable"==o||"type"==o)&&(n=!1)}return n&&(t.start=0,t.end=1,t.content=2,i>3&&(t.group=3),i>4&&(t.className=4),i>5&&(t.editable=5),i>6&&(t.type=6)),t},links.Timeline.prototype.setData=function(e){this.unselectItem(),e||(e=[]),this.stackCancelAnimation(),this.clearItems(),this.data=e;var t=this.items;if(this.deleteGroups(),google&&google.visualization&&e instanceof google.visualization.DataTable)for(var i=links.Timeline.mapColumnIds(e),n=0,s=e.getNumberOfRows();s>n;n++)t.push(this.createItem({start:void 0!=i.start?e.getValue(n,i.start):void 0,end:void 0!=i.end?e.getValue(n,i.end):void 0,content:void 0!=i.content?e.getValue(n,i.content):void 0,group:void 0!=i.group?e.getValue(n,i.group):void 0,className:void 0!=i.className?e.getValue(n,i.className):void 0,editable:void 0!=i.editable?e.getValue(n,i.editable):void 0,type:void 0!=i.type?e.getValue(n,i.type):void 0}));else{if(!links.Timeline.isArray(e))throw"Unknown data type. DataTable or Array expected.";for(var n=0,s=e.length;s>n;n++){var o=e[n],a=this.createItem(o);t.push(a)}}this.options.cluster&&this.clusterGenerator.setData(this.items),this.render({animate:!1})},links.Timeline.prototype.getData=function(){return this.data},links.Timeline.prototype.updateData=function(e,t){var i,n=this.data;if(google&&google.visualization&&n instanceof google.visualization.DataTable){var s=e+1-n.getNumberOfRows();s>0&&n.addRows(s);var o=links.Timeline.mapColumnIds(n);for(i in t)if(t.hasOwnProperty(i)){var a=o[i];if(void 0==a){var r=t[i],l="string";"number"==typeof r?l="number":"boolean"==typeof r?l="boolean":r instanceof Date&&(l="datetime"),a=n.addColumn(l,i)}n.setValue(e,a,t[i])}}else{if(!links.Timeline.isArray(n))throw"Cannot update data, unknown type of data";var h=n[e];void 0==h&&(h={},n[e]=h);for(i in t)t.hasOwnProperty(i)&&(h[i]=t[i])}},links.Timeline.prototype.getItemIndex=function(e){for(var t=e,i=this.dom,n=i.items.frame,s=this.items,o=void 0;t.parentNode&&t.parentNode!==n;)t=t.parentNode;if(t.parentNode===n)for(var a=0,r=s.length;r>a;a++)if(s[a].dom===t){o=a;break}return o},links.Timeline.prototype.getClusterIndex=function(e){var t=e,i=this.dom,n=i.items.frame,s=this.clusters,o=void 0;if(this.clusters){for(;t.parentNode&&t.parentNode!==n;)t=t.parentNode;if(t.parentNode===n)for(var a=0,r=s.length;r>a;a++)if(s[a].dom===t){o=a;break}}return o},links.Timeline.prototype.getVisibleItems=function(e,t){var i=this.items,n=[];if(i)for(var s=0,o=i.length;o>s;s++){var a=i[s];a.end?e<=a.start&&a.end<=t&&n.push({row:s}):e<=a.start&&a.start<=t&&n.push({row:s})}return n},links.Timeline.prototype.setSize=function(e,t){e&&(this.options.width=e,this.dom.frame.style.width=e),t&&(this.options.height=t,this.options.autoHeight="auto"===this.options.height,"auto"!==t&&(this.dom.frame.style.height=t)),this.render({animate:!1})},links.Timeline.prototype.setVisibleChartRange=function(e,t,i){var n={};e&&t||(n=this.getDataRange(!0)),e||(t?n.min&&n.min.valueOf()<t.valueOf()?e=n.min:(e=new Date(t.valueOf()),e.setDate(e.getDate()-7)):(e=new Date,e.setDate(e.getDate()-3))),t||(n.max?t=n.max:(t=new Date(e.valueOf()),t.setDate(t.getDate()+7))),e>=t&&(t=new Date(e.valueOf()),t.setDate(t.getDate()+7));var s=this.options.min?this.options.min:void 0;void 0!=s&&e.valueOf()<s.valueOf()&&(e=new Date(s.valueOf()));var o=this.options.max?this.options.max:void 0;void 0!=o&&t.valueOf()>o.valueOf()&&(t=new Date(o.valueOf())),this.applyRange(e,t),void 0==i||1==i?this.render({animate:!1}):this.recalcConversion()},links.Timeline.prototype.setVisibleChartRangeAuto=function(){var e=this.getDataRange(!0);this.setVisibleChartRange(e.min,e.max)},links.Timeline.prototype.setVisibleChartRangeNow=function(){var e=new Date,t=this.end.valueOf()-this.start.valueOf(),i=new Date(e.valueOf()-t/2),n=new Date(i.valueOf()+t);this.setVisibleChartRange(i,n)},links.Timeline.prototype.getVisibleChartRange=function(){return{start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())}},links.Timeline.prototype.getDataRange=function(e){var t=this.items,i=void 0,n=void 0;if(t)for(var s=0,o=t.length;o>s;s++){var a=t[s],r=void 0!=a.start?a.start.valueOf():void 0,l=void 0!=a.end?a.end.valueOf():r;void 0!=r&&(i=void 0!=i?Math.min(i.valueOf(),r.valueOf()):r),void 0!=l&&(n=void 0!=n?Math.max(n.valueOf(),l.valueOf()):l)}if(i&&n&&e){var h=n-i;i-=.05*h,n+=.05*h}return{min:void 0!=i?new Date(i):void 0,max:void 0!=n?new Date(n):void 0}},links.Timeline.prototype.render=function(e){var t=(this.reflowFrame(),this.reflowAxis(),this.reflowGroups(),this.reflowItems(),this.options.animate);e&&void 0!=e.animate&&(t=e.animate),this.recalcConversion(),this.clusterItems(),this.filterItems(),this.stackItems(t),this.recalcItems();var i=this.repaint();if(i){var n=e?e.renderTimesLeft:void 0;void 0==n&&(n=5),n>0&&this.render({animate:e?e.animate:void 0,renderTimesLeft:n-1})}},links.Timeline.prototype.repaint=function(){var e=this.repaintFrame(),t=this.repaintAxis(),i=this.repaintGroups(),n=this.repaintItems();return this.repaintCurrentTime(),this.repaintCustomTime(),e||t||i||n},links.Timeline.prototype.reflowFrame=function(){var e=this.dom,t=(this.options,this.size),i=!1,n=e.frame?e.frame.offsetWidth:0,s=e.frame?e.frame.clientHeight:0;return i=i||t.frameWidth!==n,i=i||t.frameHeight!==s,t.frameWidth=n,t.frameHeight=s,i},links.Timeline.prototype.repaintFrame=function(){var e=!1,t=this.dom,i=this.options,n=this.size;t.frame||(t.frame=document.createElement("DIV"),t.frame.className="timeline-frame ui-widget ui-widget-content ui-corner-all",t.container.appendChild(t.frame),e=!0);var s=i.autoHeight?n.actualHeight+"px":i.height||"100%",o=i.width||"100%";if(e=e||t.frame.style.height!=s,e=e||t.frame.style.width!=o,t.frame.style.height=s,t.frame.style.width=o,!t.content){t.content=document.createElement("DIV"),t.content.className="timeline-content",t.frame.appendChild(t.content);var a=document.createElement("DIV");a.style.position="absolute",a.style.left="0px",a.style.top="0px",a.style.height="100%",a.style.width="0px",t.content.appendChild(a),t.contentTimelines=a;var r=this.eventParams,l=this;r.onMouseDown||(r.onMouseDown=function(e){l.onMouseDown(e)},links.Timeline.addEventListener(t.content,"mousedown",r.onMouseDown)),r.onTouchStart||(r.onTouchStart=function(e){l.onTouchStart(e)},links.Timeline.addEventListener(t.content,"touchstart",r.onTouchStart)),r.onMouseWheel||(r.onMouseWheel=function(e){l.onMouseWheel(e)},links.Timeline.addEventListener(t.content,"mousewheel",r.onMouseWheel)),r.onDblClick||(r.onDblClick=function(e){l.onDblClick(e)},links.Timeline.addEventListener(t.content,"dblclick",r.onDblClick)),e=!0}return t.content.style.left=n.contentLeft+"px",t.content.style.top="0px",t.content.style.width=n.contentWidth+"px",t.content.style.height=n.frameHeight+"px",this.repaintNavigation(),e},links.Timeline.prototype.reflowAxis=function(){var e=!1,t=this.dom,i=this.options,n=this.size,s=t.axis,o=s&&s.characterMinor?s.characterMinor.clientWidth:0,a=s&&s.characterMinor?s.characterMinor.clientHeight:0,r=s&&s.characterMajor?s.characterMajor.clientWidth:0,l=s&&s.characterMajor?s.characterMajor.clientHeight:0,h=(i.showMinorLabels?a:0)+(i.showMajorLabels?l:0),m=i.axisOnTop?0:n.frameHeight-h,p=i.axisOnTop?h:m;e=e||n.axis.top!==m,e=e||n.axis.line!==p,e=e||n.axis.height!==h,n.axis.top=m,n.axis.line=p,n.axis.height=h,n.axis.labelMajorTop=i.axisOnTop?0:p+(i.showMinorLabels?a:0),n.axis.labelMinorTop=i.axisOnTop?i.showMajorLabels?l:0:p,n.axis.lineMinorTop=i.axisOnTop?n.axis.labelMinorTop:0,n.axis.lineMinorHeight=i.showMajorLabels?n.frameHeight-l:n.frameHeight,n.axis.lineMinorWidth=s&&s.minorLines&&s.minorLines.length?s.minorLines[0].offsetWidth:1,n.axis.lineMajorWidth=s&&s.majorLines&&s.majorLines.length?s.majorLines[0].offsetWidth:1,e=e||n.axis.characterMinorWidth!==o,e=e||n.axis.characterMinorHeight!==a,e=e||n.axis.characterMajorWidth!==r,e=e||n.axis.characterMajorHeight!==l,n.axis.characterMinorWidth=o,n.axis.characterMinorHeight=a,n.axis.characterMajorWidth=r,n.axis.characterMajorHeight=l;var u=Math.max(n.frameHeight-h,0);return n.contentLeft=i.groupsOnRight?0:n.groupsWidth,n.contentWidth=Math.max(n.frameWidth-n.groupsWidth,0),n.contentHeight=u,e},links.Timeline.prototype.repaintAxis=function(){var e=!1,t=this.dom,i=this.options,n=this.size,s=this.step,o=t.axis;o||(o={},t.axis=o),n.axis.properties||(n.axis.properties={}),o.minorTexts||(o.minorTexts=[]),o.minorLines||(o.minorLines=[]),o.majorTexts||(o.majorTexts=[]),o.majorLines||(o.majorLines=[]),o.frame||(o.frame=document.createElement("DIV"),o.frame.style.position="absolute",o.frame.style.left="0px",o.frame.style.top="0px",t.content.appendChild(o.frame)),t.content.removeChild(o.frame),o.frame.style.width=n.contentWidth+"px",o.frame.style.height=n.axis.height+"px";var a=this.screenToTime(0),r=this.screenToTime(n.contentWidth);n.axis.characterMinorWidth&&(this.minimumStep=this.screenToTime(6*n.axis.characterMinorWidth)-this.screenToTime(0),s.setRange(a,r,this.minimumStep));var l=this.repaintAxisCharacters();e=e||l,this.repaintAxisStartOverwriting(),s.start();for(var h=void 0,m=0;!s.end()&&1e3>m;){m++;var p=s.getCurrent(),u=this.timeToScreen(p),d=s.isMajor();i.showMinorLabels&&this.repaintAxisMinorText(u,s.getLabelMinor(i)),d&&i.showMajorLabels?(u>0&&(void 0==h&&(h=u),this.repaintAxisMajorText(u,s.getLabelMajor(i))),this.repaintAxisMajorLine(u)):this.repaintAxisMinorLine(u),s.next()}if(i.showMajorLabels){var c=this.screenToTime(0),g=this.step.getLabelMajor(i,c),f=g.length*n.axis.characterMajorWidth+10;(void 0==h||h>f)&&this.repaintAxisMajorText(0,g,c)}return this.repaintAxisEndOverwriting(),this.repaintAxisHorizontal(),t.content.insertBefore(o.frame,t.content.firstChild),e},links.Timeline.prototype.repaintAxisCharacters=function(){var e,t=!1,i=this.dom,n=i.axis;if(!n.characterMinor){e=document.createTextNode("0");var s=document.createElement("DIV");s.className="timeline-axis-text timeline-axis-text-minor",s.appendChild(e),s.style.position="absolute",s.style.visibility="hidden",s.style.paddingLeft="0px",s.style.paddingRight="0px",n.frame.appendChild(s),n.characterMinor=s,t=!0}if(!n.characterMajor){e=document.createTextNode("0");var o=document.createElement("DIV");o.className="timeline-axis-text timeline-axis-text-major",o.appendChild(e),o.style.position="absolute",o.style.visibility="hidden",o.style.paddingLeft="0px",o.style.paddingRight="0px",n.frame.appendChild(o),n.characterMajor=o,t=!0}return t},links.Timeline.prototype.repaintAxisStartOverwriting=function(){var e=this.size.axis.properties;e.minorTextNum=0,e.minorLineNum=0,e.majorTextNum=0,e.majorLineNum=0},links.Timeline.prototype.repaintAxisEndOverwriting=function(){var e,t=this.dom,i=this.size.axis.properties,n=this.dom.axis.frame,s=t.axis.minorTexts;for(e=i.minorTextNum;s.length>e;){var o=s[e];n.removeChild(o),s.splice(e,1)}var a=t.axis.minorLines;for(e=i.minorLineNum;a.length>e;){var r=a[e];n.removeChild(r),a.splice(e,1)}var l=t.axis.majorTexts;for(e=i.majorTextNum;l.length>e;){var h=l[e];n.removeChild(h),l.splice(e,1)}var m=t.axis.majorLines;for(e=i.majorLineNum;m.length>e;){var p=m[e];n.removeChild(p),m.splice(e,1)}},links.Timeline.prototype.repaintAxisHorizontal=function(){var e=this.dom.axis,t=this.size,i=this.options,n=i.showMinorLabels||i.showMajorLabels;if(n){if(!e.backgroundLine){var s=document.createElement("DIV");s.className="timeline-axis",s.style.position="absolute",s.style.left="0px",s.style.width="100%",s.style.border="none",e.frame.insertBefore(s,e.frame.firstChild),e.backgroundLine=s}e.backgroundLine&&(e.backgroundLine.style.top=t.axis.top+"px",e.backgroundLine.style.height=t.axis.height+"px")}else e.backgroundLine&&(e.frame.removeChild(e.backgroundLine),delete e.backgroundLine);if(n){if(e.line){var o=e.frame.removeChild(e.line);e.frame.appendChild(o)}else{var o=document.createElement("DIV");o.className="timeline-axis",o.style.position="absolute",o.style.left="0px",o.style.width="100%",o.style.height="0px",e.frame.appendChild(o),e.line=o}e.line.style.top=t.axis.line+"px"}else e.line&&e.line.parentElement&&(e.frame.removeChild(e.line),delete e.line)},links.Timeline.prototype.repaintAxisMinorText=function(e,t){var i,n=this.size,s=this.dom,o=n.axis.properties,a=s.axis.frame,r=s.axis.minorTexts,l=o.minorTextNum;if(l<r.length)i=r[l];else{var h=document.createTextNode("");i=document.createElement("DIV"),i.appendChild(h),i.className="timeline-axis-text timeline-axis-text-minor",i.style.position="absolute",a.appendChild(i),r.push(i)}i.childNodes[0].nodeValue=t,i.style.left=e+"px",i.style.top=n.axis.labelMinorTop+"px",o.minorTextNum++},links.Timeline.prototype.repaintAxisMinorLine=function(e){var t,i=this.size.axis,n=this.dom,s=i.properties,o=n.axis.frame,a=n.axis.minorLines,r=s.minorLineNum;r<a.length?t=a[r]:(t=document.createElement("DIV"),t.className="timeline-axis-grid timeline-axis-grid-minor",t.style.position="absolute",t.style.width="0px",o.appendChild(t),a.push(t)),t.style.top=i.lineMinorTop+"px",t.style.height=i.lineMinorHeight+"px",t.style.left=e-i.lineMinorWidth/2+"px",s.minorLineNum++},links.Timeline.prototype.repaintAxisMajorText=function(e,t){var i,n=this.size,s=n.axis.properties,o=this.dom.axis.frame,a=this.dom.axis.majorTexts,r=s.majorTextNum;if(r<a.length)i=a[r];else{var l=document.createTextNode(t);i=document.createElement("DIV"),i.className="timeline-axis-text timeline-axis-text-major",i.appendChild(l),i.style.position="absolute",i.style.top="0px",o.appendChild(i),a.push(i)}i.childNodes[0].nodeValue=t,i.style.top=n.axis.labelMajorTop+"px",i.style.left=e+"px",s.majorTextNum++},links.Timeline.prototype.repaintAxisMajorLine=function(e){var t,i=this.size,n=i.axis.properties,s=this.size.axis,o=this.dom.axis.frame,a=this.dom.axis.majorLines,r=n.majorLineNum;r<a.length?t=a[r]:(t=document.createElement("DIV"),t.className="timeline-axis-grid timeline-axis-grid-major",t.style.position="absolute",t.style.top="0px",t.style.width="0px",o.appendChild(t),a.push(t)),t.style.left=e-s.lineMajorWidth/2+"px",t.style.height=i.frameHeight+"px",n.majorLineNum++},links.Timeline.prototype.reflowItems=function(){var e,t,i,n=!1,s=this.groups,o=this.renderedItems;for(s&&s.forEach(function(e){e.itemsHeight=0}),e=0,t=o.length;t>e;e++){var a=o[e],r=a.dom;if(i=a.group,r){var l=r?r.clientWidth:0,h=r?r.clientHeight:0;n=n||a.width!=l,n=n||a.height!=h,a.width=l,a.height=h,a.reflow()}i&&(i.itemsHeight=Math.max(this.options.groupMinHeight,i.itemsHeight?Math.max(i.itemsHeight,a.height):a.height))}return n},links.Timeline.prototype.recalcItems=function(){var e,t,i,n,s,o,a=!1,r=this.groups,l=this.size,h=this.options,m=this.renderedItems,p=0;if(0==r.length){if(h.autoHeight||h.cluster){var u=0,d=0;if(this.stack&&this.stack.finalItems)for(s=this.stack.finalItems,n=s[0],n&&n.top&&(u=n.top,d=n.top+n.height),e=1,t=s.length;t>e;e++)n=s[e],u=Math.min(u,n.top),d=Math.max(d,n.top+n.height);else for(i=m[0],i&&i.top&&(u=i.top,d=i.top+i.height),e=1,t=m.length;t>e;e++)i=m[e],i.top&&(u=Math.min(u,i.top),d=Math.max(d,i.top+i.height));if(p=d-u+2*h.eventMarginAxis+l.axis.height,p<h.minHeight&&(p=h.minHeight),l.actualHeight!=p&&h.autoHeight&&!h.axisOnTop){var c=p-l.actualHeight;if(this.stack&&this.stack.finalItems)for(s=this.stack.finalItems,e=0,t=s.length;t>e;e++)s[e].top+=c,s[e].item.top+=c;else for(e=0,t=m.length;t>e;e++)m[e].top+=c}}}else{for(p=l.axis.height+2*h.eventMarginAxis,e=0,t=r.length;t>e;e++){o=r[e];var g=o.itemsHeight;a=a||g!=o.height,o.height=Math.max(g,h.groupMinHeight),p+=r[e].height+h.eventMargin}var f=h.eventMargin,v=h.axisOnTop?h.eventMarginAxis+f/2:l.contentHeight-h.eventMarginAxis+f/2,T=l.axis.height;for(e=0,t=r.length;t>e;e++)o=r[e],h.axisOnTop?(o.top=v+T,o.labelTop=v+T+(o.height-o.labelHeight)/2,o.lineTop=v+T+o.height+f/2,v+=o.height+f):(v-=o.height+f,o.top=v,o.labelTop=v+(o.height-o.labelHeight)/2,o.lineTop=v-f/2);a=!0}return p<h.minHeight&&(p=h.minHeight),a=a||p!=l.actualHeight,l.actualHeight=p,a},links.Timeline.prototype.clearItems=function(){var e=this.renderQueue.hide;this.renderedItems.forEach(function(t){e.push(t)}),this.clusterGenerator.clear(),this.items=[]},links.Timeline.prototype.repaintItems=function(){var e,t,i=!1,n=this.dom,s=this.size,o=this,a=this.renderedItems;n.items||(n.items={});var r=n.items.frame;r||(r=document.createElement("DIV"),r.style.position="relative",n.content.appendChild(r),n.items.frame=r),r.style.left="0px",r.style.top=s.items.top+"px",r.style.height="0px",n.content.removeChild(r);var l=this.renderQueue,h=[];for(i=i||l.show.length>0||l.update.length>0||l.hide.length>0;e=l.show.shift();)e.showDOM(r),e.getImageUrls(h),a.push(e);for(;e=l.update.shift();)e.updateDOM(r),e.getImageUrls(h),t=this.renderedItems.indexOf(e),-1==t&&a.push(e);for(;e=l.hide.shift();)e.hideDOM(r),t=this.renderedItems.indexOf(e),-1!=t&&a.splice(t,1);if(a.forEach(function(e){e.updatePosition(o)}),this.repaintDeleteButton(),this.repaintDragAreas(),n.content.appendChild(r),h.length){var m=function(){o.render()},p=!1;links.imageloader.loadAll(h,m,p)}return i},links.Timeline.prototype.reflowGroups=function(){for(var e=!1,t=this.options,i=this.size,n=this.dom,s=0,o=this.groups,a=this.dom.groups?this.dom.groups.labels:[],r=0,l=o.length;l>r;r++){var h=o[r],m=a[r];h.labelWidth=m?m.clientWidth:0,h.labelHeight=m?m.clientHeight:0,h.width=h.labelWidth,s=Math.max(s,h.width)}void 0!==t.groupsWidth&&(s=n.groups.frame?n.groups.frame.clientWidth:0),s+=1;var p=t.groupsOnRight?i.frameWidth-s:0;return e=e||i.groupsWidth!==s,e=e||i.groupsLeft!==p,i.groupsWidth=s,i.groupsLeft=p,e},links.Timeline.prototype.repaintGroups=function(){var e=this.dom,t=this,i=this.options,n=this.size,s=this.groups;void 0===e.groups&&(e.groups={});var o=e.groups.labels;o||(o=[],e.groups.labels=o);var a=e.groups.labelLines;a||(a=[],e.groups.labelLines=a);var r=e.groups.itemLines;r||(r=[],e.groups.itemLines=r);var l=e.groups.frame;l||(l=document.createElement("DIV"),l.className="timeline-groups-axis",l.style.position="absolute",l.style.overflow="hidden",l.style.top="0px",l.style.height="100%",e.frame.appendChild(l),e.groups.frame=l),l.style.left=n.groupsLeft+"px",l.style.width=void 0!==i.groupsWidth?i.groupsWidth:n.groupsWidth+"px",l.style.display=0==s.length?"none":"";for(var h=o.length,m=s.length,p=0,u=Math.min(h,m);u>p;p++){var d=s[p],c=o[p];c.innerHTML=this.getGroupName(d),c.style.display=""}for(var p=h;m>p;p++){var d=s[p],c=document.createElement("DIV");c.className="timeline-groups-text",c.style.position="absolute",void 0===i.groupsWidth&&(c.style.whiteSpace="nowrap"),c.innerHTML=this.getGroupName(d),l.appendChild(c),o[p]=c;var g=document.createElement("DIV");g.className="timeline-axis-grid timeline-axis-grid-minor",g.style.position="absolute",g.style.left="0px",g.style.width="100%",g.style.height="0px",g.style.borderTopStyle="solid",l.appendChild(g),a[p]=g;var f=document.createElement("DIV");f.className="timeline-axis-grid timeline-axis-grid-minor",f.style.position="absolute",f.style.left="0px",f.style.width="100%",f.style.height="0px",f.style.borderTopStyle="solid",e.content.insertBefore(f,e.content.firstChild),r[p]=f}for(var p=m;h>p;p++){var c=o[p],g=a[p],f=r[p];l.removeChild(c),l.removeChild(g),e.content.removeChild(f)}o.splice(m,h-m),a.splice(m,h-m),r.splice(m,h-m),links.Timeline.addClassName(l,i.groupsOnRight?"timeline-groups-axis-onright":"timeline-groups-axis-onleft");for(var p=0,u=s.length;u>p;p++){var d=s[p],c=o[p],g=a[p],f=r[p];c.style.top=d.labelTop+"px",g.style.top=d.lineTop+"px",f.style.top=d.lineTop+"px",f.style.width=n.contentWidth+"px"}if(!e.groups.background){var v=document.createElement("DIV");v.className="timeline-axis",v.style.position="absolute",v.style.left="0px",v.style.width="100%",v.style.border="none",l.appendChild(v),e.groups.background=v}if(e.groups.background.style.top=n.axis.top+"px",e.groups.background.style.height=n.axis.height+"px",!e.groups.line){var T=document.createElement("DIV");T.className="timeline-axis",T.style.position="absolute",T.style.left="0px",T.style.width="100%",T.style.height="0px",l.appendChild(T),e.groups.line=T}if(e.groups.line.style.top=n.axis.line+"px",e.groups.frame&&s.length){var k=[];if(links.imageloader.filterImageUrls(e.groups.frame,k),k.length){var y=function(){t.render()},D=!1;links.imageloader.loadAll(k,y,D)}}},links.Timeline.prototype.repaintCurrentTime=function(){var e=this.options,t=this.dom,i=this.size;if(!e.showCurrentTime)return void(t.currentTime&&(t.contentTimelines.removeChild(t.currentTime),delete t.currentTime));if(!t.currentTime){var n=document.createElement("DIV");n.className="timeline-currenttime",n.style.position="absolute",n.style.top="0px",n.style.height="100%",t.contentTimelines.appendChild(n),t.currentTime=n}var s=new Date,o=new Date(s.valueOf()+this.clientTimeOffset),a=this.timeToScreen(o),r=a>-i.contentWidth&&a<2*i.contentWidth;t.currentTime.style.display=r?"":"none",t.currentTime.style.left=a+"px",t.currentTime.title="Current time: "+o,void 0!=this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer);var l=this,h=function(){l.repaintCurrentTime()},m=1/this.conversion.factor/2;30>m&&(m=30),this.currentTimeTimer=setTimeout(h,m)},links.Timeline.prototype.repaintCustomTime=function(){var e=this.options,t=this.dom,i=this.size;if(!e.showCustomTime)return void(t.customTime&&(t.contentTimelines.removeChild(t.customTime),delete t.customTime));if(!t.customTime){var n=document.createElement("DIV");n.className="timeline-customtime",n.style.position="absolute",n.style.top="0px",n.style.height="100%";var s=document.createElement("DIV");s.style.position="relative",s.style.top="0px",s.style.left="-10px",s.style.height="100%",s.style.width="20px",n.appendChild(s),t.contentTimelines.appendChild(n),t.customTime=n,this.customTime=new Date}var o=this.timeToScreen(this.customTime),a=o>-i.contentWidth&&o<2*i.contentWidth;t.customTime.style.display=a?"":"none",t.customTime.style.left=o+"px",t.customTime.title="Time: "+this.customTime},links.Timeline.prototype.repaintDeleteButton=function(){var e=this.dom,t=e.items.frame,i=e.items.deleteButton;i||(i=document.createElement("DIV"),i.className="timeline-navigation-delete",i.style.position="absolute",t.appendChild(i),e.items.deleteButton=i);var n=this.selection&&void 0!==this.selection.index?this.selection.index:-1,s=this.selection&&void 0!==this.selection.index?this.items[n]:void 0;if(s&&s.rendered&&this.isEditable(s)){var o=s.getRight(this),a=s.top;i.style.left=o+"px",i.style.top=a+"px",i.style.display="",t.removeChild(i),t.appendChild(i)}else i.style.display="none"},links.Timeline.prototype.repaintDragAreas=function(){var e=this.options,t=this.dom,i=this.dom.items.frame,n=t.items.dragLeft;n||(n=document.createElement("DIV"),n.className="timeline-event-range-drag-left",n.style.position="absolute",i.appendChild(n),t.items.dragLeft=n);var s=t.items.dragRight;s||(s=document.createElement("DIV"),s.className="timeline-event-range-drag-right",s.style.position="absolute",i.appendChild(s),t.items.dragRight=s);var o=this.selection&&void 0!==this.selection.index?this.selection.index:-1,a=this.selection&&void 0!==this.selection.index?this.items[o]:void 0;if(a&&a.rendered&&this.isEditable(a)&&(a instanceof links.Timeline.ItemRange||a instanceof links.Timeline.ItemFloatingRange)){var r=a.getLeft(this),l=a.getRight(this),h=a.top,m=a.height;n.style.left=r+"px",n.style.top=h+"px",n.style.width=e.dragAreaWidth+"px",n.style.height=m+"px",n.style.display="",i.removeChild(n),i.appendChild(n),s.style.left=l-e.dragAreaWidth+"px",s.style.top=h+"px",s.style.width=e.dragAreaWidth+"px",s.style.height=m+"px",s.style.display="",i.removeChild(s),i.appendChild(s)}else n.style.display="none",s.style.display="none"},links.Timeline.prototype.repaintNavigation=function(){var e=this,t=this.options,i=this.dom,n=i.frame,s=i.navBar;if(!s){var o=t.showButtonNew&&t.editable,a=t.showNavigation&&(t.zoomable||t.moveable);if((a||o)&&(s=document.createElement("DIV"),s.style.position="absolute",s.className="timeline-navigation ui-widget ui-state-highlight ui-corner-all",t.groupsOnRight?s.style.left="10px":s.style.right="10px",t.axisOnTop?s.style.bottom="10px":s.style.top="10px",i.navBar=s,n.appendChild(s)),o){s.addButton=document.createElement("DIV"),s.addButton.className="timeline-navigation-new",s.addButton.title=t.CREATE_NEW_EVENT;var r=document.createElement("SPAN");r.className="ui-icon ui-icon-circle-plus",s.addButton.appendChild(r);var l=function(i){links.Timeline.preventDefault(i),links.Timeline.stopPropagation(i);var n=e.size.contentWidth,s=n/2,o=e.screenToTime(s);t.snapEvents&&e.step.snap(o);var a=t.NEW,r=e.groups.length?e.groups[0].content:void 0,l=!0;e.addItem({start:o,content:a,group:r},l);var h=e.items.length-1;e.selectItem(h),e.applyAdd=!0,e.trigger("add"),e.applyAdd?(e.render({animate:!1}),e.selectItem(h)):e.deleteItem(h)};links.Timeline.addEventListener(s.addButton,"mousedown",l),s.appendChild(s.addButton)}if(o&&a&&links.Timeline.addClassName(s.addButton,"timeline-navigation-new-line"),a){if(t.zoomable){s.zoomInButton=document.createElement("DIV"),s.zoomInButton.className="timeline-navigation-zoom-in",s.zoomInButton.title=this.options.ZOOM_IN;var h=document.createElement("SPAN");h.className="ui-icon ui-icon-circle-zoomin",s.zoomInButton.appendChild(h);var m=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.zoom(.4),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.zoomInButton,"mousedown",m),s.appendChild(s.zoomInButton),s.zoomOutButton=document.createElement("DIV"),s.zoomOutButton.className="timeline-navigation-zoom-out",s.zoomOutButton.title=this.options.ZOOM_OUT;var p=document.createElement("SPAN");p.className="ui-icon ui-icon-circle-zoomout",s.zoomOutButton.appendChild(p);var u=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.zoom(-.4),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.zoomOutButton,"mousedown",u),s.appendChild(s.zoomOutButton)}if(t.moveable){s.moveLeftButton=document.createElement("DIV"),s.moveLeftButton.className="timeline-navigation-move-left",s.moveLeftButton.title=this.options.MOVE_LEFT;var d=document.createElement("SPAN");d.className="ui-icon ui-icon-circle-arrow-w",s.moveLeftButton.appendChild(d);var c=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.move(-.2),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.moveLeftButton,"mousedown",c),s.appendChild(s.moveLeftButton),s.moveRightButton=document.createElement("DIV"),s.moveRightButton.className="timeline-navigation-move-right",s.moveRightButton.title=this.options.MOVE_RIGHT;var g=document.createElement("SPAN");g.className="ui-icon ui-icon-circle-arrow-e",s.moveRightButton.appendChild(g);var f=function(t){links.Timeline.preventDefault(t),links.Timeline.stopPropagation(t),e.move(.2),e.trigger("rangechange"),e.trigger("rangechanged")};links.Timeline.addEventListener(s.moveRightButton,"mousedown",f),s.appendChild(s.moveRightButton)}}}},links.Timeline.prototype.setCurrentTime=function(e){var t=new Date;this.clientTimeOffset=e.valueOf()-t.valueOf(),this.repaintCurrentTime()},links.Timeline.prototype.getCurrentTime=function(){var e=new Date;return new Date(e.valueOf()+this.clientTimeOffset)},links.Timeline.prototype.setCustomTime=function(e){this.customTime=new Date(e.valueOf()),this.repaintCustomTime()},links.Timeline.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},links.Timeline.prototype.setScale=function(e,t){this.step.setScale(e,t),this.render()},links.Timeline.prototype.setAutoScale=function(e){this.step.setAutoScale(e),this.render()},links.Timeline.prototype.redraw=function(){this.setData(this.data)},links.Timeline.prototype.checkResize=function(){this.render()},links.Timeline.prototype.isEditable=function(e){return e?void 0!=e.editable?e.editable:this.options.editable:!1},links.Timeline.prototype.recalcConversion=function(){this.conversion.offset=this.start.valueOf(),this.conversion.factor=this.size.contentWidth/(this.end.valueOf()-this.start.valueOf())},links.Timeline.prototype.screenToTime=function(e){var t=this.conversion;return new Date(e/t.factor+t.offset)},links.Timeline.prototype.timeToScreen=function(e){var t=this.conversion;return(e.valueOf()-t.offset)*t.factor},links.Timeline.prototype.onTouchStart=function(e){var t=this.eventParams,i=this;if(!t.touchDown){t.touchDown=!0,t.zoomed=!1,this.onMouseDown(e),t.onTouchMove||(t.onTouchMove=function(e){i.onTouchMove(e)},links.Timeline.addEventListener(document,"touchmove",t.onTouchMove)),t.onTouchEnd||(t.onTouchEnd=function(e){i.onTouchEnd(e)},links.Timeline.addEventListener(document,"touchend",t.onTouchEnd));var n=links.Timeline.getTarget(e),s=this.getItemIndex(n);t.doubleTapStartPrev=t.doubleTapStart,t.doubleTapStart=(new Date).valueOf(),t.doubleTapItemPrev=t.doubleTapItem,t.doubleTapItem=s,links.Timeline.preventDefault(e)}},links.Timeline.prototype.onTouchMove=function(e){var t=this.eventParams;if(e.scale&&1!==e.scale&&(t.zoomed=!0),t.zoomed){if(this.options.zoomable){t.zoomed=!0;var i=e.scale,n=t.end.valueOf()-t.start.valueOf(),s=n/i,o=s-n,a=new Date(parseInt(t.start.valueOf()-o/2)),r=new Date(parseInt(t.end.valueOf()+o/2));this.setVisibleChartRange(a,r),this.trigger("rangechange")}}else this.onMouseMove(e);links.Timeline.preventDefault(e)},links.Timeline.prototype.onTouchEnd=function(e){var t=this.eventParams,i=this;t.touchDown=!1,t.zoomed&&this.trigger("rangechanged"),t.onTouchMove&&(links.Timeline.removeEventListener(document,"touchmove",t.onTouchMove),delete t.onTouchMove),t.onTouchEnd&&(links.Timeline.removeEventListener(document,"touchend",t.onTouchEnd),delete t.onTouchEnd),this.onMouseUp(e);{var n=500,s=(new Date).valueOf(),o=links.Timeline.getTarget(e);this.getItemIndex(o)}t.doubleTapStartPrev&&s-t.doubleTapStartPrev<n&&t.doubleTapItem==t.doubleTapItemPrev&&(t.touchDown=!0,i.onDblClick(e),t.touchDown=!1),links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseDown=function(e){e=e||window.event;var t=this.eventParams,i=this.options,n=this.dom,s=e.which?1==e.which:1==e.button;if(s||t.touchDown){t.mouseX=links.Timeline.getPageX(e),t.mouseY=links.Timeline.getPageY(e),t.frameLeft=links.Timeline.getAbsoluteLeft(this.dom.content),t.frameTop=links.Timeline.getAbsoluteTop(this.dom.content),t.previousLeft=0,t.previousOffset=0,t.moved=!1,t.start=new Date(this.start.valueOf()),t.end=new Date(this.end.valueOf()),t.target=links.Timeline.getTarget(e);var o=n.items&&n.items.dragLeft?n.items.dragLeft:void 0,a=n.items&&n.items.dragRight?n.items.dragRight:void 0;if(t.itemDragLeft=t.target===o,t.itemDragRight=t.target===a,t.itemDragLeft||t.itemDragRight?(t.itemIndex=this.selection&&void 0!==this.selection.index?this.selection.index:void 0,delete t.clusterIndex):(t.itemIndex=this.getItemIndex(t.target),t.clusterIndex=this.getClusterIndex(t.target)),t.customTime=t.target===n.customTime||t.target.parentNode===n.customTime?this.customTime:void 0,t.addItem=i.editable&&e.ctrlKey,t.addItem){var r=t.mouseX-t.frameLeft,l=t.mouseY-t.frameTop,h=this.screenToTime(r);i.snapEvents&&this.step.snap(h);var m=new Date(h.valueOf()),p=i.NEW,u=this.getGroupFromHeight(l);this.addItem({start:h,end:m,content:p,group:this.getGroupName(u)}),t.itemIndex=this.items.length-1,delete t.clusterIndex,this.selectItem(t.itemIndex),t.itemDragRight=!0}var d=this.items[t.itemIndex],c=this.isSelected(t.itemIndex);if(t.editItem=c&&this.isEditable(d),t.editItem?(t.itemStart=d.start,t.itemEnd=d.end,t.itemGroup=d.group,t.itemLeft=d.getLeft(this),t.itemRight=d.getRight(this)):this.dom.frame.style.cursor="move",!t.touchDown){var g=this;t.onMouseMove||(t.onMouseMove=function(e){g.onMouseMove(e)},links.Timeline.addEventListener(document,"mousemove",t.onMouseMove)),t.onMouseUp||(t.onMouseUp=function(e){g.onMouseUp(e)},links.Timeline.addEventListener(document,"mouseup",t.onMouseUp)),links.Timeline.preventDefault(e)}}},links.Timeline.prototype.onMouseMove=function(e){e=e||window.event;var t=this.eventParams,i=this.size,n=this.dom,s=this.options,o=links.Timeline.getPageX(e),a=links.Timeline.getPageY(e);void 0==t.mouseX&&(t.mouseX=o),void 0==t.mouseY&&(t.mouseY=a);var r=o-t.mouseX,l=a-t.mouseY;if(Math.abs(l)>=1&&(newy=$.mobile.window.scrollTop(),$.mobile.window.scrollTop(newy-l)),Math.abs(r)>=1&&(t.moved=!0),t.customTime){var h=this.timeToScreen(t.customTime),m=h+r;this.customTime=this.screenToTime(m),this.repaintCustomTime(),this.trigger("timechange")}else if(t.editItem){var p,u,d=this.items[t.itemIndex];t.itemDragLeft&&s.timeChangeable?(p=t.itemLeft+r,u=t.itemRight,d.start=this.screenToTime(p),s.snapEvents&&(this.step.snap(d.start),p=this.timeToScreen(d.start)),p>u&&(p=u,d.start=this.screenToTime(p)),this.trigger("change")):t.itemDragRight&&s.timeChangeable?(p=t.itemLeft,u=t.itemRight+r,d.end=this.screenToTime(u),s.snapEvents&&(this.step.snap(d.end),u=this.timeToScreen(d.end)),p>u&&(u=p,d.end=this.screenToTime(u)),this.trigger("change")):s.timeChangeable&&(p=t.itemLeft+r,d.start=this.screenToTime(p),s.snapEvents&&(this.step.snap(d.start),p=this.timeToScreen(d.start)),d.end&&(u=p+(t.itemRight-t.itemLeft),d.end=this.screenToTime(u)),this.trigger("change")),d.setPosition(p,u);var c=t.itemDragLeft||t.itemDragRight;if(this.groups.length&&!c){var g=a-t.frameTop,f=this.getGroupFromHeight(g);if(s.groupsChangeable&&d.group!==f){var v=this.items.indexOf(d);this.changeItem(v,{group:this.getGroupName(f)})}else this.repaintDeleteButton(),this.repaintDragAreas()}else this.render()}else if(s.moveable){var T=t.end.valueOf()-t.start.valueOf(),k=Math.round(-r/i.contentWidth*T),y=new Date(t.start.valueOf()+k),D=new Date(t.end.valueOf()+k);this.applyRange(y,D);var x=this.start.valueOf()-y.valueOf();x&&(k+=x),this.recalcConversion();var M=t.previousLeft||0,S=parseFloat(n.items.frame.style.left)||0,C=t.previousOffset||0,I=C+(S-M),E=-k/T*i.contentWidth+I;n.items.frame.style.left=E+"px",t.previousOffset=I,t.previousLeft=parseFloat(n.items.frame.style.left)||E,this.repaintCurrentTime(),this.repaintCustomTime(),this.repaintAxis(),this.trigger("rangechange")}links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseUp=function(e){var t=this.eventParams,i=this.options;if(e=e||window.event,this.dom.frame.style.cursor="auto",t.onMouseMove&&(links.Timeline.removeEventListener(document,"mousemove",t.onMouseMove),delete t.onMouseMove),t.onMouseUp&&(links.Timeline.removeEventListener(document,"mouseup",t.onMouseUp),delete t.onMouseUp),t.customTime)this.trigger("timechanged");else if(t.editItem){var n=this.items[t.itemIndex];if(t.moved||t.addItem){if(this.applyChange=!0,this.applyAdd=!0,this.updateData(t.itemIndex,{start:n.start,end:n.end}),this.trigger(t.addItem?"add":"changed"),n=this.items[t.itemIndex],t.addItem)this.applyAdd?this.updateData(t.itemIndex,{start:n.start,end:n.end,content:n.content,group:this.getGroupName(n.group)}):this.deleteItem(t.itemIndex);else if(this.applyChange)this.updateData(t.itemIndex,{start:n.start,end:n.end});else{delete this.applyChange,delete this.applyAdd;{var n=this.items[t.itemIndex];n.dom}n.start=t.itemStart,n.end=t.itemEnd,n.group=t.itemGroup,n.setPosition(t.itemLeft,t.itemRight),this.updateData(t.itemIndex,{start:t.itemStart,end:t.itemEnd})}this.options.cluster&&this.clusterGenerator.updateData(),this.render()}}else t.moved||t.zoomed?(this.render(),(t.moved&&i.moveable||t.zoomed&&i.zoomable)&&this.trigger("rangechanged")):t.target===this.dom.items.deleteButton?this.selection&&void 0!==this.selection.index&&this.confirmDeleteItem(this.selection.index):i.selectable&&(void 0!=t.itemIndex?this.isSelected(t.itemIndex)||(this.selectItem(t.itemIndex),this.trigger("select")):void 0!=t.clusterIndex?(this.selectCluster(t.clusterIndex),this.trigger("select")):i.unselectable&&(this.unselectItem(),this.trigger("select")))},links.Timeline.prototype.onDblClick=function(e){{var t=this.eventParams,i=this.options,n=this.dom;this.size}if(e=e||window.event,void 0!=t.itemIndex){var s=this.items[t.itemIndex];s&&this.isEditable(s)&&this.trigger("edit")}else if(i.editable){t.mouseX=links.Timeline.getPageX(e),t.mouseY=links.Timeline.getPageY(e);var o=t.mouseX-links.Timeline.getAbsoluteLeft(n.content),a=t.mouseY-links.Timeline.getAbsoluteTop(n.content),r=this.screenToTime(o);i.snapEvents&&this.step.snap(r);var l=i.NEW,h=this.getGroupFromHeight(a),m=!0;this.addItem({start:r,content:l,group:this.getGroupName(h)},m),t.itemIndex=this.items.length-1,this.selectItem(t.itemIndex),this.applyAdd=!0,this.trigger("add"),this.applyAdd?(this.render({animate:!1}),this.selectItem(t.itemIndex)):this.deleteItem(t.itemIndex)}links.Timeline.preventDefault(e)},links.Timeline.prototype.onMouseWheel=function(e){if(this.options.zoomable){e||(e=window.event);var t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),t){var i=this,n=function(){var n=t/5,s=links.Timeline.getAbsoluteLeft(i.dom.content),o=links.Timeline.getPageX(e),a=void 0!=o&&void 0!=s?i.screenToTime(o-s):void 0;i.zoom(n,a),i.trigger("rangechange"),i.trigger("rangechanged")},s=function(){i.move(t*-.2),i.trigger("rangechange"),i.trigger("rangechanged")};e.shiftKey?s():n()}links.Timeline.preventDefault(e)}},links.Timeline.prototype.zoom=function(e,t){void 0==t&&(t=new Date((this.start.valueOf()+this.end.valueOf())/2)),e>=1&&(e=.9),-1>=e&&(e=-.9),0>e&&(e/=1+e);var i=this.start.valueOf()-t,n=this.end.valueOf()-t,s=new Date(this.start.valueOf()-i*e),o=new Date(this.end.valueOf()-n*e),a=o.valueOf()-s.valueOf(),r=Number(this.options.zoomMin)||10;10>r&&(r=10),a>=r&&(this.applyRange(s,o,t),this.render({animate:this.options.animate&&this.options.animateZoom}))},links.Timeline.prototype.move=function(e){var t=this.end.valueOf()-this.start.valueOf(),i=new Date(this.start.valueOf()+t*e),n=new Date(this.end.valueOf()+t*e);this.applyRange(i,n),this.render()},links.Timeline.prototype.applyRange=function(e,t,i){var n=e.valueOf(),s=t.valueOf(),o=s-n,a=this.options,r=31536e6,l=Number(a.zoomMin)||10;10>l&&(l=10);var h=Number(a.zoomMax)||1e4*r;h>1e4*r&&(h=1e4*r),l>h&&(h=l);var m=a.min?a.min.valueOf():void 0,p=a.max?a.max.valueOf():void 0;if(void 0!=m&&void 0!=p){if(m>=p){var u=864e5;p=m+u}h>p-m&&(h=p-m),l>p-m&&(l=p-m)}if(n>=s&&(s+=864e5),l>o){var d=l-o,c=i?(i.valueOf()-n)/o:.5;n-=Math.round(d*c),s+=Math.round(d*(1-c))}if(o>h){var d=o-h,c=i?(i.valueOf()-n)/o:.5;n+=Math.round(d*c),s-=Math.round(d*(1-c))}if(void 0!=m){var d=n-m;0>d&&(n-=d,s-=d)}if(void 0!=p){var d=p-s;0>d&&(n+=d,s+=d)}this.start=new Date(n),this.end=new Date(s)},links.Timeline.prototype.confirmDeleteItem=function(e){this.applyDelete=!0,this.isSelected(e)||this.selectItem(e),this.trigger("delete"),this.applyDelete&&this.deleteItem(e),delete this.applyDelete},links.Timeline.prototype.deleteItem=function(e,t){if(e>=this.items.length)throw"Cannot delete row, index out of range";this.selection&&void 0!==this.selection.index&&(this.selection.index==e?this.unselectItem():this.selection.index>e&&this.selection.index--);var i=this.items.splice(e,1)[0];if(this.renderQueue.hide.push(i),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRow(e);else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(e,1)}this.options.cluster&&this.clusterGenerator.updateData(),t||this.render()},links.Timeline.prototype.deleteAllItems=function(){if(this.unselectItem(),this.clearItems(),this.deleteGroups(),this.data)if(google&&google.visualization&&this.data instanceof google.visualization.DataTable)this.data.removeRows(0,this.data.getNumberOfRows());else{if(!links.Timeline.isArray(this.data))throw"Cannot delete row from data, unknown data type";this.data.splice(0,this.data.length)}this.options.cluster&&this.clusterGenerator.updateData(),this.render()},links.Timeline.prototype.getGroupFromHeight=function(e){var t,i,n=this.groups;if(n.length){if(this.options.axisOnTop){for(t=n.length-1;t>=0;t--)if(i=n[t],e>i.top)return i}else for(t=0;t<n.length;t++)if(i=n[t],e>i.top)return i;return i}return void 0},links.Timeline.Item=function(e,t){if(e&&(this.start=e.start,this.end=e.end,this.content=e.content,this.className=e.className,this.editable=e.editable,this.group=e.group,this.type=e.type),this.top=0,this.left=0,this.width=0,this.height=0,this.lineWidth=0,this.dotWidth=0,this.dotHeight=0,this.rendered=!1,t)for(var i in t)t.hasOwnProperty(i)&&(this[i]=t[i])},links.Timeline.Item.prototype.reflow=function(){return!1},links.Timeline.Item.prototype.getImageUrls=function(e){this.dom&&links.imageloader.filterImageUrls(this.dom,e)},links.Timeline.Item.prototype.select=function(){},links.Timeline.Item.prototype.unselect=function(){},links.Timeline.Item.prototype.createDOM=function(){},links.Timeline.Item.prototype.showDOM=function(){},links.Timeline.Item.prototype.hideDOM=function(){},links.Timeline.Item.prototype.updateDOM=function(){},links.Timeline.Item.prototype.updatePosition=function(){},links.Timeline.Item.prototype.isRendered=function(){return this.rendered},links.Timeline.Item.prototype.isVisible=function(){return!1},links.Timeline.Item.prototype.setPosition=function(){},links.Timeline.Item.prototype.getLeft=function(){return 0},links.Timeline.Item.prototype.getRight=function(){return 0},links.Timeline.Item.prototype.getWidth=function(){return this.width||0},links.Timeline.ItemBox=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemBox.prototype=new links.Timeline.Item,links.Timeline.ItemBox.prototype.reflow=function(){var e=this.dom,t=e.dot.offsetHeight,i=e.dot.offsetWidth,n=e.line.offsetWidth,s=this.dotHeight!=t||this.dotWidth!=i||this.lineWidth!=n;return this.dotHeight=t,this.dotWidth=i,this.lineWidth=n,s},links.Timeline.ItemBox.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(e.line,"timeline-event-selected ui-state-active"),links.Timeline.addClassName(e.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(e.line,"timeline-event-selected ui-state-active"),links.Timeline.removeClassName(e.dot,"timeline-event-selected ui-state-active")},links.Timeline.ItemBox.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute",e.style.left=this.left+"px",e.style.top=this.top+"px";var t=document.createElement("DIV");t.className="timeline-event-content",t.innerHTML=this.content,e.appendChild(t);var i=document.createElement("DIV");i.style.position="absolute",i.style.width="0px",e.line=i;var n=document.createElement("DIV");return n.style.position="absolute",n.style.width="0px",n.style.height="0px",e.dot=n,this.dom=e,this.updateDOM(),e},links.Timeline.ItemBox.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),e.insertBefore(t.line,e.firstChild),e.appendChild(t.dot),this.rendered=!0)},links.Timeline.ItemBox.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),e.line&&e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot&&e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.rendered=!1)},links.Timeline.ItemBox.prototype.updateDOM=function(){var e=this.dom;if(e){var t=e.line,i=e.dot;e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-box ui-widget ui-state-default",t.className="timeline-event timeline-event-line ui-widget ui-state-default",i.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(t,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(i,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(e,this.className),links.Timeline.addClassName(t,this.className),links.Timeline.addClassName(i,this.className))}},links.Timeline.ItemBox.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.timeToScreen(this.start),n=e.options.axisOnTop,s=e.size.axis.top,o=e.size.axis.height,a=e.options.box&&e.options.box.align?e.options.box.align:void 0;t.style.top=this.top+"px",t.style.left="right"==a?i-this.width+"px":"left"==a?i+"px":i-this.width/2+"px";var r=t.line,l=t.dot;r.style.left=i-this.lineWidth/2+"px",l.style.left=i-this.dotWidth/2+"px",n?(r.style.top=o+"px",r.style.height=Math.max(this.top-o,0)+"px",l.style.top=o-this.dotHeight/2+"px"):(r.style.top=this.top+this.height+"px",r.style.height=Math.max(s-this.top-this.height,0)+"px",l.style.top=s-this.dotHeight/2+"px")}},links.Timeline.ItemBox.prototype.isVisible=function(e,t){return this.cluster?!1:this.start>e&&this.start<t},links.Timeline.ItemBox.prototype.setPosition=function(e){var t=this.dom;t.style.left=e-this.width/2+"px",t.line.style.left=e-this.lineWidth/2+"px",t.dot.style.left=e-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,t.style.top=this.top+"px")},links.Timeline.ItemBox.prototype.getLeft=function(e){var t=e.options.box&&e.options.box.align?e.options.box.align:void 0,i=e.timeToScreen(this.start);return i-="right"==t?width:this.width/2},links.Timeline.ItemBox.prototype.getRight=function(e){var t,i=e.options.box&&e.options.box.align?e.options.box.align:void 0,n=e.timeToScreen(this.start);return t="right"==i?n:"left"==i?n+this.width:n+this.width/2},links.Timeline.ItemRange=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemRange.prototype=new links.Timeline.Item,links.Timeline.ItemRange.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemRange.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");return t.className="timeline-event-content",e.appendChild(t),this.dom=e,this.updateDOM(),e},links.Timeline.ItemRange.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemRange.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemRange.prototype.updateDOM=function(){var e=this.dom;e&&(e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(e,this.className))},links.Timeline.ItemRange.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.size.contentWidth,n=e.timeToScreen(this.start),s=e.timeToScreen(this.end);-i>n&&(n=-i),s>2*i&&(s=2*i),t.style.top=this.top+"px",t.style.left=n+"px",t.style.width=Math.max(s-n,1)+"px"}},links.Timeline.ItemRange.prototype.isVisible=function(e,t){return this.cluster?!1:this.end>e&&this.start<t},links.Timeline.ItemRange.prototype.setPosition=function(e,t){var i=this.dom;i.style.left=e+"px",i.style.width=t-e+"px",this.group&&(this.top=this.group.top,i.style.top=this.top+"px")},links.Timeline.ItemRange.prototype.getLeft=function(e){return e.timeToScreen(this.start)},links.Timeline.ItemRange.prototype.getRight=function(e){return e.timeToScreen(this.end)},links.Timeline.ItemRange.prototype.getWidth=function(e){return e.timeToScreen(this.end)-e.timeToScreen(this.start)},links.Timeline.ItemFloatingRange=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemFloatingRange.prototype=new links.Timeline.Item,links.Timeline.ItemFloatingRange.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemFloatingRange.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");return t.className="timeline-event-content",e.appendChild(t),this.dom=e,this.updateDOM(),e},links.Timeline.ItemFloatingRange.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemFloatingRange.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemFloatingRange.prototype.updateDOM=function(){var e=this.dom;e&&(e.firstChild.innerHTML=this.content,e.className="timeline-event timeline-event-range ui-widget ui-state-default",this.isCluster&&links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),this.className&&links.Timeline.addClassName(e,this.className))},links.Timeline.ItemFloatingRange.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.size.contentWidth,n=this.getLeft(e),s=this.getRight(e);-i>n&&(n=-i),s>2*i&&(s=2*i),t.style.top=this.top+"px",t.style.left=n+"px",t.style.width=Math.max(s-n,1)+"px"}},links.Timeline.ItemFloatingRange.prototype.isVisible=function(e,t){return this.cluster?!1:this.end&&this.start?this.end>e&&this.start<t:this.start?this.start<t:this.end?this.end>e:!0},links.Timeline.ItemFloatingRange.prototype.setPosition=function(e,t){var i=this.dom;i.style.left=e+"px",i.style.width=t-e+"px",this.group&&(this.top=this.group.top,i.style.top=this.top+"px")},links.Timeline.ItemFloatingRange.prototype.getLeft=function(e){return this.start?e.timeToScreen(this.start):0},links.Timeline.ItemFloatingRange.prototype.getRight=function(e){return this.end?e.timeToScreen(this.end):e.size.contentWidth},links.Timeline.ItemFloatingRange.prototype.getWidth=function(e){return this.getRight(e)-this.getLeft(e)},links.Timeline.ItemDot=function(e,t){links.Timeline.Item.call(this,e,t)},links.Timeline.ItemDot.prototype=new links.Timeline.Item,links.Timeline.ItemDot.prototype.reflow=function(){var e=this.dom,t=e.dot.offsetHeight,i=e.dot.offsetWidth,n=e.content.offsetHeight,s=this.dotHeight!=t||this.dotWidth!=i||this.contentHeight!=n;return this.dotHeight=t,this.dotWidth=i,this.contentHeight=n,s},links.Timeline.ItemDot.prototype.select=function(){var e=this.dom;links.Timeline.addClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.unselect=function(){var e=this.dom;links.Timeline.removeClassName(e,"timeline-event-selected ui-state-active")},links.Timeline.ItemDot.prototype.createDOM=function(){var e=document.createElement("DIV");e.style.position="absolute";var t=document.createElement("DIV");t.className="timeline-event-content",e.appendChild(t);var i=document.createElement("DIV");return i.style.position="absolute",i.style.width="0px",i.style.height="0px",e.appendChild(i),e.content=t,e.dot=i,this.dom=e,this.updateDOM(),e},links.Timeline.ItemDot.prototype.showDOM=function(e){var t=this.dom;t||(t=this.createDOM()),t.parentNode!=e&&(t.parentNode&&this.hideDOM(),e.appendChild(t),this.rendered=!0)},links.Timeline.ItemDot.prototype.hideDOM=function(){var e=this.dom;e&&(e.parentNode&&e.parentNode.removeChild(e),this.rendered=!1)},links.Timeline.ItemDot.prototype.updateDOM=function(){if(this.dom){var e=this.dom,t=e.dot;e.firstChild.innerHTML=this.content,e.className="timeline-event-dot-container",t.className="timeline-event timeline-event-dot ui-widget ui-state-default",this.isCluster&&(links.Timeline.addClassName(e,"timeline-event-cluster ui-widget-header"),links.Timeline.addClassName(t,"timeline-event-cluster ui-widget-header")),this.className&&(links.Timeline.addClassName(e,this.className),links.Timeline.addClassName(t,this.className))}},links.Timeline.ItemDot.prototype.updatePosition=function(e){var t=this.dom;if(t){var i=e.timeToScreen(this.start);t.style.top=this.top+"px",t.style.left=i-this.dotWidth/2+"px",t.content.style.marginLeft=1.5*this.dotWidth+"px",t.dot.style.top=(this.height-this.dotHeight)/2+"px"}},links.Timeline.ItemDot.prototype.isVisible=function(e,t){return this.cluster?!1:this.start>e&&this.start<t},links.Timeline.ItemDot.prototype.setPosition=function(e){var t=this.dom;t.style.left=e-this.dotWidth/2+"px",this.group&&(this.top=this.group.top,t.style.top=this.top+"px")},links.Timeline.ItemDot.prototype.getLeft=function(e){return e.timeToScreen(this.start)},links.Timeline.ItemDot.prototype.getRight=function(e){return e.timeToScreen(this.start)+this.width},links.Timeline.prototype.getItem=function(e){if(e>=this.items.length)throw"Cannot get item, index out of range";var t,i=this.data;if(google&&google.visualization&&i instanceof google.visualization.DataTable){var n=links.Timeline.mapColumnIds(i);t={};for(var s in n)n.hasOwnProperty(s)&&(t[s]=this.data.getValue(e,n[s]))}else{if(!links.Timeline.isArray(this.data))throw"Unknown data type. DataTable or Array expected.";t=links.Timeline.clone(this.data[e])}var o=this.items[e];return t.start=new Date(o.start.valueOf()),o.end&&(t.end=new Date(o.end.valueOf())),t.content=o.content,o.group&&(t.group=this.getGroupName(o.group)),o.className&&(t.className=o.className),"undefined"!=typeof o.editable&&(t.editable=o.editable),o.type&&(t.type=o.type),t},links.Timeline.prototype.getCluster=function(e){if(e>=this.clusters.length)throw"Cannot get cluster, index out of range";var t={},i=this.clusters[e],n=i.items;t.start=new Date(i.start.valueOf()),i.type&&(t.type=i.type),t.items=[];for(var s=0;s<n.length;s++)for(var o=0;o<this.items.length;o++)if(this.items[o]==n[s]){t.items.push(this.getItem(o));break}return t},links.Timeline.prototype.addItem=function(e,t){var i=[e];this.addItems(i,t)},links.Timeline.prototype.addItems=function(e,t){var i=this,n=this.items;e.forEach(function(e){var t=n.length;n.push(i.createItem(e)),i.updateData(t,e)}),this.options.cluster&&this.clusterGenerator.updateData(),t||this.render({animate:!1})},links.Timeline.prototype.createItem=function(e){var t=e.type||(e.end?"range":this.options.style),i=links.Timeline.clone(e);i.type=t,i.group=this.getGroup(e.group);var n,s=this.options;return n=s.axisOnTop?this.size.axis.height+s.eventMarginAxis+s.eventMargin/2:this.size.contentHeight-s.eventMarginAxis-s.eventMargin/2,t in this.itemTypes?new this.itemTypes[t](i,{top:n}):(console.log('ERROR: Unknown event type "'+t+'"'),new links.Timeline.Item(i,{top:n}))},links.Timeline.prototype.changeItem=function(e,t,i){var n=this.items[e];if(!n)throw"Cannot change item, index out of range";var s=this.createItem({start:t.hasOwnProperty("start")?t.start:n.start,end:t.hasOwnProperty("end")?t.end:n.end,content:t.hasOwnProperty("content")?t.content:n.content,group:t.hasOwnProperty("group")?t.group:this.getGroupName(n.group),className:t.hasOwnProperty("className")?t.className:n.className,editable:t.hasOwnProperty("editable")?t.editable:n.editable,type:t.hasOwnProperty("type")?t.type:n.type});this.items[e]=s,this.renderQueue.hide.push(n),this.renderQueue.show.push(s),this.updateData(e,t),this.options.cluster&&this.clusterGenerator.updateData(),i||(this.render({animate:!1}),this.selection&&this.selection.index==e&&s.select())},links.Timeline.prototype.deleteGroups=function(){this.groups=[],this.groupIndexes={}},links.Timeline.prototype.getGroup=function(e){var t=this.groups,i=this.groupIndexes,n=void 0,s=i[e];if(void 0==s&&void 0!=e){n={content:e,labelTop:0,lineTop:0},t.push(n),1==this.options.groupsOrder?t=t.sort(function(e,t){return e.content>t.content?1:e.content<t.content?-1:0}):"function"==typeof this.options.groupsOrder&&(t=t.sort(this.options.groupsOrder));for(var o=0,a=t.length;a>o;o++)i[t[o].content]=o}else n=t[s];return n},links.Timeline.prototype.getGroupName=function(e){return e?e.content:void 0},links.Timeline.prototype.cancelChange=function(){this.applyChange=!1},links.Timeline.prototype.cancelDelete=function(){this.applyDelete=!1},links.Timeline.prototype.cancelAdd=function(){this.applyAdd=!1},links.Timeline.prototype.setSelection=function(e){if(void 0!=e&&e.length>0){if(void 0!=e[0].row){var t=e[0].row;if(this.items[t]){var i=this.items[t];this.selectItem(t);var n,s=i.start,o=i.end;n=void 0!=o?(o.valueOf()+s.valueOf())/2:s.valueOf();var a=this.end.valueOf()-this.start.valueOf(),r=new Date(n-a/2),l=new Date(n+a/2);return this.setVisibleChartRange(r,l),!0}}}else this.unselectItem();return!1},links.Timeline.prototype.getSelection=function(){var e=[];return this.selection&&e.push(void 0!==this.selection.index?{row:this.selection.index}:{cluster:this.selection.cluster}),e},links.Timeline.prototype.selectItem=function(e){if(this.unselectItem(),this.selection=void 0,void 0!=this.items[e]){{var t=this.items[e];t.dom}this.selection={index:e},t&&t.dom&&(this.isEditable(t)&&(t.dom.style.cursor="move"),t.select()),this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.selectCluster=function(e){this.unselectItem(),this.selection=void 0,void 0!=this.clusters[e]&&(this.selection={cluster:e},this.repaintDeleteButton(),this.repaintDragAreas())},links.Timeline.prototype.isSelected=function(e){return this.selection&&this.selection.index==e},links.Timeline.prototype.unselectItem=function(){if(this.selection&&void 0!==this.selection.index){var e=this.items[this.selection.index];if(e&&e.dom){var t=e.dom;t.style.cursor="",e.unselect()}this.selection=void 0,this.repaintDeleteButton(),this.repaintDragAreas()}},links.Timeline.prototype.stackItems=function(e){void 0==e&&(e=!1);var t=this.stack;if(t||(t={},this.stack=t),t.sortedItems=this.stackOrder(this.renderedItems),t.finalItems=this.stackCalculateFinal(t.sortedItems),e||t.timer){var i=this,n=function(){var e=i.stackMoveOneStep(t.sortedItems,t.finalItems);i.repaint(),e?delete t.timer:t.timer=setTimeout(n,30)};t.timer||(t.timer=setTimeout(n,30))}else this.stackMoveToFinal(t.sortedItems,t.finalItems)},links.Timeline.prototype.stackCancelAnimation=function(){this.stack&&this.stack.timer&&(clearTimeout(this.stack.timer),delete this.stack.timer)},links.Timeline.prototype.getItemsByGroup=function(e){for(var t={},i=0;i<e.length;++i){var n=e[i],s="undefined";n.group&&(s=n.group.content?n.group.content:n.group),t[s]||(t[s]=[]),t[s].push(n)}return t},links.Timeline.prototype.stackOrder=function(e){var t=e.concat([]),i=this.options.customStackOrder&&"function"==typeof this.options.customStackOrder?this.options.customStackOrder:function(e,t){return(e instanceof links.Timeline.ItemRange||e instanceof links.Timeline.ItemFloatingRange)&&!(t instanceof links.Timeline.ItemRange||t instanceof links.Timeline.ItemFloatingRange)?-1:e instanceof links.Timeline.ItemRange||e instanceof links.Timeline.ItemFloatingRange||!(t instanceof links.Timeline.ItemRange||t instanceof links.Timeline.ItemFloatingRange)?e.left-t.left:1};return t.sort(i),t},links.Timeline.prototype.stackCalculateFinal=function(e){var t,i,n=this.size,s=this.options,o=s.axisOnTop,a=s.eventMargin,r=s.eventMarginAxis,l=o?n.axis.height+r+a/2:n.contentHeight-r-a/2,h=[];for(t=this.getItemsByGroup(e),j=0;j<this.groups.length;++j){var m=this.groups[j];t[m.content]?(i=this.finalItemsPosition(t[m.content],l,m),i.forEach(function(e){h.push(e)}),o?l+=m.itemsHeight+a:l-=m.itemsHeight+a):o?l+=s.groupMinHeight+a:l-=s.groupMinHeight+a}return t.undefined&&(i=this.finalItemsPosition(t.undefined,l),i.forEach(function(e){h.push(e)})),h},links.Timeline.prototype.finalItemsPosition=function(e,t,i){var n,s,o,a=this.options,r=a.axisOnTop,l=a.eventMargin;for(o=this.initialItemsPosition(e,t),n=0,s=o.length;s>n;n++){var h=o[n],m=null;if(this.options.stackEvents)do m=this.stackItemsCheckOverlap(o,n,0,n-1),null!=m&&(h.top=r?m.top+m.height+l:m.top-h.height-l,h.bottom=h.top+h.height);while(m);i&&(i.itemsHeight=r?i.itemsHeight?Math.max(i.itemsHeight,h.bottom-t):h.height+l:i.itemsHeight?Math.max(i.itemsHeight,t-h.top):h.height+l)}return o},links.Timeline.prototype.initialItemsPosition=function(e,t){for(var i=this.options,n=i.axisOnTop,s=[],o=0,a=e.length;a>o;++o){var r,l,h=e[o],m=h.height,p=h.getWidth(this),u=h.getRight(this),d=u-p;r=n?t:t-m,l=r+m,s.push({left:d,top:r,right:u,bottom:l,height:m,item:h})}return s},links.Timeline.prototype.stackMoveOneStep=function(e,t){for(var i=!0,n=0,s=t.length;s>n;n++){var o=t[n],a=o.item,r=parseInt(a.top),l=parseInt(o.top),h=l-r;if(h){var m=l==r?0:l>r?1:-1;Math.abs(h)>4&&(m=h/4);var p=parseInt(r+m);p!=l&&(i=!1),a.top=p,a.bottom=a.top+a.height}else a.top=o.top,a.bottom=o.bottom;a.left=o.left,a.right=o.right}return i},links.Timeline.prototype.stackMoveToFinal=function(e,t){for(var i=0,n=t.length;n>i;i++){var s=t[i],o=s.item;o.left=s.left,o.top=s.top,o.right=s.right,o.bottom=s.bottom}},links.Timeline.prototype.stackItemsCheckOverlap=function(e,t,i,n){for(var s=this.options.eventMargin,o=this.collision,a=e[t],r=n;r>=i;r--){var l=e[r];if(o(a,l,s)&&r!=t)return l}return void 0},links.Timeline.prototype.collision=function(e,t,i){return void 0==i&&(i=0),e.left-i<t.right&&e.right+i>t.left&&e.top-i<t.bottom&&e.bottom+i>t.top},links.Timeline.prototype.trigger=function(e){var t=null;switch(e){case"rangechange":case"rangechanged":t={start:new Date(this.start.valueOf()),end:new Date(this.end.valueOf())};break;case"timechange":case"timechanged":t={time:new Date(this.customTime.valueOf())}}links.events.trigger(this,e,t),google&&google.visualization&&google.visualization.events.trigger(this,e,t)},links.Timeline.prototype.clusterItems=function(){if(this.options.cluster){var e=this.clusterGenerator.getClusters(this.conversion.factor,this.options.clusterMaxItems);if(this.clusters!=e){var t=this.renderQueue;this.clusters&&this.clusters.forEach(function(e){t.hide.push(e),e.items.forEach(function(e){e.cluster=void 0})}),e.forEach(function(e){e.items.forEach(function(t){t.cluster=e})}),this.clusters=e}}},links.Timeline.prototype.filterItems=function(){function e(e){e.forEach(function(e){var i=e.rendered,o=e.isVisible(n,s);i!=o&&(i&&t.hide.push(e),o&&-1==t.show.indexOf(e)&&t.show.push(e))})}var t=this.renderQueue,i=this.end-this.start,n=new Date(this.start.valueOf()-i),s=new Date(this.end.valueOf()+i);e(this.items),this.clusters&&e(this.clusters)},links.Timeline.ClusterGenerator=function(e){this.timeline=e,this.clear()},links.Timeline.ClusterGenerator.prototype.clear=function(){this.items=[],this.groups={},this.clearCache()},links.Timeline.ClusterGenerator.prototype.clearCache=function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]},links.Timeline.ClusterGenerator.prototype.setData=function(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!0,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)},links.Timeline.ClusterGenerator.prototype.updateData=function(){this.dataChanged=!0,this.applyOnChangedLevel=!1},links.Timeline.ClusterGenerator.prototype.filterData=function(){var e=this.items||[],t={};this.groups=t,e.forEach(function(e){var i=e.group?e.group.content:"",n=t[i];n||(n=[],t[i]=n),n.push(e),e.start&&(e.center=e.end?(e.start.valueOf()+e.end.valueOf())/2:e.start.valueOf())});for(var i in t)t.hasOwnProperty(i)&&t[i].sort(function(e,t){return e.center-t.center});this.dataChanged=!1},links.Timeline.ClusterGenerator.prototype.getClusters=function(e,t){var i=-1,n=2,s=0;if(e>0&&(i=Math.round(Math.log(100/e)/Math.log(n)),s=Math.pow(n,i)),this.dataChanged){var o=i!=this.cacheLevel,a=this.applyOnChangedLevel?o:!0;a&&(this.clearCache(),this.filterData())}this.cacheLevel=i;var r=this.cache[i];if(!r){r=[];for(var l in this.groups)if(this.groups.hasOwnProperty(l))for(var h=this.groups[l],m=h.length,p=0;m>p;){for(var u=h[p],d=1,c=p-1;c>=0&&u.center-h[c].center<s/2;)h[c].cluster||d++,c--;for(var g=p+1;g<h.length&&h[g].center-u.center<s/2;)d++,g++;for(var f=r.length-1;f>=0&&u.center-r[f].center<s/2;)u.group==r[f].group&&d++,f--;if(d>t){for(var v=d-t+1,T=[],k=void 0,y=void 0,D=void 0,x=!1,M=0,S=p;T.length<v&&S<h.length;){var C=h[S],I=C.start.valueOf(),E=C.end?C.end.valueOf():C.start.valueOf();T.push(C),k=M?M/(M+1)*k+1/(M+1)*C.center:C.center,y=void 0!=y?Math.min(y,I):I,D=void 0!=D?Math.max(D,E):E,x=x||C instanceof links.Timeline.ItemRange||C instanceof links.Timeline.ItemFloatingRange,M++,S++}var O,w="Cluster containing "+M+" events. Zoom in to see the individual events.",L='<div title="'+w+'">'+M+" events</div>",b=u.group?u.group.content:void 0;O=this.timeline.createItem(x?{start:new Date(y),end:new Date(D),content:L,group:b}:{start:new Date(k),content:L,group:b}),O.isCluster=!0,O.items=T,O.items.forEach(function(e){e.cluster=O}),r.push(O),p+=v}else delete u.cluster,p+=1}this.cache[i]=r}return r},links.events=links.events||{listeners:[],indexOf:function(e){for(var t=this.listeners,i=0,n=this.listeners.length;n>i;i++){var s=t[i];if(s&&s.object==e)return i}return-1},addListener:function(e,t,i){var n=this.indexOf(e),s=this.listeners[n];s||(s={object:e,events:{}},this.listeners.push(s));var o=s.events[t];o||(o=[],s.events[t]=o),-1==o.indexOf(i)&&o.push(i)},removeListener:function(e,t,i){var n=this.indexOf(e),s=this.listeners[n];if(s){var o=s.events[t];if(o){var n=o.indexOf(i);-1!=n&&o.splice(n,1),0==o.length&&delete s.events[t]}var a=0,r=s.events;for(var l in r)r.hasOwnProperty(l)&&a++;0==a&&delete this.listeners[n]}},removeAllListeners:function(){this.listeners=[]},trigger:function(e,t,i){var n=this.indexOf(e),s=this.listeners[n];if(s){var o=s.events[t];if(o)for(var a=0,r=o.length;r>a;a++)o[a](i)}}},links.Timeline.StepDate=function(e,t,i){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1,this.setRange(e,t,i)},links.Timeline.StepDate.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},links.Timeline.StepDate.prototype.setRange=function(e,t,i){e instanceof Date&&t instanceof Date&&(this._start=void 0!=e?new Date(e.valueOf()):new Date,this._end=void 0!=t?new Date(t.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i))},links.Timeline.StepDate.prototype.start=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},links.Timeline.StepDate.prototype.roundToMinor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case links.Timeline.StepDate.SCALE.MONTH:this.current.setDate(1);case links.Timeline.StepDate.SCALE.DAY:case links.Timeline.StepDate.SCALE.WEEKDAY:this.current.setHours(0);case links.Timeline.StepDate.SCALE.HOUR:this.current.setMinutes(0);case links.Timeline.StepDate.SCALE.MINUTE:this.current.setSeconds(0);case links.Timeline.StepDate.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},links.Timeline.StepDate.prototype.end=function(){return this.current.valueOf()>this._end.valueOf()},links.Timeline.StepDate.prototype.next=function(){var e=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1e3*this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+1e3*this.step*60);break;case links.Timeline.StepDate.SCALE.HOUR:this.current=new Date(this.current.valueOf()+1e3*this.step*60*60);var t=this.current.getHours();this.current.setHours(t-t%this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case links.Timeline.StepDate.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case links.Timeline.StepDate.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case links.Timeline.StepDate.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case links.Timeline.StepDate.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case links.Timeline.StepDate.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);break;case links.Timeline.StepDate.SCALE.YEAR:}this.current.valueOf()==e&&(this.current=new Date(this._end.valueOf()))},links.Timeline.StepDate.prototype.getCurrent=function(){return this.current},links.Timeline.StepDate.prototype.setScale=function(e,t){this.scale=e,t>0&&(this.step=t),this.autoScale=!1},links.Timeline.StepDate.prototype.setAutoScale=function(e){this.autoScale=e},links.Timeline.StepDate.prototype.setMinimumStep=function(e){if(void 0!=e){var t=31104e6,i=2592e6,n=864e5,s=36e5,o=6e4,a=1e3,r=1;1e3*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1e3),500*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=500),100*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=100),50*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=50),10*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=10),5*t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=5),t>e&&(this.scale=links.Timeline.StepDate.SCALE.YEAR,this.step=1),3*i>e&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=3),i>e&&(this.scale=links.Timeline.StepDate.SCALE.MONTH,this.step=1),5*n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=5),2*n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=2),n>e&&(this.scale=links.Timeline.StepDate.SCALE.DAY,this.step=1),n/2>e&&(this.scale=links.Timeline.StepDate.SCALE.WEEKDAY,this.step=1),4*s>e&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=4),s>e&&(this.scale=links.Timeline.StepDate.SCALE.HOUR,this.step=1),15*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=15),10*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=10),5*o>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=5),o>e&&(this.scale=links.Timeline.StepDate.SCALE.MINUTE,this.step=1),15*a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=15),10*a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=10),5*a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=5),a>e&&(this.scale=links.Timeline.StepDate.SCALE.SECOND,this.step=1),200*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=200),100*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=100),50*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=50),10*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=10),5*r>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=5),r>e&&(this.scale=links.Timeline.StepDate.SCALE.MILLISECOND,this.step=1)}},links.Timeline.StepDate.prototype.snap=function(e){if(this.scale==links.Timeline.StepDate.SCALE.YEAR){var t=e.getFullYear()+Math.round(e.getMonth()/12);e.setFullYear(Math.round(t/this.step)*this.step),e.setMonth(0),e.setDate(0),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MONTH)e.getDate()>15?(e.setDate(1),e.setMonth(e.getMonth()+1)):e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);else if(this.scale==links.Timeline.StepDate.SCALE.DAY||this.scale==links.Timeline.StepDate.SCALE.WEEKDAY){switch(this.step){case 5:case 2:e.setHours(24*Math.round(e.getHours()/24));break;default:e.setHours(12*Math.round(e.getHours()/12))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.HOUR){switch(this.step){case 4:e.setMinutes(60*Math.round(e.getMinutes()/60));break;default:e.setMinutes(30*Math.round(e.getMinutes()/30))}e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.MINUTE){switch(this.step){case 15:case 10:e.setMinutes(5*Math.round(e.getMinutes()/5)),e.setSeconds(0);break;case 5:e.setSeconds(60*Math.round(e.getSeconds()/60));break;default:e.setSeconds(30*Math.round(e.getSeconds()/30))}e.setMilliseconds(0)}else if(this.scale==links.Timeline.StepDate.SCALE.SECOND)switch(this.step){case 15:case 10:e.setSeconds(5*Math.round(e.getSeconds()/5)),e.setMilliseconds(0);break;case 5:e.setMilliseconds(1e3*Math.round(e.getMilliseconds()/1e3));break;default:e.setMilliseconds(500*Math.round(e.getMilliseconds()/500))}else if(this.scale==links.Timeline.StepDate.SCALE.MILLISECOND){var i=this.step>5?this.step/2:1;e.setMilliseconds(Math.round(e.getMilliseconds()/i)*i)}},links.Timeline.StepDate.prototype.isMajor=function(){switch(this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case links.Timeline.StepDate.SCALE.SECOND:return 0==this.current.getSeconds();case links.Timeline.StepDate.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case links.Timeline.StepDate.SCALE.HOUR:return 0==this.current.getHours();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return 1==this.current.getDate();case links.Timeline.StepDate.SCALE.MONTH:return 0==this.current.getMonth();case links.Timeline.StepDate.SCALE.YEAR:return!1;default:return!1}},links.Timeline.StepDate.prototype.getLabelMinor=function(e,t){switch(void 0==t&&(t=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return String(t.getMilliseconds());case links.Timeline.StepDate.SCALE.SECOND:return String(t.getSeconds());case links.Timeline.StepDate.SCALE.MINUTE:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.HOUR:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.WEEKDAY:return e.DAYS_SHORT[t.getDay()]+" "+t.getDate();case links.Timeline.StepDate.SCALE.DAY:return String(t.getDate());case links.Timeline.StepDate.SCALE.MONTH:return e.MONTHS_SHORT[t.getMonth()];case links.Timeline.StepDate.SCALE.YEAR:return String(t.getFullYear());default:return""}},links.Timeline.StepDate.prototype.getLabelMajor=function(e,t){switch(void 0==t&&(t=this.current),this.scale){case links.Timeline.StepDate.SCALE.MILLISECOND:return this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2)+":"+this.addZeros(t.getSeconds(),2);case links.Timeline.StepDate.SCALE.SECOND:return t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+this.addZeros(t.getHours(),2)+":"+this.addZeros(t.getMinutes(),2);case links.Timeline.StepDate.SCALE.MINUTE:return e.DAYS[t.getDay()]+" "+t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.HOUR:return e.DAYS[t.getDay()]+" "+t.getDate()+" "+e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.WEEKDAY:case links.Timeline.StepDate.SCALE.DAY:return e.MONTHS[t.getMonth()]+" "+t.getFullYear();case links.Timeline.StepDate.SCALE.MONTH:return String(t.getFullYear());default:return""}},links.Timeline.StepDate.prototype.addZeros=function(e,t){for(var i=""+e;i.length<t;)i="0"+i;return i},links.imageloader=function(){function e(e){if(1==o[e])return!0;var t=new Image;return t.src=e,t.complete?!0:!1}function t(e){return void 0!=a[e]}function i(i,n,s){if(void 0==s&&(s=!0),e(i))return void(s&&n(i));if(!t(i)||s){var r=a[i];if(!r){var l=new Image;l.src=i,r=[],a[i]=r,l.onload=function(){o[i]=!0,delete a[i];for(var e=0;e<r.length;e++)r[e](i)}}-1==r.indexOf(n)&&r.push(n)}}function n(t,n,s){var o=[];if(t.forEach(function(t){e(t)||o.push(t)}),o.length){var a=o.length;o.forEach(function(e){i(e,function(){a--,0==a&&n()},s)})}else s&&n()}function s(e,t){for(var i=e.firstChild;i;){if("IMG"==i.tagName){var n=i.src;-1==t.indexOf(n)&&t.push(n)}s(i,t),i=i.nextSibling}}var o={},a={};return{isLoaded:e,isLoading:t,load:i,loadAll:n,filterImageUrls:s}}(),links.Timeline.addEventListener=function(e,t,i,n){e.addEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.addEventListener(t,i,n)):e.attachEvent("on"+t,i)},links.Timeline.removeEventListener=function(e,t,i,n){e.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===t&&navigator.userAgent.indexOf("Firefox")>=0&&(t="DOMMouseScroll"),e.removeEventListener(t,i,n)):e.detachEvent("on"+t,i)},links.Timeline.getTarget=function(e){e||(e=window.event);var t;return e.target?t=e.target:e.srcElement&&(t=e.srcElement),void 0!=t.nodeType&&3==t.nodeType&&(t=t.parentNode),t},links.Timeline.stopPropagation=function(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},links.Timeline.preventDefault=function(e){e||(e=window.event),e.preventDefault?e.preventDefault():e.returnValue=!1},links.Timeline.getAbsoluteLeft=function(e){for(var t=document.documentElement,i=document.body,n=e.offsetLeft,s=e.offsetParent;null!=s&&s!=i&&s!=t;)n+=s.offsetLeft,n-=s.scrollLeft,s=s.offsetParent;return n},links.Timeline.getAbsoluteTop=function(e){for(var t=document.documentElement,i=document.body,n=e.offsetTop,s=e.offsetParent;null!=s&&s!=i&&s!=t;)n+=s.offsetTop,n-=s.scrollTop,s=s.offsetParent;return n},links.Timeline.getPageY=function(e){if("targetTouches"in e&&e.targetTouches.length&&(e=e.targetTouches[0]),"pageY"in e)return e.pageY;var t=e.clientY,i=document.documentElement,n=document.body;return t+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)},links.Timeline.getPageX=function(e){if("targetTouches"in e&&e.targetTouches.length&&(e=e.targetTouches[0]),"pageX"in e)return e.pageX;var t=e.clientX,i=document.documentElement,n=document.body;return t+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0)},links.Timeline.addClassName=function(e,t){for(var i=e.className.split(" "),n=t.split(" "),s=!1,o=0;o<n.length;o++)-1==i.indexOf(n[o])&&(i.push(n[o]),s=!0);s&&(e.className=i.join(" "))},links.Timeline.removeClassName=function(e,t){for(var i=e.className.split(" "),n=t.split(" "),s=!1,o=0;o<n.length;o++){var a=i.indexOf(n[o]);-1!=a&&(i.splice(a,1),s=!0)}s&&(e.className=i.join(" "))},links.Timeline.isArray=function(e){return e instanceof Array?!0:"[object Array]"===Object.prototype.toString.call(e)},links.Timeline.clone=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},links.Timeline.parseJSONDate=function(e){if(void 0==e)return void 0;if(e instanceof Date)return e;var t=e.match(/\/Date\((-?\d+)([-\+]?\d{2})?(\d{2})?\)\//i);if(t){var i=t[2]?36e5*t[2]+6e4*t[3]*(t[2]/Math.abs(t[2])):0;return new Date(1*t[1]+i)}return Date.parse(e)};
/* Javascript plotting library for jQuery, version 0.8.3.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

*/

// first an inline dependency, jquery.colorhelpers.js, we inline it here
// for convenience

/* Plugin for jQuery for working with colors.
*
* Version 1.1.
*
* Inspiration from jQuery color animation plugin by John Resig.
*
* Released under the MIT license by Ole Laursen, October 2009.
*
* Examples:
*
*   $.color.parse("#fff").scale('rgb', 0.25).add('a', -0.5).toString()
*   var c = $.color.extract($("#mydiv"), 'background-color');
*   console.log(c.r, c.g, c.b, c.a);
*   $.color.make(100, 50, 25, 0.4).toString() // returns "rgba(100,50,25,0.4)"
*
* Note that .scale() and .add() return the same modified object
* instead of making a new one.
*
* V. 1.1: Fix error handling so e.g. parsing an empty string does
* produce a color rather than just crashing.
*/
!function(t){t.color={},t.color.make=function(i,e,o,n){var a={};return a.r=i||0,a.g=e||0,a.b=o||0,a.a=null!=n?n:1,a.add=function(t,i){for(var e=0;e<t.length;++e)a[t.charAt(e)]+=i;return a.normalize()},a.scale=function(t,i){for(var e=0;e<t.length;++e)a[t.charAt(e)]*=i;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,i,e){return t>i?t:i>e?e:i}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(i,e){var o;do{if(o=i.css(e).toLowerCase(),""!=o&&"transparent"!=o)break;i=i.parent()}while(i.length&&!t.nodeName(i.get(0),"body"));return"rgba(0, 0, 0, 0)"==o&&(o="transparent"),t.color.parse(o)},t.color.parse=function(e){var o,n=t.color.make;if(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10));if(o=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10),parseFloat(o[4]));if(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]));if(o=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]),parseFloat(o[4]));if(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16));if(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16));var a=t.trim(e).toLowerCase();return"transparent"==a?n(255,255,255,0):(o=i[a]||[0,0,0],n(o[0],o[1],o[2]))};var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function i(i,e){var o=e.children("."+i)[0];if(null==o&&(o=document.createElement("canvas"),o.className=i,t(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(e),!o.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");o=window.G_vmlCanvasManager.initElement(o)}this.element=o;var n=this.context=o.getContext("2d"),a=window.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=a/r,this.resize(e.width(),e.height()),this.textContainer=null,this.text={},this._textCache={}}function e(e,n,a,r){function l(t,i){i=[xi].concat(i);for(var e=0;e<t.length;++e)t[e].apply(this,i)}function s(){for(var e={Canvas:i},o=0;o<r.length;++o){var n=r[o];n.init(xi,e),n.options&&t.extend(!0,ni,n.options)}}function c(i){t.extend(!0,ni,i),i&&i.colors&&(ni.colors=i.colors),null==ni.xaxis.color&&(ni.xaxis.color=t.color.parse(ni.grid.color).scale("a",.22).toString()),null==ni.yaxis.color&&(ni.yaxis.color=t.color.parse(ni.grid.color).scale("a",.22).toString()),null==ni.xaxis.tickColor&&(ni.xaxis.tickColor=ni.grid.tickColor||ni.xaxis.color),null==ni.yaxis.tickColor&&(ni.yaxis.tickColor=ni.grid.tickColor||ni.yaxis.color),null==ni.grid.borderColor&&(ni.grid.borderColor=ni.grid.color),null==ni.grid.tickColor&&(ni.grid.tickColor=t.color.parse(ni.grid.color).scale("a",.22).toString());var o,n,a,r=e.css("font-size"),s=r?+r.replace("px",""):13,c={style:e.css("font-style"),size:Math.round(.8*s),variant:e.css("font-variant"),weight:e.css("font-weight"),family:e.css("font-family")};for(a=ni.xaxes.length||1,o=0;a>o;++o)n=ni.xaxes[o],n&&!n.tickColor&&(n.tickColor=n.color),n=t.extend(!0,{},ni.xaxis,n),ni.xaxes[o]=n,n.font&&(n.font=t.extend({},c,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(a=ni.yaxes.length||1,o=0;a>o;++o)n=ni.yaxes[o],n&&!n.tickColor&&(n.tickColor=n.color),n=t.extend(!0,{},ni.yaxis,n),ni.yaxes[o]=n,n.font&&(n.font=t.extend({},c,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(ni.xaxis.noTicks&&null==ni.xaxis.ticks&&(ni.xaxis.ticks=ni.xaxis.noTicks),ni.yaxis.noTicks&&null==ni.yaxis.ticks&&(ni.yaxis.ticks=ni.yaxis.noTicks),ni.x2axis&&(ni.xaxes[1]=t.extend(!0,{},ni.xaxis,ni.x2axis),ni.xaxes[1].position="top",null==ni.x2axis.min&&(ni.xaxes[1].min=null),null==ni.x2axis.max&&(ni.xaxes[1].max=null)),ni.y2axis&&(ni.yaxes[1]=t.extend(!0,{},ni.yaxis,ni.y2axis),ni.yaxes[1].position="right",null==ni.y2axis.min&&(ni.yaxes[1].min=null),null==ni.y2axis.max&&(ni.yaxes[1].max=null)),ni.grid.coloredAreas&&(ni.grid.markings=ni.grid.coloredAreas),ni.grid.coloredAreasColor&&(ni.grid.markingsColor=ni.grid.coloredAreasColor),ni.lines&&t.extend(!0,ni.series.lines,ni.lines),ni.points&&t.extend(!0,ni.series.points,ni.points),ni.bars&&t.extend(!0,ni.series.bars,ni.bars),null!=ni.shadowSize&&(ni.series.shadowSize=ni.shadowSize),null!=ni.highlightColor&&(ni.series.highlightColor=ni.highlightColor),o=0;o<ni.xaxes.length;++o)x(hi,o+1).options=ni.xaxes[o];for(o=0;o<ni.yaxes.length;++o)x(fi,o+1).options=ni.yaxes[o];for(var h in mi)ni.hooks[h]&&ni.hooks[h].length&&(mi[h]=mi[h].concat(ni.hooks[h]));l(mi.processOptions,[ni])}function h(t){oi=f(t),g(),b()}function f(i){for(var e=[],o=0;o<i.length;++o){var n=t.extend(!0,{},ni.series);null!=i[o].data?(n.data=i[o].data,delete i[o].data,t.extend(!0,n,i[o]),i[o].data=n.data):n.data=i[o],e.push(n)}return e}function u(t,i){var e=t[i+"axis"];return"object"==typeof e&&(e=e.n),"number"!=typeof e&&(e=1),e}function d(){return t.grep(hi.concat(fi),function(t){return t})}function p(t){var i,e,o={};for(i=0;i<hi.length;++i)e=hi[i],e&&e.used&&(o["x"+e.n]=e.c2p(t.left));for(i=0;i<fi.length;++i)e=fi[i],e&&e.used&&(o["y"+e.n]=e.c2p(t.top));return void 0!==o.x1&&(o.x=o.x1),void 0!==o.y1&&(o.y=o.y1),o}function m(t){var i,e,o,n={};for(i=0;i<hi.length;++i)if(e=hi[i],e&&e.used&&(o="x"+e.n,null==t[o]&&1==e.n&&(o="x"),null!=t[o])){n.left=e.p2c(t[o]);break}for(i=0;i<fi.length;++i)if(e=fi[i],e&&e.used&&(o="y"+e.n,null==t[o]&&1==e.n&&(o="y"),null!=t[o])){n.top=e.p2c(t[o]);break}return n}function x(i,e){return i[e-1]||(i[e-1]={n:e,direction:i==hi?"x":"y",options:t.extend(!0,{},i==hi?ni.xaxis:ni.yaxis)}),i[e-1]}function g(){var i,e=oi.length,o=-1;for(i=0;i<oi.length;++i){var n=oi[i].color;null!=n&&(e--,"number"==typeof n&&n>o&&(o=n))}o>=e&&(e=o+1);var a,r=[],l=ni.colors,s=l.length,c=0;for(i=0;e>i;i++)a=t.color.parse(l[i%s]||"#666"),i%s==0&&i&&(c=c>=0?.5>c?-c-.2:0:-c),r[i]=a.scale("rgb",1+c);var h,f=0;for(i=0;i<oi.length;++i){if(h=oi[i],null==h.color?(h.color=r[f].toString(),++f):"number"==typeof h.color&&(h.color=r[h.color].toString()),null==h.lines.show){var d,p=!0;for(d in h)if(h[d]&&h[d].show){p=!1;break}p&&(h.lines.show=!0)}null==h.lines.zero&&(h.lines.zero=!!h.lines.fill),h.xaxis=x(hi,u(h,"x")),h.yaxis=x(fi,u(h,"y"))}}function b(){function i(t,i,e){i<t.datamin&&i!=-b&&(t.datamin=i),e>t.datamax&&e!=b&&(t.datamax=e)}var e,o,n,a,r,s,c,h,f,u,p,m,x=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE;for(t.each(d(),function(t,i){i.datamin=x,i.datamax=g,i.used=!1}),e=0;e<oi.length;++e)r=oi[e],r.datapoints={points:[]},l(mi.processRawData,[r,r.data,r.datapoints]);for(e=0;e<oi.length;++e){if(r=oi[e],p=r.data,m=r.datapoints.format,!m){if(m=[],m.push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),r.bars.show||r.lines.show&&r.lines.fill){var v=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:v}),r.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}r.datapoints.format=m}if(null==r.datapoints.pointsize){r.datapoints.pointsize=m.length,c=r.datapoints.pointsize,s=r.datapoints.points;var k=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,o=n=0;o<p.length;++o,n+=c){u=p[o];var y=null==u;if(!y)for(a=0;c>a;++a)h=u[a],f=m[a],f&&(f.number&&null!=h&&(h=+h,isNaN(h)?h=null:1/0==h?h=b:h==-1/0&&(h=-b)),null==h&&(f.required&&(y=!0),null!=f.defaultValue&&(h=f.defaultValue))),s[n+a]=h;if(y)for(a=0;c>a;++a)h=s[n+a],null!=h&&(f=m[a],f.autoscale!==!1&&(f.x&&i(r.xaxis,h,h),f.y&&i(r.yaxis,h,h))),s[n+a]=null;else if(k&&n>0&&null!=s[n-c]&&s[n-c]!=s[n]&&s[n-c+1]!=s[n+1]){for(a=0;c>a;++a)s[n+c+a]=s[n+a];s[n+1]=s[n-c+1],n+=c}}}}for(e=0;e<oi.length;++e)r=oi[e],l(mi.processDatapoints,[r,r.datapoints]);for(e=0;e<oi.length;++e){r=oi[e],s=r.datapoints.points,c=r.datapoints.pointsize,m=r.datapoints.format;var w=x,M=x,T=g,C=g;for(o=0;o<s.length;o+=c)if(null!=s[o])for(a=0;c>a;++a)h=s[o+a],f=m[a],f&&f.autoscale!==!1&&h!=b&&h!=-b&&(f.x&&(w>h&&(w=h),h>T&&(T=h)),f.y&&(M>h&&(M=h),h>C&&(C=h)));if(r.bars.show){var S;switch(r.bars.align){case"left":S=0;break;case"right":S=-r.bars.barWidth;break;default:S=-r.bars.barWidth/2}r.bars.horizontal?(M+=S,C+=S+r.bars.barWidth):(w+=S,T+=S+r.bars.barWidth)}i(r.xaxis,w,T),i(r.yaxis,M,C)}t.each(d(),function(t,i){i.datamin==x&&(i.datamin=null),i.datamax==g&&(i.datamax=null)})}function v(){e.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==e.css("position")&&e.css("position","relative"),ai=new i("flot-base",e),ri=new i("flot-overlay",e),si=ai.context,ci=ri.context,li=t(ri.element).unbind();var o=e.data("plot");o&&(o.shutdown(),ri.clear()),e.data("plot",xi)}function k(){ni.grid.hoverable&&(li.mousemove(X),li.bind("mouseleave",Y)),ni.grid.clickable&&li.click(q),l(mi.bindEvents,[li])}function y(){bi&&clearTimeout(bi),li.unbind("mousemove",X),li.unbind("mouseleave",Y),li.unbind("click",q),l(mi.shutdown,[li])}function w(t){function i(t){return t}var e,o,n=t.options.transform||i,a=t.options.inverseTransform;"x"==t.direction?(e=t.scale=di/Math.abs(n(t.max)-n(t.min)),o=Math.min(n(t.max),n(t.min))):(e=t.scale=pi/Math.abs(n(t.max)-n(t.min)),e=-e,o=Math.max(n(t.max),n(t.min))),t.p2c=n==i?function(t){return(t-o)*e}:function(t){return(n(t)-o)*e},t.c2p=a?function(t){return a(o+t/e)}:function(t){return o+t/e}}function M(t){for(var i=t.options,e=t.ticks||[],o=i.labelWidth||0,n=i.labelHeight||0,a=o||("x"==t.direction?Math.floor(ai.width/(e.length||1)):null),r=t.direction+"Axis "+t.direction+t.n+"Axis",l="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+r,s=i.font||"flot-tick-label tickLabel",c=0;c<e.length;++c){var h=e[c];if(h.label){var f=ai.getTextInfo(l,h.label,s,null,a);o=Math.max(o,f.width),n=Math.max(n,f.height)}}t.labelWidth=i.labelWidth||o,t.labelHeight=i.labelHeight||n}function T(i){var e=i.labelWidth,o=i.labelHeight,n=i.options.position,a="x"===i.direction,r=i.options.tickLength,l=ni.grid.axisMargin,s=ni.grid.labelMargin,c=!0,h=!0,f=!0,u=!1;t.each(a?hi:fi,function(t,e){e&&(e.show||e.reserveSpace)&&(e===i?u=!0:e.options.position===n&&(u?h=!1:c=!1),u||(f=!1))}),h&&(l=0),null==r&&(r=f?"full":5),isNaN(+r)||(s+=+r),a?(o+=s,"bottom"==n?(ui.bottom+=o+l,i.box={top:ai.height-ui.bottom,height:o}):(i.box={top:ui.top+l,height:o},ui.top+=o+l)):(e+=s,"left"==n?(i.box={left:ui.left+l,width:e},ui.left+=e+l):(ui.right+=e+l,i.box={left:ai.width-ui.right,width:e})),i.position=n,i.tickLength=r,i.box.padding=s,i.innermost=c}function C(t){"x"==t.direction?(t.box.left=ui.left-t.labelWidth/2,t.box.width=ai.width-ui.left-ui.right+t.labelWidth):(t.box.top=ui.top-t.labelHeight/2,t.box.height=ai.height-ui.bottom-ui.top+t.labelHeight)}function S(){var i,e=ni.grid.minBorderMargin;if(null==e)for(e=0,i=0;i<oi.length;++i)e=Math.max(e,2*(oi[i].points.radius+oi[i].points.lineWidth/2));var o={left:e,right:e,top:e,bottom:e};t.each(d(),function(t,i){i.reserveSpace&&i.ticks&&i.ticks.length&&("x"===i.direction?(o.left=Math.max(o.left,i.labelWidth/2),o.right=Math.max(o.right,i.labelWidth/2)):(o.bottom=Math.max(o.bottom,i.labelHeight/2),o.top=Math.max(o.top,i.labelHeight/2)))}),ui.left=Math.ceil(Math.max(o.left,ui.left)),ui.right=Math.ceil(Math.max(o.right,ui.right)),ui.top=Math.ceil(Math.max(o.top,ui.top)),ui.bottom=Math.ceil(Math.max(o.bottom,ui.bottom))}function W(){var i,e=d(),o=ni.grid.show;for(var n in ui){var a=ni.grid.margin||0;ui[n]="number"==typeof a?a:a[n]||0}l(mi.processOffset,[ui]);for(var n in ui)ui[n]+="object"==typeof ni.grid.borderWidth?o?ni.grid.borderWidth[n]:0:o?ni.grid.borderWidth:0;if(t.each(e,function(t,i){var e=i.options;i.show=null==e.show?i.used:e.show,i.reserveSpace=null==e.reserveSpace?i.show:e.reserveSpace,z(i)}),o){var r=t.grep(e,function(t){return t.show||t.reserveSpace});for(t.each(r,function(t,i){I(i),A(i),F(i,i.ticks),M(i)}),i=r.length-1;i>=0;--i)T(r[i]);S(),t.each(r,function(t,i){C(i)})}di=ai.width-ui.left-ui.right,pi=ai.height-ui.bottom-ui.top,t.each(e,function(t,i){w(i)}),o&&O(),_()}function z(t){var i=t.options,e=+(null!=i.min?i.min:t.datamin),o=+(null!=i.max?i.max:t.datamax),n=o-e;if(0==n){var a=0==o?1:.01;null==i.min&&(e-=a),(null==i.max||null!=i.min)&&(o+=a)}else{var r=i.autoscaleMargin;null!=r&&(null==i.min&&(e-=n*r,0>e&&null!=t.datamin&&t.datamin>=0&&(e=0)),null==i.max&&(o+=n*r,o>0&&null!=t.datamax&&t.datamax<=0&&(o=0)))}t.min=e,t.max=o}function I(i){var e,n=i.options;e="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==i.direction?ai.width:ai.height);var a=(i.max-i.min)/e,r=-Math.floor(Math.log(a)/Math.LN10),l=n.tickDecimals;null!=l&&r>l&&(r=l);var s,c=Math.pow(10,-r),h=a/c;if(1.5>h?s=1:3>h?(s=2,h>2.25&&(null==l||l>=r+1)&&(s=2.5,++r)):s=7.5>h?5:10,s*=c,null!=n.minTickSize&&s<n.minTickSize&&(s=n.minTickSize),i.delta=a,i.tickDecimals=Math.max(0,null!=l?l:r),i.tickSize=n.tickSize||s,"time"==n.mode&&!i.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(i.tickGenerator||(i.tickGenerator=function(t){var i,e=[],n=o(t.min,t.tickSize),a=0,r=Number.NaN;do i=r,r=n+a*t.tickSize,e.push(r),++a;while(r<t.max&&r!=i);return e},i.tickFormatter=function(t,i){var e=i.tickDecimals?Math.pow(10,i.tickDecimals):1,o=""+Math.round(t*e)/e;if(null!=i.tickDecimals){var n=o.indexOf("."),a=-1==n?0:o.length-n-1;if(a<i.tickDecimals)return(a?o:o+".")+(""+e).substr(1,i.tickDecimals-a)}return o}),t.isFunction(n.tickFormatter)&&(i.tickFormatter=function(t,i){return""+n.tickFormatter(t,i)}),null!=n.alignTicksWithAxis){var f=("x"==i.direction?hi:fi)[n.alignTicksWithAxis-1];if(f&&f.used&&f!=i){var u=i.tickGenerator(i);if(u.length>0&&(null==n.min&&(i.min=Math.min(i.min,u[0])),null==n.max&&u.length>1&&(i.max=Math.max(i.max,u[u.length-1]))),i.tickGenerator=function(t){var i,e,o=[];for(e=0;e<f.ticks.length;++e)i=(f.ticks[e].v-f.min)/(f.max-f.min),i=t.min+i*(t.max-t.min),o.push(i);return o},!i.mode&&null==n.tickDecimals){var d=Math.max(0,-Math.floor(Math.log(i.delta)/Math.LN10)+1),p=i.tickGenerator(i);p.length>1&&/\..*0$/.test((p[1]-p[0]).toFixed(d))||(i.tickDecimals=d)}}}}function A(i){var e=i.options.ticks,o=[];null==e||"number"==typeof e&&e>0?o=i.tickGenerator(i):e&&(o=t.isFunction(e)?e(i):e);var n,a;for(i.ticks=[],n=0;n<o.length;++n){var r=null,l=o[n];"object"==typeof l?(a=+l[0],l.length>1&&(r=l[1])):a=+l,null==r&&(r=i.tickFormatter(a,i)),isNaN(a)||i.ticks.push({v:a,label:r})}}function F(t,i){t.options.autoscaleMargin&&i.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,i[0].v)),null==t.options.max&&i.length>1&&(t.max=Math.max(t.max,i[i.length-1].v)))}function P(){ai.clear(),l(mi.drawBackground,[si]);var t=ni.grid;t.show&&t.backgroundColor&&D(),t.show&&!t.aboveData&&L();for(var i=0;i<oi.length;++i)l(mi.drawSeries,[si,oi[i]]),R(oi[i]);l(mi.draw,[si]),t.show&&t.aboveData&&L(),ai.render(),U()}function N(t,i){for(var e,o,n,a,r=d(),l=0;l<r.length;++l)if(e=r[l],e.direction==i&&(a=i+e.n+"axis",t[a]||1!=e.n||(a=i+"axis"),t[a])){o=t[a].from,n=t[a].to;break}if(t[a]||(e="x"==i?hi[0]:fi[0],o=t[i+"1"],n=t[i+"2"]),null!=o&&null!=n&&o>n){var s=o;o=n,n=s}return{from:o,to:n,axis:e}}function D(){si.save(),si.translate(ui.left,ui.top),si.fillStyle=ei(ni.grid.backgroundColor,pi,0,"rgba(255, 255, 255, 0)"),si.fillRect(0,0,di,pi),si.restore()}function L(){var i,e,o,n;si.save(),si.translate(ui.left,ui.top);var a=ni.grid.markings;if(a)for(t.isFunction(a)&&(e=xi.getAxes(),e.xmin=e.xaxis.min,e.xmax=e.xaxis.max,e.ymin=e.yaxis.min,e.ymax=e.yaxis.max,a=a(e)),i=0;i<a.length;++i){var r=a[i],l=N(r,"x"),s=N(r,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||s.to<s.axis.min||s.from>s.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max);var c=l.from===l.to,h=s.from===s.to;if(!c||!h)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),c||h){var f=r.lineWidth||ni.grid.markingsLineWidth,u=f%2?.5:0;si.beginPath(),si.strokeStyle=r.color||ni.grid.markingsColor,si.lineWidth=f,c?(si.moveTo(l.to+u,s.from),si.lineTo(l.to+u,s.to)):(si.moveTo(l.from,s.to+u),si.lineTo(l.to,s.to+u)),si.stroke()}else si.fillStyle=r.color||ni.grid.markingsColor,si.fillRect(l.from,s.to,l.to-l.from,s.from-s.to)}}e=d(),o=ni.grid.borderWidth;for(var p=0;p<e.length;++p){var m,x,g,b,v=e[p],k=v.box,y=v.tickLength;if(v.show&&0!=v.ticks.length){for(si.lineWidth=1,"x"==v.direction?(m=0,x="full"==y?"top"==v.position?0:pi:k.top-ui.top+("top"==v.position?k.height:0)):(x=0,m="full"==y?"left"==v.position?0:di:k.left-ui.left+("left"==v.position?k.width:0)),v.innermost||(si.strokeStyle=v.options.color,si.beginPath(),g=b=0,"x"==v.direction?g=di+1:b=pi+1,1==si.lineWidth&&("x"==v.direction?x=Math.floor(x)+.5:m=Math.floor(m)+.5),si.moveTo(m,x),si.lineTo(m+g,x+b),si.stroke()),si.strokeStyle=v.options.tickColor,si.beginPath(),i=0;i<v.ticks.length;++i){var w=v.ticks[i].v;g=b=0,isNaN(w)||w<v.min||w>v.max||"full"==y&&("object"==typeof o&&o[v.position]>0||o>0)&&(w==v.min||w==v.max)||("x"==v.direction?(m=v.p2c(w),b="full"==y?-pi:y,"top"==v.position&&(b=-b)):(x=v.p2c(w),g="full"==y?-di:y,"left"==v.position&&(g=-g)),1==si.lineWidth&&("x"==v.direction?m=Math.floor(m)+.5:x=Math.floor(x)+.5),si.moveTo(m,x),si.lineTo(m+g,x+b))}si.stroke()}}o&&(n=ni.grid.borderColor,"object"==typeof o||"object"==typeof n?("object"!=typeof o&&(o={top:o,right:o,bottom:o,left:o}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),o.top>0&&(si.strokeStyle=n.top,si.lineWidth=o.top,si.beginPath(),si.moveTo(0-o.left,0-o.top/2),si.lineTo(di,0-o.top/2),si.stroke()),o.right>0&&(si.strokeStyle=n.right,si.lineWidth=o.right,si.beginPath(),si.moveTo(di+o.right/2,0-o.top),si.lineTo(di+o.right/2,pi),si.stroke()),o.bottom>0&&(si.strokeStyle=n.bottom,si.lineWidth=o.bottom,si.beginPath(),si.moveTo(di+o.right,pi+o.bottom/2),si.lineTo(0,pi+o.bottom/2),si.stroke()),o.left>0&&(si.strokeStyle=n.left,si.lineWidth=o.left,si.beginPath(),si.moveTo(0-o.left/2,pi+o.bottom),si.lineTo(0-o.left/2,0),si.stroke())):(si.lineWidth=o,si.strokeStyle=ni.grid.borderColor,si.strokeRect(-o/2,-o/2,di+o,pi+o))),si.restore()}function O(){t.each(d(),function(t,i){var e,o,n,a,r,l=i.box,s=i.direction+"Axis "+i.direction+i.n+"Axis",c="flot-"+i.direction+"-axis flot-"+i.direction+i.n+"-axis "+s,h=i.options.font||"flot-tick-label tickLabel";if(ai.removeText(c),i.show&&0!=i.ticks.length)for(var f=0;f<i.ticks.length;++f)e=i.ticks[f],!e.label||e.v<i.min||e.v>i.max||("x"==i.direction?(a="center",o=ui.left+i.p2c(e.v),"bottom"==i.position?n=l.top+l.padding:(n=l.top+l.height-l.padding,r="bottom")):(r="middle",n=ui.top+i.p2c(e.v),"left"==i.position?(o=l.left+l.width-l.padding,a="right"):o=l.left+l.padding),ai.addText(c,o,n,e.label,h,null,null,a,r))})}function R(t){t.lines.show&&H(t),t.bars.show&&B(t),t.points.show&&j(t)}function H(t){function i(t,i,e,o,n){var a=t.points,r=t.pointsize,l=null,s=null;si.beginPath();for(var c=r;c<a.length;c+=r){var h=a[c-r],f=a[c-r+1],u=a[c],d=a[c+1];if(null!=h&&null!=u){if(d>=f&&f<n.min){if(d<n.min)continue;h=(n.min-f)/(d-f)*(u-h)+h,f=n.min}else if(f>=d&&d<n.min){if(f<n.min)continue;u=(n.min-f)/(d-f)*(u-h)+h,d=n.min}if(f>=d&&f>n.max){if(d>n.max)continue;h=(n.max-f)/(d-f)*(u-h)+h,f=n.max}else if(d>=f&&d>n.max){if(f>n.max)continue;u=(n.max-f)/(d-f)*(u-h)+h,d=n.max}if(u>=h&&h<o.min){if(u<o.min)continue;f=(o.min-h)/(u-h)*(d-f)+f,h=o.min}else if(h>=u&&u<o.min){if(h<o.min)continue;d=(o.min-h)/(u-h)*(d-f)+f,u=o.min}if(h>=u&&h>o.max){if(u>o.max)continue;f=(o.max-h)/(u-h)*(d-f)+f,h=o.max}else if(u>=h&&u>o.max){if(h>o.max)continue;d=(o.max-h)/(u-h)*(d-f)+f,u=o.max}(h!=l||f!=s)&&si.moveTo(o.p2c(h)+i,n.p2c(f)+e),l=u,s=d,si.lineTo(o.p2c(u)+i,n.p2c(d)+e)}}si.stroke()}function e(t,i,e){for(var o=t.points,n=t.pointsize,a=Math.min(Math.max(0,e.min),e.max),r=0,l=!1,s=1,c=0,h=0;;){if(n>0&&r>o.length+n)break;r+=n;var f=o[r-n],u=o[r-n+s],d=o[r],p=o[r+s];if(l){if(n>0&&null!=f&&null==d){h=r,n=-n,s=2;continue}if(0>n&&r==c+n){si.fill(),l=!1,n=-n,s=1,r=c=h+n;continue}}if(null!=f&&null!=d){if(d>=f&&f<i.min){if(d<i.min)continue;u=(i.min-f)/(d-f)*(p-u)+u,f=i.min}else if(f>=d&&d<i.min){if(f<i.min)continue;p=(i.min-f)/(d-f)*(p-u)+u,d=i.min}if(f>=d&&f>i.max){if(d>i.max)continue;u=(i.max-f)/(d-f)*(p-u)+u,f=i.max}else if(d>=f&&d>i.max){if(f>i.max)continue;p=(i.max-f)/(d-f)*(p-u)+u,d=i.max}if(l||(si.beginPath(),si.moveTo(i.p2c(f),e.p2c(a)),l=!0),u>=e.max&&p>=e.max)si.lineTo(i.p2c(f),e.p2c(e.max)),si.lineTo(i.p2c(d),e.p2c(e.max));else if(u<=e.min&&p<=e.min)si.lineTo(i.p2c(f),e.p2c(e.min)),si.lineTo(i.p2c(d),e.p2c(e.min));else{var m=f,x=d;p>=u&&u<e.min&&p>=e.min?(f=(e.min-u)/(p-u)*(d-f)+f,u=e.min):u>=p&&p<e.min&&u>=e.min&&(d=(e.min-u)/(p-u)*(d-f)+f,p=e.min),u>=p&&u>e.max&&p<=e.max?(f=(e.max-u)/(p-u)*(d-f)+f,u=e.max):p>=u&&p>e.max&&u<=e.max&&(d=(e.max-u)/(p-u)*(d-f)+f,p=e.max),f!=m&&si.lineTo(i.p2c(m),e.p2c(u)),si.lineTo(i.p2c(f),e.p2c(u)),si.lineTo(i.p2c(d),e.p2c(p)),d!=x&&(si.lineTo(i.p2c(d),e.p2c(p)),si.lineTo(i.p2c(x),e.p2c(p)))}}}}si.save(),si.translate(ui.left,ui.top),si.lineJoin="round";var o=t.lines.lineWidth,n=t.shadowSize;if(o>0&&n>0){si.lineWidth=n,si.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;i(t.datapoints,Math.sin(a)*(o/2+n/2),Math.cos(a)*(o/2+n/2),t.xaxis,t.yaxis),si.lineWidth=n/2,i(t.datapoints,Math.sin(a)*(o/2+n/4),Math.cos(a)*(o/2+n/4),t.xaxis,t.yaxis)}si.lineWidth=o,si.strokeStyle=t.color;var r=G(t.lines,t.color,0,pi);r&&(si.fillStyle=r,e(t.datapoints,t.xaxis,t.yaxis)),o>0&&i(t.datapoints,0,0,t.xaxis,t.yaxis),si.restore()}function j(t){function i(t,i,e,o,n,a,r,l){for(var s=t.points,c=t.pointsize,h=0;h<s.length;h+=c){var f=s[h],u=s[h+1];null==f||f<a.min||f>a.max||u<r.min||u>r.max||(si.beginPath(),f=a.p2c(f),u=r.p2c(u)+o,"circle"==l?si.arc(f,u,i,0,n?Math.PI:2*Math.PI,!1):l(si,f,u,i,n),si.closePath(),e&&(si.fillStyle=e,si.fill()),si.stroke())}}si.save(),si.translate(ui.left,ui.top);var e=t.points.lineWidth,o=t.shadowSize,n=t.points.radius,a=t.points.symbol;if(0==e&&(e=1e-4),e>0&&o>0){var r=o/2;si.lineWidth=r,si.strokeStyle="rgba(0,0,0,0.1)",i(t.datapoints,n,null,r+r/2,!0,t.xaxis,t.yaxis,a),si.strokeStyle="rgba(0,0,0,0.2)",i(t.datapoints,n,null,r/2,!0,t.xaxis,t.yaxis,a)}si.lineWidth=e,si.strokeStyle=t.color,i(t.datapoints,n,G(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),si.restore()}function E(t,i,e,o,n,a,r,l,s,c,h){var f,u,d,p,m,x,g,b,v;c?(b=x=g=!0,m=!1,f=e,u=t,p=i+o,d=i+n,f>u&&(v=u,u=f,f=v,m=!0,x=!1)):(m=x=g=!0,b=!1,f=t+o,u=t+n,d=e,p=i,d>p&&(v=p,p=d,d=v,b=!0,g=!1)),u<r.min||f>r.max||p<l.min||d>l.max||(f<r.min&&(f=r.min,m=!1),u>r.max&&(u=r.max,x=!1),d<l.min&&(d=l.min,b=!1),p>l.max&&(p=l.max,g=!1),f=r.p2c(f),d=l.p2c(d),u=r.p2c(u),p=l.p2c(p),a&&(s.fillStyle=a(d,p),s.fillRect(f,p,u-f,d-p)),h>0&&(m||x||g||b)&&(s.beginPath(),s.moveTo(f,d),m?s.lineTo(f,p):s.moveTo(f,p),g?s.lineTo(u,p):s.moveTo(u,p),x?s.lineTo(u,d):s.moveTo(u,d),b?s.lineTo(f,d):s.moveTo(f,d),s.stroke()))}function B(t){function i(i,e,o,n,a,r){for(var l=i.points,s=i.pointsize,c=0;c<l.length;c+=s)null!=l[c]&&E(l[c],l[c+1],l[c+2],e,o,n,a,r,si,t.bars.horizontal,t.bars.lineWidth)}si.save(),si.translate(ui.left,ui.top),si.lineWidth=t.bars.lineWidth,si.strokeStyle=t.color;var e;switch(t.bars.align){case"left":e=0;break;case"right":e=-t.bars.barWidth;break;default:e=-t.bars.barWidth/2}var o=t.bars.fill?function(i,e){return G(t.bars,t.color,i,e)}:null;i(t.datapoints,e,e+t.bars.barWidth,o,t.xaxis,t.yaxis),si.restore()}function G(i,e,o,n){var a=i.fill;if(!a)return null;if(i.fillColor)return ei(i.fillColor,o,n,e);var r=t.color.parse(e);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function _(){if(null!=ni.legend.container?t(ni.legend.container).html(""):e.find(".legend").remove(),ni.legend.show){for(var i,o,n=[],a=[],r=!1,l=ni.legend.labelFormatter,s=0;s<oi.length;++s)i=oi[s],i.label&&(o=l?l(i.label,i):i.label,o&&a.push({label:o,color:i.color}));if(ni.legend.sorted)if(t.isFunction(ni.legend.sorted))a.sort(ni.legend.sorted);else if("reverse"==ni.legend.sorted)a.reverse();else{var c="descending"!=ni.legend.sorted;a.sort(function(t,i){return t.label==i.label?0:t.label<i.label!=c?1:-1})}for(var s=0;s<a.length;++s){var h=a[s];s%ni.legend.noColumns==0&&(r&&n.push("</tr>"),n.push("<tr>"),r=!0),n.push('<td class="legendColorBox"><div style="border:1px solid '+ni.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h.label+"</td>")}if(r&&n.push("</tr>"),0!=n.length){var f='<table style="font-size:smaller;color:'+ni.grid.color+'">'+n.join("")+"</table>";if(null!=ni.legend.container)t(ni.legend.container).html(f);else{var u="",d=ni.legend.position,p=ni.legend.margin;null==p[0]&&(p=[p,p]),"n"==d.charAt(0)?u+="top:"+(p[1]+ui.top)+"px;":"s"==d.charAt(0)&&(u+="bottom:"+(p[1]+ui.bottom)+"px;"),"e"==d.charAt(1)?u+="right:"+(p[0]+ui.right)+"px;":"w"==d.charAt(1)&&(u+="left:"+(p[0]+ui.left)+"px;");var m=t('<div class="legend">'+f.replace('style="','style="position:absolute;'+u+";")+"</div>").appendTo(e);if(0!=ni.legend.backgroundOpacity){var x=ni.legend.backgroundColor;null==x&&(x=ni.grid.backgroundColor,x=x&&"string"==typeof x?t.color.parse(x):t.color.extract(m,"background-color"),x.a=1,x=x.toString());var g=m.children();t('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+u+"background-color:"+x+';"> </div>').prependTo(m).css("opacity",ni.legend.backgroundOpacity)}}}}}function V(t,i,e){var o,n,a,r=ni.grid.mouseActiveRadius,l=r*r+1,s=null;for(o=oi.length-1;o>=0;--o)if(e(oi[o])){var c=oi[o],h=c.xaxis,f=c.yaxis,u=c.datapoints.points,d=h.c2p(t),p=f.c2p(i),m=r/h.scale,x=r/f.scale;if(a=c.datapoints.pointsize,h.options.inverseTransform&&(m=Number.MAX_VALUE),f.options.inverseTransform&&(x=Number.MAX_VALUE),c.lines.show||c.points.show)for(n=0;n<u.length;n+=a){var g=u[n],b=u[n+1];if(null!=g&&!(g-d>m||-m>g-d||b-p>x||-x>b-p)){var v=Math.abs(h.p2c(g)-t),k=Math.abs(f.p2c(b)-i),y=v*v+k*k;l>y&&(l=y,s=[o,n/a])}}if(c.bars.show&&!s){var w,M;switch(c.bars.align){case"left":w=0;break;case"right":w=-c.bars.barWidth;break;default:w=-c.bars.barWidth/2}for(M=w+c.bars.barWidth,n=0;n<u.length;n+=a){var g=u[n],b=u[n+1],T=u[n+2];null!=g&&(oi[o].bars.horizontal?d<=Math.max(T,g)&&d>=Math.min(T,g)&&p>=b+w&&b+M>=p:d>=g+w&&g+M>=d&&p>=Math.min(T,b)&&p<=Math.max(T,b))&&(s=[o,n/a])}}}return s?(o=s[0],n=s[1],a=oi[o].datapoints.pointsize,{datapoint:oi[o].datapoints.points.slice(n*a,(n+1)*a),dataIndex:n,series:oi[o],seriesIndex:o}):null}function X(t){ni.grid.hoverable&&Q("plothover",t,function(t){return 0!=t.hoverable})}function Y(t){ni.grid.hoverable&&Q("plothover",t,function(){return!1})}function q(t){Q("plotclick",t,function(t){return 0!=t.clickable})}function Q(t,i,o){var n=li.offset(),a=i.pageX-n.left-ui.left,r=i.pageY-n.top-ui.top,l=p({left:a,top:r});l.pageX=i.pageX,l.pageY=i.pageY;var s=V(a,r,o);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+n.left+ui.left,10),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+n.top+ui.top,10)),ni.grid.autoHighlight){for(var c=0;c<gi.length;++c){var h=gi[c];h.auto!=t||s&&h.series==s.series&&h.point[0]==s.datapoint[0]&&h.point[1]==s.datapoint[1]||K(h.series,h.point)}s&&$(s.series,s.datapoint,t)}e.trigger(t,[l,s])}function U(){var t=ni.interaction.redrawOverlayInterval;return-1==t?void J():void(bi||(bi=setTimeout(J,t)))}function J(){bi=null,ci.save(),ri.clear(),ci.translate(ui.left,ui.top);var t,i;for(t=0;t<gi.length;++t)i=gi[t],i.series.bars.show?ii(i.series,i.point):ti(i.series,i.point);ci.restore(),l(mi.drawOverlay,[ci])}function $(t,i,e){if("number"==typeof t&&(t=oi[t]),"number"==typeof i){var o=t.datapoints.pointsize;i=t.datapoints.points.slice(o*i,o*(i+1))}var n=Z(t,i);-1==n?(gi.push({series:t,point:i,auto:e}),U()):e||(gi[n].auto=!1)}function K(t,i){if(null==t&&null==i)return gi=[],void U();if("number"==typeof t&&(t=oi[t]),"number"==typeof i){var e=t.datapoints.pointsize;i=t.datapoints.points.slice(e*i,e*(i+1))}var o=Z(t,i);-1!=o&&(gi.splice(o,1),U())}function Z(t,i){for(var e=0;e<gi.length;++e){var o=gi[e];if(o.series==t&&o.point[0]==i[0]&&o.point[1]==i[1])return e}return-1}function ti(i,e){var o=e[0],n=e[1],a=i.xaxis,r=i.yaxis,l="string"==typeof i.highlightColor?i.highlightColor:t.color.parse(i.color).scale("a",.5).toString();if(!(o<a.min||o>a.max||n<r.min||n>r.max)){var s=i.points.radius+i.points.lineWidth/2;ci.lineWidth=s,ci.strokeStyle=l;var c=1.5*s;o=a.p2c(o),n=r.p2c(n),ci.beginPath(),"circle"==i.points.symbol?ci.arc(o,n,c,0,2*Math.PI,!1):i.points.symbol(ci,o,n,c,!1),ci.closePath(),ci.stroke()}}function ii(i,e){var o,n="string"==typeof i.highlightColor?i.highlightColor:t.color.parse(i.color).scale("a",.5).toString(),a=n;switch(i.bars.align){case"left":o=0;break;case"right":o=-i.bars.barWidth;break;default:o=-i.bars.barWidth/2}ci.lineWidth=i.bars.lineWidth,ci.strokeStyle=n,E(e[0],e[1],e[2]||0,o,o+i.bars.barWidth,function(){return a},i.xaxis,i.yaxis,ci,i.bars.horizontal,i.bars.lineWidth)}function ei(i,e,o,n){if("string"==typeof i)return i;for(var a=si.createLinearGradient(0,o,0,e),r=0,l=i.colors.length;l>r;++r){var s=i.colors[r];if("string"!=typeof s){var c=t.color.parse(n);null!=s.brightness&&(c=c.scale("rgb",s.brightness)),null!=s.opacity&&(c.a*=s.opacity),s=c.toString()}a.addColorStop(r/(l-1),s)}return a}var oi=[],ni={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},ai=null,ri=null,li=null,si=null,ci=null,hi=[],fi=[],ui={left:0,right:0,top:0,bottom:0},di=0,pi=0,mi={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},xi=this;
xi.setData=h,xi.setupGrid=W,xi.draw=P,xi.getPlaceholder=function(){return e},xi.getCanvas=function(){return ai.element},xi.getPlotOffset=function(){return ui},xi.width=function(){return di},xi.height=function(){return pi},xi.offset=function(){var t=li.offset();return t.left+=ui.left,t.top+=ui.top,t},xi.getData=function(){return oi},xi.getAxes=function(){var i={};return t.each(hi.concat(fi),function(t,e){e&&(i[e.direction+(1!=e.n?e.n:"")+"axis"]=e)}),i},xi.getXAxes=function(){return hi},xi.getYAxes=function(){return fi},xi.c2p=p,xi.p2c=m,xi.getOptions=function(){return ni},xi.highlight=$,xi.unhighlight=K,xi.triggerRedrawOverlay=U,xi.pointOffset=function(t){return{left:parseInt(hi[u(t,"x")-1].p2c(+t.x)+ui.left,10),top:parseInt(fi[u(t,"y")-1].p2c(+t.y)+ui.top,10)}},xi.shutdown=y,xi.destroy=function(){y(),e.removeData("plot").empty(),oi=[],ni=null,ai=null,ri=null,li=null,si=null,ci=null,hi=[],fi=[],mi=null,gi=[],xi=null},xi.resize=function(){var t=e.width(),i=e.height();ai.resize(t,i),ri.resize(t,i)},xi.hooks=mi,s(xi),c(a),v(),h(n),W(),P(),k();var gi=[],bi=null}function o(t,i){return i*Math.floor(t/i)}var n=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),i.prototype.resize=function(t,i){if(0>=t||0>=i)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+i);var e=this.element,o=this.context,n=this.pixelRatio;this.width!=t&&(e.width=t*n,e.style.width=t+"px",this.width=t),this.height!=i&&(e.height=i*n,e.style.height=i+"px",this.height=i),o.restore(),o.save(),o.scale(n,n)},i.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},i.prototype.render=function(){var t=this._textCache;for(var i in t)if(n.call(t,i)){var e=this.getTextLayer(i),o=t[i];e.hide();for(var a in o)if(n.call(o,a)){var r=o[a];for(var l in r)if(n.call(r,l)){for(var s,c=r[l].positions,h=0;s=c[h];h++)s.active?s.rendered||(e.append(s.element),s.rendered=!0):(c.splice(h--,1),s.rendered&&s.element.detach());0==c.length&&delete r[l]}}e.show()}},i.prototype.getTextLayer=function(i){var e=this.text[i];return null==e&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),e=this.text[i]=t("<div></div>").addClass(i).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),e},i.prototype.getTextInfo=function(i,e,o,n,a){var r,l,s,c;if(e=""+e,r="object"==typeof o?o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:o,l=this._textCache[i],null==l&&(l=this._textCache[i]={}),s=l[r],null==s&&(s=l[r]={}),c=s[e],null==c){var h=t("<div></div>").html(e).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(i));"object"==typeof o?h.css({font:r,color:o.color}):"string"==typeof o&&h.addClass(o),c=s[e]={width:h.outerWidth(!0),height:h.outerHeight(!0),element:h,positions:[]},h.detach()}return c},i.prototype.addText=function(t,i,e,o,n,a,r,l,s){var c=this.getTextInfo(t,o,n,a,r),h=c.positions;"center"==l?i-=c.width/2:"right"==l&&(i-=c.width),"middle"==s?e-=c.height/2:"bottom"==s&&(e-=c.height);for(var f,u=0;f=h[u];u++)if(f.x==i&&f.y==e)return void(f.active=!0);f={active:!0,rendered:!1,element:h.length?c.element.clone():c.element,x:i,y:e},h.push(f),f.element.css({top:Math.round(e),left:Math.round(i),"text-align":l})},i.prototype.removeText=function(t,i,e,o,a,r){if(null==o){var l=this._textCache[t];if(null!=l)for(var s in l)if(n.call(l,s)){var c=l[s];for(var h in c)if(n.call(c,h))for(var f,u=c[h].positions,d=0;f=u[d];d++)f.active=!1}}else for(var f,u=this.getTextInfo(t,o,a,r).positions,d=0;f=u[d];d++)f.x==i&&f.y==e&&(f.active=!1)},t.plot=function(i,o,n){var a=new e(t(i),o,n,t.plot.plugins);return a},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(i,e){return this.each(function(){t.plot(this,i,e)})}}(jQuery);
/*
* Flot plugin to order bars side by side. This is improved version of Benjamin BUFFET work
* originally from http://en.benjaminbuffet.com/labs/flot/.
*
* Released under the MIT license by Przemyslaw Koltermann, 12-Feb-2013.
*
* This plugin is an alpha version.
*
* To activate the plugin you must specify the parameter "order" for the specific serie :
*
*  $.plot($("#placeholder"), [{ data: [ ... ], bars :{ order = null or integer }])
*
* If 2 series have the same order param, they are displayed in the same position;
*
* The plugin adjust the point by adding a value depanding of the barwidth
* Exemple for 3 series (barwidth : 0.1) :
*
*          first bar dcalage : -0.15
*          second bar dcalage : -0.05
*          third bar dcalage : 0.05
*
*/
!function(r){function e(r){function e(r,e,t){var i=null;if(a(e))if(d(e),n(r),s(r),l(e),p>=2){var o=f(e),u=0,h=b();u=c(o)?-1*v(g,o-1,Math.floor(p/2)-1)-h:v(g,Math.ceil(p/2),o-2)+h+2*m,i=y(t,e,u),t.points=i}else if(1==p){var h=-1*b();i=y(t,e,h),t.points=i}return i}function a(r){return null!=r.bars&&r.bars.show&&null!=r.bars.order}function n(r){var e=W?r.getPlaceholder().innerHeight():r.getPlaceholder().innerWidth(),a=W?t(r.getData(),1):t(r.getData(),0),n=a[1]-a[0];S=n/e}function t(r,e){for(var a=new Array,n=0;n<r.length;n++)a[0]=r[n].data[0][e],a[1]=r[n].data[r[n].data.length-1][e];return"string"==typeof a[0]&&(a[0]=0,a[1]=r[0].data.length-1),a}function s(r){g=i(r.getData()),p=g.length}function i(r){for(var e=new Array,a=0;a<r.length;a++)null!=r[a].bars.order&&r[a].bars.show&&e.push(r[a]);return o(e)}function o(r){var e=r.length;do{for(var a=0;e-1>a;a++)if(r[a].bars.order>r[a+1].bars.order){var n=r[a];r[a]=r[a+1],r[a+1]=n}else if(r[a].bars.order==r[a+1].bars.order){var t;r[a].sameSeriesArrayIndex?void 0!==r[a+1].sameSeriesArrayIndex&&(t=r[a].sameSeriesArrayIndex,r[a+1].sameSeriesArrayIndex=t,I[t].push(r[a+1]),I[t].sort(u),r[a]=I[t][0],h(r,a+1)):r[a+1].sameSeriesArrayIndex?void 0!==r[a].sameSeriesArrayIndex&&(t=r[a+1].sameSeriesArrayIndex,r[a].sameSeriesArrayIndex=t,I[t].push(r[a]),I[t].sort(u),r[a]=I[t][0],h(r,a+1)):(t=I.length,I[t]=new Array,r[a].sameSeriesArrayIndex=t,r[a+1].sameSeriesArrayIndex=t,I[t].push(r[a]),I[t].push(r[a+1]),I[t].sort(u),r[a]=I[t][0],h(r,a+1)),a--,e--}e-=1}while(e>1);for(var a=0;a<r.length;a++)r[a].sameSeriesArrayIndex&&(x[r[a].sameSeriesArrayIndex]=a);return r}function u(r,e){var a=r.bars.barWidth?r.bars.barWidth:1,n=e.bars.barWidth?e.bars.barWidth:1;return n>a?-1:a>n?1:0}function h(r,e,a){var n=r.slice((a||e)+1||r.length);return r.length=0>e?r.length+e:e,r.push.apply(r,n),r}function l(r){A="number"==typeof r.bars.lineWidth?r.bars.lineWidth:2,m=A*S}function d(r){r.bars.horizontal&&(W=!0)}function f(r){var e=0;if(r.sameSeriesArrayIndex)e=x[r.sameSeriesArrayIndex];else for(var a=0;a<g.length;++a)if(r==g[a]){e=a;break}return e+1}function b(){var r=0;return p%2!=0&&(r=g[Math.floor(p/2)].bars.barWidth/2),r}function c(r){return r<=Math.ceil(p/2)}function v(r,e,a){for(var n=0,t=e;a>=t;t++)n+=r[t].bars.barWidth+2*m;return n}function y(r,e,a){for(var n=r.pointsize,t=r.points,s=0,i=W?1:0;i<t.length;i+=n)t[i]+=a,e.data[s][3]=t[i],s++;return t}var g,p,A,m,x=new Array,I=new Array,S=1,W=!1;r.hooks.processDatapoints.push(e)}var a={series:{bars:{order:null}}};r.plot.plugins.push({init:e,options:a,name:"orderBars",version:"0.2"})}(jQuery);
/* Pretty handling of time axes.

Copyright (c) 2007-2014 IOLA and Ole Laursen.
Licensed under the MIT license.

Set axis.mode to "time" to enable. See the section "Time series data" in
API.txt for details.

*/
!function(e){function t(e,t){return t*Math.floor(e/t)}function n(e,t,n,r){if("function"==typeof e.strftime)return e.strftime(t);var a=function(e,t){return e=""+e,t=""+(null==t?"0":t),1==e.length?t+e:e},i=[],o=!1,s=e.getHours(),u=12>s;null==n&&(n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==r&&(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var m;m=s>12?s-12:0==s?12:s;for(var c=0;c<t.length;++c){var l=t.charAt(c);if(o){switch(l){case"a":l=""+r[e.getDay()];break;case"b":l=""+n[e.getMonth()];break;case"d":l=a(e.getDate());break;case"e":l=a(e.getDate()," ");break;case"h":case"H":l=a(s);break;case"I":l=a(m);break;case"l":l=a(m," ");break;case"m":l=a(e.getMonth()+1);break;case"M":l=a(e.getMinutes());break;case"q":l=""+(Math.floor(e.getMonth()/3)+1);break;case"S":l=a(e.getSeconds());break;case"y":l=a(e.getFullYear()%100);break;case"Y":l=""+e.getFullYear();break;case"p":l=u?"am":"pm";break;case"P":l=u?"AM":"PM";break;case"w":l=""+e.getDay()}i.push(l),o=!1}else"%"==l?o=!0:i.push(l)}return i.join("")}function r(e){function t(e,t,n,r){e[t]=function(){return n[r].apply(n,arguments)}}var n={date:e};void 0!=e.strftime&&t(n,"strftime",e,"strftime"),t(n,"getTime",e,"getTime"),t(n,"setTime",e,"setTime");for(var r=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],a=0;a<r.length;a++)t(n,"get"+r[a],e,"getUTC"+r[a]),t(n,"set"+r[a],e,"setUTC"+r[a]);return n}function a(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var n=new timezoneJS.Date;return n.setTimezone(t.timezone),n.setTime(e),n}return r(new Date(e))}return r(new Date(e))}function i(r){r.hooks.processOptions.push(function(r){e.each(r.getAxes(),function(e,r){var i=r.options;"time"==i.mode&&(r.tickGenerator=function(e){var n=[],r=a(e.min,i),o=0,u=i.tickSize&&"quarter"===i.tickSize[1]||i.minTickSize&&"quarter"===i.minTickSize[1]?c:m;null!=i.minTickSize&&(o="number"==typeof i.tickSize?i.tickSize:i.minTickSize[0]*s[i.minTickSize[1]]);for(var l=0;l<u.length-1&&!(e.delta<(u[l][0]*s[u[l][1]]+u[l+1][0]*s[u[l+1][1]])/2&&u[l][0]*s[u[l][1]]>=o);++l);var h=u[l][0],f=u[l][1];if("year"==f){if(null!=i.minTickSize&&"year"==i.minTickSize[1])h=Math.floor(i.minTickSize[0]);else{var k=Math.pow(10,Math.floor(Math.log(e.delta/s.year)/Math.LN10)),d=e.delta/s.year/k;h=1.5>d?1:3>d?2:7.5>d?5:10,h*=k}1>h&&(h=1)}e.tickSize=i.tickSize||[h,f];var g=e.tickSize[0];f=e.tickSize[1];var M=g*s[f];"second"==f?r.setSeconds(t(r.getSeconds(),g)):"minute"==f?r.setMinutes(t(r.getMinutes(),g)):"hour"==f?r.setHours(t(r.getHours(),g)):"month"==f?r.setMonth(t(r.getMonth(),g)):"quarter"==f?r.setMonth(3*t(r.getMonth()/3,g)):"year"==f&&r.setFullYear(t(r.getFullYear(),g)),r.setMilliseconds(0),M>=s.minute&&r.setSeconds(0),M>=s.hour&&r.setMinutes(0),M>=s.day&&r.setHours(0),M>=4*s.day&&r.setDate(1),M>=2*s.month&&r.setMonth(t(r.getMonth(),3)),M>=2*s.quarter&&r.setMonth(t(r.getMonth(),6)),M>=s.year&&r.setMonth(0);var y,S=0,z=Number.NaN;do if(y=z,z=r.getTime(),n.push(z),"month"==f||"quarter"==f)if(1>g){r.setDate(1);var p=r.getTime();r.setMonth(r.getMonth()+("quarter"==f?3:1));var v=r.getTime();r.setTime(z+S*s.hour+(v-p)*g),S=r.getHours(),r.setHours(0)}else r.setMonth(r.getMonth()+g*("quarter"==f?3:1));else"year"==f?r.setFullYear(r.getFullYear()+g):r.setTime(z+M);while(z<e.max&&z!=y);return n},r.tickFormatter=function(e,t){var r=a(e,t.options);if(null!=i.timeformat)return n(r,i.timeformat,i.monthNames,i.dayNames);var o,u=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],m=t.tickSize[0]*s[t.tickSize[1]],c=t.max-t.min,l=i.twelveHourClock?" %p":"",h=i.twelveHourClock?"%I":"%H";o=m<s.minute?h+":%M:%S"+l:m<s.day?c<2*s.day?h+":%M"+l:"%b %d "+h+":%M"+l:m<s.month?"%b %d":u&&m<s.quarter||!u&&m<s.year?c<s.year?"%b":"%b %Y":u&&m<s.year?c<s.year?"Q%q":"Q%q %Y":"%Y";var f=n(r,o,i.monthNames,i.dayNames);return f})})})}var o={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},s={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},u=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],m=u.concat([[3,"month"],[6,"month"],[1,"year"]]),c=u.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:i,options:o,name:"time",version:"1.0"}),e.plot.formatDate=n,e.plot.dateGenerator=a}(jQuery);

// AjaxQ jQuery Plugin
// Copyright (c) 2012 Foliotek Inc.
// MIT License
// https://github.com/Foliotek/ajaxq
!function(e){var n={},t={};e.ajaxq=function(r,a){function i(e){if(n[r])n[r].push(e);else{n[r]=[];var a=e();t[r]=a}}function u(){if(n[r]){var e=n[r].shift();if(e){var a=e();t[r]=a}else delete n[r],delete t[r]}}if("undefined"==typeof a)throw"AjaxQ: queue name is not provided";var o=e.Deferred(),f=o.promise();f.success=f.done,f.error=f.fail,f.complete=f.always;var s=e.extend(!0,{},a);return i(function(){var n=e.ajax.apply(window,[s]);n.retry(s.retry);return n.done(function(){o.resolve.apply(this,arguments)}),n.fail(function(){o.reject.apply(this,arguments)}),n.always(u),n}),f},e.each(["getq","postq"],function(n,t){e[t]=function(n,r,a,i,u){return e.isFunction(a)&&(u=u||i,i=a,a=void 0),e.ajaxq(n,{type:"postq"===t?"post":"get",url:r,data:a,success:i,dataType:u})}});var r=function(e){return n.hasOwnProperty(e)},a=function(){for(var e in n)if(r(e))return!0;return!1};e.ajaxq.isRunning=function(e){return e?r(e):a()},e.ajaxq.getActiveRequest=function(e){if(!e)throw"AjaxQ: queue name is required";return t[e]},e.ajaxq.abort=function(r){if(!r)throw"AjaxQ: queue name is required";var a=e.ajaxq.getActiveRequest(r);delete n[r],delete t[r],a&&a.abort()},e.ajaxq.clear=function(e){if(e)n[e]&&(n[e]=[]);else for(var t in n)n.hasOwnProperty(t)&&(n[t]=[])}}(jQuery);
/*
 (c) 2011-2014, Vladimir Agafonkin
 SunCalc is a JavaScript library for calculating sun/moon position and light phases.
 https://github.com/mourner/suncalc
*/
!function(){"use strict";function n(n){return n.valueOf()/I-.5+S}function t(n){return new Date((n+.5-S)*I)}function e(t){return n(t)-T}function r(n,t){return b(P(n)*p(k)-D(t)*P(k),p(n))}function a(n,t){return y(P(t)*p(k)+p(t)*P(k)*P(n))}function u(n,t,e){return b(P(n),p(n)*P(t)-D(e)*p(t))}function i(n,t,e){return y(P(t)*P(e)+p(t)*p(e)*p(n))}function o(n,t){return H*(280.16+360.9856235*n)-t}function c(n){return H*(357.5291+.98560028*n)}function s(n){var t=H*(1.9148*P(n)+.02*P(2*n)+3e-4*P(3*n)),e=102.9372*H;return n+t+e+w}function d(n){var t=c(n),e=s(t);return{dec:a(e,0),ra:r(e,0)}}function f(n,t){return Math.round(n-q-t/(2*w))}function l(n,t,e){return q+(n+t)/(2*w)+e}function M(n,t,e){return T+n+.0053*P(t)-.0069*P(2*e)}function h(n,t,e){return E((P(n)-P(t)*P(e))/(p(t)*p(e)))}function v(n,t,e,r,a,u,i){var o=h(n,e,r),c=l(o,t,a);return M(c,u,i)}function g(n){var t=H*(218.316+13.176396*n),e=H*(134.963+13.064993*n),u=H*(93.272+13.22935*n),i=t+6.289*H*P(e),o=5.128*H*P(u),c=385001-20905*p(e);return{ra:r(i,o),dec:a(i,o),dist:c}}function m(n,t){return new Date(n.valueOf()+t*I/24)}var w=Math.PI,P=Math.sin,p=Math.cos,D=Math.tan,y=Math.asin,b=Math.atan2,E=Math.acos,H=w/180,I=864e5,S=2440588,T=2451545,k=23.4397*H,z={};z.getPosition=function(n,t,r){var a=H*-r,c=H*t,s=e(n),f=d(s),l=o(s,a)-f.ra;return{azimuth:u(l,c,f.dec),altitude:i(l,c,f.dec)}};var O=z.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];z.addTime=function(n,t,e){O.push([n,t,e])};var q=9e-4;z.getTimes=function(n,r,u){var i,o,d,h,g,m=H*-u,w=H*r,P=e(n),p=f(P,m),D=l(0,m,p),y=c(D),b=s(y),E=a(b,0),I=M(D,y,b),S={solarNoon:t(I),nadir:t(I-.5)};for(i=0,o=O.length;o>i;i+=1)d=O[i],h=v(d[0]*H,m,w,E,p,y,b),g=I-(h-I),S[d[1]]=t(g),S[d[2]]=t(h);return S},z.getMoonPosition=function(n,t,r){var a=H*-r,c=H*t,s=e(n),d=g(s),f=o(s,a)-d.ra,l=i(f,c,d.dec);return l+=.017*H/D(l+10.26*H/(l+5.1*H)),{azimuth:u(f,c,d.dec),altitude:l,distance:d.dist}},z.getMoonIllumination=function(n){var t=e(n),r=d(t),a=g(t),u=149598e3,i=E(P(r.dec)*P(a.dec)+p(r.dec)*p(a.dec)*p(r.ra-a.ra)),o=b(u*P(i),a.dist-u*p(i)),c=b(p(r.dec)*P(r.ra-a.ra),P(r.dec)*p(a.dec)-p(r.dec)*P(a.dec)*p(r.ra-a.ra));return{fraction:(1+p(o))/2,phase:.5+.5*o*(0>c?-1:1)/Math.PI,angle:c}},z.getMoonTimes=function(n,t,e){var r=new Date(n);r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0);for(var a,u,i,o,c,s,d,f,l,M,h,v,g,w=.133*H,P=z.getMoonPosition(r,t,e).altitude-w,p=1;24>=p&&(a=z.getMoonPosition(m(r,p),t,e).altitude-w,u=z.getMoonPosition(m(r,p+1),t,e).altitude-w,c=(P+u)/2-a,s=(u-P)/2,d=-s/(2*c),f=(c*d+s)*d+a,l=s*s-4*c*a,M=0,l>=0&&(g=Math.sqrt(l)/(2*Math.abs(c)),h=d-g,v=d+g,Math.abs(h)<=1&&M++,Math.abs(v)<=1&&M++,-1>h&&(h=v)),1===M?0>P?i=p+h:o=p+h:2===M&&(i=p+(0>f?v:h),o=p+(0>f?h:v)),!i||!o);p+=2)P=u;var D={};return i&&(D.rise=m(r,i)),o&&(D.set=m(r,o)),i||o||(D[f>0?"alwaysUp":"alwaysDown"]=!0),D},"function"==typeof define&&define.amd?define(z):"undefined"!=typeof module?module.exports=z:window.SunCalc=z}();
/*
 * JavaScript MD5 1.0.1
 * https://github.com/blueimp/JavaScript-MD5
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 *
 * Based on
 * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message
 * Digest Algorithm, as defined in RFC 1321.
 * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for more info.
 */
!function(a){"use strict";function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}"function"==typeof define&&define.amd?define(function(){return t}):a.md5=t}(this);
// Array Remove - By John Resig (MIT Licensed)
Array.prototype.remove=function(t,h){var e=this.slice((h||t)+1||this.length);return this.length=0>t?this.length+t:t,this.push.apply(this,e)};
