<!--
 * OpenSprinkler App
 * Copyright (C) 2015 - present, Samer Albahra. All rights reserved.
 *
 * This file is part of the OpenSprinkler project <http://opensprinkler.com>.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html>
  <head>
      <title>OpenSprinkler</title>
      <meta id="viewport" name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
      <meta content="yes" name="apple-mobile-web-app-capable">
      <meta name="apple-mobile-web-app-title" content="OpenSprinkler">
      <meta name="apple-mobile-web-app-status-bar-style" content="black">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <link rel="shortcut icon" href="img/favicon.ico">
      <link rel="stylesheet" href="../www/css/jqm.css">
      <link rel="stylesheet" href="../www/css/main.css">
	  <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
	  <style>
	  	[data-url="/test/tests.html"] {
			display: block !important;
			overflow: visible;
			overflow-x: hidden;
			z-index: 99999;
		}
	  </style>
	  <script src="vendor-js/jquery.js"></script>
	  <script src="vendor-js/libs.js"></script>
	  <script src="vendor-js/apexcharts.min.js"></script>
	  <script src="vendor-js/jqm.js"></script>
	  <script src="vendor-js/dataTables-2.1.8.min.js"></script>

      <script src="../node_modules/mocha/mocha.js"></script>
      <script src="../node_modules/chai/chai.js"></script>
      <script src="../node_modules/blanket/dist/mocha/blanket_mocha.min.js"></script>
      <script>
        $(document).one("mobileinit",function(){
          $.ajax({
            url: "../www/index.html",
            crossDomain: true,
            cache: true,
            type: "GET"
          }).done(function(index){
            var body = index.match(/<body>([.\s\S]*)<\/body>/)[1];
            $("body").prepend(body);
            mocha.run();
          });
        });

        mocha.setup('bdd');

        if (window.PHANTOMJS) {
          blanket.options("reporter", "../node_modules/grunt-blanket-mocha/support/grunt-reporter.js");
        }
      </script>
      <script type="text/javascript" src="../node_modules/grunt-blanket-mocha/support/mocha-blanket.js"></script>

	  <!-- Load OSApp modules -->
	  <script src="js/modules/analog.js"></script>
	  <script src="js/modules/card-list.js"></script>
	  <script src="js/modules/cards.js"></script>
	  <script src="js/modules/dates.js"></script>
	  <script src="js/modules/errors.js"></script>
	  <script src="js/modules/firmware.js"></script>
	  <script src="js/modules/groups.js"></script>
	  <script src="js/modules/import-export.js"></script>
	  <script src="js/modules/language.js"></script>
	  <script src="js/modules/logs.js"></script>
	  <script src="js/modules/network.js"></script>
	  <script src="js/modules/notifications.js"></script>
	  <script src="js/modules/options.js"></script>
	  <script src="js/modules/programs.js"></script>
	  <script src="js/modules/sites.js"></script>
	  <script src="js/modules/station-attributes.js"></script>
	  <script src="js/modules/station-queue.js"></script>
	  <script src="js/modules/stations.js"></script>
	  <script src="js/modules/status.js"></script>
	  <script src="js/modules/storage.js"></script>
	  <script src="js/modules/supported.js"></script>
	  <script src="js/modules/system-diagnostics.js"></script>
	  <script src="js/modules/ui-dom.js"></script>
	  <script src="js/modules/utils.js"></script>
	  <script src="js/modules/weather.js"></script>

	  <!-- Load main last -->
	  <script src="js/main.js"></script>
      <script src="tests.js"></script>
    </head>

    <body>
        <div id="mocha"></div>
    </body>
</html>
